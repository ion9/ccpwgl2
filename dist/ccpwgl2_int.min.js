!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./index.js")}({"../node_modules/core-js/internals/a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"../node_modules/core-js/internals/a-possible-prototype.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"../node_modules/core-js/internals/add-to-unscopables.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js"),i=r("../node_modules/core-js/internals/object-create.js"),s=r("../node_modules/core-js/internals/hide.js"),a=n("unscopables"),o=Array.prototype;null==o[a]&&s(o,a,i(null)),e.exports=function(e){o[a][e]=!0}},"../node_modules/core-js/internals/advance-string-index.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/string-multibyte.js").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},"../node_modules/core-js/internals/an-instance.js":function(e,t){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},"../node_modules/core-js/internals/an-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},"../node_modules/core-js/internals/array-buffer-view-core.js":function(e,t,r){"use strict";var n,i=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/has.js"),u=r("../node_modules/core-js/internals/classof.js"),c=r("../node_modules/core-js/internals/hide.js"),l=r("../node_modules/core-js/internals/redefine.js"),d=r("../node_modules/core-js/internals/object-define-property.js").f,h=r("../node_modules/core-js/internals/object-get-prototype-of.js"),f=r("../node_modules/core-js/internals/object-set-prototype-of.js"),m=r("../node_modules/core-js/internals/well-known-symbol.js"),v=r("../node_modules/core-js/internals/uid.js"),p=s.DataView,E=p&&p.prototype,_=s.Int8Array,g=_&&_.prototype,S=s.Uint8ClampedArray,T=S&&S.prototype,b=_&&h(_),R=g&&h(g),j=Object.prototype,y=j.isPrototypeOf,A=m("toStringTag"),w=v("TYPED_ARRAY_TAG"),P=!(!s.ArrayBuffer||!p),O=P&&!!f,C=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L=function(e){return a(e)&&o(D,u(e))};for(n in D)s[n]||(O=!1);if((!O||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},O))for(n in D)s[n]&&f(s[n],b);if((!O||!R||R===j)&&(R=b.prototype,O))for(n in D)s[n]&&f(s[n].prototype,R);if(O&&h(T)!==R&&f(T,R),i&&!o(R,A))for(n in C=!0,d(R,A,{get:function(){return a(this)?this[w]:void 0}}),D)s[n]&&c(s[n],w,n);P&&f&&h(E)!==j&&f(E,j),e.exports={NATIVE_ARRAY_BUFFER:P,NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:C&&w,aTypedArray:function(e){if(L(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(y.call(b,e))return e}else for(var t in D)if(o(D,n)){var r=s[t];if(r&&(e===r||y.call(r,e)))return e}throw TypeError("Target is not a typed array constructor")},exportProto:function(e,t,r){if(i){if(r)for(var n in D){var a=s[n];a&&o(a.prototype,e)&&delete a.prototype[e]}R[e]&&!r||l(R,e,r?t:O&&g[e]||t)}},exportStatic:function(e,t,r){var n,a;if(i){if(f){if(r)for(n in D)(a=s[n])&&o(a,e)&&delete a[e];if(b[e]&&!r)return;try{return l(b,e,r?t:O&&_[e]||t)}catch(e){}}for(n in D)!(a=s[n])||a[e]&&!r||l(a,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||o(D,t)},isTypedArray:L,TypedArray:b,TypedArrayPrototype:R}},"../node_modules/core-js/internals/array-buffer.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/array-buffer-view-core.js").NATIVE_ARRAY_BUFFER,a=r("../node_modules/core-js/internals/hide.js"),o=r("../node_modules/core-js/internals/redefine-all.js"),u=r("../node_modules/core-js/internals/fails.js"),c=r("../node_modules/core-js/internals/an-instance.js"),l=r("../node_modules/core-js/internals/to-integer.js"),d=r("../node_modules/core-js/internals/to-length.js"),h=r("../node_modules/core-js/internals/to-index.js"),f=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,m=r("../node_modules/core-js/internals/object-define-property.js").f,v=r("../node_modules/core-js/internals/array-fill.js"),p=r("../node_modules/core-js/internals/set-to-string-tag.js"),E=r("../node_modules/core-js/internals/internal-state.js"),_=E.get,g=E.set,S=n.ArrayBuffer,T=S,b=n.DataView,R=n.Math,j=n.RangeError,y=R.abs,A=R.pow,w=R.floor,P=R.log,O=R.LN2,C=function(e,t,r){var n,i,s,a=new Array(r),o=8*r-t-1,u=(1<<o)-1,c=u>>1,l=23===t?A(2,-24)-A(2,-77):0,d=e<0||0===e&&1/e<0?1:0,h=0;for((e=y(e))!=e||e===1/0?(i=e!=e?1:0,n=u):(n=w(P(e)/O),e*(s=A(2,-n))<1&&(n--,s*=2),(e+=n+c>=1?l/s:l*A(2,1-c))*s>=2&&(n++,s/=2),n+c>=u?(i=0,n=u):n+c>=1?(i=(e*s-1)*A(2,t),n+=c):(i=e*A(2,c-1)*A(2,t),n=0));t>=8;a[h++]=255&i,i/=256,t-=8);for(n=n<<t|i,o+=t;o>0;a[h++]=255&n,n/=256,o-=8);return a[--h]|=128*d,a},D=function(e,t){var r,n=e.length,i=8*n-t-1,s=(1<<i)-1,a=s>>1,o=i-7,u=n-1,c=e[u--],l=127&c;for(c>>=7;o>0;l=256*l+e[u],u--,o-=8);for(r=l&(1<<-o)-1,l>>=-o,o+=t;o>0;r=256*r+e[u],u--,o-=8);if(0===l)l=1-a;else{if(l===s)return r?NaN:c?-1/0:1/0;r+=A(2,t),l-=a}return(c?-1:1)*r*A(2,l-t)},L=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},x=function(e){return[255&e]},I=function(e){return[255&e,e>>8&255]},M=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},G=function(e){return C(e,23,4)},F=function(e){return C(e,52,8)},N=function(e,t){m(e.prototype,t,{get:function(){return _(this)[t]}})},B=function(e,t,r,n){var i=h(+r),s=_(e);if(i+t>s.byteLength)throw j("Wrong index");var a=_(s.buffer).bytes,o=i+s.byteOffset,u=a.slice(o,o+t);return n?u:u.reverse()},U=function(e,t,r,n,i,s){var a=h(+r),o=_(e);if(a+t>o.byteLength)throw j("Wrong index");for(var u=_(o.buffer).bytes,c=a+o.byteOffset,l=n(+i),d=0;d<t;d++)u[c+d]=l[s?d:t-d-1]};if(s){if(!u(function(){S(1)})||!u(function(){new S(-1)})||u(function(){return new S,new S(1.5),new S(NaN),"ArrayBuffer"!=S.name})){for(var V,k=(T=function(e){return c(this,T),new S(h(e))}).prototype=S.prototype,H=f(S),q=0;H.length>q;)(V=H[q++])in T||a(T,V,S[V]);k.constructor=T}var z=new b(new T(2)),W=b.prototype.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||o(b.prototype,{setInt8:function(e,t){W.call(this,e,t<<24>>24)},setUint8:function(e,t){W.call(this,e,t<<24>>24)}},{unsafe:!0})}else T=function(e){c(this,T,"ArrayBuffer");var t=h(e);g(this,{bytes:v.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},b=function(e,t,r){c(this,b,"DataView"),c(e,T,"DataView");var n=_(e).byteLength,s=l(t);if(s<0||s>n)throw j("Wrong offset");if(s+(r=void 0===r?n-s:d(r))>n)throw j("Wrong length");g(this,{buffer:e,byteLength:r,byteOffset:s}),i||(this.buffer=e,this.byteLength=r,this.byteOffset=s)},i&&(N(T,"byteLength"),N(b,"buffer"),N(b,"byteLength"),N(b,"byteOffset")),o(b.prototype,{getInt8:function(e){return B(this,1,e)[0]<<24>>24},getUint8:function(e){return B(this,1,e)[0]},getInt16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return L(B(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return L(B(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return D(B(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return D(B(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){U(this,1,e,x,t)},setUint8:function(e,t){U(this,1,e,x,t)},setInt16:function(e,t){U(this,2,e,I,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){U(this,2,e,I,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){U(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){U(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){U(this,4,e,G,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){U(this,8,e,F,t,arguments.length>2?arguments[2]:void 0)}});p(T,"ArrayBuffer"),p(b,"DataView"),t.ArrayBuffer=T,t.DataView=b},"../node_modules/core-js/internals/array-fill.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-object.js"),i=r("../node_modules/core-js/internals/to-absolute-index.js"),s=r("../node_modules/core-js/internals/to-length.js");e.exports=function(e){for(var t=n(this),r=s(t.length),a=arguments.length,o=i(a>1?arguments[1]:void 0,r),u=a>2?arguments[2]:void 0,c=void 0===u?r:i(u,r);c>o;)t[o++]=e;return t}},"../node_modules/core-js/internals/array-for-each.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-iteration.js").forEach,i=r("../node_modules/core-js/internals/sloppy-array-method.js");e.exports=i("forEach")?function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},"../node_modules/core-js/internals/array-from.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/bind-context.js"),i=r("../node_modules/core-js/internals/to-object.js"),s=r("../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),a=r("../node_modules/core-js/internals/is-array-iterator-method.js"),o=r("../node_modules/core-js/internals/to-length.js"),u=r("../node_modules/core-js/internals/create-property.js"),c=r("../node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t,r,l,d,h=i(e),f="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,p=void 0!==v,E=0,_=c(h);if(p&&(v=n(v,m>2?arguments[2]:void 0,2)),null==_||f==Array&&a(_))for(r=new f(t=o(h.length));t>E;E++)u(r,E,p?v(h[E],E):h[E]);else for(d=_.call(h),r=new f;!(l=d.next()).done;E++)u(r,E,p?s(d,v,[l.value,E],!0):l.value);return r.length=E,r}},"../node_modules/core-js/internals/array-includes.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-indexed-object.js"),i=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/to-absolute-index.js"),a=function(e){return function(t,r,a){var o,u=n(t),c=i(u.length),l=s(a,c);if(e&&r!=r){for(;c>l;)if((o=u[l++])!=o)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"../node_modules/core-js/internals/array-iteration.js":function(e,t,r){var n=r("../node_modules/core-js/internals/bind-context.js"),i=r("../node_modules/core-js/internals/indexed-object.js"),s=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/array-species-create.js"),u=[].push,c=function(e){var t=1==e,r=2==e,c=3==e,l=4==e,d=6==e,h=5==e||d;return function(f,m,v,p){for(var E,_,g=s(f),S=i(g),T=n(m,v,3),b=a(S.length),R=0,j=p||o,y=t?j(f,b):r?j(f,0):void 0;b>R;R++)if((h||R in S)&&(_=T(E=S[R],R,g),e))if(t)y[R]=_;else if(_)switch(e){case 3:return!0;case 5:return E;case 6:return R;case 2:u.call(y,E)}else if(l)return!1;return d?-1:c||l?l:y}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},"../node_modules/core-js/internals/array-species-create.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js"),i=r("../node_modules/core-js/internals/is-array.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e,t){var r;return i(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!i(r.prototype)?n(r)&&null===(r=r[s])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},"../node_modules/core-js/internals/bind-context.js":function(e,t,r){var n=r("../node_modules/core-js/internals/a-function.js");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},"../node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js");e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var s=e.return;throw void 0!==s&&n(s.call(e)),t}}},"../node_modules/core-js/internals/check-correctness-of-iteration.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator"),i=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){i=!0}};a[n]=function(){return this},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var s={};s[n]=function(){return{next:function(){return{done:r=!0}}}},e(s)}catch(e){}return r}},"../node_modules/core-js/internals/classof-raw.js":function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"../node_modules/core-js/internals/classof.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),s="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:s?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},"../node_modules/core-js/internals/collection-strong.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/object-define-property.js").f,i=r("../node_modules/core-js/internals/object-create.js"),s=r("../node_modules/core-js/internals/redefine-all.js"),a=r("../node_modules/core-js/internals/bind-context.js"),o=r("../node_modules/core-js/internals/an-instance.js"),u=r("../node_modules/core-js/internals/iterate.js"),c=r("../node_modules/core-js/internals/define-iterator.js"),l=r("../node_modules/core-js/internals/set-species.js"),d=r("../node_modules/core-js/internals/descriptors.js"),h=r("../node_modules/core-js/internals/internal-metadata.js").fastKey,f=r("../node_modules/core-js/internals/internal-state.js"),m=f.set,v=f.getterFor;e.exports={getConstructor:function(e,t,r,c){var l=e(function(e,n){o(e,l,t),m(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),null!=n&&u(n,e[c],e,r)}),f=v(t),p=function(e,t,r){var n,i,s=f(e),a=E(e,t);return a?a.value=r:(s.last=a={index:i=h(t,!0),key:t,value:r,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=a),n&&(n.next=a),d?s.size++:e.size++,"F"!==i&&(s.index[i]=a)),e},E=function(e,t){var r,n=f(e),i=h(t);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==t)return r};return s(l.prototype,{clear:function(){for(var e=f(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,d?e.size=0:this.size=0},delete:function(e){var t=f(this),r=E(this,e);if(r){var n=r.next,i=r.previous;delete t.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),t.first==r&&(t.first=n),t.last==r&&(t.last=i),d?t.size--:this.size--}return!!r},forEach:function(e){for(var t,r=f(this),n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!E(this,e)}}),s(l.prototype,r?{get:function(e){var t=E(this,e);return t&&t.value},set:function(e,t){return p(this,0===e?0:e,t)}}:{add:function(e){return p(this,e=0===e?0:e,e)}}),d&&n(l.prototype,"size",{get:function(){return f(this).size}}),l},setStrong:function(e,t,r){var n=t+" Iterator",i=v(t),s=v(n);c(e,t,function(e,t){m(this,{type:n,target:e,state:i(e),kind:t,last:void 0})},function(){for(var e=s(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})},r?"entries":"values",!r,!0),l(t)}}},"../node_modules/core-js/internals/collection-weak.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/redefine-all.js"),i=r("../node_modules/core-js/internals/internal-metadata.js").getWeakData,s=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/is-object.js"),o=r("../node_modules/core-js/internals/an-instance.js"),u=r("../node_modules/core-js/internals/iterate.js"),c=r("../node_modules/core-js/internals/array-iteration.js"),l=r("../node_modules/core-js/internals/has.js"),d=r("../node_modules/core-js/internals/internal-state.js"),h=d.set,f=d.getterFor,m=c.find,v=c.findIndex,p=0,E=function(e){return e.frozen||(e.frozen=new _)},_=function(){this.entries=[]},g=function(e,t){return m(e.entries,function(e){return e[0]===t})};_.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var r=g(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,function(t){return t[0]===e});return~t&&this.entries.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,c){var d=e(function(e,n){o(e,d,t),h(e,{type:t,id:p++,frozen:void 0}),null!=n&&u(n,e[c],e,r)}),m=f(t),v=function(e,t,r){var n=m(e),a=i(s(t),!0);return!0===a?E(n).set(t,r):a[n.id]=r,e};return n(d.prototype,{delete:function(e){var t=m(this);if(!a(e))return!1;var r=i(e);return!0===r?E(t).delete(e):r&&l(r,t.id)&&delete r[t.id]},has:function(e){var t=m(this);if(!a(e))return!1;var r=i(e);return!0===r?E(t).has(e):r&&l(r,t.id)}}),n(d.prototype,r?{get:function(e){var t=m(this);if(a(e)){var r=i(e);return!0===r?E(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),d}}},"../node_modules/core-js/internals/collection.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/is-forced.js"),a=r("../node_modules/core-js/internals/redefine.js"),o=r("../node_modules/core-js/internals/internal-metadata.js"),u=r("../node_modules/core-js/internals/iterate.js"),c=r("../node_modules/core-js/internals/an-instance.js"),l=r("../node_modules/core-js/internals/is-object.js"),d=r("../node_modules/core-js/internals/fails.js"),h=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),f=r("../node_modules/core-js/internals/set-to-string-tag.js"),m=r("../node_modules/core-js/internals/inherit-if-required.js");e.exports=function(e,t,r,v,p){var E=i[e],_=E&&E.prototype,g=E,S=v?"set":"add",T={},b=function(e){var t=_[e];a(_,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(p&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return p&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(p&&!l(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(s(e,"function"!=typeof E||!(p||_.forEach&&!d(function(){(new E).entries().next()}))))g=r.getConstructor(t,e,v,S),o.REQUIRED=!0;else if(s(e,!0)){var R=new g,j=R[S](p?{}:-0,1)!=R,y=d(function(){R.has(1)}),A=h(function(e){new E(e)}),w=!p&&d(function(){for(var e=new E,t=5;t--;)e[S](t,t);return!e.has(-0)});A||((g=t(function(t,r){c(t,g,e);var n=m(new E,t,g);return null!=r&&u(r,n[S],n,v),n})).prototype=_,_.constructor=g),(y||w)&&(b("delete"),b("has"),v&&b("get")),(w||j)&&b(S),p&&_.clear&&delete _.clear}return T[e]=g,n({global:!0,forced:g!=E},T),f(g,e),p||r.setStrong(g,e,v),g}},"../node_modules/core-js/internals/copy-constructor-properties.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),i=r("../node_modules/core-js/internals/own-keys.js"),s=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),a=r("../node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var r=i(t),o=a.f,u=s.f,c=0;c<r.length;c++){var l=r[c];n(e,l)||o(e,l,u(t,l))}}},"../node_modules/core-js/internals/correct-prototype-getter.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},"../node_modules/core-js/internals/create-iterator-constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/iterators-core.js").IteratorPrototype,i=r("../node_modules/core-js/internals/object-create.js"),s=r("../node_modules/core-js/internals/create-property-descriptor.js"),a=r("../node_modules/core-js/internals/set-to-string-tag.js"),o=r("../node_modules/core-js/internals/iterators.js"),u=function(){return this};e.exports=function(e,t,r){var c=t+" Iterator";return e.prototype=i(n,{next:s(1,r)}),a(e,c,!1,!0),o[c]=u,e}},"../node_modules/core-js/internals/create-property-descriptor.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"../node_modules/core-js/internals/create-property.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-primitive.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),s=r("../node_modules/core-js/internals/create-property-descriptor.js");e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,s(0,r)):e[a]=r}},"../node_modules/core-js/internals/define-iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/create-iterator-constructor.js"),s=r("../node_modules/core-js/internals/object-get-prototype-of.js"),a=r("../node_modules/core-js/internals/object-set-prototype-of.js"),o=r("../node_modules/core-js/internals/set-to-string-tag.js"),u=r("../node_modules/core-js/internals/hide.js"),c=r("../node_modules/core-js/internals/redefine.js"),l=r("../node_modules/core-js/internals/well-known-symbol.js"),d=r("../node_modules/core-js/internals/is-pure.js"),h=r("../node_modules/core-js/internals/iterators.js"),f=r("../node_modules/core-js/internals/iterators-core.js"),m=f.IteratorPrototype,v=f.BUGGY_SAFARI_ITERATORS,p=l("iterator"),E=function(){return this};e.exports=function(e,t,r,l,f,_,g){i(r,t,l);var S,T,b,R=function(e){if(e===f&&P)return P;if(!v&&e in A)return A[e];switch(e){case"keys":case"values":case"entries":return function(){return new r(this,e)}}return function(){return new r(this)}},j=t+" Iterator",y=!1,A=e.prototype,w=A[p]||A["@@iterator"]||f&&A[f],P=!v&&w||R(f),O="Array"==t&&A.entries||w;if(O&&(S=s(O.call(new e)),m!==Object.prototype&&S.next&&(d||s(S)===m||(a?a(S,m):"function"!=typeof S[p]&&u(S,p,E)),o(S,j,!0,!0),d&&(h[j]=E))),"values"==f&&w&&"values"!==w.name&&(y=!0,P=function(){return w.call(this)}),d&&!g||A[p]===P||u(A,p,P),h[t]=P,f)if(T={values:R("values"),keys:_?P:R("keys"),entries:R("entries")},g)for(b in T)!v&&!y&&b in A||c(A,b,T[b]);else n({target:t,proto:!0,forced:v||y},T);return T}},"../node_modules/core-js/internals/define-well-known-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/path.js"),i=r("../node_modules/core-js/internals/has.js"),s=r("../node_modules/core-js/internals/wrapped-well-known-symbol.js"),a=r("../node_modules/core-js/internals/object-define-property.js").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});i(t,e)||a(t,e,{value:s.f(e)})}},"../node_modules/core-js/internals/descriptors.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"../node_modules/core-js/internals/document-create-element.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/is-object.js"),s=n.document,a=i(s)&&i(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},"../node_modules/core-js/internals/dom-iterables.js":function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"../node_modules/core-js/internals/enum-bug-keys.js":function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"../node_modules/core-js/internals/export.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,s=r("../node_modules/core-js/internals/hide.js"),a=r("../node_modules/core-js/internals/redefine.js"),o=r("../node_modules/core-js/internals/set-global.js"),u=r("../node_modules/core-js/internals/copy-constructor-properties.js"),c=r("../node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var r,l,d,h,f,m=e.target,v=e.global,p=e.stat;if(r=v?n:p?n[m]||o(m,{}):(n[m]||{}).prototype)for(l in t){if(h=t[l],d=e.noTargetGet?(f=i(r,l))&&f.value:r[l],!c(v?l:m+(p?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;u(h,d)}(e.sham||d&&d.sham)&&s(h,"sham",!0),a(r,l,h,e)}}},"../node_modules/core-js/internals/fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/hide.js"),i=r("../node_modules/core-js/internals/redefine.js"),s=r("../node_modules/core-js/internals/fails.js"),a=r("../node_modules/core-js/internals/well-known-symbol.js"),o=r("../node_modules/core-js/internals/regexp-exec.js"),u=a("species"),c=!s(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),l=!s(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]});e.exports=function(e,t,r,d){var h=a(e),f=!s(function(){var t={};return t[h]=function(){return 7},7!=""[e](t)}),m=f&&!s(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[u]=function(){return r}),r[h](""),!t});if(!f||!m||"replace"===e&&!c||"split"===e&&!l){var v=/./[h],p=r(h,""[e],function(e,t,r,n,i){return t.exec===o?f&&!i?{done:!0,value:v.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),E=p[0],_=p[1];i(String.prototype,e,E),i(RegExp.prototype,h,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)}),d&&n(RegExp.prototype[h],"sham",!0)}}},"../node_modules/core-js/internals/flatten-into-array.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/is-array.js"),i=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/bind-context.js"),a=function(e,t,r,o,u,c,l,d){for(var h,f=u,m=0,v=!!l&&s(l,d,3);m<o;){if(m in r){if(h=v?v(r[m],m,t):r[m],c>0&&n(h))f=a(e,t,h,i(h.length),f,c-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=h}f++}m++}return f};e.exports=a},"../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/is-pure.js"),i=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/fails.js");e.exports=n||!s(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete i[e]})},"../node_modules/core-js/internals/forced-string-trim-method.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/whitespaces.js");e.exports=function(e){return n(function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e})}},"../node_modules/core-js/internals/freezing.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},"../node_modules/core-js/internals/function-to-string.js":function(e,t,r){var n=r("../node_modules/core-js/internals/shared.js");e.exports=n("native-function-to-string",Function.toString)},"../node_modules/core-js/internals/get-built-in.js":function(e,t,r){var n=r("../node_modules/core-js/internals/path.js"),i=r("../node_modules/core-js/internals/global.js"),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e])||s(i[e]):n[e]&&n[e][t]||i[e]&&i[e][t]}},"../node_modules/core-js/internals/get-iterator-method.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof.js"),i=r("../node_modules/core-js/internals/iterators.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator");e.exports=function(e){if(null!=e)return e[s]||e["@@iterator"]||i[n(e)]}},"../node_modules/core-js/internals/get-iterator.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/get-iterator-method.js");e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},"../node_modules/core-js/internals/global.js":function(e,t,r){(function(t){var r="object",n=function(e){return e&&e.Math==Math&&e};e.exports=n(typeof globalThis==r&&globalThis)||n(typeof window==r&&window)||n(typeof self==r&&self)||n(typeof t==r&&t)||Function("return this")()}).call(this,r("../node_modules/webpack/buildin/global.js"))},"../node_modules/core-js/internals/has.js":function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"../node_modules/core-js/internals/hidden-keys.js":function(e,t){e.exports={}},"../node_modules/core-js/internals/hide.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),s=r("../node_modules/core-js/internals/create-property-descriptor.js");e.exports=n?function(e,t,r){return i.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},"../node_modules/core-js/internals/host-report-errors.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js");e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},"../node_modules/core-js/internals/html.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js");e.exports=n("document","documentElement")},"../node_modules/core-js/internals/ie8-dom-define.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/document-create-element.js");e.exports=!n&&!i(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},"../node_modules/core-js/internals/indexed-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/classof-raw.js"),s="".split;e.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==i(e)?s.call(e,""):Object(e)}:Object},"../node_modules/core-js/internals/inherit-if-required.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js"),i=r("../node_modules/core-js/internals/object-set-prototype-of.js");e.exports=function(e,t,r){var s,a;return i&&"function"==typeof(s=t.constructor)&&s!==r&&n(a=s.prototype)&&a!==r.prototype&&i(e,a),e}},"../node_modules/core-js/internals/internal-metadata.js":function(e,t,r){var n=r("../node_modules/core-js/internals/hidden-keys.js"),i=r("../node_modules/core-js/internals/is-object.js"),s=r("../node_modules/core-js/internals/has.js"),a=r("../node_modules/core-js/internals/object-define-property.js").f,o=r("../node_modules/core-js/internals/uid.js"),u=r("../node_modules/core-js/internals/freezing.js"),c=o("meta"),l=0,d=Object.isExtensible||function(){return!0},h=function(e){a(e,c,{value:{objectID:"O"+ ++l,weakData:{}}})},f=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,c)){if(!d(e))return"F";if(!t)return"E";h(e)}return e[c].objectID},getWeakData:function(e,t){if(!s(e,c)){if(!d(e))return!0;if(!t)return!1;h(e)}return e[c].weakData},onFreeze:function(e){return u&&f.REQUIRED&&d(e)&&!s(e,c)&&h(e),e}};n[c]=!0},"../node_modules/core-js/internals/internal-state.js":function(e,t,r){var n,i,s,a=r("../node_modules/core-js/internals/native-weak-map.js"),o=r("../node_modules/core-js/internals/global.js"),u=r("../node_modules/core-js/internals/is-object.js"),c=r("../node_modules/core-js/internals/hide.js"),l=r("../node_modules/core-js/internals/has.js"),d=r("../node_modules/core-js/internals/shared-key.js"),h=r("../node_modules/core-js/internals/hidden-keys.js"),f=o.WeakMap;if(a){var m=new f,v=m.get,p=m.has,E=m.set;n=function(e,t){return E.call(m,e,t),t},i=function(e){return v.call(m,e)||{}},s=function(e){return p.call(m,e)}}else{var _=d("state");h[_]=!0,n=function(e,t){return c(e,_,t),t},i=function(e){return l(e,_)?e[_]:{}},s=function(e){return l(e,_)}}e.exports={set:n,get:i,has:s,enforce:function(e){return s(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},"../node_modules/core-js/internals/is-array-iterator-method.js":function(e,t,r){var n=r("../node_modules/core-js/internals/well-known-symbol.js"),i=r("../node_modules/core-js/internals/iterators.js"),s=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[s]===e)}},"../node_modules/core-js/internals/is-array.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"../node_modules/core-js/internals/is-forced.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=/#|\.prototype\./,s=function(e,t){var r=o[a(e)];return r==c||r!=u&&("function"==typeof t?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(i,".").toLowerCase()},o=s.data={},u=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},"../node_modules/core-js/internals/is-object.js":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"../node_modules/core-js/internals/is-pure.js":function(e,t){e.exports=!1},"../node_modules/core-js/internals/iterate.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/is-array-iterator-method.js"),s=r("../node_modules/core-js/internals/to-length.js"),a=r("../node_modules/core-js/internals/bind-context.js"),o=r("../node_modules/core-js/internals/get-iterator-method.js"),u=r("../node_modules/core-js/internals/call-with-safe-iteration-closing.js"),c=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,r,l,d){var h,f,m,v,p,E,_=a(t,r,l?2:1);if(d)h=e;else{if("function"!=typeof(f=o(e)))throw TypeError("Target is not iterable");if(i(f)){for(m=0,v=s(e.length);v>m;m++)if((p=l?_(n(E=e[m])[0],E[1]):_(e[m]))&&p instanceof c)return p;return new c(!1)}h=f.call(e)}for(;!(E=h.next()).done;)if((p=u(h,_,E.value,l))&&p instanceof c)return p;return new c(!1)}).stop=function(e){return new c(!0,e)}},"../node_modules/core-js/internals/iterators-core.js":function(e,t,r){"use strict";var n,i,s,a=r("../node_modules/core-js/internals/object-get-prototype-of.js"),o=r("../node_modules/core-js/internals/hide.js"),u=r("../node_modules/core-js/internals/has.js"),c=r("../node_modules/core-js/internals/well-known-symbol.js"),l=r("../node_modules/core-js/internals/is-pure.js"),d=c("iterator"),h=!1;[].keys&&("next"in(s=[].keys())?(i=a(a(s)))!==Object.prototype&&(n=i):h=!0),null==n&&(n={}),l||u(n,d)||o(n,d,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:h}},"../node_modules/core-js/internals/iterators.js":function(e,t){e.exports={}},"../node_modules/core-js/internals/microtask.js":function(e,t,r){var n,i,s,a,o,u,c,l=r("../node_modules/core-js/internals/global.js"),d=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f,h=r("../node_modules/core-js/internals/classof-raw.js"),f=r("../node_modules/core-js/internals/task.js").set,m=r("../node_modules/core-js/internals/user-agent.js"),v=l.MutationObserver||l.WebKitMutationObserver,p=l.process,E=l.Promise,_="process"==h(p),g=d(l,"queueMicrotask"),S=g&&g.value;S||(n=function(){var e,t;for(_&&(e=p.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():s=void 0,e}}s=void 0,e&&e.enter()},_?a=function(){p.nextTick(n)}:v&&!/(iphone|ipod|ipad).*applewebkit/i.test(m)?(o=!0,u=document.createTextNode(""),new v(n).observe(u,{characterData:!0}),a=function(){u.data=o=!o}):E&&E.resolve?(c=E.resolve(void 0),a=function(){c.then(n)}):a=function(){f.call(l,n)}),e.exports=S||function(e){var t={fn:e,next:void 0};s&&(s.next=t),i||(i=t,a()),s=t}},"../node_modules/core-js/internals/native-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},"../node_modules/core-js/internals/native-url.js":function(e,t,r){var n=r("../node_modules/core-js/internals/fails.js"),i=r("../node_modules/core-js/internals/well-known-symbol.js"),s=r("../node_modules/core-js/internals/is-pure.js"),a=i("iterator");e.exports=!n(function(){var e=new URL("b?e=1","http://a"),t=e.searchParams;return e.pathname="c%20d",s&&!e.toJSON||!t.sort||"http://a/c%20d?e=1"!==e.href||"1"!==t.get("e")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash})},"../node_modules/core-js/internals/native-weak-map.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/function-to-string.js"),s=n.WeakMap;e.exports="function"==typeof s&&/native code/.test(i.call(s))},"../node_modules/core-js/internals/new-promise-capability.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/a-function.js"),i=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new i(e)}},"../node_modules/core-js/internals/object-assign.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/object-keys.js"),a=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),o=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),u=r("../node_modules/core-js/internals/to-object.js"),c=r("../node_modules/core-js/internals/indexed-object.js"),l=Object.assign;e.exports=!l||i(function(){var e={},t={},r=Symbol();return e[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!=l({},e)[r]||"abcdefghijklmnopqrst"!=s(l({},t)).join("")})?function(e,t){for(var r=u(e),i=arguments.length,l=1,d=a.f,h=o.f;i>l;)for(var f,m=c(arguments[l++]),v=d?s(m).concat(d(m)):s(m),p=v.length,E=0;p>E;)f=v[E++],n&&!h.call(m,f)||(r[f]=m[f]);return r}:l},"../node_modules/core-js/internals/object-create.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/object-define-properties.js"),s=r("../node_modules/core-js/internals/enum-bug-keys.js"),a=r("../node_modules/core-js/internals/hidden-keys.js"),o=r("../node_modules/core-js/internals/html.js"),u=r("../node_modules/core-js/internals/document-create-element.js"),c=r("../node_modules/core-js/internals/shared-key.js")("IE_PROTO"),l=function(){},d=function(){var e,t=u("iframe"),r=s.length;for(t.style.display="none",o.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),d=e.F;r--;)delete d.prototype[s[r]];return d()};e.exports=Object.create||function(e,t){var r;return null!==e?(l.prototype=n(e),r=new l,l.prototype=null,r[c]=e):r=d(),void 0===t?r:i(r,t)},a[c]=!0},"../node_modules/core-js/internals/object-define-properties.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),s=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/object-keys.js");e.exports=n?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),o=n.length,u=0;o>u;)i.f(e,r=n[u++],t[r]);return e}},"../node_modules/core-js/internals/object-define-property.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/ie8-dom-define.js"),s=r("../node_modules/core-js/internals/an-object.js"),a=r("../node_modules/core-js/internals/to-primitive.js"),o=Object.defineProperty;t.f=n?o:function(e,t,r){if(s(e),t=a(t,!0),s(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},"../node_modules/core-js/internals/object-get-own-property-descriptor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/descriptors.js"),i=r("../node_modules/core-js/internals/object-property-is-enumerable.js"),s=r("../node_modules/core-js/internals/create-property-descriptor.js"),a=r("../node_modules/core-js/internals/to-indexed-object.js"),o=r("../node_modules/core-js/internals/to-primitive.js"),u=r("../node_modules/core-js/internals/has.js"),c=r("../node_modules/core-js/internals/ie8-dom-define.js"),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=a(e),t=o(t,!0),c)try{return l(e,t)}catch(e){}if(u(e,t))return s(!i.f.call(e,t),e[t])}},"../node_modules/core-js/internals/object-get-own-property-names.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-keys-internal.js"),i=r("../node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},"../node_modules/core-js/internals/object-get-own-property-symbols.js":function(e,t){t.f=Object.getOwnPropertySymbols},"../node_modules/core-js/internals/object-get-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),i=r("../node_modules/core-js/internals/to-object.js"),s=r("../node_modules/core-js/internals/shared-key.js"),a=r("../node_modules/core-js/internals/correct-prototype-getter.js"),o=s("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},"../node_modules/core-js/internals/object-keys-internal.js":function(e,t,r){var n=r("../node_modules/core-js/internals/has.js"),i=r("../node_modules/core-js/internals/to-indexed-object.js"),s=r("../node_modules/core-js/internals/array-includes.js").indexOf,a=r("../node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var r,o=i(e),u=0,c=[];for(r in o)!n(a,r)&&n(o,r)&&c.push(r);for(;t.length>u;)n(o,r=t[u++])&&(~s(c,r)||c.push(r));return c}},"../node_modules/core-js/internals/object-keys.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-keys-internal.js"),i=r("../node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return n(e,i)}},"../node_modules/core-js/internals/object-property-is-enumerable.js":function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,s=i&&!n.call({1:2},1);t.f=s?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},"../node_modules/core-js/internals/object-set-prototype-of.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/a-possible-prototype.js");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,s){return n(r),i(s),t?e.call(r,s):r.__proto__=s,r}}():void 0)},"../node_modules/core-js/internals/own-keys.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js"),i=r("../node_modules/core-js/internals/object-get-own-property-names.js"),s=r("../node_modules/core-js/internals/object-get-own-property-symbols.js"),a=r("../node_modules/core-js/internals/an-object.js");e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=s.f;return r?t.concat(r(e)):t}},"../node_modules/core-js/internals/parse-float.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/string-trim.js").trim,s=r("../node_modules/core-js/internals/whitespaces.js"),a=n.parseFloat,o=1/a(s+"-0")!=-1/0;e.exports=o?function(e){var t=i(String(e)),r=a(t);return 0===r&&"-"==t.charAt(0)?-0:r}:a},"../node_modules/core-js/internals/path.js":function(e,t,r){e.exports=r("../node_modules/core-js/internals/global.js")},"../node_modules/core-js/internals/perform.js":function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},"../node_modules/core-js/internals/promise-resolve.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/is-object.js"),s=r("../node_modules/core-js/internals/new-promise-capability.js");e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=s.f(e);return(0,r.resolve)(t),r.promise}},"../node_modules/core-js/internals/punycode-to-ascii.js":function(e,t,r){"use strict";var n=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,s="Overflow: input needs wider integers to process",a=Math.floor,o=String.fromCharCode,u=function(e){return e+22+75*(e<26)},c=function(e,t,r){var n=0;for(e=r?a(e/700):e>>1,e+=a(e/t);e>455;n+=36)e=a(e/35);return a(n+36*e/(e+38))},l=function(e){var t,r,n=[],i=(e=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),r--)}else t.push(i)}return t}(e)).length,l=128,d=0,h=72;for(t=0;t<e.length;t++)(r=e[t])<128&&n.push(o(r));var f=n.length,m=f;for(f&&n.push("-");m<i;){var v=2147483647;for(t=0;t<e.length;t++)(r=e[t])>=l&&r<v&&(v=r);var p=m+1;if(v-l>a((2147483647-d)/p))throw RangeError(s);for(d+=(v-l)*p,l=v,t=0;t<e.length;t++){if((r=e[t])<l&&++d>2147483647)throw RangeError(s);if(r==l){for(var E=d,_=36;;_+=36){var g=_<=h?1:_>=h+26?26:_-h;if(E<g)break;var S=E-g,T=36-g;n.push(o(u(g+S%T))),E=a(S/T)}n.push(o(u(E))),h=c(d,p,m==f),d=0,++m}}++d,++l}return n.join("")};e.exports=function(e){var t,r,s=[],a=e.toLowerCase().replace(i,".").split(".");for(t=0;t<a.length;t++)r=a[t],s.push(n.test(r)?"xn--"+l(r):r);return s.join(".")}},"../node_modules/core-js/internals/redefine-all.js":function(e,t,r){var n=r("../node_modules/core-js/internals/redefine.js");e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},"../node_modules/core-js/internals/redefine.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/shared.js"),s=r("../node_modules/core-js/internals/hide.js"),a=r("../node_modules/core-js/internals/has.js"),o=r("../node_modules/core-js/internals/set-global.js"),u=r("../node_modules/core-js/internals/function-to-string.js"),c=r("../node_modules/core-js/internals/internal-state.js"),l=c.get,d=c.enforce,h=String(u).split("toString");i("inspectSource",function(e){return u.call(e)}),(e.exports=function(e,t,r,i){var u=!!i&&!!i.unsafe,c=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof r&&("string"!=typeof t||a(r,"name")||s(r,"name",t),d(r).source=h.join("string"==typeof t?t:"")),e!==n?(u?!l&&e[t]&&(c=!0):delete e[t],c?e[t]=r:s(e,t,r)):c?e[t]=r:o(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&l(this).source||u.call(this)})},"../node_modules/core-js/internals/regexp-exec-abstract.js":function(e,t,r){var n=r("../node_modules/core-js/internals/classof-raw.js"),i=r("../node_modules/core-js/internals/regexp-exec.js");e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var s=r.call(e,t);if("object"!=typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"../node_modules/core-js/internals/regexp-exec.js":function(e,t,r){"use strict";var n,i,s=r("../node_modules/core-js/internals/regexp-flags.js"),a=RegExp.prototype.exec,o=String.prototype.replace,u=a,c=(n=/a/,i=/b*/g,a.call(n,"a"),a.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(c||l)&&(u=function(e){var t,r,n,i,u=this;return l&&(r=new RegExp("^"+u.source+"$(?!\\s)",s.call(u))),c&&(t=u.lastIndex),n=a.call(u,e),c&&n&&(u.lastIndex=u.global?n.index+n[0].length:t),l&&n&&n.length>1&&o.call(n[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n}),e.exports=u},"../node_modules/core-js/internals/regexp-flags.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/an-object.js");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"../node_modules/core-js/internals/require-object-coercible.js":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},"../node_modules/core-js/internals/set-global.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/hide.js");e.exports=function(e,t){try{i(n,e,t)}catch(r){n[e]=t}return t}},"../node_modules/core-js/internals/set-species.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/get-built-in.js"),i=r("../node_modules/core-js/internals/object-define-property.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js"),a=r("../node_modules/core-js/internals/descriptors.js"),o=s("species");e.exports=function(e){var t=n(e),r=i.f;a&&t&&!t[o]&&r(t,o,{configurable:!0,get:function(){return this}})}},"../node_modules/core-js/internals/set-to-string-tag.js":function(e,t,r){var n=r("../node_modules/core-js/internals/object-define-property.js").f,i=r("../node_modules/core-js/internals/has.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js")("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},"../node_modules/core-js/internals/shared-key.js":function(e,t,r){var n=r("../node_modules/core-js/internals/shared.js"),i=r("../node_modules/core-js/internals/uid.js"),s=n("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},"../node_modules/core-js/internals/shared.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/set-global.js"),s=r("../node_modules/core-js/internals/is-pure.js"),a=n["__core-js_shared__"]||i("__core-js_shared__",{});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.1.3",mode:s?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"../node_modules/core-js/internals/sloppy-array-method.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fails.js");e.exports=function(e,t){var r=[][e];return!r||!n(function(){r.call(null,t||function(){throw 1},1)})}},"../node_modules/core-js/internals/species-constructor.js":function(e,t,r){var n=r("../node_modules/core-js/internals/an-object.js"),i=r("../node_modules/core-js/internals/a-function.js"),s=r("../node_modules/core-js/internals/well-known-symbol.js")("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||null==(r=n(a)[s])?t:i(r)}},"../node_modules/core-js/internals/string-multibyte.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),i=r("../node_modules/core-js/internals/require-object-coercible.js"),s=function(e){return function(t,r){var s,a,o=String(i(t)),u=n(r),c=o.length;return u<0||u>=c?e?"":void 0:(s=o.charCodeAt(u))<55296||s>56319||u+1===c||(a=o.charCodeAt(u+1))<56320||a>57343?e?o.charAt(u):s:e?o.slice(u,u+2):a-56320+(s-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},"../node_modules/core-js/internals/string-pad.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-length.js"),i=r("../node_modules/core-js/internals/string-repeat.js"),s=r("../node_modules/core-js/internals/require-object-coercible.js"),a=Math.ceil,o=function(e){return function(t,r,o){var u,c,l=String(s(t)),d=l.length,h=void 0===o?" ":String(o),f=n(r);return f<=d||""==h?l:(u=f-d,(c=i.call(h,a(u/h.length))).length>u&&(c=c.slice(0,u)),e?l+c:c+l)}};e.exports={start:o(!1),end:o(!0)}},"../node_modules/core-js/internals/string-repeat.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-integer.js"),i=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports="".repeat||function(e){var t=String(i(this)),r="",s=n(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(r+=t);return r}},"../node_modules/core-js/internals/string-trim.js":function(e,t,r){var n=r("../node_modules/core-js/internals/require-object-coercible.js"),i="["+r("../node_modules/core-js/internals/whitespaces.js")+"]",s=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),o=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(a,"")),r}};e.exports={start:o(1),end:o(2),trim:o(3)}},"../node_modules/core-js/internals/task.js":function(e,t,r){var n,i,s,a=r("../node_modules/core-js/internals/global.js"),o=r("../node_modules/core-js/internals/fails.js"),u=r("../node_modules/core-js/internals/classof-raw.js"),c=r("../node_modules/core-js/internals/bind-context.js"),l=r("../node_modules/core-js/internals/html.js"),d=r("../node_modules/core-js/internals/document-create-element.js"),h=a.location,f=a.setImmediate,m=a.clearImmediate,v=a.process,p=a.MessageChannel,E=a.Dispatch,_=0,g={},S=function(e){if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},T=function(e){return function(){S(e)}},b=function(e){S(e.data)},R=function(e){a.postMessage(e+"",h.protocol+"//"+h.host)};f&&m||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return g[++_]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(_),_},m=function(e){delete g[e]},"process"==u(v)?n=function(e){v.nextTick(T(e))}:E&&E.now?n=function(e){E.now(T(e))}:p?(s=(i=new p).port2,i.port1.onmessage=b,n=c(s.postMessage,s,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||o(R)?n="onreadystatechange"in d("script")?function(e){l.appendChild(d("script")).onreadystatechange=function(){l.removeChild(this),S(e)}}:function(e){setTimeout(T(e),0)}:(n=R,a.addEventListener("message",b,!1))),e.exports={set:f,clear:m}},"../node_modules/core-js/internals/to-absolute-index.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),i=Math.max,s=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):s(r,t)}},"../node_modules/core-js/internals/to-index.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),i=r("../node_modules/core-js/internals/to-length.js");e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length or index");return r}},"../node_modules/core-js/internals/to-indexed-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/indexed-object.js"),i=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return n(i(e))}},"../node_modules/core-js/internals/to-integer.js":function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},"../node_modules/core-js/internals/to-length.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js"),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},"../node_modules/core-js/internals/to-object.js":function(e,t,r){var n=r("../node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(n(e))}},"../node_modules/core-js/internals/to-offset.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-integer.js");e.exports=function(e,t){var r=n(e);if(r<0||r%t)throw RangeError("Wrong offset");return r}},"../node_modules/core-js/internals/to-primitive.js":function(e,t,r){var n=r("../node_modules/core-js/internals/is-object.js");e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"../node_modules/core-js/internals/typed-array-constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/typed-arrays-constructors-requires-wrappers.js"),o=r("../node_modules/core-js/internals/array-buffer-view-core.js"),u=r("../node_modules/core-js/internals/array-buffer.js"),c=r("../node_modules/core-js/internals/an-instance.js"),l=r("../node_modules/core-js/internals/create-property-descriptor.js"),d=r("../node_modules/core-js/internals/hide.js"),h=r("../node_modules/core-js/internals/to-length.js"),f=r("../node_modules/core-js/internals/to-index.js"),m=r("../node_modules/core-js/internals/to-offset.js"),v=r("../node_modules/core-js/internals/to-primitive.js"),p=r("../node_modules/core-js/internals/has.js"),E=r("../node_modules/core-js/internals/classof.js"),_=r("../node_modules/core-js/internals/is-object.js"),g=r("../node_modules/core-js/internals/object-create.js"),S=r("../node_modules/core-js/internals/object-set-prototype-of.js"),T=r("../node_modules/core-js/internals/object-get-own-property-names.js").f,b=r("../node_modules/core-js/internals/typed-array-from.js"),R=r("../node_modules/core-js/internals/array-iteration.js").forEach,j=r("../node_modules/core-js/internals/set-species.js"),y=r("../node_modules/core-js/internals/object-define-property.js"),A=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js"),w=r("../node_modules/core-js/internals/internal-state.js"),P=w.get,O=w.set,C=y.f,D=A.f,L=Math.round,x=i.RangeError,I=u.ArrayBuffer,M=u.DataView,G=o.NATIVE_ARRAY_BUFFER_VIEWS,F=o.TYPED_ARRAY_TAG,N=o.TypedArray,B=o.TypedArrayPrototype,U=o.aTypedArrayConstructor,V=o.isTypedArray,k=function(e,t){for(var r=0,n=t.length,i=new(U(e))(n);n>r;)i[r]=t[r++];return i},H=function(e,t){C(e,t,{get:function(){return P(this)[t]}})},q=function(e){var t;return e instanceof I||"ArrayBuffer"==(t=E(e))||"SharedArrayBuffer"==t},z=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},W=function(e,t){return z(e,t=v(t,!0))?l(2,e[t]):D(e,t)},Y=function(e,t,r){return!(z(e,t=v(t,!0))&&_(r)&&p(r,"value"))||p(r,"get")||p(r,"set")||r.configurable||p(r,"writable")&&!r.writable||p(r,"enumerable")&&!r.enumerable?C(e,t,r):(e[t]=r.value,e)};s?(G||(A.f=W,y.f=Y,H(B,"buffer"),H(B,"byteOffset"),H(B,"byteLength"),H(B,"length")),n({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:W,defineProperty:Y}),e.exports=function(e,t,r,s){var o=e+(s?"Clamped":"")+"Array",u="get"+e,l="set"+e,v=i[o],p=v,E=p&&p.prototype,y={},A=function(e,r){C(e,r,{get:function(){return function(e,r){var n=P(e);return n.view[u](r*t+n.byteOffset,!0)}(this,r)},set:function(e){return function(e,r,n){var i=P(e);s&&(n=(n=L(n))<0?0:n>255?255:255&n),i.view[l](r*t+i.byteOffset,n,!0)}(this,r,e)},enumerable:!0})};G?a&&(p=r(function(e,r,n,i){return c(e,p,o),_(r)?q(r)?void 0!==i?new v(r,m(n,t),i):void 0!==n?new v(r,m(n,t)):new v(r):V(r)?k(p,r):b.call(p,r):new v(f(r))}),S&&S(p,N),R(T(v),function(e){e in p||d(p,e,v[e])}),p.prototype=E):(p=r(function(e,r,n,i){c(e,p,o);var s,a,u,l=0,d=0;if(_(r)){if(!q(r))return V(r)?k(p,r):b.call(p,r);s=r,d=m(n,t);var v=r.byteLength;if(void 0===i){if(v%t)throw x("Wrong length");if((a=v-d)<0)throw x("Wrong length")}else if((a=h(i)*t)+d>v)throw x("Wrong length");u=a/t}else u=f(r),s=new I(a=u*t);for(O(e,{buffer:s,byteOffset:d,byteLength:a,length:u,view:new M(s)});l<u;)A(e,l++)}),S&&S(p,N),E=p.prototype=g(B)),E.constructor!==p&&d(E,"constructor",p),F&&d(E,F,o),y[o]=p,n({global:!0,forced:p!=v,sham:!G},y),"BYTES_PER_ELEMENT"in p||d(p,"BYTES_PER_ELEMENT",t),"BYTES_PER_ELEMENT"in E||d(E,"BYTES_PER_ELEMENT",t),j(o)}):e.exports=function(){}},"../node_modules/core-js/internals/typed-array-from.js":function(e,t,r){var n=r("../node_modules/core-js/internals/to-object.js"),i=r("../node_modules/core-js/internals/to-length.js"),s=r("../node_modules/core-js/internals/get-iterator-method.js"),a=r("../node_modules/core-js/internals/is-array-iterator-method.js"),o=r("../node_modules/core-js/internals/bind-context.js"),u=r("../node_modules/core-js/internals/array-buffer-view-core.js").aTypedArrayConstructor;e.exports=function(e){var t,r,c,l,d,h=n(e),f=arguments.length,m=f>1?arguments[1]:void 0,v=void 0!==m,p=s(h);if(null!=p&&!a(p))for(d=p.call(h),h=[];!(l=d.next()).done;)h.push(l.value);for(v&&f>2&&(m=o(m,arguments[2],2)),r=i(h.length),c=new(u(this))(r),t=0;r>t;t++)c[t]=v?m(h[t],t):h[t];return c}},"../node_modules/core-js/internals/typed-arrays-constructors-requires-wrappers.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),a=r("../node_modules/core-js/internals/array-buffer-view-core.js").NATIVE_ARRAY_BUFFER_VIEWS,o=n.ArrayBuffer,u=n.Int8Array;e.exports=!a||!i(function(){u(1)})||!i(function(){new u(-1)})||!s(function(e){new u,new u(null),new u(1.5),new u(e)},!0)||i(function(){return 1!==new u(new o(2),1,void 0).length})},"../node_modules/core-js/internals/uid.js":function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+n).toString(36)}},"../node_modules/core-js/internals/user-agent.js":function(e,t,r){var n=r("../node_modules/core-js/internals/get-built-in.js");e.exports=n("navigator","userAgent")||""},"../node_modules/core-js/internals/webkit-string-pad-bug.js":function(e,t,r){var n=r("../node_modules/core-js/internals/user-agent.js");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n)},"../node_modules/core-js/internals/well-known-symbol.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/shared.js"),s=r("../node_modules/core-js/internals/uid.js"),a=r("../node_modules/core-js/internals/native-symbol.js"),o=n.Symbol,u=i("wks");e.exports=function(e){return u[e]||(u[e]=a&&o[e]||(a?o:s)("Symbol."+e))}},"../node_modules/core-js/internals/whitespaces.js":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"../node_modules/core-js/internals/wrapped-well-known-symbol.js":function(e,t,r){t.f=r("../node_modules/core-js/internals/well-known-symbol.js")},"../node_modules/core-js/modules/es.array-buffer.constructor.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/array-buffer.js"),a=r("../node_modules/core-js/internals/set-species.js"),o=s.ArrayBuffer;n({global:!0,forced:i.ArrayBuffer!==o},{ArrayBuffer:o}),a("ArrayBuffer")},"../node_modules/core-js/modules/es.array-buffer.slice.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/fails.js"),s=r("../node_modules/core-js/internals/array-buffer.js"),a=r("../node_modules/core-js/internals/an-object.js"),o=r("../node_modules/core-js/internals/to-absolute-index.js"),u=r("../node_modules/core-js/internals/to-length.js"),c=r("../node_modules/core-js/internals/species-constructor.js"),l=s.ArrayBuffer,d=s.DataView,h=l.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i(function(){return!new l(2).slice(1,void 0).byteLength})},{slice:function(e,t){if(void 0!==h&&void 0===t)return h.call(a(this),e);for(var r=a(this).byteLength,n=o(e,r),i=o(void 0===t?r:t,r),s=new(c(this,l))(u(i-n)),f=new d(this),m=new d(s),v=0;n<i;)m.setUint8(v++,f.getUint8(n++));return s}})},"../node_modules/core-js/modules/es.array.flat-map.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/flatten-into-array.js"),s=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/a-function.js"),u=r("../node_modules/core-js/internals/array-species-create.js");n({target:"Array",proto:!0},{flatMap:function(e){var t,r=s(this),n=a(r.length);return o(e),(t=u(r,0)).length=i(t,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},"../node_modules/core-js/modules/es.array.flat.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/flatten-into-array.js"),s=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/to-integer.js"),u=r("../node_modules/core-js/internals/array-species-create.js");n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=s(this),r=a(t.length),n=u(t,0);return n.length=i(n,t,t,r,0,void 0===e?1:o(e)),n}})},"../node_modules/core-js/modules/es.array.from.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/array-from.js");n({target:"Array",stat:!0,forced:!r("../node_modules/core-js/internals/check-correctness-of-iteration.js")(function(e){Array.from(e)})},{from:i})},"../node_modules/core-js/modules/es.array.iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/to-indexed-object.js"),i=r("../node_modules/core-js/internals/add-to-unscopables.js"),s=r("../node_modules/core-js/internals/iterators.js"),a=r("../node_modules/core-js/internals/internal-state.js"),o=r("../node_modules/core-js/internals/define-iterator.js"),u=a.set,c=a.getterFor("Array Iterator");e.exports=o(Array,"Array",function(e,t){u(this,{type:"Array Iterator",target:n(e),index:0,kind:t})},function(){var e=c(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},"../node_modules/core-js/modules/es.array.reverse.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/is-array.js"),s=[].reverse,a=[1,2];n({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),s.call(this)}})},"../node_modules/core-js/modules/es.array.sort.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/a-function.js"),s=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/fails.js"),o=r("../node_modules/core-js/internals/sloppy-array-method.js"),u=[].sort,c=[1,2,3],l=a(function(){c.sort(void 0)}),d=a(function(){c.sort(null)}),h=o("sort");n({target:"Array",proto:!0,forced:l||!d||h},{sort:function(e){return void 0===e?u.call(s(this)):u.call(s(this),i(e))}})},"../node_modules/core-js/modules/es.array.unscopables.flat-map.js":function(e,t,r){r("../node_modules/core-js/internals/add-to-unscopables.js")("flatMap")},"../node_modules/core-js/modules/es.array.unscopables.flat.js":function(e,t,r){r("../node_modules/core-js/internals/add-to-unscopables.js")("flat")},"../node_modules/core-js/modules/es.map.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/collection.js"),i=r("../node_modules/core-js/internals/collection-strong.js");e.exports=n("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},i,!0)},"../node_modules/core-js/modules/es.number.parse-float.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/parse-float.js");n({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},"../node_modules/core-js/modules/es.object.define-getter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/a-function.js"),u=r("../node_modules/core-js/internals/object-define-property.js");i&&n({target:"Object",proto:!0,forced:s},{__defineGetter__:function(e,t){u.f(a(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es.object.define-setter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/a-function.js"),u=r("../node_modules/core-js/internals/object-define-property.js");i&&n({target:"Object",proto:!0,forced:s},{__defineSetter__:function(e,t){u.f(a(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},"../node_modules/core-js/modules/es.object.from-entries.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/iterate.js"),s=r("../node_modules/core-js/internals/create-property.js");n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,function(e,r){s(t,e,r)},void 0,!0),t}})},"../node_modules/core-js/modules/es.object.lookup-getter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/to-primitive.js"),u=r("../node_modules/core-js/internals/object-get-prototype-of.js"),c=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;i&&n({target:"Object",proto:!0,forced:s},{__lookupGetter__:function(e){var t,r=a(this),n=o(e,!0);do{if(t=c(r,n))return t.get}while(r=u(r))}})},"../node_modules/core-js/modules/es.object.lookup-setter.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/forced-object-prototype-accessors-methods.js"),a=r("../node_modules/core-js/internals/to-object.js"),o=r("../node_modules/core-js/internals/to-primitive.js"),u=r("../node_modules/core-js/internals/object-get-prototype-of.js"),c=r("../node_modules/core-js/internals/object-get-own-property-descriptor.js").f;i&&n({target:"Object",proto:!0,forced:s},{__lookupSetter__:function(e){var t,r=a(this),n=o(e,!0);do{if(t=c(r,n))return t.set}while(r=u(r))}})},"../node_modules/core-js/modules/es.promise.finally.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/get-built-in.js"),s=r("../node_modules/core-js/internals/species-constructor.js"),a=r("../node_modules/core-js/internals/promise-resolve.js");n({target:"Promise",proto:!0,real:!0},{finally:function(e){var t=s(this,i("Promise")),r="function"==typeof e;return this.then(r?function(r){return a(t,e()).then(function(){return r})}:e,r?function(r){return a(t,e()).then(function(){throw r})}:e)}})},"../node_modules/core-js/modules/es.promise.js":function(e,t,r){"use strict";var n,i,s,a=r("../node_modules/core-js/internals/export.js"),o=r("../node_modules/core-js/internals/is-pure.js"),u=r("../node_modules/core-js/internals/global.js"),c=r("../node_modules/core-js/internals/path.js"),l=r("../node_modules/core-js/internals/redefine-all.js"),d=r("../node_modules/core-js/internals/set-to-string-tag.js"),h=r("../node_modules/core-js/internals/set-species.js"),f=r("../node_modules/core-js/internals/is-object.js"),m=r("../node_modules/core-js/internals/a-function.js"),v=r("../node_modules/core-js/internals/an-instance.js"),p=r("../node_modules/core-js/internals/classof-raw.js"),E=r("../node_modules/core-js/internals/iterate.js"),_=r("../node_modules/core-js/internals/check-correctness-of-iteration.js"),g=r("../node_modules/core-js/internals/species-constructor.js"),S=r("../node_modules/core-js/internals/task.js").set,T=r("../node_modules/core-js/internals/microtask.js"),b=r("../node_modules/core-js/internals/promise-resolve.js"),R=r("../node_modules/core-js/internals/host-report-errors.js"),j=r("../node_modules/core-js/internals/new-promise-capability.js"),y=r("../node_modules/core-js/internals/perform.js"),A=r("../node_modules/core-js/internals/user-agent.js"),w=r("../node_modules/core-js/internals/internal-state.js"),P=r("../node_modules/core-js/internals/is-forced.js"),O=r("../node_modules/core-js/internals/well-known-symbol.js")("species"),C="Promise",D=w.get,L=w.set,x=w.getterFor(C),I=u.Promise,M=u.TypeError,G=u.document,F=u.process,N=u.fetch,B=F&&F.versions,U=B&&B.v8||"",V=j.f,k=V,H="process"==p(F),q=!!(G&&G.createEvent&&u.dispatchEvent),z=P(C,function(){var e=I.resolve(1),t=function(){},r=(e.constructor={})[O]=function(e){e(t,t)};return!((H||"function"==typeof PromiseRejectionEvent)&&(!o||e.finally)&&e.then(t)instanceof r&&0!==U.indexOf("6.6")&&-1===A.indexOf("Chrome/66"))}),W=z||!_(function(e){I.all(e).catch(function(){})}),Y=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t,r){if(!t.notified){t.notified=!0;var n=t.reactions;T(function(){for(var i=t.value,s=1==t.state,a=0;n.length>a;){var o,u,c,l=n[a++],d=s?l.ok:l.fail,h=l.resolve,f=l.reject,m=l.domain;try{d?(s||(2===t.rejection&&$(e,t),t.rejection=1),!0===d?o=i:(m&&m.enter(),o=d(i),m&&(m.exit(),c=!0)),o===l.promise?f(M("Promise-chain cycle")):(u=Y(o))?u.call(o,h,f):h(o)):f(i)}catch(e){m&&!c&&m.exit(),f(e)}}t.reactions=[],t.notified=!1,r&&!t.rejection&&Q(e,t)})}},K=function(e,t,r){var n,i;q?((n=G.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},(i=u["on"+e])?i(n):"unhandledrejection"===e&&R("Unhandled promise rejection",r)},Q=function(e,t){S.call(u,function(){var r,n=t.value;if(Z(t)&&(r=y(function(){H?F.emit("unhandledRejection",n,e):K("unhandledrejection",e,n)}),t.rejection=H||Z(t)?2:1,r.error))throw r.value})},Z=function(e){return 1!==e.rejection&&!e.parent},$=function(e,t){S.call(u,function(){H?F.emit("rejectionHandled",e):K("rejectionhandled",e,t.value)})},J=function(e,t,r,n){return function(i){e(t,r,i,n)}},ee=function(e,t,r,n){t.done||(t.done=!0,n&&(t=n),t.value=r,t.state=2,X(e,t,!0))},te=function(e,t,r,n){if(!t.done){t.done=!0,n&&(t=n);try{if(e===r)throw M("Promise can't be resolved itself");var i=Y(r);i?T(function(){var n={done:!1};try{i.call(r,J(te,e,n,t),J(ee,e,n,t))}catch(r){ee(e,n,r,t)}}):(t.value=r,t.state=1,X(e,t,!1))}catch(r){ee(e,{done:!1},r,t)}}};z&&(I=function(e){v(this,I,C),m(e),n.call(this);var t=D(this);try{e(J(te,this,t),J(ee,this,t))}catch(e){ee(this,t,e)}},(n=function(e){L(this,{type:C,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=l(I.prototype,{then:function(e,t){var r=x(this),n=V(g(this,I));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=H?F.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&X(this,r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n,t=D(e);this.promise=e,this.resolve=J(te,e,t),this.reject=J(ee,e,t)},j.f=V=function(e){return e===I||e===s?new i(e):k(e)},o||"function"!=typeof N||a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return b(I,N.apply(u,arguments))}})),a({global:!0,wrap:!0,forced:z},{Promise:I}),d(I,C,!1,!0),h(C),s=c.Promise,a({target:C,stat:!0,forced:z},{reject:function(e){var t=V(this);return t.reject.call(void 0,e),t.promise}}),a({target:C,stat:!0,forced:o||z},{resolve:function(e){return b(o&&this===s?I:this,e)}}),a({target:C,stat:!0,forced:W},{all:function(e){var t=this,r=V(t),n=r.resolve,i=r.reject,s=y(function(){var r=m(t.resolve),s=[],a=0,o=1;E(e,function(e){var u=a++,c=!1;s.push(void 0),o++,r.call(t,e).then(function(e){c||(c=!0,s[u]=e,--o||n(s))},i)}),--o||n(s)});return s.error&&i(s.value),r.promise},race:function(e){var t=this,r=V(t),n=r.reject,i=y(function(){var i=m(t.resolve);E(e,function(e){i.call(t,e).then(r.resolve,n)})});return i.error&&n(i.value),r.promise}})},"../node_modules/core-js/modules/es.set.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/collection.js"),i=r("../node_modules/core-js/internals/collection-strong.js");e.exports=n("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},i)},"../node_modules/core-js/modules/es.string.iterator.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/string-multibyte.js").charAt,i=r("../node_modules/core-js/internals/internal-state.js"),s=r("../node_modules/core-js/internals/define-iterator.js"),a=i.set,o=i.getterFor("String Iterator");s(String,"String",function(e){a(this,{type:"String Iterator",string:String(e),index:0})},function(){var e,t=o(this),r=t.string,i=t.index;return i>=r.length?{value:void 0,done:!0}:(e=n(r,i),t.index+=e.length,{value:e,done:!1})})},"../node_modules/core-js/modules/es.string.pad-end.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-pad.js").end;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/webkit-string-pad-bug.js")},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.pad-start.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-pad.js").start;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/webkit-string-pad-bug.js")},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},"../node_modules/core-js/modules/es.string.replace.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js"),i=r("../node_modules/core-js/internals/an-object.js"),s=r("../node_modules/core-js/internals/to-object.js"),a=r("../node_modules/core-js/internals/to-length.js"),o=r("../node_modules/core-js/internals/to-integer.js"),u=r("../node_modules/core-js/internals/require-object-coercible.js"),c=r("../node_modules/core-js/internals/advance-string-index.js"),l=r("../node_modules/core-js/internals/regexp-exec-abstract.js"),d=Math.max,h=Math.min,f=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;n("replace",2,function(e,t,r){return[function(r,n){var i=u(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,i,n):t.call(String(i),r,n)},function(e,s){var u=r(t,e,this,s);if(u.done)return u.value;var f=i(e),m=String(this),v="function"==typeof s;v||(s=String(s));var p=f.global;if(p){var E=f.unicode;f.lastIndex=0}for(var _=[];;){var g=l(f,m);if(null===g)break;if(_.push(g),!p)break;""===String(g[0])&&(f.lastIndex=c(m,a(f.lastIndex),E))}for(var S,T="",b=0,R=0;R<_.length;R++){g=_[R];for(var j=String(g[0]),y=d(h(o(g.index),m.length),0),A=[],w=1;w<g.length;w++)A.push(void 0===(S=g[w])?S:String(S));var P=g.groups;if(v){var O=[j].concat(A,y,m);void 0!==P&&O.push(P);var C=String(s.apply(void 0,O))}else C=n(j,m,y,A,P,s);y>=b&&(T+=m.slice(b,y)+C,b=y+j.length)}return T+m.slice(b)}];function n(e,r,n,i,a,o){var u=n+e.length,c=i.length,l=v;return void 0!==a&&(a=s(a),l=m),t.call(o,l,function(t,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(u);case"<":o=a[s.slice(1,-1)];break;default:var l=+s;if(0===l)return t;if(l>c){var d=f(l/10);return 0===d?t:d<=c?void 0===i[d-1]?s.charAt(1):i[d-1]+s.charAt(1):t}o=i[l-1]}return void 0===o?"":o})}})},"../node_modules/core-js/modules/es.string.trim-end.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-trim.js").end,s=r("../node_modules/core-js/internals/forced-string-trim-method.js")("trimEnd"),a=s?function(){return i(this)}:"".trimEnd;n({target:"String",proto:!0,forced:s},{trimEnd:a,trimRight:a})},"../node_modules/core-js/modules/es.string.trim-start.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-trim.js").start,s=r("../node_modules/core-js/internals/forced-string-trim-method.js")("trimStart"),a=s?function(){return i(this)}:"".trimStart;n({target:"String",proto:!0,forced:s},{trimStart:a,trimLeft:a})},"../node_modules/core-js/modules/es.string.trim.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/string-trim.js").trim;n({target:"String",proto:!0,forced:r("../node_modules/core-js/internals/forced-string-trim-method.js")("trim")},{trim:function(){return i(this)}})},"../node_modules/core-js/modules/es.symbol.async-iterator.js":function(e,t,r){r("../node_modules/core-js/internals/define-well-known-symbol.js")("asyncIterator")},"../node_modules/core-js/modules/es.symbol.description.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/descriptors.js"),s=r("../node_modules/core-js/internals/global.js"),a=r("../node_modules/core-js/internals/has.js"),o=r("../node_modules/core-js/internals/is-object.js"),u=r("../node_modules/core-js/internals/object-define-property.js").f,c=r("../node_modules/core-js/internals/copy-constructor-properties.js"),l=s.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};c(h,l);var f=h.prototype=l.prototype;f.constructor=h;var m=f.toString,v="Symbol(test)"==String(l("test")),p=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=m.call(e);if(a(d,e))return"";var r=v?t.slice(7,-1):t.replace(p,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:h})}},"../node_modules/core-js/modules/es.typed-array.float32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.float64-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.from.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/typed-arrays-constructors-requires-wrappers.js"),i=r("../node_modules/core-js/internals/array-buffer-view-core.js"),s=r("../node_modules/core-js/internals/typed-array-from.js");i.exportStatic("from",s,n)},"../node_modules/core-js/modules/es.typed-array.int16-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.int32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.int8-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.of.js":function(e,t,r){"use strict";var n=r("../node_modules/core-js/internals/array-buffer-view-core.js"),i=r("../node_modules/core-js/internals/typed-arrays-constructors-requires-wrappers.js"),s=n.aTypedArrayConstructor;n.exportStatic("of",function(){for(var e=0,t=arguments.length,r=new(s(this))(t);t>e;)r[e]=arguments[e++];return r},i)},"../node_modules/core-js/modules/es.typed-array.uint16-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.uint32-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.uint8-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},"../node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js":function(e,t,r){r("../node_modules/core-js/internals/typed-array-constructor.js")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},"../node_modules/core-js/modules/es.weak-map.js":function(e,t,r){"use strict";var n,i=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/redefine-all.js"),a=r("../node_modules/core-js/internals/internal-metadata.js"),o=r("../node_modules/core-js/internals/collection.js"),u=r("../node_modules/core-js/internals/collection-weak.js"),c=r("../node_modules/core-js/internals/is-object.js"),l=r("../node_modules/core-js/internals/internal-state.js").enforce,d=r("../node_modules/core-js/internals/native-weak-map.js"),h=!i.ActiveXObject&&"ActiveXObject"in i,f=Object.isExtensible,m=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},v=e.exports=o("WeakMap",m,u,!0,!0);if(d&&h){n=u.getConstructor(m,"WeakMap",!0),a.REQUIRED=!0;var p=v.prototype,E=p.delete,_=p.has,g=p.get,S=p.set;s(p,{delete:function(e){if(c(e)&&!f(e)){var t=l(this);return t.frozen||(t.frozen=new n),E.call(this,e)||t.frozen.delete(e)}return E.call(this,e)},has:function(e){if(c(e)&&!f(e)){var t=l(this);return t.frozen||(t.frozen=new n),_.call(this,e)||t.frozen.has(e)}return _.call(this,e)},get:function(e){if(c(e)&&!f(e)){var t=l(this);return t.frozen||(t.frozen=new n),_.call(this,e)?g.call(this,e):t.frozen.get(e)}return g.call(this,e)},set:function(e,t){if(c(e)&&!f(e)){var r=l(this);r.frozen||(r.frozen=new n),_.call(this,e)?S.call(this,e,t):r.frozen.set(e,t)}else S.call(this,e,t);return this}})}},"../node_modules/core-js/modules/es.weak-set.js":function(e,t,r){"use strict";r("../node_modules/core-js/internals/collection.js")("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},r("../node_modules/core-js/internals/collection-weak.js"),!1,!0)},"../node_modules/core-js/modules/web.dom-collections.for-each.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/dom-iterables.js"),s=r("../node_modules/core-js/internals/array-for-each.js"),a=r("../node_modules/core-js/internals/hide.js");for(var o in i){var u=n[o],c=u&&u.prototype;if(c&&c.forEach!==s)try{a(c,"forEach",s)}catch(e){c.forEach=s}}},"../node_modules/core-js/modules/web.dom-collections.iterator.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/dom-iterables.js"),s=r("../node_modules/core-js/modules/es.array.iterator.js"),a=r("../node_modules/core-js/internals/hide.js"),o=r("../node_modules/core-js/internals/well-known-symbol.js"),u=o("iterator"),c=o("toStringTag"),l=s.values;for(var d in i){var h=n[d],f=h&&h.prototype;if(f){if(f[u]!==l)try{a(f,u,l)}catch(e){f[u]=l}if(f[c]||a(f,c,d),i[d])for(var m in s)if(f[m]!==s[m])try{a(f,m,s[m])}catch(e){f[m]=s[m]}}}},"../node_modules/core-js/modules/web.immediate.js":function(e,t,r){var n=r("../node_modules/core-js/internals/global.js"),i=r("../node_modules/core-js/internals/task.js"),s=!n.setImmediate||!n.clearImmediate;r("../node_modules/core-js/internals/export.js")({global:!0,bind:!0,enumerable:!0,forced:s},{setImmediate:i.set,clearImmediate:i.clear})},"../node_modules/core-js/modules/web.queue-microtask.js":function(e,t,r){var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/global.js"),s=r("../node_modules/core-js/internals/microtask.js"),a=r("../node_modules/core-js/internals/classof-raw.js"),o=i.process,u="process"==a(o);n({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=u&&o.domain;s(t?t.bind(e):e)}})},"../node_modules/core-js/modules/web.url-search-params.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.array.iterator.js");var n=r("../node_modules/core-js/internals/export.js"),i=r("../node_modules/core-js/internals/native-url.js"),s=r("../node_modules/core-js/internals/redefine.js"),a=r("../node_modules/core-js/internals/redefine-all.js"),o=r("../node_modules/core-js/internals/set-to-string-tag.js"),u=r("../node_modules/core-js/internals/create-iterator-constructor.js"),c=r("../node_modules/core-js/internals/internal-state.js"),l=r("../node_modules/core-js/internals/an-instance.js"),d=r("../node_modules/core-js/internals/has.js"),h=r("../node_modules/core-js/internals/bind-context.js"),f=r("../node_modules/core-js/internals/an-object.js"),m=r("../node_modules/core-js/internals/is-object.js"),v=r("../node_modules/core-js/internals/get-iterator.js"),p=r("../node_modules/core-js/internals/get-iterator-method.js"),E=r("../node_modules/core-js/internals/well-known-symbol.js")("iterator"),_=c.set,g=c.getterFor("URLSearchParams"),S=c.getterFor("URLSearchParamsIterator"),T=/\+/g,b=Array(4),R=function(e){return b[e-1]||(b[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},j=function(e){try{return decodeURIComponent(e)}catch(t){return e}},y=function(e){var t=e.replace(T," "),r=4;try{return decodeURIComponent(t)}catch(e){for(;r;)t=t.replace(R(r--),j);return t}},A=/[!'()~]|%20/g,w={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},P=function(e){return w[e]},O=function(e){return encodeURIComponent(e).replace(A,P)},C=function(e,t){if(t)for(var r,n,i=t.split("&"),s=0;s<i.length;)(r=i[s++]).length&&(n=r.split("="),e.push({key:y(n.shift()),value:y(n.join("="))}))},D=function(e){this.entries.length=0,C(this.entries,e)},L=function(e,t){if(e<t)throw TypeError("Not enough arguments")},x=u(function(e,t){_(this,{type:"URLSearchParamsIterator",iterator:v(g(e).entries),kind:t})},"Iterator",function(){var e=S(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r}),I=function(){l(this,I,"URLSearchParams");var e,t,r,n,i,s,a,o=arguments.length>0?arguments[0]:void 0,u=[];if(_(this,{type:"URLSearchParams",entries:u,updateURL:function(){},updateSearchParams:D}),void 0!==o)if(m(o))if("function"==typeof(e=p(o)))for(t=e.call(o);!(r=t.next()).done;){if((i=(n=v(f(r.value))).next()).done||(s=n.next()).done||!n.next().done)throw TypeError("Expected sequence with length 2");u.push({key:i.value+"",value:s.value+""})}else for(a in o)d(o,a)&&u.push({key:a,value:o[a]+""});else C(u,"string"==typeof o?"?"===o.charAt(0)?o.slice(1):o:o+"")},M=I.prototype;a(M,{append:function(e,t){L(arguments.length,2);var r=g(this);r.entries.push({key:e+"",value:t+""}),r.updateURL()},delete:function(e){L(arguments.length,1);for(var t=g(this),r=t.entries,n=e+"",i=0;i<r.length;)r[i].key===n?r.splice(i,1):i++;t.updateURL()},get:function(e){L(arguments.length,1);for(var t=g(this).entries,r=e+"",n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){L(arguments.length,1);for(var t=g(this).entries,r=e+"",n=[],i=0;i<t.length;i++)t[i].key===r&&n.push(t[i].value);return n},has:function(e){L(arguments.length,1);for(var t=g(this).entries,r=e+"",n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){L(arguments.length,1);for(var r,n=g(this),i=n.entries,s=!1,a=e+"",o=t+"",u=0;u<i.length;u++)(r=i[u]).key===a&&(s?i.splice(u--,1):(s=!0,r.value=o));s||i.push({key:a,value:o}),n.updateURL()},sort:function(){var e,t,r,n=g(this),i=n.entries,s=i.slice();for(i.length=0,r=0;r<s.length;r++){for(e=s[r],t=0;t<r;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===r&&i.push(e)}n.updateURL()},forEach:function(e){for(var t,r=g(this).entries,n=h(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new x(this,"keys")},values:function(){return new x(this,"values")},entries:function(){return new x(this,"entries")}},{enumerable:!0}),s(M,E,M.entries),s(M,"toString",function(){for(var e,t=g(this).entries,r=[],n=0;n<t.length;)e=t[n++],r.push(O(e.key)+"="+O(e.value));return r.join("&")},{enumerable:!0}),o(I,"URLSearchParams"),n({global:!0,forced:!i},{URLSearchParams:I}),e.exports={URLSearchParams:I,getState:g}},"../node_modules/core-js/modules/web.url.js":function(e,t,r){"use strict";r("../node_modules/core-js/modules/es.string.iterator.js");var n,i=r("../node_modules/core-js/internals/export.js"),s=r("../node_modules/core-js/internals/descriptors.js"),a=r("../node_modules/core-js/internals/native-url.js"),o=r("../node_modules/core-js/internals/global.js"),u=r("../node_modules/core-js/internals/object-define-properties.js"),c=r("../node_modules/core-js/internals/redefine.js"),l=r("../node_modules/core-js/internals/an-instance.js"),d=r("../node_modules/core-js/internals/has.js"),h=r("../node_modules/core-js/internals/object-assign.js"),f=r("../node_modules/core-js/internals/array-from.js"),m=r("../node_modules/core-js/internals/string-multibyte.js").codeAt,v=r("../node_modules/core-js/internals/punycode-to-ascii.js"),p=r("../node_modules/core-js/internals/set-to-string-tag.js"),E=r("../node_modules/core-js/modules/web.url-search-params.js"),_=r("../node_modules/core-js/internals/internal-state.js"),g=o.URL,S=E.URLSearchParams,T=E.getState,b=_.set,R=_.getterFor("URL"),j=Math.floor,y=Math.pow,A=/[A-Za-z]/,w=/[\d+\-.A-Za-z]/,P=/\d/,O=/^(0x|0X)/,C=/^[0-7]+$/,D=/^\d+$/,L=/^[\dA-Fa-f]+$/,x=/[\u0000\u0009\u000A\u000D #%\/:?@[\\]]/,I=/[\u0000\u0009\u000A\u000D #\/:?@[\\]]/,M=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,G=/[\u0009\u000A\u000D]/g,F=function(e,t){var r,n,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(r=B(t.slice(1,-1))))return"Invalid host";e.host=r}else if(Y(e)){if(t=v(t),x.test(t))return"Invalid host";if(null===(r=N(t)))return"Invalid host";e.host=r}else{if(I.test(t))return"Invalid host";for(r="",n=f(t),i=0;i<n.length;i++)r+=z(n[i],V);e.host=r}},N=function(e){var t,r,n,i,s,a,o,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(i=u[n]))return e;if(s=10,i.length>1&&"0"==i.charAt(0)&&(s=O.test(i)?16:8,i=i.slice(8==s?1:2)),""===i)a=0;else{if(!(10==s?D:8==s?C:L).test(i))return e;a=parseInt(i,s)}r.push(a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=y(256,5-t))return null}else if(a>255)return null;for(o=r.pop(),n=0;n<r.length;n++)o+=r[n]*y(256,3-n);return o},B=function(e){var t,r,n,i,s,a,o,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,h=function(){return e.charAt(d)};if(":"==h()){if(":"!=e.charAt(1))return;d+=2,l=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=r=0;r<4&&L.test(h());)t=16*t+parseInt(h(),16),d++,r++;if("."==h()){if(0==r)return;if(d-=r,c>6)return;for(n=0;h();){if(i=null,n>0){if(!("."==h()&&n<4))return;d++}if(!P.test(h()))return;for(;P.test(h());){if(s=parseInt(h(),10),null===i)i=s;else{if(0==i)return;i=10*i+s}if(i>255)return;d++}u[c]=256*u[c]+i,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)o=u[c],u[c--]=u[l+a-1],u[l+--a]=o;else if(8!=c)return;return u},U=function(e){var t,r,n,i;if("number"==typeof e){for(t=[],r=0;r<4;r++)t.unshift(e%256),e=j(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,i=0,s=0;s<8;s++)0!==e[s]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=s),++i);return i>r&&(t=n,r=i),t}(e),r=0;r<8;r++)i&&0===e[r]||(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=e[r].toString(16),r<7&&(t+=":")));return"["+t+"]"}return e},V={},k=h({},V,{" ":1,'"':1,"<":1,">":1,"`":1}),H=h({},k,{"#":1,"?":1,"{":1,"}":1}),q=h({},H,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),z=function(e,t){var r=m(e,0);return r>32&&r<127&&!d(t,e)?e:encodeURIComponent(e)},W={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},Y=function(e){return d(W,e.scheme)},X=function(e){return""!=e.username||""!=e.password},K=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Q=function(e,t){var r;return 2==e.length&&A.test(e.charAt(0))&&(":"==(r=e.charAt(1))||!t&&"|"==r)},Z=function(e){var t;return e.length>1&&Q(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},$=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&Q(t[0],!0)||t.pop()},J=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},re={},ne={},ie={},se={},ae={},oe={},ue={},ce={},le={},de={},he={},fe={},me={},ve={},pe={},Ee={},_e={},ge={},Se={},Te=function(e,t,r,i){var s,a,o,u,c,l=r||ee,h=0,m="",v=!1,p=!1,E=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(M,"")),t=t.replace(G,""),s=f(t);h<=s.length;){switch(a=s[h],l){case ee:if(!a||!A.test(a)){if(r)return"Invalid scheme";l=re;continue}m+=a.toLowerCase(),l=te;break;case te:if(a&&(w.test(a)||"+"==a||"-"==a||"."==a))m+=a.toLowerCase();else{if(":"!=a){if(r)return"Invalid scheme";m="",l=re,h=0;continue}if(r&&(Y(e)!=d(W,m)||"file"==m&&(X(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=m,r)return void(Y(e)&&W[e.scheme]==e.port&&(e.port=null));m="","file"==e.scheme?l=fe:Y(e)&&i&&i.scheme==e.scheme?l=ne:Y(e)?l=oe:"/"==s[h+1]?(l=ie,h++):(e.cannotBeABaseURL=!0,e.path.push(""),l=_e)}break;case re:if(!i||i.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==a){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=Se;break}l="file"==i.scheme?fe:se;continue;case ne:if("/"!=a||"/"!=s[h+1]){l=se;continue}l=ue,h++;break;case ie:if("/"==a){l=ce;break}l=Ee;continue;case se:if(e.scheme=i.scheme,a==n)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==a||"\\"==a&&Y(e))l=ae;else if("?"==a)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=ge;else{if("#"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=Ee;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=Se}break;case ae:if(!Y(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=Ee;continue}l=ce}else l=ue;break;case oe:if(l=ue,"/"!=a||"/"!=m.charAt(h+1))continue;h++;break;case ue:if("/"!=a&&"\\"!=a){l=ce;continue}break;case ce:if("@"==a){v&&(m="%40"+m),v=!0,o=f(m);for(var _=0;_<o.length;_++){var g=o[_];if(":"!=g||E){var S=z(g,q);E?e.password+=S:e.username+=S}else E=!0}m=""}else if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)){if(v&&""==m)return"Invalid authority";h-=f(m).length+1,m="",l=le}else m+=a;break;case le:case de:if(r&&"file"==e.scheme){l=ve;continue}if(":"!=a||p){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)){if(Y(e)&&""==m)return"Invalid host";if(r&&""==m&&(X(e)||null!==e.port))return;if(u=F(e,m))return u;if(m="",l=pe,r)return;continue}"["==a?p=!0:"]"==a&&(p=!1),m+=a}else{if(""==m)return"Invalid host";if(u=F(e,m))return u;if(m="",l=he,r==de)return}break;case he:if(!P.test(a)){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&Y(e)||r){if(""!=m){var T=parseInt(m,10);if(T>65535)return"Invalid port";e.port=Y(e)&&T===W[e.scheme]?null:T,m=""}if(r)return;l=pe;continue}return"Invalid port"}m+=a;break;case fe:if(e.scheme="file","/"==a||"\\"==a)l=me;else{if(!i||"file"!=i.scheme){l=Ee;continue}if(a==n)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==a)e.host=i.host,e.path=i.path.slice(),e.query="",l=ge;else{if("#"!=a){Z(s.slice(h).join(""))||(e.host=i.host,e.path=i.path.slice(),$(e)),l=Ee;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=Se}}break;case me:if("/"==a||"\\"==a){l=ve;break}i&&"file"==i.scheme&&!Z(s.slice(h).join(""))&&(Q(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=Ee;continue;case ve:if(a==n||"/"==a||"\\"==a||"?"==a||"#"==a){if(!r&&Q(m))l=Ee;else if(""==m){if(e.host="",r)return;l=pe}else{if(u=F(e,m))return u;if("localhost"==e.host&&(e.host=""),r)return;m="",l=pe}continue}m+=a;break;case pe:if(Y(e)){if(l=Ee,"/"!=a&&"\\"!=a)continue}else if(r||"?"!=a)if(r||"#"!=a){if(a!=n&&(l=Ee,"/"!=a))continue}else e.fragment="",l=Se;else e.query="",l=ge;break;case Ee:if(a==n||"/"==a||"\\"==a&&Y(e)||!r&&("?"==a||"#"==a)){if(".."===(c=(c=m).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?($(e),"/"==a||"\\"==a&&Y(e)||e.path.push("")):J(m)?"/"==a||"\\"==a&&Y(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Q(m)&&(e.host&&(e.host=""),m=m.charAt(0)+":"),e.path.push(m)),m="","file"==e.scheme&&(a==n||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",l=ge):"#"==a&&(e.fragment="",l=Se)}else m+=z(a,H);break;case _e:"?"==a?(e.query="",l=ge):"#"==a?(e.fragment="",l=Se):a!=n&&(e.path[0]+=z(a,V));break;case ge:r||"#"!=a?a!=n&&("'"==a&&Y(e)?e.query+="%27":e.query+="#"==a?"%23":z(a,V)):(e.fragment="",l=Se);break;case Se:a!=n&&(e.fragment+=z(a,k))}h++}},be=function(e){var t,r,n=l(this,be,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(e),o=b(n,{type:"URL"});if(void 0!==i)if(i instanceof be)t=R(i);else if(r=Te(t={},String(i)))throw TypeError(r);if(r=Te(o,a,null,t))throw TypeError(r);var u=o.searchParams=new S,c=T(u);c.updateSearchParams(o.query),c.updateURL=function(){o.query=String(u)||null},s||(n.href=je.call(n),n.origin=ye.call(n),n.protocol=Ae.call(n),n.username=we.call(n),n.password=Pe.call(n),n.host=Oe.call(n),n.hostname=Ce.call(n),n.port=De.call(n),n.pathname=Le.call(n),n.search=xe.call(n),n.searchParams=Ie.call(n),n.hash=Me.call(n))},Re=be.prototype,je=function(){var e=R(this),t=e.scheme,r=e.username,n=e.password,i=e.host,s=e.port,a=e.path,o=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",X(e)&&(c+=r+(n?":"+n:"")+"@"),c+=U(i),null!==s&&(c+=":"+s)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==o&&(c+="?"+o),null!==u&&(c+="#"+u),c},ye=function(){var e=R(this),t=e.scheme,r=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Y(e)?t+"://"+U(e.host)+(null!==r?":"+r:""):"null"},Ae=function(){return R(this).scheme+":"},we=function(){return R(this).username},Pe=function(){return R(this).password},Oe=function(){var e=R(this),t=e.host,r=e.port;return null===t?"":null===r?U(t):U(t)+":"+r},Ce=function(){var e=R(this).host;return null===e?"":U(e)},De=function(){var e=R(this).port;return null===e?"":String(e)},Le=function(){var e=R(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},xe=function(){var e=R(this).query;return e?"?"+e:""},Ie=function(){return R(this).searchParams},Me=function(){var e=R(this).fragment;return e?"#"+e:""},Ge=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(s&&u(Re,{href:Ge(je,function(e){var t=R(this),r=String(e),n=Te(t,r);if(n)throw TypeError(n);T(t.searchParams).updateSearchParams(t.query)}),origin:Ge(ye),protocol:Ge(Ae,function(e){var t=R(this);Te(t,String(e)+":",ee)}),username:Ge(we,function(e){var t=R(this),r=f(String(e));if(!K(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=z(r[n],q)}}),password:Ge(Pe,function(e){var t=R(this),r=f(String(e));if(!K(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=z(r[n],q)}}),host:Ge(Oe,function(e){var t=R(this);t.cannotBeABaseURL||Te(t,String(e),le)}),hostname:Ge(Ce,function(e){var t=R(this);t.cannotBeABaseURL||Te(t,String(e),de)}),port:Ge(De,function(e){var t=R(this);K(t)||(""==(e=String(e))?t.port=null:Te(t,e,he))}),pathname:Ge(Le,function(e){var t=R(this);t.cannotBeABaseURL||(t.path=[],Te(t,e+"",pe))}),search:Ge(xe,function(e){var t=R(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Te(t,e,ge)),T(t.searchParams).updateSearchParams(t.query)}),searchParams:Ge(Ie),hash:Ge(Me,function(e){var t=R(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Te(t,e,Se)):t.fragment=null})}),c(Re,"toJSON",function(){return je.call(this)},{enumerable:!0}),c(Re,"toString",function(){return je.call(this)},{enumerable:!0}),g){var Fe=g.createObjectURL,Ne=g.revokeObjectURL;Fe&&c(be,"createObjectURL",function(e){return Fe.apply(g,arguments)}),Ne&&c(be,"revokeObjectURL",function(e){return Ne.apply(g,arguments)})}p(be,"URL"),i({global:!0,forced:!a,sham:!s},{URL:be})},"../node_modules/core-js/modules/web.url.to-json.js":function(e,t,r){"use strict";r("../node_modules/core-js/internals/export.js")({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},"../node_modules/gl-matrix/lib/gl-matrix.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");r.d(t,"glMatrix",function(){return n});var i=r("../node_modules/gl-matrix/lib/gl-matrix/mat2.js");r.d(t,"mat2",function(){return i});var s=r("../node_modules/gl-matrix/lib/gl-matrix/mat2d.js");r.d(t,"mat2d",function(){return s});var a=r("../node_modules/gl-matrix/lib/gl-matrix/mat3.js");r.d(t,"mat3",function(){return a});var o=r("../node_modules/gl-matrix/lib/gl-matrix/mat4.js");r.d(t,"mat4",function(){return o});var u=r("../node_modules/gl-matrix/lib/gl-matrix/quat.js");r.d(t,"quat",function(){return u});var c=r("../node_modules/gl-matrix/lib/gl-matrix/quat2.js");r.d(t,"quat2",function(){return c});var l=r("../node_modules/gl-matrix/lib/gl-matrix/vec2.js");r.d(t,"vec2",function(){return l});var d=r("../node_modules/gl-matrix/lib/gl-matrix/vec3.js");r.d(t,"vec3",function(){return d});var h=r("../node_modules/gl-matrix/lib/gl-matrix/vec4.js");r.d(t,"vec4",function(){return h})},"../node_modules/gl-matrix/lib/gl-matrix/common.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EPSILON",function(){return n}),r.d(t,"ARRAY_TYPE",function(){return i}),r.d(t,"RANDOM",function(){return s}),r.d(t,"setMatrixArrayType",function(){return a}),r.d(t,"toRadian",function(){return u}),r.d(t,"equals",function(){return c});var n=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,s=Math.random;function a(e){i=e}var o=Math.PI/180;function u(e){return e*o}function c(e,t){return Math.abs(e-t)<=n*Math.max(1,Math.abs(e),Math.abs(t))}},"../node_modules/gl-matrix/lib/gl-matrix/mat2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return i}),r.d(t,"clone",function(){return s}),r.d(t,"copy",function(){return a}),r.d(t,"identity",function(){return o}),r.d(t,"fromValues",function(){return u}),r.d(t,"set",function(){return c}),r.d(t,"transpose",function(){return l}),r.d(t,"invert",function(){return d}),r.d(t,"adjoint",function(){return h}),r.d(t,"determinant",function(){return f}),r.d(t,"multiply",function(){return m}),r.d(t,"rotate",function(){return v}),r.d(t,"scale",function(){return p}),r.d(t,"fromRotation",function(){return E}),r.d(t,"fromScaling",function(){return _}),r.d(t,"str",function(){return g}),r.d(t,"frob",function(){return S}),r.d(t,"LDU",function(){return T}),r.d(t,"add",function(){return b}),r.d(t,"subtract",function(){return R}),r.d(t,"exactEquals",function(){return j}),r.d(t,"equals",function(){return y}),r.d(t,"multiplyScalar",function(){return A}),r.d(t,"multiplyScalarAndAdd",function(){return w}),r.d(t,"mul",function(){return P}),r.d(t,"sub",function(){return O});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function s(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function u(e,t,r,i){var s=new n.ARRAY_TYPE(4);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function c(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function l(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function d(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=r*s-i*n;return a?(a=1/a,e[0]=s*a,e[1]=-n*a,e[2]=-i*a,e[3]=r*a,e):null}function h(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function f(e){return e[0]*e[3]-e[2]*e[1]}function m(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*o+s*u,e[1]=i*o+a*u,e[2]=n*c+s*l,e[3]=i*c+a*l,e}function v(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),u=Math.cos(r);return e[0]=n*u+s*o,e[1]=i*u+a*o,e[2]=n*-o+s*u,e[3]=i*-o+a*u,e}function p(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=r[0],u=r[1];return e[0]=n*o,e[1]=i*o,e[2]=s*u,e[3]=a*u,e}function E(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e}function _(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function g(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function S(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))}function T(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]}function b(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function R(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function j(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function y(e,t){var r=e[0],i=e[1],s=e[2],a=e[3],o=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-c)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))}function A(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function w(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}var P=m,O=R},"../node_modules/gl-matrix/lib/gl-matrix/mat2d.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return i}),r.d(t,"clone",function(){return s}),r.d(t,"copy",function(){return a}),r.d(t,"identity",function(){return o}),r.d(t,"fromValues",function(){return u}),r.d(t,"set",function(){return c}),r.d(t,"invert",function(){return l}),r.d(t,"determinant",function(){return d}),r.d(t,"multiply",function(){return h}),r.d(t,"rotate",function(){return f}),r.d(t,"scale",function(){return m}),r.d(t,"translate",function(){return v}),r.d(t,"fromRotation",function(){return p}),r.d(t,"fromScaling",function(){return E}),r.d(t,"fromTranslation",function(){return _}),r.d(t,"str",function(){return g}),r.d(t,"frob",function(){return S}),r.d(t,"add",function(){return T}),r.d(t,"subtract",function(){return b}),r.d(t,"multiplyScalar",function(){return R}),r.d(t,"multiplyScalarAndAdd",function(){return j}),r.d(t,"exactEquals",function(){return y}),r.d(t,"equals",function(){return A}),r.d(t,"mul",function(){return w}),r.d(t,"sub",function(){return P});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(6);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function s(e){var t=new n.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function o(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function u(e,t,r,i,s,a){var o=new n.ARRAY_TYPE(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=a,o}function c(e,t,r,n,i,s,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=a,e}function l(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=r*s-n*i;return u?(u=1/u,e[0]=s*u,e[1]=-n*u,e[2]=-i*u,e[3]=r*u,e[4]=(i*o-s*a)*u,e[5]=(n*a-r*o)*u,e):null}function d(e){return e[0]*e[3]-e[1]*e[2]}function h(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],c=r[0],l=r[1],d=r[2],h=r[3],f=r[4],m=r[5];return e[0]=n*c+s*l,e[1]=i*c+a*l,e[2]=n*d+s*h,e[3]=i*d+a*h,e[4]=n*f+s*m+o,e[5]=i*f+a*m+u,e}function f(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],c=Math.sin(r),l=Math.cos(r);return e[0]=n*l+s*c,e[1]=i*l+a*c,e[2]=n*-c+s*l,e[3]=i*-c+a*l,e[4]=o,e[5]=u,e}function m(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],c=r[0],l=r[1];return e[0]=n*c,e[1]=i*c,e[2]=s*l,e[3]=a*l,e[4]=o,e[5]=u,e}function v(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],c=r[0],l=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=a,e[4]=n*c+s*l+o,e[5]=i*c+a*l+u,e}function p(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function E(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function _(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function g(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function S(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)}function T(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function b(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function R(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function j(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function y(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function A(e,t){var r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=t[0],l=t[1],d=t[2],h=t[3],f=t[4],m=t[5];return Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-d)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-h)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-m)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))}var w=h,P=b},"../node_modules/gl-matrix/lib/gl-matrix/mat3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return i}),r.d(t,"fromMat4",function(){return s}),r.d(t,"clone",function(){return a}),r.d(t,"copy",function(){return o}),r.d(t,"fromValues",function(){return u}),r.d(t,"set",function(){return c}),r.d(t,"identity",function(){return l}),r.d(t,"transpose",function(){return d}),r.d(t,"invert",function(){return h}),r.d(t,"adjoint",function(){return f}),r.d(t,"determinant",function(){return m}),r.d(t,"multiply",function(){return v}),r.d(t,"translate",function(){return p}),r.d(t,"rotate",function(){return E}),r.d(t,"scale",function(){return _}),r.d(t,"fromTranslation",function(){return g}),r.d(t,"fromRotation",function(){return S}),r.d(t,"fromScaling",function(){return T}),r.d(t,"fromMat2d",function(){return b}),r.d(t,"fromQuat",function(){return R}),r.d(t,"normalFromMat4",function(){return j}),r.d(t,"projection",function(){return y}),r.d(t,"str",function(){return A}),r.d(t,"frob",function(){return w}),r.d(t,"add",function(){return P}),r.d(t,"subtract",function(){return O}),r.d(t,"multiplyScalar",function(){return C}),r.d(t,"multiplyScalarAndAdd",function(){return D}),r.d(t,"exactEquals",function(){return L}),r.d(t,"equals",function(){return x}),r.d(t,"mul",function(){return I}),r.d(t,"sub",function(){return M});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(9);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function a(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function u(e,t,r,i,s,a,o,u,c){var l=new n.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=r,l[3]=i,l[4]=s,l[5]=a,l[6]=o,l[7]=u,l[8]=c,l}function c(e,t,r,n,i,s,a,o,u,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=u,e[8]=c,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function d(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function h(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8],d=l*a-o*c,h=-l*s+o*u,f=c*s-a*u,m=r*d+n*h+i*f;return m?(m=1/m,e[0]=d*m,e[1]=(-l*n+i*c)*m,e[2]=(o*n-i*a)*m,e[3]=h*m,e[4]=(l*r-i*u)*m,e[5]=(-o*r+i*s)*m,e[6]=f*m,e[7]=(-c*r+n*u)*m,e[8]=(a*r-n*s)*m,e):null}function f(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8];return e[0]=a*l-o*c,e[1]=i*c-n*l,e[2]=n*o-i*a,e[3]=o*u-s*l,e[4]=r*l-i*u,e[5]=i*s-r*o,e[6]=s*c-a*u,e[7]=n*u-r*c,e[8]=r*a-n*s,e}function m(e){var t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],a=e[5],o=e[6],u=e[7],c=e[8];return t*(c*s-a*u)+r*(-c*i+a*o)+n*(u*i-s*o)}function v(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=r[0],f=r[1],m=r[2],v=r[3],p=r[4],E=r[5],_=r[6],g=r[7],S=r[8];return e[0]=h*n+f*a+m*c,e[1]=h*i+f*o+m*l,e[2]=h*s+f*u+m*d,e[3]=v*n+p*a+E*c,e[4]=v*i+p*o+E*l,e[5]=v*s+p*u+E*d,e[6]=_*n+g*a+S*c,e[7]=_*i+g*o+S*l,e[8]=_*s+g*u+S*d,e}function p(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=r[0],f=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=a,e[4]=o,e[5]=u,e[6]=h*n+f*a+c,e[7]=h*i+f*o+l,e[8]=h*s+f*u+d,e}function E(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=Math.sin(r),f=Math.cos(r);return e[0]=f*n+h*a,e[1]=f*i+h*o,e[2]=f*s+h*u,e[3]=f*a-h*n,e[4]=f*o-h*i,e[5]=f*u-h*s,e[6]=c,e[7]=l,e[8]=d,e}function _(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function g(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function S(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function T(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function b(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function R(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=r+r,o=n+n,u=i+i,c=r*a,l=n*a,d=n*o,h=i*a,f=i*o,m=i*u,v=s*a,p=s*o,E=s*u;return e[0]=1-d-m,e[3]=l-E,e[6]=h+p,e[1]=l+E,e[4]=1-c-m,e[7]=f-v,e[2]=h-p,e[5]=f+v,e[8]=1-c-d,e}function j(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],m=t[12],v=t[13],p=t[14],E=t[15],_=r*o-n*a,g=r*u-i*a,S=r*c-s*a,T=n*u-i*o,b=n*c-s*o,R=i*c-s*u,j=l*v-d*m,y=l*p-h*m,A=l*E-f*m,w=d*p-h*v,P=d*E-f*v,O=h*E-f*p,C=_*O-g*P+S*w+T*A-b*y+R*j;return C?(C=1/C,e[0]=(o*O-u*P+c*w)*C,e[1]=(u*A-a*O-c*y)*C,e[2]=(a*P-o*A+c*j)*C,e[3]=(i*P-n*O-s*w)*C,e[4]=(r*O-i*A+s*y)*C,e[5]=(n*A-r*P-s*j)*C,e[6]=(v*R-p*b+E*T)*C,e[7]=(p*S-m*R-E*g)*C,e[8]=(m*b-v*S+E*_)*C,e):null}function y(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function A(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function w(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function P(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function O(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function C(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function D(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function L(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function x(e,t){var r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],d=e[8],h=t[0],f=t[1],m=t[2],v=t[3],p=t[4],E=t[5],_=t[6],g=t[7],S=t[8];return Math.abs(r-h)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-f)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-m)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-v)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(u-E)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-_)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-g)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(d-S)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))}var I=v,M=O},"../node_modules/gl-matrix/lib/gl-matrix/mat4.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return i}),r.d(t,"clone",function(){return s}),r.d(t,"copy",function(){return a}),r.d(t,"fromValues",function(){return o}),r.d(t,"set",function(){return u}),r.d(t,"identity",function(){return c}),r.d(t,"transpose",function(){return l}),r.d(t,"invert",function(){return d}),r.d(t,"adjoint",function(){return h}),r.d(t,"determinant",function(){return f}),r.d(t,"multiply",function(){return m}),r.d(t,"translate",function(){return v}),r.d(t,"scale",function(){return p}),r.d(t,"rotate",function(){return E}),r.d(t,"rotateX",function(){return _}),r.d(t,"rotateY",function(){return g}),r.d(t,"rotateZ",function(){return S}),r.d(t,"fromTranslation",function(){return T}),r.d(t,"fromScaling",function(){return b}),r.d(t,"fromRotation",function(){return R}),r.d(t,"fromXRotation",function(){return j}),r.d(t,"fromYRotation",function(){return y}),r.d(t,"fromZRotation",function(){return A}),r.d(t,"fromRotationTranslation",function(){return w}),r.d(t,"fromQuat2",function(){return P}),r.d(t,"getTranslation",function(){return O}),r.d(t,"getScaling",function(){return C}),r.d(t,"getRotation",function(){return D}),r.d(t,"fromRotationTranslationScale",function(){return L}),r.d(t,"fromRotationTranslationScaleOrigin",function(){return x}),r.d(t,"fromQuat",function(){return I}),r.d(t,"frustum",function(){return M}),r.d(t,"perspective",function(){return G}),r.d(t,"perspectiveFromFieldOfView",function(){return F}),r.d(t,"ortho",function(){return N}),r.d(t,"lookAt",function(){return B}),r.d(t,"targetTo",function(){return U}),r.d(t,"str",function(){return V}),r.d(t,"frob",function(){return k}),r.d(t,"add",function(){return H}),r.d(t,"subtract",function(){return q}),r.d(t,"multiplyScalar",function(){return z}),r.d(t,"multiplyScalarAndAdd",function(){return W}),r.d(t,"exactEquals",function(){return Y}),r.d(t,"equals",function(){return X}),r.d(t,"mul",function(){return K}),r.d(t,"sub",function(){return Q});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(16);return n.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function s(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(e,t,r,i,s,a,o,u,c,l,d,h,f,m,v,p){var E=new n.ARRAY_TYPE(16);return E[0]=e,E[1]=t,E[2]=r,E[3]=i,E[4]=s,E[5]=a,E[6]=o,E[7]=u,E[8]=c,E[9]=l,E[10]=d,E[11]=h,E[12]=f,E[13]=m,E[14]=v,E[15]=p,E}function u(e,t,r,n,i,s,a,o,u,c,l,d,h,f,m,v,p){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=u,e[8]=c,e[9]=l,e[10]=d,e[11]=h,e[12]=f,e[13]=m,e[14]=v,e[15]=p,e}function c(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],s=t[6],a=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=i,e[13]=a,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function d(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],m=t[12],v=t[13],p=t[14],E=t[15],_=r*o-n*a,g=r*u-i*a,S=r*c-s*a,T=n*u-i*o,b=n*c-s*o,R=i*c-s*u,j=l*v-d*m,y=l*p-h*m,A=l*E-f*m,w=d*p-h*v,P=d*E-f*v,O=h*E-f*p,C=_*O-g*P+S*w+T*A-b*y+R*j;return C?(C=1/C,e[0]=(o*O-u*P+c*w)*C,e[1]=(i*P-n*O-s*w)*C,e[2]=(v*R-p*b+E*T)*C,e[3]=(h*b-d*R-f*T)*C,e[4]=(u*A-a*O-c*y)*C,e[5]=(r*O-i*A+s*y)*C,e[6]=(p*S-m*R-E*g)*C,e[7]=(l*R-h*S+f*g)*C,e[8]=(a*P-o*A+c*j)*C,e[9]=(n*A-r*P-s*j)*C,e[10]=(m*b-v*S+E*_)*C,e[11]=(d*S-l*b-f*_)*C,e[12]=(o*y-a*w-u*j)*C,e[13]=(r*w-n*y+i*j)*C,e[14]=(v*g-m*T-p*_)*C,e[15]=(l*T-d*g+h*_)*C,e):null}function h(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],c=t[7],l=t[8],d=t[9],h=t[10],f=t[11],m=t[12],v=t[13],p=t[14],E=t[15];return e[0]=o*(h*E-f*p)-d*(u*E-c*p)+v*(u*f-c*h),e[1]=-(n*(h*E-f*p)-d*(i*E-s*p)+v*(i*f-s*h)),e[2]=n*(u*E-c*p)-o*(i*E-s*p)+v*(i*c-s*u),e[3]=-(n*(u*f-c*h)-o*(i*f-s*h)+d*(i*c-s*u)),e[4]=-(a*(h*E-f*p)-l*(u*E-c*p)+m*(u*f-c*h)),e[5]=r*(h*E-f*p)-l*(i*E-s*p)+m*(i*f-s*h),e[6]=-(r*(u*E-c*p)-a*(i*E-s*p)+m*(i*c-s*u)),e[7]=r*(u*f-c*h)-a*(i*f-s*h)+l*(i*c-s*u),e[8]=a*(d*E-f*v)-l*(o*E-c*v)+m*(o*f-c*d),e[9]=-(r*(d*E-f*v)-l*(n*E-s*v)+m*(n*f-s*d)),e[10]=r*(o*E-c*v)-a*(n*E-s*v)+m*(n*c-s*o),e[11]=-(r*(o*f-c*d)-a*(n*f-s*d)+l*(n*c-s*o)),e[12]=-(a*(d*p-h*v)-l*(o*p-u*v)+m*(o*h-u*d)),e[13]=r*(d*p-h*v)-l*(n*p-i*v)+m*(n*h-i*d),e[14]=-(r*(o*p-u*v)-a*(n*p-i*v)+m*(n*u-i*o)),e[15]=r*(o*h-u*d)-a*(n*h-i*d)+l*(n*u-i*o),e}function f(e){var t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],a=e[5],o=e[6],u=e[7],c=e[8],l=e[9],d=e[10],h=e[11],f=e[12],m=e[13],v=e[14],p=e[15];return(t*a-r*s)*(d*p-h*v)-(t*o-n*s)*(l*p-h*m)+(t*u-i*s)*(l*v-d*m)+(r*o-n*a)*(c*p-h*f)-(r*u-i*a)*(c*v-d*f)+(n*u-i*o)*(c*m-l*f)}function m(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5],c=t[6],l=t[7],d=t[8],h=t[9],f=t[10],m=t[11],v=t[12],p=t[13],E=t[14],_=t[15],g=r[0],S=r[1],T=r[2],b=r[3];return e[0]=g*n+S*o+T*d+b*v,e[1]=g*i+S*u+T*h+b*p,e[2]=g*s+S*c+T*f+b*E,e[3]=g*a+S*l+T*m+b*_,g=r[4],S=r[5],T=r[6],b=r[7],e[4]=g*n+S*o+T*d+b*v,e[5]=g*i+S*u+T*h+b*p,e[6]=g*s+S*c+T*f+b*E,e[7]=g*a+S*l+T*m+b*_,g=r[8],S=r[9],T=r[10],b=r[11],e[8]=g*n+S*o+T*d+b*v,e[9]=g*i+S*u+T*h+b*p,e[10]=g*s+S*c+T*f+b*E,e[11]=g*a+S*l+T*m+b*_,g=r[12],S=r[13],T=r[14],b=r[15],e[12]=g*n+S*o+T*d+b*v,e[13]=g*i+S*u+T*h+b*p,e[14]=g*s+S*c+T*f+b*E,e[15]=g*a+S*l+T*m+b*_,e}function v(e,t,r){var n=r[0],i=r[1],s=r[2],a=void 0,o=void 0,u=void 0,c=void 0,l=void 0,d=void 0,h=void 0,f=void 0,m=void 0,v=void 0,p=void 0,E=void 0;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*s+t[12],e[13]=t[1]*n+t[5]*i+t[9]*s+t[13],e[14]=t[2]*n+t[6]*i+t[10]*s+t[14],e[15]=t[3]*n+t[7]*i+t[11]*s+t[15]):(a=t[0],o=t[1],u=t[2],c=t[3],l=t[4],d=t[5],h=t[6],f=t[7],m=t[8],v=t[9],p=t[10],E=t[11],e[0]=a,e[1]=o,e[2]=u,e[3]=c,e[4]=l,e[5]=d,e[6]=h,e[7]=f,e[8]=m,e[9]=v,e[10]=p,e[11]=E,e[12]=a*n+l*i+m*s+t[12],e[13]=o*n+d*i+v*s+t[13],e[14]=u*n+h*i+p*s+t[14],e[15]=c*n+f*i+E*s+t[15]),e}function p(e,t,r){var n=r[0],i=r[1],s=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function E(e,t,r,i){var s,a,o,u,c,l,d,h,f,m,v,p,E,_,g,S,T,b,R,j,y,A,w,P,O=i[0],C=i[1],D=i[2],L=Math.sqrt(O*O+C*C+D*D);return L<n.EPSILON?null:(O*=L=1/L,C*=L,D*=L,s=Math.sin(r),o=1-(a=Math.cos(r)),u=t[0],c=t[1],l=t[2],d=t[3],h=t[4],f=t[5],m=t[6],v=t[7],p=t[8],E=t[9],_=t[10],g=t[11],S=O*O*o+a,T=C*O*o+D*s,b=D*O*o-C*s,R=O*C*o-D*s,j=C*C*o+a,y=D*C*o+O*s,A=O*D*o+C*s,w=C*D*o-O*s,P=D*D*o+a,e[0]=u*S+h*T+p*b,e[1]=c*S+f*T+E*b,e[2]=l*S+m*T+_*b,e[3]=d*S+v*T+g*b,e[4]=u*R+h*j+p*y,e[5]=c*R+f*j+E*y,e[6]=l*R+m*j+_*y,e[7]=d*R+v*j+g*y,e[8]=u*A+h*w+p*P,e[9]=c*A+f*w+E*P,e[10]=l*A+m*w+_*P,e[11]=d*A+v*w+g*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function _(e,t,r){var n=Math.sin(r),i=Math.cos(r),s=t[4],a=t[5],o=t[6],u=t[7],c=t[8],l=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*n,e[5]=a*i+l*n,e[6]=o*i+d*n,e[7]=u*i+h*n,e[8]=c*i-s*n,e[9]=l*i-a*n,e[10]=d*i-o*n,e[11]=h*i-u*n,e}function g(e,t,r){var n=Math.sin(r),i=Math.cos(r),s=t[0],a=t[1],o=t[2],u=t[3],c=t[8],l=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*n,e[1]=a*i-l*n,e[2]=o*i-d*n,e[3]=u*i-h*n,e[8]=s*n+c*i,e[9]=a*n+l*i,e[10]=o*n+d*i,e[11]=u*n+h*i,e}function S(e,t,r){var n=Math.sin(r),i=Math.cos(r),s=t[0],a=t[1],o=t[2],u=t[3],c=t[4],l=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*n,e[1]=a*i+l*n,e[2]=o*i+d*n,e[3]=u*i+h*n,e[4]=c*i-s*n,e[5]=l*i-a*n,e[6]=d*i-o*n,e[7]=h*i-u*n,e}function T(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function b(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R(e,t,r){var i,s,a,o=r[0],u=r[1],c=r[2],l=Math.sqrt(o*o+u*u+c*c);return l<n.EPSILON?null:(o*=l=1/l,u*=l,c*=l,i=Math.sin(t),a=1-(s=Math.cos(t)),e[0]=o*o*a+s,e[1]=u*o*a+c*i,e[2]=c*o*a-u*i,e[3]=0,e[4]=o*u*a-c*i,e[5]=u*u*a+s,e[6]=c*u*a+o*i,e[7]=0,e[8]=o*c*a+u*i,e[9]=u*c*a-o*i,e[10]=c*c*a+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function j(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function y(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function w(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=n+n,u=i+i,c=s+s,l=n*o,d=n*u,h=n*c,f=i*u,m=i*c,v=s*c,p=a*o,E=a*u,_=a*c;return e[0]=1-(f+v),e[1]=d+_,e[2]=h-E,e[3]=0,e[4]=d-_,e[5]=1-(l+v),e[6]=m+p,e[7]=0,e[8]=h+E,e[9]=m-p,e[10]=1-(l+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function P(e,t){var r=new n.ARRAY_TYPE(3),i=-t[0],s=-t[1],a=-t[2],o=t[3],u=t[4],c=t[5],l=t[6],d=t[7],h=i*i+s*s+a*a+o*o;return h>0?(r[0]=2*(u*o+d*i+c*a-l*s)/h,r[1]=2*(c*o+d*s+l*i-u*a)/h,r[2]=2*(l*o+d*a+u*s-c*i)/h):(r[0]=2*(u*o+d*i+c*a-l*s),r[1]=2*(c*o+d*s+l*i-u*a),r[2]=2*(l*o+d*a+u*s-c*i)),w(e,t,r),e}function O(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function C(e,t){var r=t[0],n=t[1],i=t[2],s=t[4],a=t[5],o=t[6],u=t[8],c=t[9],l=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(s*s+a*a+o*o),e[2]=Math.sqrt(u*u+c*c+l*l),e}function D(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function L(e,t,r,n){var i=t[0],s=t[1],a=t[2],o=t[3],u=i+i,c=s+s,l=a+a,d=i*u,h=i*c,f=i*l,m=s*c,v=s*l,p=a*l,E=o*u,_=o*c,g=o*l,S=n[0],T=n[1],b=n[2];return e[0]=(1-(m+p))*S,e[1]=(h+g)*S,e[2]=(f-_)*S,e[3]=0,e[4]=(h-g)*T,e[5]=(1-(d+p))*T,e[6]=(v+E)*T,e[7]=0,e[8]=(f+_)*b,e[9]=(v-E)*b,e[10]=(1-(d+m))*b,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function x(e,t,r,n,i){var s=t[0],a=t[1],o=t[2],u=t[3],c=s+s,l=a+a,d=o+o,h=s*c,f=s*l,m=s*d,v=a*l,p=a*d,E=o*d,_=u*c,g=u*l,S=u*d,T=n[0],b=n[1],R=n[2],j=i[0],y=i[1],A=i[2],w=(1-(v+E))*T,P=(f+S)*T,O=(m-g)*T,C=(f-S)*b,D=(1-(h+E))*b,L=(p+_)*b,x=(m+g)*R,I=(p-_)*R,M=(1-(h+v))*R;return e[0]=w,e[1]=P,e[2]=O,e[3]=0,e[4]=C,e[5]=D,e[6]=L,e[7]=0,e[8]=x,e[9]=I,e[10]=M,e[11]=0,e[12]=r[0]+j-(w*j+C*y+x*A),e[13]=r[1]+y-(P*j+D*y+I*A),e[14]=r[2]+A-(O*j+L*y+M*A),e[15]=1,e}function I(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=r+r,o=n+n,u=i+i,c=r*a,l=n*a,d=n*o,h=i*a,f=i*o,m=i*u,v=s*a,p=s*o,E=s*u;return e[0]=1-d-m,e[1]=l+E,e[2]=h-p,e[3]=0,e[4]=l-E,e[5]=1-c-m,e[6]=f+v,e[7]=0,e[8]=h+p,e[9]=f-v,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t,r,n,i,s,a){var o=1/(r-t),u=1/(i-n),c=1/(s-a);return e[0]=2*s*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*u,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(i+n)*u,e[10]=(a+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*s*2*c,e[15]=0,e}function G(e,t,r,n,i){var s=1/Math.tan(t/2),a=void 0;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}function F(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+o),c=2/(i+s);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-o)*u*.5,e[9]=(i-s)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function N(e,t,r,n,i,s,a){var o=1/(t-r),u=1/(n-i),c=1/(s-a);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*o,e[13]=(i+n)*u,e[14]=(a+s)*c,e[15]=1,e}function B(e,t,r,i){var s=void 0,a=void 0,o=void 0,u=void 0,l=void 0,d=void 0,h=void 0,f=void 0,m=void 0,v=void 0,p=t[0],E=t[1],_=t[2],g=i[0],S=i[1],T=i[2],b=r[0],R=r[1],j=r[2];return Math.abs(p-b)<n.EPSILON&&Math.abs(E-R)<n.EPSILON&&Math.abs(_-j)<n.EPSILON?c(e):(h=p-b,f=E-R,m=_-j,s=S*(m*=v=1/Math.sqrt(h*h+f*f+m*m))-T*(f*=v),a=T*(h*=v)-g*m,o=g*f-S*h,(v=Math.sqrt(s*s+a*a+o*o))?(s*=v=1/v,a*=v,o*=v):(s=0,a=0,o=0),u=f*o-m*a,l=m*s-h*o,d=h*a-f*s,(v=Math.sqrt(u*u+l*l+d*d))?(u*=v=1/v,l*=v,d*=v):(u=0,l=0,d=0),e[0]=s,e[1]=u,e[2]=h,e[3]=0,e[4]=a,e[5]=l,e[6]=f,e[7]=0,e[8]=o,e[9]=d,e[10]=m,e[11]=0,e[12]=-(s*p+a*E+o*_),e[13]=-(u*p+l*E+d*_),e[14]=-(h*p+f*E+m*_),e[15]=1,e)}function U(e,t,r,n){var i=t[0],s=t[1],a=t[2],o=n[0],u=n[1],c=n[2],l=i-r[0],d=s-r[1],h=a-r[2],f=l*l+d*d+h*h;f>0&&(l*=f=1/Math.sqrt(f),d*=f,h*=f);var m=u*h-c*d,v=c*l-o*h,p=o*d-u*l;return(f=m*m+v*v+p*p)>0&&(m*=f=1/Math.sqrt(f),v*=f,p*=f),e[0]=m,e[1]=v,e[2]=p,e[3]=0,e[4]=d*p-h*v,e[5]=h*m-l*p,e[6]=l*v-d*m,e[7]=0,e[8]=l,e[9]=d,e[10]=h,e[11]=0,e[12]=i,e[13]=s,e[14]=a,e[15]=1,e}function V(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function k(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function H(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function q(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function z(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function W(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function Y(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function X(e,t){var r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],d=e[8],h=e[9],f=e[10],m=e[11],v=e[12],p=e[13],E=e[14],_=e[15],g=t[0],S=t[1],T=t[2],b=t[3],R=t[4],j=t[5],y=t[6],A=t[7],w=t[8],P=t[9],O=t[10],C=t[11],D=t[12],L=t[13],x=t[14],I=t[15];return Math.abs(r-g)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(i-S)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(s-T)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(o-R)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(u-j)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-A)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(d-w)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(h-P)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(f-O)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(m-C)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(v-D)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(p-L)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(E-x)<=n.EPSILON*Math.max(1,Math.abs(E),Math.abs(x))&&Math.abs(_-I)<=n.EPSILON*Math.max(1,Math.abs(_),Math.abs(I))}var K=m,Q=q},"../node_modules/gl-matrix/lib/gl-matrix/quat.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return o}),r.d(t,"identity",function(){return u}),r.d(t,"setAxisAngle",function(){return c}),r.d(t,"getAxisAngle",function(){return l}),r.d(t,"multiply",function(){return d}),r.d(t,"rotateX",function(){return h}),r.d(t,"rotateY",function(){return f}),r.d(t,"rotateZ",function(){return m}),r.d(t,"calculateW",function(){return v}),r.d(t,"slerp",function(){return p}),r.d(t,"random",function(){return E}),r.d(t,"invert",function(){return _}),r.d(t,"conjugate",function(){return g}),r.d(t,"fromMat3",function(){return S}),r.d(t,"fromEuler",function(){return T}),r.d(t,"str",function(){return b}),r.d(t,"clone",function(){return O}),r.d(t,"fromValues",function(){return C}),r.d(t,"copy",function(){return D}),r.d(t,"set",function(){return L}),r.d(t,"add",function(){return x}),r.d(t,"mul",function(){return I}),r.d(t,"scale",function(){return M}),r.d(t,"dot",function(){return G}),r.d(t,"lerp",function(){return F}),r.d(t,"length",function(){return N}),r.d(t,"len",function(){return B}),r.d(t,"squaredLength",function(){return U}),r.d(t,"sqrLen",function(){return V}),r.d(t,"normalize",function(){return k}),r.d(t,"exactEquals",function(){return H}),r.d(t,"equals",function(){return q}),r.d(t,"rotationTo",function(){return z}),r.d(t,"sqlerp",function(){return W}),r.d(t,"setAxes",function(){return Y});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js"),i=r("../node_modules/gl-matrix/lib/gl-matrix/mat3.js"),s=r("../node_modules/gl-matrix/lib/gl-matrix/vec3.js"),a=r("../node_modules/gl-matrix/lib/gl-matrix/vec4.js");function o(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function u(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function c(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function l(e,t){var r=2*Math.acos(t[3]),i=Math.sin(r/2);return i>n.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),r}function d(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+a*o+i*c-s*u,e[1]=i*l+a*u+s*o-n*c,e[2]=s*l+a*c+n*u-i*o,e[3]=a*l-n*o-i*u-s*c,e}function h(e,t,r){r*=.5;var n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),u=Math.cos(r);return e[0]=n*u+a*o,e[1]=i*u+s*o,e[2]=s*u-i*o,e[3]=a*u-n*o,e}function f(e,t,r){r*=.5;var n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),u=Math.cos(r);return e[0]=n*u-s*o,e[1]=i*u+a*o,e[2]=s*u+n*o,e[3]=a*u-i*o,e}function m(e,t,r){r*=.5;var n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),u=Math.cos(r);return e[0]=n*u+i*o,e[1]=i*u-n*o,e[2]=s*u+a*o,e[3]=a*u-s*o,e}function v(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function p(e,t,r,i){var s=t[0],a=t[1],o=t[2],u=t[3],c=r[0],l=r[1],d=r[2],h=r[3],f=void 0,m=void 0,v=void 0,p=void 0,E=void 0;return(m=s*c+a*l+o*d+u*h)<0&&(m=-m,c=-c,l=-l,d=-d,h=-h),1-m>n.EPSILON?(f=Math.acos(m),v=Math.sin(f),p=Math.sin((1-i)*f)/v,E=Math.sin(i*f)/v):(p=1-i,E=i),e[0]=p*s+E*c,e[1]=p*a+E*l,e[2]=p*o+E*d,e[3]=p*u+E*h,e}function E(e){var t=n.RANDOM(),r=n.RANDOM(),i=n.RANDOM(),s=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=s*Math.sin(2*Math.PI*r),e[1]=s*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*i),e[3]=a*Math.cos(2*Math.PI*i),e}function _(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=r*r+n*n+i*i+s*s,o=a?1/a:0;return e[0]=-r*o,e[1]=-n*o,e[2]=-i*o,e[3]=s*o,e}function g(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function S(e,t){var r=t[0]+t[4]+t[8],n=void 0;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var s=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*s+s]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*s+a]-t[3*a+s])*n,e[s]=(t[3*s+i]+t[3*i+s])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}function T(e,t,r,n){var i=.5*Math.PI/180;t*=i,r*=i,n*=i;var s=Math.sin(t),a=Math.cos(t),o=Math.sin(r),u=Math.cos(r),c=Math.sin(n),l=Math.cos(n);return e[0]=s*u*l-a*o*c,e[1]=a*o*l+s*u*c,e[2]=a*u*c-s*o*l,e[3]=a*u*l+s*o*c,e}function b(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var R,j,y,A,w,P,O=a.clone,C=a.fromValues,D=a.copy,L=a.set,x=a.add,I=d,M=a.scale,G=a.dot,F=a.lerp,N=a.length,B=N,U=a.squaredLength,V=U,k=a.normalize,H=a.exactEquals,q=a.equals,z=(R=s.create(),j=s.fromValues(1,0,0),y=s.fromValues(0,1,0),function(e,t,r){var n=s.dot(t,r);return n<-.999999?(s.cross(R,j,t),s.len(R)<1e-6&&s.cross(R,y,t),s.normalize(R,R),c(e,R,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(s.cross(R,t,r),e[0]=R[0],e[1]=R[1],e[2]=R[2],e[3]=1+n,k(e,e))}),W=(A=o(),w=o(),function(e,t,r,n,i,s){return p(A,t,i,s),p(w,r,n,s),p(e,A,w,2*s*(1-s)),e}),Y=(P=i.create(),function(e,t,r,n){return P[0]=r[0],P[3]=r[1],P[6]=r[2],P[1]=n[0],P[4]=n[1],P[7]=n[2],P[2]=-t[0],P[5]=-t[1],P[8]=-t[2],k(e,S(e,P))})},"../node_modules/gl-matrix/lib/gl-matrix/quat2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return a}),r.d(t,"clone",function(){return o}),r.d(t,"fromValues",function(){return u}),r.d(t,"fromRotationTranslationValues",function(){return c}),r.d(t,"fromRotationTranslation",function(){return l}),r.d(t,"fromTranslation",function(){return d}),r.d(t,"fromRotation",function(){return h}),r.d(t,"fromMat4",function(){return f}),r.d(t,"copy",function(){return m}),r.d(t,"identity",function(){return v}),r.d(t,"set",function(){return p}),r.d(t,"getReal",function(){return E}),r.d(t,"getDual",function(){return _}),r.d(t,"setReal",function(){return g}),r.d(t,"setDual",function(){return S}),r.d(t,"getTranslation",function(){return T}),r.d(t,"translate",function(){return b}),r.d(t,"rotateX",function(){return R}),r.d(t,"rotateY",function(){return j}),r.d(t,"rotateZ",function(){return y}),r.d(t,"rotateByQuatAppend",function(){return A}),r.d(t,"rotateByQuatPrepend",function(){return w}),r.d(t,"rotateAroundAxis",function(){return P}),r.d(t,"add",function(){return O}),r.d(t,"multiply",function(){return C}),r.d(t,"mul",function(){return D}),r.d(t,"scale",function(){return L}),r.d(t,"dot",function(){return x}),r.d(t,"lerp",function(){return I}),r.d(t,"invert",function(){return M}),r.d(t,"conjugate",function(){return G}),r.d(t,"length",function(){return F}),r.d(t,"len",function(){return N}),r.d(t,"squaredLength",function(){return B}),r.d(t,"sqrLen",function(){return U}),r.d(t,"normalize",function(){return V}),r.d(t,"str",function(){return k}),r.d(t,"exactEquals",function(){return H}),r.d(t,"equals",function(){return q});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js"),i=r("../node_modules/gl-matrix/lib/gl-matrix/quat.js"),s=r("../node_modules/gl-matrix/lib/gl-matrix/mat4.js");function a(){var e=new n.ARRAY_TYPE(8);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function o(e){var t=new n.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function u(e,t,r,i,s,a,o,u){var c=new n.ARRAY_TYPE(8);return c[0]=e,c[1]=t,c[2]=r,c[3]=i,c[4]=s,c[5]=a,c[6]=o,c[7]=u,c}function c(e,t,r,i,s,a,o){var u=new n.ARRAY_TYPE(8);u[0]=e,u[1]=t,u[2]=r,u[3]=i;var c=.5*s,l=.5*a,d=.5*o;return u[4]=c*i+l*r-d*t,u[5]=l*i+d*e-c*r,u[6]=d*i+c*t-l*e,u[7]=-c*e-l*t-d*r,u}function l(e,t,r){var n=.5*r[0],i=.5*r[1],s=.5*r[2],a=t[0],o=t[1],u=t[2],c=t[3];return e[0]=a,e[1]=o,e[2]=u,e[3]=c,e[4]=n*c+i*u-s*o,e[5]=i*c+s*a-n*u,e[6]=s*c+n*o-i*a,e[7]=-n*a-i*o-s*u,e}function d(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function f(e,t){var r=i.create();s.getRotation(r,t);var a=new n.ARRAY_TYPE(3);return s.getTranslation(a,t),l(e,r,a),e}function m(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function v(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function p(e,t,r,n,i,s,a,o,u){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=a,e[6]=o,e[7]=u,e}var E=i.copy;function _(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var g=i.copy;function S(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function T(e,t){var r=t[4],n=t[5],i=t[6],s=t[7],a=-t[0],o=-t[1],u=-t[2],c=t[3];return e[0]=2*(r*c+s*a+n*u-i*o),e[1]=2*(n*c+s*o+i*a-r*u),e[2]=2*(i*c+s*u+r*o-n*a),e}function b(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=.5*r[0],u=.5*r[1],c=.5*r[2],l=t[4],d=t[5],h=t[6],f=t[7];return e[0]=n,e[1]=i,e[2]=s,e[3]=a,e[4]=a*o+i*c-s*u+l,e[5]=a*u+s*o-n*c+d,e[6]=a*c+n*u-i*o+h,e[7]=-n*o-i*u-s*c+f,e}function R(e,t,r){var n=-t[0],s=-t[1],a=-t[2],o=t[3],u=t[4],c=t[5],l=t[6],d=t[7],h=u*o+d*n+c*a-l*s,f=c*o+d*s+l*n-u*a,m=l*o+d*a+u*s-c*n,v=d*o-u*n-c*s-l*a;return i.rotateX(e,t,r),n=e[0],s=e[1],a=e[2],o=e[3],e[4]=h*o+v*n+f*a-m*s,e[5]=f*o+v*s+m*n-h*a,e[6]=m*o+v*a+h*s-f*n,e[7]=v*o-h*n-f*s-m*a,e}function j(e,t,r){var n=-t[0],s=-t[1],a=-t[2],o=t[3],u=t[4],c=t[5],l=t[6],d=t[7],h=u*o+d*n+c*a-l*s,f=c*o+d*s+l*n-u*a,m=l*o+d*a+u*s-c*n,v=d*o-u*n-c*s-l*a;return i.rotateY(e,t,r),n=e[0],s=e[1],a=e[2],o=e[3],e[4]=h*o+v*n+f*a-m*s,e[5]=f*o+v*s+m*n-h*a,e[6]=m*o+v*a+h*s-f*n,e[7]=v*o-h*n-f*s-m*a,e}function y(e,t,r){var n=-t[0],s=-t[1],a=-t[2],o=t[3],u=t[4],c=t[5],l=t[6],d=t[7],h=u*o+d*n+c*a-l*s,f=c*o+d*s+l*n-u*a,m=l*o+d*a+u*s-c*n,v=d*o-u*n-c*s-l*a;return i.rotateZ(e,t,r),n=e[0],s=e[1],a=e[2],o=e[3],e[4]=h*o+v*n+f*a-m*s,e[5]=f*o+v*s+m*n-h*a,e[6]=m*o+v*a+h*s-f*n,e[7]=v*o-h*n-f*s-m*a,e}function A(e,t,r){var n=r[0],i=r[1],s=r[2],a=r[3],o=t[0],u=t[1],c=t[2],l=t[3];return e[0]=o*a+l*n+u*s-c*i,e[1]=u*a+l*i+c*n-o*s,e[2]=c*a+l*s+o*i-u*n,e[3]=l*a-o*n-u*i-c*s,o=t[4],u=t[5],c=t[6],l=t[7],e[4]=o*a+l*n+u*s-c*i,e[5]=u*a+l*i+c*n-o*s,e[6]=c*a+l*s+o*i-u*n,e[7]=l*a-o*n-u*i-c*s,e}function w(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+a*o+i*c-s*u,e[1]=i*l+a*u+s*o-n*c,e[2]=s*l+a*c+n*u-i*o,e[3]=a*l-n*o-i*u-s*c,o=r[4],u=r[5],c=r[6],l=r[7],e[4]=n*l+a*o+i*c-s*u,e[5]=i*l+a*u+s*o-n*c,e[6]=s*l+a*c+n*u-i*o,e[7]=a*l-n*o-i*u-s*c,e}function P(e,t,r,i){if(Math.abs(i)<n.EPSILON)return m(e,t);var s=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);i*=.5;var a=Math.sin(i),o=a*r[0]/s,u=a*r[1]/s,c=a*r[2]/s,l=Math.cos(i),d=t[0],h=t[1],f=t[2],v=t[3];e[0]=d*l+v*o+h*c-f*u,e[1]=h*l+v*u+f*o-d*c,e[2]=f*l+v*c+d*u-h*o,e[3]=v*l-d*o-h*u-f*c;var p=t[4],E=t[5],_=t[6],g=t[7];return e[4]=p*l+g*o+E*c-_*u,e[5]=E*l+g*u+_*o-p*c,e[6]=_*l+g*c+p*u-E*o,e[7]=g*l-p*o-E*u-_*c,e}function O(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e}function C(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3],o=r[4],u=r[5],c=r[6],l=r[7],d=t[4],h=t[5],f=t[6],m=t[7],v=r[0],p=r[1],E=r[2],_=r[3];return e[0]=n*_+a*v+i*E-s*p,e[1]=i*_+a*p+s*v-n*E,e[2]=s*_+a*E+n*p-i*v,e[3]=a*_-n*v-i*p-s*E,e[4]=n*l+a*o+i*c-s*u+d*_+m*v+h*E-f*p,e[5]=i*l+a*u+s*o-n*c+h*_+m*p+f*v-d*E,e[6]=s*l+a*c+n*u-i*o+f*_+m*E+d*p-h*v,e[7]=a*l-n*o-i*u-s*c+m*_-d*v-h*p-f*E,e}var D=C;function L(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e}var x=i.dot;function I(e,t,r,n){var i=1-n;return x(t,r)<0&&(n=-n),e[0]=t[0]*i+r[0]*n,e[1]=t[1]*i+r[1]*n,e[2]=t[2]*i+r[2]*n,e[3]=t[3]*i+r[3]*n,e[4]=t[4]*i+r[4]*n,e[5]=t[5]*i+r[5]*n,e[6]=t[6]*i+r[6]*n,e[7]=t[7]*i+r[7]*n,e}function M(e,t){var r=B(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e}function G(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var F=i.length,N=F,B=i.squaredLength,U=B;function V(e,t){var r=B(t);if(r>0){r=Math.sqrt(r);var n=t[0]/r,i=t[1]/r,s=t[2]/r,a=t[3]/r,o=t[4],u=t[5],c=t[6],l=t[7],d=n*o+i*u+s*c+a*l;e[0]=n,e[1]=i,e[2]=s,e[3]=a,e[4]=(o-n*d)/r,e[5]=(u-i*d)/r,e[6]=(c-s*d)/r,e[7]=(l-a*d)/r}return e}function k(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function H(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function q(e,t){var r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7],d=t[0],h=t[1],f=t[2],m=t[3],v=t[4],p=t[5],E=t[6],_=t[7];return Math.abs(r-d)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-h)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-f)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(a-m)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-v)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-p)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(c-E)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-_)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))}},"../node_modules/gl-matrix/lib/gl-matrix/vec2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return i}),r.d(t,"clone",function(){return s}),r.d(t,"fromValues",function(){return a}),r.d(t,"copy",function(){return o}),r.d(t,"set",function(){return u}),r.d(t,"add",function(){return c}),r.d(t,"subtract",function(){return l}),r.d(t,"multiply",function(){return d}),r.d(t,"divide",function(){return h}),r.d(t,"ceil",function(){return f}),r.d(t,"floor",function(){return m}),r.d(t,"min",function(){return v}),r.d(t,"max",function(){return p}),r.d(t,"round",function(){return E}),r.d(t,"scale",function(){return _}),r.d(t,"scaleAndAdd",function(){return g}),r.d(t,"distance",function(){return S}),r.d(t,"squaredDistance",function(){return T}),r.d(t,"length",function(){return b}),r.d(t,"squaredLength",function(){return R}),r.d(t,"negate",function(){return j}),r.d(t,"inverse",function(){return y}),r.d(t,"normalize",function(){return A}),r.d(t,"dot",function(){return w}),r.d(t,"cross",function(){return P}),r.d(t,"lerp",function(){return O}),r.d(t,"random",function(){return C}),r.d(t,"transformMat2",function(){return D}),r.d(t,"transformMat2d",function(){return L}),r.d(t,"transformMat3",function(){return x}),r.d(t,"transformMat4",function(){return I}),r.d(t,"rotate",function(){return M}),r.d(t,"angle",function(){return G}),r.d(t,"str",function(){return F}),r.d(t,"exactEquals",function(){return N}),r.d(t,"equals",function(){return B}),r.d(t,"len",function(){return V}),r.d(t,"sub",function(){return k}),r.d(t,"mul",function(){return H}),r.d(t,"div",function(){return q}),r.d(t,"dist",function(){return z}),r.d(t,"sqrDist",function(){return W}),r.d(t,"sqrLen",function(){return Y}),r.d(t,"forEach",function(){return X});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(2);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function s(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function a(e,t){var r=new n.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r}function o(e,t){return e[0]=t[0],e[1]=t[1],e}function u(e,t,r){return e[0]=t,e[1]=r,e}function c(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function l(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function d(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function h(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function f(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function v(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function p(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function E(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function _(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function g(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function S(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function T(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function b(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function R(e){var t=e[0],r=e[1];return t*t+r*r}function j(e,t){return e[0]=-t[0],e[1]=-t[1],e}function y(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function A(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function w(e,t){return e[0]*t[0]+e[1]*t[1]}function P(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function O(e,t,r,n){var i=t[0],s=t[1];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e}function C(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function D(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function L(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function x(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function I(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}function M(e,t,r,n){var i=t[0]-r[0],s=t[1]-r[1],a=Math.sin(n),o=Math.cos(n);return e[0]=i*o-s*a+r[0],e[1]=i*a+s*o+r[1],e}function G(e,t){var r=e[0],n=e[1],i=t[0],s=t[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));var o=i*i+s*s;o>0&&(o=1/Math.sqrt(o));var u=(r*i+n*s)*a*o;return u>1?0:u<-1?Math.PI:Math.acos(u)}function F(e){return"vec2("+e[0]+", "+e[1]+")"}function N(e,t){return e[0]===t[0]&&e[1]===t[1]}function B(e,t){var r=e[0],i=e[1],s=t[0],a=t[1];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-a)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))}var U,V=b,k=l,H=d,q=h,z=S,W=T,Y=R,X=(U=i(),function(e,t,r,n,i,s){var a=void 0,o=void 0;for(t||(t=2),r||(r=0),o=n?Math.min(n*t+r,e.length):e.length,a=r;a<o;a+=t)U[0]=e[a],U[1]=e[a+1],i(U,U,s),e[a]=U[0],e[a+1]=U[1];return e})},"../node_modules/gl-matrix/lib/gl-matrix/vec3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return i}),r.d(t,"clone",function(){return s}),r.d(t,"length",function(){return a}),r.d(t,"fromValues",function(){return o}),r.d(t,"copy",function(){return u}),r.d(t,"set",function(){return c}),r.d(t,"add",function(){return l}),r.d(t,"subtract",function(){return d}),r.d(t,"multiply",function(){return h}),r.d(t,"divide",function(){return f}),r.d(t,"ceil",function(){return m}),r.d(t,"floor",function(){return v}),r.d(t,"min",function(){return p}),r.d(t,"max",function(){return E}),r.d(t,"round",function(){return _}),r.d(t,"scale",function(){return g}),r.d(t,"scaleAndAdd",function(){return S}),r.d(t,"distance",function(){return T}),r.d(t,"squaredDistance",function(){return b}),r.d(t,"squaredLength",function(){return R}),r.d(t,"negate",function(){return j}),r.d(t,"inverse",function(){return y}),r.d(t,"normalize",function(){return A}),r.d(t,"dot",function(){return w}),r.d(t,"cross",function(){return P}),r.d(t,"lerp",function(){return O}),r.d(t,"hermite",function(){return C}),r.d(t,"bezier",function(){return D}),r.d(t,"random",function(){return L}),r.d(t,"transformMat4",function(){return x}),r.d(t,"transformMat3",function(){return I}),r.d(t,"transformQuat",function(){return M}),r.d(t,"rotateX",function(){return G}),r.d(t,"rotateY",function(){return F}),r.d(t,"rotateZ",function(){return N}),r.d(t,"angle",function(){return B}),r.d(t,"str",function(){return U}),r.d(t,"exactEquals",function(){return V}),r.d(t,"equals",function(){return k}),r.d(t,"sub",function(){return q}),r.d(t,"mul",function(){return z}),r.d(t,"div",function(){return W}),r.d(t,"dist",function(){return Y}),r.d(t,"sqrDist",function(){return X}),r.d(t,"len",function(){return K}),r.d(t,"sqrLen",function(){return Q}),r.d(t,"forEach",function(){return Z});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function s(e){var t=new n.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function a(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function o(e,t,r){var i=new n.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=r,i}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function c(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function l(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function d(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function h(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function f(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function m(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function v(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function p(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function E(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function _(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function g(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function S(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function T(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function b(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function R(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function j(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function y(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function A(e,t){var r=t[0],n=t[1],i=t[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function w(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function P(e,t,r){var n=t[0],i=t[1],s=t[2],a=r[0],o=r[1],u=r[2];return e[0]=i*u-s*o,e[1]=s*a-n*u,e[2]=n*o-i*a,e}function O(e,t,r,n){var i=t[0],s=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=a+n*(r[2]-a),e}function C(e,t,r,n,i,s){var a=s*s,o=a*(2*s-3)+1,u=a*(s-2)+s,c=a*(s-1),l=a*(3-2*s);return e[0]=t[0]*o+r[0]*u+n[0]*c+i[0]*l,e[1]=t[1]*o+r[1]*u+n[1]*c+i[1]*l,e[2]=t[2]*o+r[2]*u+n[2]*c+i[2]*l,e}function D(e,t,r,n,i,s){var a=1-s,o=a*a,u=s*s,c=o*a,l=3*s*o,d=3*u*a,h=u*s;return e[0]=t[0]*c+r[0]*l+n[0]*d+i[0]*h,e[1]=t[1]*c+r[1]*l+n[1]*d+i[1]*h,e[2]=t[2]*c+r[2]*l+n[2]*d+i[2]*h,e}function L(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*s,e[1]=Math.sin(r)*s,e[2]=i*t,e}function x(e,t,r){var n=t[0],i=t[1],s=t[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,e}function I(e,t,r){var n=t[0],i=t[1],s=t[2];return e[0]=n*r[0]+i*r[3]+s*r[6],e[1]=n*r[1]+i*r[4]+s*r[7],e[2]=n*r[2]+i*r[5]+s*r[8],e}function M(e,t,r){var n=r[0],i=r[1],s=r[2],a=r[3],o=t[0],u=t[1],c=t[2],l=i*c-s*u,d=s*o-n*c,h=n*u-i*o,f=i*h-s*d,m=s*l-n*h,v=n*d-i*l,p=2*a;return l*=p,d*=p,h*=p,f*=2,m*=2,v*=2,e[0]=o+l+f,e[1]=u+d+m,e[2]=c+h+v,e}function G(e,t,r,n){var i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function F(e,t,r,n){var i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function N(e,t,r,n){var i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function B(e,t){var r=o(e[0],e[1],e[2]),n=o(t[0],t[1],t[2]);A(r,r),A(n,n);var i=w(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function U(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function V(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function k(e,t){var r=e[0],i=e[1],s=e[2],a=t[0],o=t[1],u=t[2];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-o)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-u)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))}var H,q=d,z=h,W=f,Y=T,X=b,K=a,Q=R,Z=(H=i(),function(e,t,r,n,i,s){var a=void 0,o=void 0;for(t||(t=3),r||(r=0),o=n?Math.min(n*t+r,e.length):e.length,a=r;a<o;a+=t)H[0]=e[a],H[1]=e[a+1],H[2]=e[a+2],i(H,H,s),e[a]=H[0],e[a+1]=H[1],e[a+2]=H[2];return e})},"../node_modules/gl-matrix/lib/gl-matrix/vec4.js":function(e,t,r){"use strict";r.r(t),r.d(t,"create",function(){return i}),r.d(t,"clone",function(){return s}),r.d(t,"fromValues",function(){return a}),r.d(t,"copy",function(){return o}),r.d(t,"set",function(){return u}),r.d(t,"add",function(){return c}),r.d(t,"subtract",function(){return l}),r.d(t,"multiply",function(){return d}),r.d(t,"divide",function(){return h}),r.d(t,"ceil",function(){return f}),r.d(t,"floor",function(){return m}),r.d(t,"min",function(){return v}),r.d(t,"max",function(){return p}),r.d(t,"round",function(){return E}),r.d(t,"scale",function(){return _}),r.d(t,"scaleAndAdd",function(){return g}),r.d(t,"distance",function(){return S}),r.d(t,"squaredDistance",function(){return T}),r.d(t,"length",function(){return b}),r.d(t,"squaredLength",function(){return R}),r.d(t,"negate",function(){return j}),r.d(t,"inverse",function(){return y}),r.d(t,"normalize",function(){return A}),r.d(t,"dot",function(){return w}),r.d(t,"lerp",function(){return P}),r.d(t,"random",function(){return O}),r.d(t,"transformMat4",function(){return C}),r.d(t,"transformQuat",function(){return D}),r.d(t,"str",function(){return L}),r.d(t,"exactEquals",function(){return x}),r.d(t,"equals",function(){return I}),r.d(t,"sub",function(){return G}),r.d(t,"mul",function(){return F}),r.d(t,"div",function(){return N}),r.d(t,"dist",function(){return B}),r.d(t,"sqrDist",function(){return U}),r.d(t,"len",function(){return V}),r.d(t,"sqrLen",function(){return k}),r.d(t,"forEach",function(){return H});var n=r("../node_modules/gl-matrix/lib/gl-matrix/common.js");function i(){var e=new n.ARRAY_TYPE(4);return n.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function s(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(e,t,r,i){var s=new n.ARRAY_TYPE(4);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function u(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function c(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function l(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function d(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function h(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function f(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function m(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function v(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function p(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function E(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function _(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function g(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function S(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+s*s)}function T(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return r*r+n*n+i*i+s*s}function b(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}function R(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function j(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function y(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function A(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=s*a),e}function w(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function P(e,t,r,n){var i=t[0],s=t[1],a=t[2],o=t[3];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=a+n*(r[2]-a),e[3]=o+n*(r[3]-o),e}function O(e,t){var r,i,s,a,o,u;t=t||1;do{o=(r=2*n.RANDOM()-1)*r+(i=2*n.RANDOM()-1)*i}while(o>=1);do{u=(s=2*n.RANDOM()-1)*s+(a=2*n.RANDOM()-1)*a}while(u>=1);var c=Math.sqrt((1-o)/u);return e[0]=t*r,e[1]=t*i,e[2]=t*s*c,e[3]=t*a*c,e}function C(e,t,r){var n=t[0],i=t[1],s=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,e}function D(e,t,r){var n=t[0],i=t[1],s=t[2],a=r[0],o=r[1],u=r[2],c=r[3],l=c*n+o*s-u*i,d=c*i+u*n-a*s,h=c*s+a*i-o*n,f=-a*n-o*i-u*s;return e[0]=l*c+f*-a+d*-u-h*-o,e[1]=d*c+f*-o+h*-a-l*-u,e[2]=h*c+f*-u+l*-o-d*-a,e[3]=t[3],e}function L(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function x(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function I(e,t){var r=e[0],i=e[1],s=e[2],a=e[3],o=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-c)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))}var M,G=l,F=d,N=h,B=S,U=T,V=b,k=R,H=(M=i(),function(e,t,r,n,i,s){var a=void 0,o=void 0;for(t||(t=4),r||(r=0),o=n?Math.min(n*t+r,e.length):e.length,a=r;a<o;a+=t)M[0]=e[a],M[1]=e[a+1],M[2]=e[a+2],M[3]=e[a+3],i(M,M,s),e[a]=M[0],e[a+1]=M[1],e[a+2]=M[2],e[a+3]=M[3];return e})},"../node_modules/regenerator-runtime/runtime.js":function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function u(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,s=Object.create(i.prototype),a=new w(n||[]);return s._invoke=function(e,t,r){var n=l;return function(i,s){if(n===h)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw s;return O()}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var o=j(a,r);if(o){if(o===m)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(e,t,r);if("normal"===u.type){if(n=r.done?f:d,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=f,r.method="throw",r.arg=u.arg)}}}(e,r,a),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",d="suspendedYield",h="executing",f="completed",m={};function v(){}function p(){}function E(){}var _={};_[s]=function(){return this};var g=Object.getPrototypeOf,S=g&&g(g(P([])));S&&S!==r&&n.call(S,s)&&(_=S);var T=E.prototype=v.prototype=Object.create(_);function b(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function R(e){var t;this._invoke=function(r,i){function s(){return new Promise(function(t,s){!function t(r,i,s,a){var o=c(e[r],e,i);if("throw"!==o.type){var u=o.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,s,a)},function(e){t("throw",e,s,a)}):Promise.resolve(l).then(function(e){u.value=e,s(u)},function(e){return t("throw",e,s,a)})}a(o.arg)}(r,i,t,s)})}return t=t?t.then(s,s):s()}}function j(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(n,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var s=i.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function P(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:O}}function O(){return{value:t,done:!0}}return p.prototype=T.constructor=E,E.constructor=p,E[o]=p.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},b(R.prototype),R.prototype[a]=function(){return this},e.AsyncIterator=R,e.async=function(t,r,n,i){var s=new R(u(t,r,n,i));return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},b(T),T[o]="Generator",T[s]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return o.type="throw",o.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},"../node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./config.js":function(e,t,r){"use strict";r.r(t),r.d(t,"config",function(){return d});var n=r("./core/index.js"),i=r("./curve/index.js"),s=r("./eve/index.js"),a=r("./interior/index.js"),o=r("./particle/index.js"),u=r("./sof/index.js"),c=r("./state/index.js"),l=r("./global/math/index.js");const d={debug:!0,device:{textureQuality:0,shaderQuality:"hi",antialiasing:!0,anisotropicFiltering:!0,webgl2:!0,webvr:!1,performanceClock:!0},resMan:{systemMirror:!1,autoPurgeResources:!0,purgeTime:60,maxPrepareTime:.05},logger:{name:"CCPWGL2",history:50,throttle:10,display:!0,visible:{error:!0,warning:!0,log:!0,info:!0,debug:!0}},store:{paths:{res:"https://developers.eveonline.com/ccpwgl/assetpath/1097993/",cdn:"http://localhost:3000/"},extensions:{sm_hi:n.Tw2EffectRes,sm_lo:n.Tw2EffectRes,wbg:n.Tw2GeometryRes,png:n.Tw2TextureRes,dds:n.Tw2TextureRes,cube:n.Tw2TextureRes,mp4:n.Tw2VideoRes,ogg:n.Tw2VideoRes,webm:n.Tw2VideoRes,black:n.Tw2LoadingObject,red:n.Tw2LoadingObject},classes:[n,i,s,a,o,u,c],types:{float:n.Tw2FloatParameter,number:n.Tw2FloatParameter,texture:n.Tw2TextureParameter,vector2:n.Tw2Vector2Parameter,vector3:n.Tw2Vector3Parameter,vector4:n.Tw2Vector4Parameter,matrix4:n.Tw2Matrix4Parameter},variables:{WorldMat:l.mat4.create(),ViewMat:l.mat4.create(),ProjectionMat:l.mat4.create(),ViewProjectionMat:l.mat4.create(),ViewportSize:l.vec4.create(),Time:l.vec4.create(),u_DecalMatrix:l.mat4.create(),u_InvDecalMatrix:l.mat4.create(),EveSpaceSceneEnvMap:"",EnvMap1:"",EnvMap2:"",EnvMap3:"",ShadowLightness:0,OccluderValue:l.vec4.fromValues(1,1,0,0),LensflareFxOccScale:l.vec4.fromValues(1,1,0,0),LensflareFxDirectionScale:l.vec4.create()}}}},"./core/Tr2DistanceTracker.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2DistanceTracker",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"direction",n.vec3.create()),i(this,"targetPosition",n.vec3.create())}static black(e){return[["name",e.string],["direction",e.vector3],["targetPosition",e.vector3]]}}i(s,"__isStaging",4)},"./core/Tr2RuntimeInstanceData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2RuntimeInstanceData",function(){return o});var n=r("./global/index.js"),i=r("./core/vertex/index.js"),s=r("./particle/element/Tw2ParticleElementDeclaration.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends n.Tw2BaseClass{constructor(){super(...arguments),a(this,"_count",0),a(this,"_data",null),a(this,"_dirty",!0),a(this,"_declaration",null),a(this,"_vb",null),a(this,"_vertexStride",0)}GetMaxInstanceCount(){return this._data?this._data.length:1}SetElementLayout(e){this._vb&&(n.device.gl.deleteBuffer(this._vb),this._vb=null),this._vertexStride=0,this._declaration=new i.Tw2VertexDeclaration;for(let t=0;t<e.length;++t){const r=new s.Tw2ParticleElementDeclaration;r.elementType=e[t][0],r.dimension=e[t][2],r.usageIndex=e[t][1];const n=r.GetDeclaration();n.offset=4*this._vertexStride,this._declaration.elements.push(n),this._vertexStride+=r.dimension}this._declaration.RebuildHash()}SetData(e){this._declaration&&(this._data=e,this._count=this._data.length,this._dirty=!0,this.UpdateData())}SetItemElement(e,t,r){if(this._declaration.elements[t].elements>1)for(let n=0;n<this._declaration.elements[t].elements;++n)this._data[e][t][n]=r[n];else this._data[e][t]=r;this._dirty=!0}SetItemElementRef(e,t,r){this._data[e][t]=r,this._dirty=!0}GetItemElement(e,t){return this._data[e][t]}UpdateData(){if(!this._dirty||!this._declaration)return;const e=n.device.gl,t=new Float32Array(this._data.length*this._vertexStride);let r=0;for(let e=0;e<this._data.length;++e)for(let n=0;n<this._declaration.elements.length;++n)if(1===this._declaration.elements[n].elements)t[r++]=this._data[e][n];else for(let i=0;i<this._declaration.elements[n].elements;++i)t[r++]=this._data[e][n][i];this._vb||(this._vb=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this._dirty=!1}Unload(){this._vb&&(n.device.gl.deleteBuffer(this._vb),this._vb=null)}GetInstanceBuffer(){return this._vb}GetInstanceDeclaration(){return this._declaration}GetInstanceStride(){return 4*this._vertexStride}GetInstanceCount(){return this._count}static black(e){return[]}}},"./core/TriObserverLocal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriObserverLocal",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"front",n.vec3.create())}static black(e){return[["front",e.vector3]]}}i(s,"__isStaging",4)},"./core/Tw2Error.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Error",function(){return s}),r.d(t,"ErrStoreKeyReserved",function(){return c}),r.d(t,"ErrStoreValueInvalid",function(){return l}),r.d(t,"ErrStoreValueMissing",function(){return d}),r.d(t,"ErrStoreTypeInvalid",function(){return h}),r.d(t,"ErrStoreKeyProtected",function(){return f}),r.d(t,"ErrHTTPRequest",function(){return m}),r.d(t,"ErrHTTPRequestSend",function(){return v}),r.d(t,"ErrHTTPInstance",function(){return p}),r.d(t,"ErrHTTPStatus",function(){return E}),r.d(t,"ErrHTTPReadyState",function(){return _}),r.d(t,"ErrBinaryFormat",function(){return g}),r.d(t,"ErrBinaryReaderReadError",function(){return S}),r.d(t,"ErrBinaryObjectTypeNotFound",function(){return T}),r.d(t,"ErrGeometryMeshMissingParticleElement",function(){return b}),r.d(t,"ErrGeometryMeshElementComponentsMissing",function(){return R}),r.d(t,"ErrGeometryMeshAreaMissing",function(){return j}),r.d(t,"ErrGeometryMeshBoneNameInvalid",function(){return y}),r.d(t,"ErrGeometryMeshEffectBinding",function(){return A}),r.d(t,"ErrGeometryFileType",function(){return w}),r.d(t,"ErrResourcePrefixUnregistered",function(){return P}),r.d(t,"ErrResourcePrefixUndefined",function(){return O}),r.d(t,"ErrResourceExtensionUnregistered",function(){return C}),r.d(t,"ErrResourceExtensionUndefined",function(){return D}),r.d(t,"ErrResourceFormat",function(){return L}),r.d(t,"ErrShaderVersion",function(){return x}),r.d(t,"ErrShaderHeaderSize",function(){return I}),r.d(t,"ErrShaderPermutationValue",function(){return M}),r.d(t,"ErrShaderCompile",function(){return G}),r.d(t,"ErrShaderLink",function(){return F}),r.d(t,"ErrDeclarationValueType",function(){return N}),r.d(t,"ErrSingletonInstantiation",function(){return B}),r.d(t,"ErrAbstractClassMethod",function(){return U}),r.d(t,"ErrFeatureNotImplemented",function(){return V}),r.d(t,"ErrIndexBounds",function(){return k}),r.d(t,"ErrBindingValueUndefined",function(){return H}),r.d(t,"ErrBindingType",function(){return q}),r.d(t,"ErrBindingReference",function(){return z});var n=r("./global/util/index.js");const i=Object(n.isFunction)(Error.captureStackTrace);class s extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Undefined error";"string"==typeof e?(t=e,e={}):e.message&&(t=e.message,delete e.message),super(),this.message=Object(n.template)(t,e),this.name=this.constructor.name,this.data=e,i?Error.captureStackTrace(this,s):this.stack=new Error(this.message).stack}emitOn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e&&e.emit&&e.emit(t,Object.assign({err:this,log:{type:"error",message:this.message,err:this}},this.data,r)),this}}var a,o,u;u="error",(o="category")in(a=s)?Object.defineProperty(a,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[o]=u;class c extends s{constructor(e){super(e,"%store% key is reserved: %key%")}}class l extends s{constructor(e){super(e,"%store% value is invalid for key: %key%")}}class d extends s{constructor(e){super(e,"%store% value is missing for key: %key%")}}class h extends s{constructor(e){super(e,"Invalid variable type for %store%: %type%")}}class f extends s{constructor(e){super(e,"%store% cannot be overwritten: %key%")}}class m extends s{constructor(e){super(e,"Communication error while requesting resource")}}class v extends s{constructor(e){super(e,"Communication send error while requesting resource")}}class p extends s{constructor(e){super(e,"Could not create an XML HTTP instance")}}class E extends s{constructor(e){super(e,"Communication status error while loading resource (%status%)")}}class _ extends s{constructor(e){super(e,"Communication ready state error while loading resource")}}class g extends s{constructor(e){super(e,"Invalid binary format: %formatError=undefined%")}}class S extends s{constructor(e){super(e,"Error reading binary: %readError=undefined%")}}class T extends s{constructor(e){super(e,'Binary object type "%type%" not found')}}class b extends s{constructor(e){super(e,"Input geometry mesh lacks element required by particle system")}}class R extends s{constructor(e){super(e,"Input geometry mesh elements do not have the required number of components")}}class j extends s{constructor(e){super(e,"Geometry mesh missing expected area at index %areaIndex%")}}class y extends s{constructor(e){super(e,"Geometry mesh has invalid bone name for model")}}class A extends s{constructor(e){super(e,"Error binding geometry mesh to effect")}}class w extends s{constructor(e){super(e,"Invalid geometry file type (%fileType%)")}}class P extends s{constructor(e){super(e,"Unregistered resource prefix (%prefix%)")}}class O extends s{constructor(e){super(e,"Undefined resource prefix")}}class C extends s{constructor(e){super(e,"Unregistered resource extension (%extension%)")}}class D extends s{constructor(e){super(e,"Undefined resource extension")}}class L extends s{constructor(e){super(e,"Invalid resource format")}}class x extends s{constructor(e){super(e,"Invalid version of effect file (%version%)")}}class I extends s{constructor(e){super(e,"Effect file contains no compiled effects")}}class M extends s{constructor(e){super(e,"Invalid shader permutation value")}}class G extends s{constructor(e){super(e,"Error compiling %shaderType% shader (%infoLog%)")}}class F extends s{constructor(e){super(e,"Error linking shaders")}}class N extends s{constructor(e){super(e,"Invalid declaration value type (%declaration%:%valueType%)")}}class B extends s{constructor(e){super(e,"Multiple class instantiations not yet supported")}}class U extends s{constructor(e){super(e,"Abstract class method not implemented directly on child class")}}class V extends s{constructor(e){super(e,"%feature=Feature% not implemented")}}class k extends s{constructor(e){super(e,"Array index out of bounds")}}class H extends s{constructor(e){super(e,"Error binding object, %object% property is undefined (%property%)")}}class q extends s{constructor(e){super(e,"Error binding object, cannot identify binding type")}}class z extends s{constructor(e){super(e,"Error binding object, could not find %object% object reference")}}},"./core/Tw2Frustum.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Frustum",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"planes",[n.vec4.create(),n.vec4.create(),n.vec4.create(),n.vec4.create(),n.vec4.create(),n.vec4.create()]),i(this,"viewPos",n.vec3.create()),i(this,"viewDir",n.vec3.create()),i(this,"halfWidthProjection",1)}Initialize(e,t,r,i,a){const o=s.global.mat4_0,u=i||n.mat4.invert(o,e);this.viewPos.set(u.subarray(12,14)),this.viewDir.set(u.subarray(8,10)),this.halfWidthProjection=t[0]*r*.5;const c=a||n.mat4.multiply(o,t,e);this.planes[0][0]=c[2],this.planes[0][1]=c[6],this.planes[0][2]=c[10],this.planes[0][3]=c[14],this.planes[1][0]=c[3]+c[0],this.planes[1][1]=c[7]+c[4],this.planes[1][2]=c[11]+c[8],this.planes[1][3]=c[15]+c[12],this.planes[2][0]=c[3]-c[1],this.planes[2][1]=c[7]-c[5],this.planes[2][2]=c[11]-c[9],this.planes[2][3]=c[15]-c[13],this.planes[3][0]=c[3]-c[0],this.planes[3][1]=c[7]-c[4],this.planes[3][2]=c[11]-c[8],this.planes[3][3]=c[15]-c[12],this.planes[4][0]=c[3]+c[1],this.planes[4][1]=c[7]+c[5],this.planes[4][2]=c[11]+c[9],this.planes[4][3]=c[15]+c[13],this.planes[5][0]=c[3]-c[2],this.planes[5][1]=c[7]-c[6],this.planes[5][2]=c[11]-c[10],this.planes[5][3]=c[15]-c[14];for(let e=0;e<6;++e){let t=n.vec3.length(this.planes[e]);this.planes[e][0]/=t,this.planes[e][1]/=t,this.planes[e][2]/=t,this.planes[e][3]/=t}}IsSphereVisible(e,t){for(let r=0;r<6;++r)if(this.planes[r][0]*e[0]+this.planes[r][1]*e[1]+this.planes[r][2]*e[2]+this.planes[r][3]<-t)return!1;return!0}GetPixelSizeAcross(e,t){const r=n.vec3.subtract(s.global.vec3_0,this.viewPos,e);let i=n.vec3.dot(this.viewDir,r);return i<1e-5&&(i=1e-5),t<1e-5?0:t/i*this.halfWidthProjection*2}}i(s,"global",{vec3_0:n.vec3.create(),mat4_0:n.mat4.create()})},"./core/Tw2RenderTarget.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RenderTarget",function(){return a});var n=r("./global/index.js"),i=r("./core/resource/Tw2TextureRes.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"_id",n.util.generateID()),s(this,"name",""),s(this,"texture",null),s(this,"width",null),s(this,"height",null),s(this,"hasDepth",null),s(this,"_frameBuffer",null),s(this,"_renderBuffer",null)}Destroy(){const e=n.device.gl;this.texture&&(e.deleteTexture(this.texture.texture),this.texture=null),this._renderBuffer&&(e.deleteRenderbuffer(this._renderBuffer),this._renderBuffer=null),this._frameBuffer&&(e.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null)}Create(e,t,r){const s=n.device.gl;this.Destroy(),this.texture=new i.Tw2TextureRes,this.texture.Attach(s.createTexture()),this._frameBuffer=s.createFramebuffer(),s.bindFramebuffer(s.FRAMEBUFFER,this._frameBuffer),s.bindTexture(s.TEXTURE_2D,this.texture.texture),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.bindTexture(s.TEXTURE_2D,null),this._renderBuffer=null,r&&(this._renderBuffer=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,this._renderBuffer),s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_COMPONENT16,e,t)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.texture.texture,0),r&&s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,this._renderBuffer),s.bindRenderbuffer(s.RENDERBUFFER,null),s.bindFramebuffer(s.FRAMEBUFFER,null),this.texture.width=this.width=e,this.texture.height=this.height=t,this.hasDepth=r}Set(){n.device.gl.bindFramebuffer(n.device.gl.FRAMEBUFFER,this._frameBuffer),n.device.gl.viewport(0,0,this.width,this.height)}Unset(){n.device.gl.bindFramebuffer(n.device.gl.FRAMEBUFFER,null),n.device.gl.viewport(0,0,n.device.viewportWidth,n.device.viewportHeight)}}},"./core/batch/Tw2BatchAccumulator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BatchAccumulator",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,"batches",[]),i(this,"_sortMethod",null),this._sortMethod=e}get length(){return this.batches.length}Commit(e){this.batches.push(e)}Clear(){this.batches=[]}Render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Main";this._sortMethod&&this.batches.sort(this._sortMethod);for(let t=0;t<this.batches.length;++t)this.batches[t]instanceof s?this.batches[t].Render(e):(this.batches[t].renderMode!==n.device.RM_ANY&&n.device.SetStandardStates(this.batches[t].renderMode),n.device.perObjectData=this.batches[t].perObjectData,this.batches[t].Commit(e))}}},"./core/batch/Tw2ForwardingRenderBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ForwardingRenderBatch",function(){return i});var n=r("./core/batch/Tw2RenderBatch.js");class i extends n.Tw2RenderBatch{constructor(){var e,t,r;super(...arguments),r=null,(t="geometryProvider")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}Commit(e){this.geometryProvider&&this.geometryProvider.Render(this,e)}}},"./core/batch/Tw2GeometryBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryBatch",function(){return s});var n=r("./core/batch/Tw2RenderBatch.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2RenderBatch{constructor(){super(...arguments),i(this,"geometryRes",null),i(this,"meshIx",0),i(this,"start",0),i(this,"count",1),i(this,"effect",null)}Commit(e){this.geometryRes&&this.effect&&this.geometryRes.RenderAreas(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2GeometryLineBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryLineBatch",function(){return i});var n=r("./core/batch/Tw2GeometryBatch.js");class i extends n.Tw2GeometryBatch{Commit(e){this.geometryRes&&this.effect&&this.geometryRes.RenderLines(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2InstancedMeshBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2InstancedMeshBatch",function(){return i});var n=r("./core/batch/Tw2GeometryBatch.js");class i extends n.Tw2GeometryBatch{constructor(){var e,t,r;super(...arguments),r=null,(t="instanceMesh")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}Commit(e){this.instanceMesh&&this.effect&&this.instanceMesh.RenderAreas(this.meshIx,this.start,this.count,this.effect,e)}}},"./core/batch/Tw2RenderBatch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RenderBatch",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"renderMode",n.RM_ANY),i(this,"perObjectData",null)}Commit(e){}}},"./core/batch/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/batch/Tw2BatchAccumulator.js");r.d(t,"Tw2BatchAccumulator",function(){return n.Tw2BatchAccumulator});var i=r("./core/batch/Tw2ForwardingRenderBatch.js");r.d(t,"Tw2ForwardingRenderBatch",function(){return i.Tw2ForwardingRenderBatch});var s=r("./core/batch/Tw2GeometryBatch.js");r.d(t,"Tw2GeometryBatch",function(){return s.Tw2GeometryBatch});var a=r("./core/batch/Tw2GeometryLineBatch.js");r.d(t,"Tw2GeometryLineBatch",function(){return a.Tw2GeometryLineBatch});var o=r("./core/batch/Tw2RenderBatch.js");r.d(t,"Tw2RenderBatch",function(){return o.Tw2RenderBatch});var u=r("./core/batch/Tw2InstancedMeshBatch.js");r.d(t,"Tw2InstancedMeshBatch",function(){return u.Tw2InstancedMeshBatch})},"./core/data/Tw2PerObjectData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PerObjectData",function(){return s});var n=r("./core/data/Tw2RawData.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"vs",null),i(this,"ps",null),i(this,"ffe",null)}static from(e,t){const r=new s;return e&&(e.ps&&(r.ps=n.Tw2RawData.from(e.ps,t)),e.vs&&(r.vs=n.Tw2RawData.from(e.vs,t)),e.ffe&&(r.ffe=n.Tw2RawData.from(e.ffe,t))),r}}},"./core/data/Tw2RawData.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2RawData",function(){return i});class i{constructor(){n(this,"data",null),n(this,"elements",{}),n(this,"_nextOffset",0)}Has(e){return e in this.elements}Set(e,t){const r=this.elements[e];for(let e=0;e<r.size;e++)this.data[e+r.offset]=t[e]}Get(e){return this.elements[e].array}Declare(e,t){let r="number"!=typeof t,n=r?t.length:t,i=r?t:null;this.elements[e]={offset:this._nextOffset,array:null,size:n,value:i},this._nextOffset+=n}Create(){this.data=new Float32Array(this._nextOffset);for(let e in this.elements)if(this.elements.hasOwnProperty(e)){const t=this.elements[e];if(t.array=this.data.subarray(t.offset,t.offset+t.size),t.value){for(let e=0;e<t.size;e++)t.array[e]=t.value[e];Reflect.deleteProperty(t,"value")}}}static from(e,t){const r=new i;if(e){for(let t=0;t<e.length;t++)r.Declare(e[t][0],e[t][1]);t&&t.skipUpdate||r.Create()}return r}}},"./core/data/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/data/Tw2PerObjectData.js");r.d(t,"Tw2PerObjectData",function(){return n.Tw2PerObjectData});var i=r("./core/data/Tw2RawData.js");r.d(t,"Tw2RawData",function(){return i.Tw2RawData})},"./core/geometry/Tw2BlendShapeData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlendShapeData",function(){return s});var n=r("./core/vertex/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"declaration",new n.Tw2VertexDeclaration),i(this,"buffers",[]),i(this,"indexes",null),i(this,"weightProxy",null)}}},"./core/geometry/Tw2GeometryAnimation.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2GeometryAnimation",function(){return i});class i{constructor(){n(this,"name",""),n(this,"duration",0),n(this,"trackGroups",[])}}},"./core/geometry/Tw2GeometryBone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryBone",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"parentIndex",-1),i(this,"position",n.vec3.create()),i(this,"orientation",n.quat.create()),i(this,"scaleShear",n.mat3.create()),i(this,"localTransform",n.mat4.create()),i(this,"worldTransform",n.mat4.create()),i(this,"worldTransformInv",n.mat4.create())}UpdateTransform(){n.mat4.fromMat3(this.localTransform,this.scaleShear),n.quat.normalize(this.orientation,this.orientation);let e=n.mat4.fromQuat(s.global.mat4_0,this.orientation);return n.mat4.multiply(this.localTransform,this.localTransform,e),this.localTransform[12]=this.position[0],this.localTransform[13]=this.position[1],this.localTransform[14]=this.position[2],this.localTransform}}i(s,"global",{mat4_0:n.mat4.create()})},"./core/geometry/Tw2GeometryCurve.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2GeometryCurve",function(){return i});class i{constructor(){n(this,"dimension",0),n(this,"degree",0),n(this,"knots",null),n(this,"controls",null)}}},"./core/geometry/Tw2GeometryMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMesh",function(){return o});var n=r("./global/index.js"),i=r("./core/vertex/index.js"),s=r("./global/util/index.js");r("./core/geometry/Tw2GeometryMeshArea.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o{constructor(){a(this,"name",""),a(this,"declaration",new i.Tw2VertexDeclaration),a(this,"areas",[]),a(this,"buffer",null),a(this,"bufferLength",0),a(this,"bufferData",null),a(this,"indexes",null),a(this,"indexData",null),a(this,"indexType",0),a(this,"minBounds",n.vec3.fromValues(0,0,0)),a(this,"maxBounds",n.vec3.fromValues(0,0,0)),a(this,"boundsSpherePosition",n.vec3.create()),a(this,"boundsSphereRadius",0),a(this,"bones",[]),a(this,"boneBindings",[]),a(this,"_faces",0),a(this,"_vertices",0),a(this,"_areas",0)}GetBoundingBox(e,t){return n.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&n.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return n.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&n.sph3.transformMat4(e,e,t),!0}RebuildBounds(e){const t=this.minBounds,r=this.maxBounds;n.box3.bounds.empty(t,r);for(let i=0;i<this.areas.length;i++){const s=this.areas[i];this.RebuildAreaBounds(s,this.bufferData,this.indexData,e),n.box3.bounds.union(t,r,t,r,s.minBounds,s.maxBounds)}this.boundsSphereRadius=n.box3.bounds.toPositionRadius(t,r,this.boundsSpherePosition)}RebuildAreaBounds(e,t,r,i){if(!i||!t||!r)return!1;const s=this.declaration.FindUsage(0,0);if(!s)return!1;const a=this.declaration.stride/4,u=s.offset,c=o.GetBoundsFromVertices(n.box3.create(),e.start,e.count,a,u,t,r);return n.box3.toObjectBounds(c,e),n.box3.toObjectPositionRadius(c,e),!0}static GetFaceVertexIndices(e,t,r){if(t>=r.length/3)throw new Error("Invalid index: "+t);for(let n=0;n<3;n++)e[n]=r[3*t+n];return e}static GetVertexPosition(e,t,r,i,a){if(!Object(s.isNumber)(t)||t>a.length/r)throw new Error("Invalid vertex index: "+t);const o=t*r;return n.vec3.set(e,a[o+i],a[o+i+1],a[o+i+2])}static GetBoundsFromVertices(e,t,r,i,s,a,o){r/=3,t=t/2/3;const u=[],c=n.vec3.create(),l=n.vec3.create();n.box3.empty(e);for(let d=0;d<r;d++){this.GetFaceVertexIndices(c,d+t,o);for(let t=0;t<3;t++)u.includes(c[t])||(u.push(c[t]),this.GetVertexPosition(l,c[t],i,s,a),n.box3.addPoint(e,e,l))}return e}}},"./core/geometry/Tw2GeometryMeshArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryMeshArea",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"start",0),i(this,"count",0),i(this,"minBounds",n.vec3.fromValues(0,0,0)),i(this,"maxBounds",n.vec3.fromValues(0,0,0)),i(this,"boundsSpherePosition",n.vec3.create()),i(this,"boundsSphereRadius",0)}GetBoundingBox(e,t){return n.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&n.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return n.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&n.sph3.transformMat4(e,e,t),!0}}},"./core/geometry/Tw2GeometryMeshBinding.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2GeometryMeshBinding",function(){return i});class i{constructor(){n(this,"mesh",null),n(this,"bones",[])}}},"./core/geometry/Tw2GeometryModel.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2GeometryModel",function(){return i});class i{constructor(){n(this,"name",""),n(this,"meshBindings",[]),n(this,"skeleton",null)}FindBoneByName(e){if(!this.skeleton)return null;for(let t=0;t<this.skeleton.bones.length;++t)if(this.skeleton.bones[t].name===e)return this.skeleton.bones[t];return null}}},"./core/geometry/Tw2GeometrySkeleton.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometrySkeleton",function(){return n});class n{constructor(){var e,t,r;r=[],(t="bones")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}}},"./core/geometry/Tw2GeometryTrackGroup.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2GeometryTrackGroup",function(){return i});class i{constructor(){n(this,"name",""),n(this,"model",null),n(this,"transformTracks",[])}}},"./core/geometry/Tw2GeometryTransformTrack.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2GeometryTransformTrack",function(){return i});class i{constructor(){n(this,"name",""),n(this,"position",null),n(this,"orientation",null),n(this,"scaleShear",null)}}},"./core/geometry/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/geometry/Tw2BlendShapeData.js");r.d(t,"Tw2BlendShapeData",function(){return n.Tw2BlendShapeData});var i=r("./core/geometry/Tw2GeometryAnimation.js");r.d(t,"Tw2GeometryAnimation",function(){return i.Tw2GeometryAnimation});var s=r("./core/geometry/Tw2GeometryBone.js");r.d(t,"Tw2GeometryBone",function(){return s.Tw2GeometryBone});var a=r("./core/geometry/Tw2GeometryCurve.js");r.d(t,"Tw2GeometryCurve",function(){return a.Tw2GeometryCurve});var o=r("./core/geometry/Tw2GeometryMesh.js");r.d(t,"Tw2GeometryMesh",function(){return o.Tw2GeometryMesh});var u=r("./core/geometry/Tw2GeometryMeshArea.js");r.d(t,"Tw2GeometryMeshArea",function(){return u.Tw2GeometryMeshArea});var c=r("./core/geometry/Tw2GeometryMeshBinding.js");r.d(t,"Tw2GeometryMeshBinding",function(){return c.Tw2GeometryMeshBinding});var l=r("./core/geometry/Tw2GeometryModel.js");r.d(t,"Tw2GeometryModel",function(){return l.Tw2GeometryModel});var d=r("./core/geometry/Tw2GeometrySkeleton.js");r.d(t,"Tw2GeometrySkeleton",function(){return d.Tw2GeometrySkeleton});var h=r("./core/geometry/Tw2GeometryTrackGroup.js");r.d(t,"Tw2GeometryTrackGroup",function(){return h.Tw2GeometryTrackGroup});var f=r("./core/geometry/Tw2GeometryTransformTrack.js");r.d(t,"Tw2GeometryTransformTrack",function(){return f.Tw2GeometryTransformTrack})},"./core/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/batch/index.js");r.d(t,"Tw2BatchAccumulator",function(){return n.Tw2BatchAccumulator}),r.d(t,"Tw2ForwardingRenderBatch",function(){return n.Tw2ForwardingRenderBatch}),r.d(t,"Tw2GeometryBatch",function(){return n.Tw2GeometryBatch}),r.d(t,"Tw2GeometryLineBatch",function(){return n.Tw2GeometryLineBatch}),r.d(t,"Tw2RenderBatch",function(){return n.Tw2RenderBatch}),r.d(t,"Tw2InstancedMeshBatch",function(){return n.Tw2InstancedMeshBatch});var i=r("./core/data/index.js");r.d(t,"Tw2PerObjectData",function(){return i.Tw2PerObjectData}),r.d(t,"Tw2RawData",function(){return i.Tw2RawData});var s=r("./core/geometry/index.js");r.d(t,"Tw2BlendShapeData",function(){return s.Tw2BlendShapeData}),r.d(t,"Tw2GeometryAnimation",function(){return s.Tw2GeometryAnimation}),r.d(t,"Tw2GeometryBone",function(){return s.Tw2GeometryBone}),r.d(t,"Tw2GeometryCurve",function(){return s.Tw2GeometryCurve}),r.d(t,"Tw2GeometryMesh",function(){return s.Tw2GeometryMesh}),r.d(t,"Tw2GeometryMeshArea",function(){return s.Tw2GeometryMeshArea}),r.d(t,"Tw2GeometryMeshBinding",function(){return s.Tw2GeometryMeshBinding}),r.d(t,"Tw2GeometryModel",function(){return s.Tw2GeometryModel}),r.d(t,"Tw2GeometrySkeleton",function(){return s.Tw2GeometrySkeleton}),r.d(t,"Tw2GeometryTrackGroup",function(){return s.Tw2GeometryTrackGroup}),r.d(t,"Tw2GeometryTransformTrack",function(){return s.Tw2GeometryTransformTrack});var a=r("./core/lighting/index.js");r.d(t,"Tr2PointLight",function(){return a.Tr2PointLight}),r.d(t,"Tr2ShLightingManager",function(){return a.Tr2ShLightingManager});var o=r("./core/mesh/index.js");r.d(t,"Tr2MeshLod",function(){return o.Tr2MeshLod}),r.d(t,"Tr2Effect",function(){return o.Tr2Effect}),r.d(t,"Tw2Effect",function(){return o.Tw2Effect}),r.d(t,"Tw2InstancedMesh",function(){return o.Tw2InstancedMesh}),r.d(t,"Tw2Mesh",function(){return o.Tw2Mesh}),r.d(t,"Tw2MeshArea",function(){return o.Tw2MeshArea}),r.d(t,"Tw2MeshLineArea",function(){return o.Tw2MeshLineArea});var u=r("./core/model/index.js");r.d(t,"Tw2Animation",function(){return u.Tw2Animation}),r.d(t,"Tw2AnimationController",function(){return u.Tw2AnimationController}),r.d(t,"Tw2Bone",function(){return u.Tw2Bone}),r.d(t,"Tw2Model",function(){return u.Tw2Model}),r.d(t,"Tw2Track",function(){return u.Tw2Track}),r.d(t,"Tw2TrackGroup",function(){return u.Tw2TrackGroup});var c=r("./core/parameter/index.js");r.d(t,"Tw2Parameter",function(){return c.Tw2Parameter}),r.d(t,"Tw2FloatParameter",function(){return c.Tw2FloatParameter}),r.d(t,"Tw2Matrix4Parameter",function(){return c.Tw2Matrix4Parameter}),r.d(t,"Tw2MatrixParameter",function(){return c.Tw2MatrixParameter}),r.d(t,"Tw2TransformParameter",function(){return c.Tw2TransformParameter}),r.d(t,"Tw2VariableParameter",function(){return c.Tw2VariableParameter}),r.d(t,"Tw2Vector2Parameter",function(){return c.Tw2Vector2Parameter}),r.d(t,"Tw2Vector3Parameter",function(){return c.Tw2Vector3Parameter}),r.d(t,"Tw2Vector4Parameter",function(){return c.Tw2Vector4Parameter}),r.d(t,"Tw2TextureParameter",function(){return c.Tw2TextureParameter});var l=r("./core/post/index.js");r.d(t,"Tw2PostEffect",function(){return l.Tw2PostEffect}),r.d(t,"Tw2PostEffectManager",function(){return l.Tw2PostEffectManager}),r.d(t,"Tw2PostEffectStep",function(){return l.Tw2PostEffectStep}),r.d(t,"Tr2PostProcess",function(){return l.Tr2PostProcess});var d=r("./core/reader/index.js");r.d(t,"Tw2BinaryReader",function(){return d.Tw2BinaryReader}),r.d(t,"Tw2BlackReader",function(){return d.Tw2BlackReader}),r.d(t,"Tw2ObjectReader",function(){return d.Tw2ObjectReader});var h=r("./core/resource/index.js");r.d(t,"Tw2TextureRes",function(){return h.Tw2TextureRes}),r.d(t,"Tw2EffectRes",function(){return h.Tw2EffectRes}),r.d(t,"Tw2GeometryRes",function(){return h.Tw2GeometryRes}),r.d(t,"Tw2LoadingObject",function(){return h.Tw2LoadingObject}),r.d(t,"Tw2LodResource",function(){return h.Tw2LodResource}),r.d(t,"Tw2Resource",function(){return h.Tw2Resource}),r.d(t,"Tw2Shader",function(){return h.Tw2Shader}),r.d(t,"Tw2VideoRes",function(){return h.Tw2VideoRes});var f=r("./core/sampler/index.js");r.d(t,"Tw2SamplerState",function(){return f.Tw2SamplerState}),r.d(t,"Tw2SamplerOverride",function(){return f.Tw2SamplerOverride});var m=r("./core/value/index.js");r.d(t,"Tw2Float",function(){return m.Tw2Float}),r.d(t,"TriMatrix",function(){return m.TriMatrix});var v=r("./core/vertex/index.js");r.d(t,"Tw2VertexDeclaration",function(){return v.Tw2VertexDeclaration}),r.d(t,"Tw2VertexElement",function(){return v.Tw2VertexElement});var p=r("./core/Tr2DistanceTracker.js");r.d(t,"Tr2DistanceTracker",function(){return p.Tr2DistanceTracker});var E=r("./core/Tr2RuntimeInstanceData.js");r.d(t,"Tr2RuntimeInstanceData",function(){return E.Tr2RuntimeInstanceData});var _=r("./core/TriObserverLocal.js");r.d(t,"TriObserverLocal",function(){return _.TriObserverLocal});var g=r("./core/Tw2Error.js");r.d(t,"Tw2Error",function(){return g.Tw2Error}),r.d(t,"ErrStoreKeyReserved",function(){return g.ErrStoreKeyReserved}),r.d(t,"ErrStoreValueInvalid",function(){return g.ErrStoreValueInvalid}),r.d(t,"ErrStoreValueMissing",function(){return g.ErrStoreValueMissing}),r.d(t,"ErrStoreTypeInvalid",function(){return g.ErrStoreTypeInvalid}),r.d(t,"ErrStoreKeyProtected",function(){return g.ErrStoreKeyProtected}),r.d(t,"ErrHTTPRequest",function(){return g.ErrHTTPRequest}),r.d(t,"ErrHTTPRequestSend",function(){return g.ErrHTTPRequestSend}),r.d(t,"ErrHTTPInstance",function(){return g.ErrHTTPInstance}),r.d(t,"ErrHTTPStatus",function(){return g.ErrHTTPStatus}),r.d(t,"ErrHTTPReadyState",function(){return g.ErrHTTPReadyState}),r.d(t,"ErrBinaryFormat",function(){return g.ErrBinaryFormat}),r.d(t,"ErrBinaryReaderReadError",function(){return g.ErrBinaryReaderReadError}),r.d(t,"ErrBinaryObjectTypeNotFound",function(){return g.ErrBinaryObjectTypeNotFound}),r.d(t,"ErrGeometryMeshMissingParticleElement",function(){return g.ErrGeometryMeshMissingParticleElement}),r.d(t,"ErrGeometryMeshElementComponentsMissing",function(){return g.ErrGeometryMeshElementComponentsMissing}),r.d(t,"ErrGeometryMeshAreaMissing",function(){return g.ErrGeometryMeshAreaMissing}),r.d(t,"ErrGeometryMeshBoneNameInvalid",function(){return g.ErrGeometryMeshBoneNameInvalid}),r.d(t,"ErrGeometryMeshEffectBinding",function(){return g.ErrGeometryMeshEffectBinding}),r.d(t,"ErrGeometryFileType",function(){return g.ErrGeometryFileType}),r.d(t,"ErrResourcePrefixUnregistered",function(){return g.ErrResourcePrefixUnregistered}),r.d(t,"ErrResourcePrefixUndefined",function(){return g.ErrResourcePrefixUndefined}),r.d(t,"ErrResourceExtensionUnregistered",function(){return g.ErrResourceExtensionUnregistered}),r.d(t,"ErrResourceExtensionUndefined",function(){return g.ErrResourceExtensionUndefined}),r.d(t,"ErrResourceFormat",function(){return g.ErrResourceFormat}),r.d(t,"ErrShaderVersion",function(){return g.ErrShaderVersion}),r.d(t,"ErrShaderHeaderSize",function(){return g.ErrShaderHeaderSize}),r.d(t,"ErrShaderPermutationValue",function(){return g.ErrShaderPermutationValue}),r.d(t,"ErrShaderCompile",function(){return g.ErrShaderCompile}),r.d(t,"ErrShaderLink",function(){return g.ErrShaderLink}),r.d(t,"ErrDeclarationValueType",function(){return g.ErrDeclarationValueType}),r.d(t,"ErrSingletonInstantiation",function(){return g.ErrSingletonInstantiation}),r.d(t,"ErrAbstractClassMethod",function(){return g.ErrAbstractClassMethod}),r.d(t,"ErrFeatureNotImplemented",function(){return g.ErrFeatureNotImplemented}),r.d(t,"ErrIndexBounds",function(){return g.ErrIndexBounds}),r.d(t,"ErrBindingValueUndefined",function(){return g.ErrBindingValueUndefined}),r.d(t,"ErrBindingType",function(){return g.ErrBindingType}),r.d(t,"ErrBindingReference",function(){return g.ErrBindingReference});var S=r("./core/Tw2Frustum.js");r.d(t,"Tw2Frustum",function(){return S.Tw2Frustum});var T=r("./core/Tw2RenderTarget.js");r.d(t,"Tw2RenderTarget",function(){return T.Tw2RenderTarget})},"./core/lighting/Tr2PointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PointLight",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"brightness",0),i(this,"color",n.vec4.create()),i(this,"innerRadius",0),i(this,"noiseAmplitude",0),i(this,"noiseFrequency",0),i(this,"noiseOctaves",0),i(this,"position",n.vec3.create()),i(this,"radius",0)}static black(e){return[["name",e.string],["brightness",e.float],["color",e.vector4],["innerRadius",e.float],["noiseAmplitude",e.float],["noiseFrequency",e.float],["noiseOctaves",e.float],["position",e.vector3],["radius",e.float]]}}i(s,"__isStaging",4)},"./core/lighting/Tr2ShLightingManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ShLightingManager",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"primaryIntensity",0),i(this,"secondaryIntensity",0)}static black(e){return[["primaryIntensity",e.float],["secondaryIntensity",e.float]]}}i(s,"__isStaging",4)},"./core/lighting/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/lighting/Tr2PointLight.js");r.d(t,"Tr2PointLight",function(){return n.Tr2PointLight});var i=r("./core/lighting/Tr2ShLightingManager.js");r.d(t,"Tr2ShLightingManager",function(){return i.Tr2ShLightingManager})},"./core/mesh/Tr2Effect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Effect",function(){return o});var n=r("./global/index.js"),i=r("./core/Tw2Error.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"name",""),s(this,"value",n.vec4.create())}static blackStruct(e){const t=new this;return t.name=e.ReadStringU16(),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),e.ExpectU16(0,"unknown content"),t.value[0]=e.ReadF32(),t.value[1]=e.ReadF32(),t.value[2]=e.ReadF32(),t.value[3]=e.ReadF32(),t}}class o extends n.Tw2BaseClass{constructor(){super(...arguments),s(this,"constParameters",[]),s(this,"effectFilePath",""),s(this,"options",[]),s(this,"parameters",[]),s(this,"resources",[]),s(this,"samplerOverrides",[])}static black(e){return[["effectFilePath",e.path],["name",e.string],["parameters",e.array],["resources",e.array],["constParameters",e.structList(a)],["options",e=>{throw Object(i.ErrFeatureNotImplemented)({feature:"Tr2Effect options"})}],["samplerOverrides",e=>{throw Object(i.ErrFeatureNotImplemented)({feature:"Tr2Effect samplerOverrides"})}]]}}s(o,"__isStaging",4)},"./core/mesh/Tr2MeshLod.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2MeshLod",function(){return a});var n=r("./global/index.js"),i=r("./global/engine/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2BaseClass{constructor(){super(...arguments),s(this,"additiveAreas",[]),s(this,"associatedResources",[]),s(this,"decalAreas",[]),s(this,"depthAreas",[]),s(this,"geometryRes",null),s(this,"opaqueAreas",[]),s(this,"pickableAreas",[]),s(this,"transparentAreas",[]),s(this,"display",!0),s(this,"geometryResource",null),s(this,"visible",{opaqueAreas:!0,transparentAreas:!0,additiveAreas:!0,pickableAreas:!0,decalAreas:!0,depthAreas:!0})}Initialize(){}OnResPrepared(e){this.geometryResource=e}IsGood(){return this.geometryResource&&this.geometryResource.IsGood()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<this.associatedResources;t++)e[t]&&!e.includes(this.associatedResources[t])&&e.push(this.associatedResources[t]);return n.util.perArrayChild(this.additiveAreas,"GetResources",e),n.util.perArrayChild(this.decalAreas,"GetResources",e),n.util.perArrayChild(this.depthAreas,"GetResources",e),n.util.perArrayChild(this.distortionAreas,"GetResources",e),n.util.perArrayChild(this.opaqueAreas,"GetResources",e),n.util.perArrayChild(this.pickableAreas,"GetResources",e),n.util.perArrayChild(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;const n=this.constructor.GetAreaBatches;switch(e){case i.RM_ADDITIVE:return void(this.visible.additiveAreas&&n(this,this.additiveAreas,e,t,r));case i.RM_DECAL:return void(this.visible.decalAreas&&n(this,this.opaqueAreas,e,t,r));case i.RM_DEPTH:case i.RM_DISTORTION:return;case i.RM_OPAQUE:return void(this.visible.opaqueAreas&&n(this,this.opaqueAreas,e,t,r));case i.RM_PICKABLE:return void(this.visible.pickableAreas&&n(this,this.pickableAreas,e,t,r));case i.RM_TRANSPARENT:return void(this.visible.transparentAreas&&n(this,this.transparentAreas,e,t,r))}}static GetAreaBatches(e,t,r,n,i){for(let s=0;s<t.length;++s){const a=t[s];if(a.effect&&a.display){const t=new a.constructor.batchType;t.renderMode=r,t.perObjectData=i,t.geometryRes=e.geometryResource,t.meshIx=0,t.start=a.index,t.count=a.count,t.effect=a.effect,n.Commit(t)}}}static black(e){return[["additiveAreas",e.array],["associatedResources",e.array],["decalAreas",e.array],["depthAreas",e.array],["distortionAreas",e.array],["geometryRes",e.object],["opaqueAreas",e.array],["pickableAreas",e.array],["transparentAreas",e.array]]}}s(a,"__isStaging",3)},"./core/mesh/Tw2Effect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Effect",function(){return a});var n=r("./global/index.js"),i=r("./core/parameter/Tw2TextureParameter.js");r("./global/class/Tw2BaseClass.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"_id",n.util.generateID()),s(this,"name",""),s(this,"effectFilePath",""),s(this,"effectRes",null),s(this,"parameters",{}),s(this,"techniques",[]),s(this,"samplerOverrides",[]),s(this,"autoParameter",!1),s(this,"options",{}),s(this,"shader",null)}Initialize(){if(""!==this.effectFilePath){this.effectFilePath=this.effectFilePath.toLowerCase();const e=a.ToEffectResPath(this.effectFilePath);this.effectRes=n.resMan.GetResource(e),this.effectRes.RegisterNotification(this)}}IsGood(){return this.KeepAlive(),null!==this.shader}KeepAlive(){const e=this.GetResources();for(let t=0;t<e.length;t++)e[t].KeepAlive()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.effectRes&&!e.includes(this.effectRes)&&e.push(this.effectRes);for(let t in this.parameters)this.parameters.hasOwnProperty(t)&&"GetResources"in this.parameters[t]&&this.parameters[t].GetResources(e);return e}OnResPrepared(e){return this.shader=e.GetShader(this.options),this.BindParameters(),!0}UnBindParameters(){for(let e in this.techniques)if(this.techniques.hasOwnProperty(e)){let t=this.techniques[e];for(let e=0;e<t.length;++e)for(let r=0;r<t[e].stages.length;++r)for(let n=0;n<t[e].stages[r].reroutedParameters.length;++n)t[e].stages[r].reroutedParameters[n].Unbind()}this.techniques={}}BindParameters(){if(this.UnBindParameters(),!this.IsGood())return!1;for(let e in this.shader.techniques)if(this.shader.techniques.hasOwnProperty(e)){let t=this.shader.techniques[e],r=[];for(let e=0;e<t.passes.length;++e){const s=[];s.stages=[];for(let r=0;r<t.passes[e].stages.length;++r){const o=t.passes[e].stages[r],u={};u.constantBuffer=new Float32Array(o.constantSize),u.reroutedParameters=[],u.parameters=[],u.textures=[],u.constantBuffer.set(o.constantValues);for(let e=0;e<o.constants.length;++e){const t=o.constants[e],r=t.name,i=t.Type;if(!a.ConstantIgnore.includes(r))if(r in this.parameters){const e=this.parameters[r];e.Bind(u.constantBuffer,t.offset,t.size)?u.reroutedParameters.push(e):u.parameters.push({parameter:e,constantBuffer:u.constantBuffer,offset:t.offset,size:t.size})}else if(n.store.variables.Has(r))u.parameters.push({parameter:n.store.variables.Get(r),constantBuffer:u.constantBuffer,offset:t.offset,size:t.size});else if(t.isAutoregister&&i){const e=n.store.variables.Create(r,void 0,i);e&&u.parameters.push({parameter:e,constantBuffer:u.constantBuffer,offset:t.offset,size:t.size})}else if(this.autoParameter&&1===t.elements){let e=u.constantBuffer.subarray(t.offset,t.offset+t.size);0===e.length?e=void 0:1===e.length&&(e=e[0]);const s=n.store.variables.Create(r,e,i);s&&(this.parameters[r]=s,s.Bind(u.constantBuffer,t.offset,t.size)?u.reroutedParameters.push(s):u.parameter.push({parameter:s,constantBuffer:u.constantBuffer,offset:t.offset,size:t.size}))}}for(let e=0;e<o.textures.length;++e){const t=o.textures[e].name;let s=null;if(t in this.parameters)s=this.parameters[t];else if(n.store.variables.Has(t))s=n.store.variables.Get(t);else if(o.textures[e].isAutoregister)s=n.store.variables.Create(t,void 0,i.Tw2TextureParameter);else{if(!this.autoParameter)continue;s=this.parameters[t]=new i.Tw2TextureParameter(t)}const a={parameter:s,slot:o.textures[e].registerIndex,sampler:null};for(let e=0;e<o.samplers.length;++e)if(o.samplers[e].registerIndex===a.slot){o.samplers[e].name in this.samplerOverrides?a.sampler=this.samplerOverrides[o.samplers[e].name].GetSampler(n.device,o.samplers[e]):a.sampler=o.samplers[e];break}0===r&&(a.slot+=12),u.textures.push(a)}s.stages.push(u)}r.push(s)}this.techniques[e]=r}return n.device.effectObserver&&n.device.effectObserver.OnEffectChanged(this),this.autoParameter=!1,!0}ApplyPass(e,t){if(!this.IsGood()||!(e in this.techniques)||t>=this.techniques[e].length)return;this.shader.ApplyPass(e,t);const r=this.techniques[e][t],i=this.shader.techniques[e].passes[t],s=n.device,a=s.gl,o=s.IsAlphaTestEnabled()&&i.shadowShaderProgram?i.shadowShaderProgram:i.shaderProgram;for(let e=0;e<2;++e){const t=r.stages[e];for(let e=0;e<t.parameters.length;++e){let r=t.parameters[e];r.parameter.Apply(r.constantBuffer,r.offset,r.size)}for(let e=0;e<t.textures.length;++e){let r=t.textures[e];r.parameter.Apply(r.slot,r.sampler,o.volumeSlices[r.sampler.registerIndex])}}const u=o.constantBufferHandles;u[0]&&a.uniform4fv(u[0],r.stages[0].constantBuffer),u[7]&&a.uniform4fv(u[7],r.stages[1].constantBuffer),s.perFrameVSData&&u[1]&&a.uniform4fv(u[1],s.perFrameVSData.data),s.perFramePSData&&u[2]&&a.uniform4fv(u[2],s.perFramePSData.data);const c=s.perObjectData;c&&(c.vs&&u[3]&&a.uniform4fv(u[3],c.vs.data),c.ps&&u[4]&&a.uniform4fv(u[4],c.ps.data),c.ffe&&u[5]&&a.uniform4fv(u[5],c.ffe.data))}GetPassCount(e){return null!==this.shader&&e in this.techniques?this.techniques[e].length:0}GetPassInput(e,t){return null===this.shader||!(e in this.techniques)||t>=this.techniques[e].length?null:n.device.IsAlphaTestEnabled()&&this.shader.techniques[e].passes[t].shadowShaderProgram?this.shader.techniques[e].passes[t].shadowShaderProgram.input:this.shader.techniques[e].passes[t].shaderProgram.input}Render(e){const t=this.GetPassCount("Main");for(let r=0;r<t;++r)this.ApplyPass("Main",r),e(this,r)}GetTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t in this.parameters)if(this.parameters.hasOwnProperty(t)&&this.parameters[t]instanceof i.Tw2TextureParameter){let r=this.parameters[t].GetValue();r&&(e[t]=r)}return e}SetTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(let r in e)if(e.hasOwnProperty(r)&&void 0!==e[r]){const n=e[r],s=this.parameters[r];i.Tw2TextureParameter.isValue(n)&&(s?s.EqualsValue(n)||(s.SetValue(n),t=!0):(this.parameters[r]=new i.Tw2TextureParameter(r,n),t=!0))}return t}GetParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t in this.parameters)!this.parameters.hasOwnProperty(t)||this.parameters[t]instanceof i.Tw2TextureParameter||(e[t]=this.parameters[t].GetValue(!0));return e}SetParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(let r in e)if(e.hasOwnProperty(r)&&void 0!==e[r]){const i=e[r],s=this.parameters[r];if(s)s.constructor.isValue(i)&&!s.EqualsValue(i)&&(this.parameters[r].SetValue(i),t=!0);else{const e=n.store.variables.Create(r,i);e&&(this.parameters[r]=e,t=!0)}}return t}SetOverrides(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1;for(let r in e)if(e.hasOwnProperty(r)&&void 0!==e[r]){const n=this.parameters[r];if(n&&n instanceof i.Tw2TextureParameter){let s=!1;const a=e[r];for(let e in a)if(a.hasOwnProperty(e)&&i.Tw2TextureParameter.overrideProperties.includes(e)&&a[e]!==n[e]){s=!0;break}s&&(n.SetOverrides(e[r]),t=!0)}}return t}GetOverrides(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t in this.parameters)if(this.parameters.hasOwnProperty(t)){const r=this.parameters[t];r&&r instanceof i.Tw2TextureParameter&&r.useAllOverrides&&(e[t]=this.parameters[t].GetOverrides())}return e}PopulateParameters(){return this.autoParameter=!0,this.BindParameters()}static ToEffectResPath(e){return(e=e?e.substr(0,e.lastIndexOf(".")).replace("/effect/",n.device.effectDir)+".sm_"+n.device.shaderModel:"").toLowerCase()}static FromEffectResPath(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fx";return(e=e.substr(0,e.lastIndexOf(".")).replace(n.device.effectDir,"/effect/")+"."+t).toLowerCase()}static from(e,t){if(e&&e instanceof a)return e;const r=new this;if(e){if(n.util.assignIfExists(r,e,["name","effectFilePath","display","autoParameter"]),"parameters"in e&&r.SetParameters(e.parameters),"textures"in e&&r.SetTextures(e.textures),"overrides"in e&&r.SetOverrides(e.overrides),""===r.name&&""!==e.effectFilePath){let t=e.effectFilePath;r.name=t.substring(t.lastIndexOf("/")+1,t.length)}!r.name&&r.effectFilePath&&(r.name=r.effectFilePath.substring(r.effectFilePath.lastIndexOf("/")+1,r.effectFilePath.lastIndexOf(".")))}return t&&t.skipUpdate||r.Initialize(),r}}s(a,"ConstantIgnore",["PerFrameVS","PerObjectVS","PerFramePS","PerObjectPS","PerObjectPSInt"])},"./core/mesh/Tw2InstancedMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2InstancedMesh",function(){return c});var n=r("./global/index.js"),i=r("./core/batch/index.js"),s=r("./global/engine/index.js"),a=r("./global/util/index.js"),o=(r("./core/mesh/Tw2MeshArea.js"),r("./core/mesh/Tw2Mesh.js"));function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends n.Tw2BaseClass{constructor(){super(...arguments),u(this,"additiveAreas",[]),u(this,"decalAreas",[]),u(this,"depthAreas",[]),u(this,"distortionAreas",[]),u(this,"geometryResPath",""),u(this,"instanceGeometryResPath",""),u(this,"instanceGeometryResource",null),u(this,"instanceMeshIndex",0),u(this,"maxBounds",n.vec3.create()),u(this,"minBounds",n.vec3.create()),u(this,"opaqueAreas",[]),u(this,"transparentAreas",[]),u(this,"name",""),u(this,"display",!0),u(this,"geometryResource",null),u(this,"pickableAreas",[]),u(this,"visible",{additiveAreas:!0,decalAreas:!0,depthAreas:!0,distortionAreas:!0,opaqueAreas:!0,pickableAreas:!0,transparentAreas:!0})}static from(e,t){const r=new c;if(r.meshIndex=Object(a.get)(t,"index",0),e){Object(a.assignIfExists)(r,e,["name","display","geometryResPath","instanceGeometryResPath","instanceMeshIndex"]);const t=["additiveAreas","decalAreas","depthAreas","distortionAreas","opaqueAreas","pickableAreas","transparentAreas"];Object(a.assignIfExists)(r.visible,e.visible,t),o.Tw2Mesh.createAreaIfExists(r,e,t)}return t&&t.skipUpdate||r.Initialize(),r}Initialize(){""!==this.geometryResPath&&(this.geometryResource=n.resMan.GetResource(this.geometryResPath)),""!==this.instanceGeometryResPath&&(this.instanceGeometryResource=n.resMan.GetResource(this.instanceGeometryResPath))}IsGood(){const e=this.instanceGeometryResource,t=this.geometryResource&&this.geometryResource.IsGood(),r=!!e&&(!e.IsGood||e.IsGood());return t&&r}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),this.instanceGeometryResource&&"GetResources"in this.instanceGeometryResource&&this.instanceGeometryResource.GetResources(e),n.util.perArrayChild(this.additiveAreas,"GetResources",e),n.util.perArrayChild(this.decalAreas,"GetResources",e),n.util.perArrayChild(this.depthAreas,"GetResources",e),n.util.perArrayChild(this.distortionAreas,"GetResources",e),n.util.perArrayChild(this.opaqueAreas,"GetResources",e),n.util.perArrayChild(this.pickableAreas,"GetResources",e),n.util.perArrayChild(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;const n=this.constructor.GetAreaBatches;switch(e){case s.RM_ADDITIVE:return void(this.visible.additiveAreas&&n(this,this.additiveAreas,e,t,r));case s.RM_DECAL:return void(this.visible.decalAreas&&n(this,this.opaqueAreas,e,t,r));case s.RM_DEPTH:case s.RM_DISTORTION:return;case s.RM_OPAQUE:return void(this.visible.opaqueAreas&&n(this,this.opaqueAreas,e,t,r));case s.RM_PICKABLE:return void(this.visible.pickableAreas&&n(this,this.pickableAreas,e,t,r));case s.RM_TRANSPARENT:return void(this.visible.transparentAreas&&n(this,this.transparentAreas,e,t,r))}}RenderAreas(e,t,r,n,i){if(!this.IsGood())return;const s=this.instanceGeometryResource.GetInstanceBuffer(this.instanceMeshIndex);s&&this.geometryResource.RenderAreasInstanced(e,t,r,n,i,s,this.instanceGeometryResource.GetInstanceDeclaration(this.instanceMeshIndex),this.instanceGeometryResource.GetInstanceStride(this.instanceMeshIndex),this.instanceGeometryResource.GetInstanceCount(this.instanceMeshIndex))}static GetAreaBatches(e,t,r,n,s){for(let a=0;a<t.length;++a){const o=t[a];if(o.effect&&o.display){const t=new i.Tw2InstancedMeshBatch;t.renderMode=r,t.perObjectData=s,t.instanceMesh=e,t.meshIx=o.meshIndex,t.start=o.index,t.count=o.count,t.effect=o.effect,n.Commit(t)}}}static black(e){return[["additiveAreas",e.array],["decalAreas",e.array],["depthAreas",e.array],["distortionAreas",e.array],["geometryResPath",e.string],["instanceGeometryResPath",e.string],["instanceGeometryResource",e.object],["instanceMeshIndex",e.uint],["minBounds",e.vector3],["maxBounds",e.vector3],["opaqueAreas",e.array],["transparentAreas",e.array]]}}u(c,"__isStaging",1)},"./core/mesh/Tw2Mesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Mesh",function(){return o});var n=r("./global/index.js"),i=r("./global/engine/index.js"),s=r("./global/util/index.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o{constructor(){a(this,"name",""),a(this,"additiveAreas",[]),a(this,"decalAreas",[]),a(this,"deferGeometryLoad",!1),a(this,"depthAreas",[]),a(this,"depthNormalAreas",[]),a(this,"distortionAreas",[]),a(this,"geometryResPath",""),a(this,"meshIndex",0),a(this,"opaqueAreas",[]),a(this,"opaquePrepassAreas",[]),a(this,"pickableAreas",[]),a(this,"transparentAreas",[]),a(this,"display",!0),a(this,"geometryResource",null),a(this,"visible",{additiveAreas:!0,decalAreas:!0,depthAreas:!0,depthNormalAreas:!0,distortionAreas:!0,opaqueAreas:!0,opaquePrepassAreas:!0,pickableAreas:!0,transparentAreas:!0})}Initialize(){""!==this.geometryResPath&&(this.geometryResource=n.resMan.GetResource(this.geometryResPath))}IsGood(){return this.geometryResource&&this.geometryResource.IsGood()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),n.util.perArrayChild(this.additiveAreas,"GetResources",e),n.util.perArrayChild(this.decalAreas,"GetResources",e),n.util.perArrayChild(this.depthAreas,"GetResources",e),n.util.perArrayChild(this.distortionAreas,"GetResources",e),n.util.perArrayChild(this.opaqueAreas,"GetResources",e),n.util.perArrayChild(this.pickableAreas,"GetResources",e),n.util.perArrayChild(this.transparentAreas,"GetResources",e),e}GetBatches(e,t,r){if(!this.IsGood()||!this.display)return!1;const n=this.constructor.GetAreaBatches;switch(e){case i.RM_ADDITIVE:return void(this.visible.additiveAreas&&n(this,this.additiveAreas,e,t,r));case i.RM_DECAL:return void(this.visible.decalAreas&&n(this,this.opaqueAreas,e,t,r));case i.RM_DEPTH:case i.RM_DISTORTION:return;case i.RM_OPAQUE:return void(this.visible.opaqueAreas&&n(this,this.opaqueAreas,e,t,r));case i.RM_PICKABLE:return void(this.visible.pickableAreas&&n(this,this.pickableAreas,e,t,r));case i.RM_TRANSPARENT:return void(this.visible.transparentAreas&&n(this,this.transparentAreas,e,t,r))}}static GetAreaBatches(e,t,r,n,i){for(let s=0;s<t.length;++s){const a=t[s];if(a.effect&&a.display){const t=new a.constructor.batchType;t.renderMode=r,t.perObjectData=i,t.geometryRes=e.geometryResource,t.meshIx=e.meshIndex,t.start=a.index,t.count=a.count,t.effect=a.effect,n.Commit(t)}}}static createAreaIfExists(e,t,r){r=Object(s.toArray)(r);for(let i=0;i<r.length;i++){const s=r[i];if(s in t&&s in e)for(let r=0;r<t[s].length;r++){const i=t[s][r].__type||"Tw2MeshArea",a=n.store.classes.Get(i);e[s].push(a.from(t[s][r],{index:r}))}}}static from(e,t){const r=new o;if(r.index=Object(s.get)(t,"index",0),e){Object(s.assignIfExists)(r,e,["name","display","deferGeometryLoad","geometryResPath","meshIndex"]);const t=["additiveAreas","decalAreas","depthAreas","depthNormalAreas","distortionAreas","opaqueAreas","opaquePrepassAreas","pickableAreas","transparentAreas"];Object(s.assignIfExists)(r.visible,e.visible,t),this.createAreaIfExists(r,e,t)}return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["additiveAreas",e.array],["decalAreas",e.array],["deferGeometryLoad",e.boolean],["depthAreas",e.array],["depthNormalAreas",e.array],["distortionAreas",e.array],["geometryResPath",e.string],["meshIndex",e.uint],["name",e.string],["opaqueAreas",e.array],["opaquePrepassAreas",e.array],["pickableAreas",e.array],["transparentAreas",e.array]]}}a(o,"__isStaging",1)},"./core/mesh/Tw2MeshArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshArea",function(){return u});var n=r("./core/batch/index.js"),i=r("./global/index.js"),s=r("./global/util/index.js"),a=r("./core/mesh/Tw2Effect.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends i.Tw2BaseClass{constructor(){super(...arguments),o(this,"name",""),o(this,"count",1),o(this,"effect",null),o(this,"index",0),o(this,"reversed",!1),o(this,"useSHLighting",!1),o(this,"display",!0)}get meshIndex(){return this.index}set meshIndex(e){this.index=e}static from(e,t){const r=new this;return Object(s.assignIfExists)(r,t,"index"),e&&(Object(s.assignIfExists)(r,e,["name","display","count","index","reversed","useSHLighting"]),e.effect&&(r.effect=a.Tw2Effect.from(e.effect))),r}static black(e){return[["count",e.uint],["effect",e.object],["index",e.uint],["name",e.string],["reversed",e.boolean],["useSHLighting",e.boolean]]}}o(u,"batchType",n.Tw2GeometryBatch),o(u,"__isStaging",1)},"./core/mesh/Tw2MeshLineArea.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MeshLineArea",function(){return u});var n,i,s,a=r("./core/batch/index.js"),o=r("./core/mesh/Tw2MeshArea.js");class u extends o.Tw2MeshArea{}n=u,i="batchType",s=a.Tw2GeometryLineBatch,i in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./core/mesh/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/mesh/Tr2MeshLod.js");r.d(t,"Tr2MeshLod",function(){return n.Tr2MeshLod});var i=r("./core/mesh/Tr2Effect.js");r.d(t,"Tr2Effect",function(){return i.Tr2Effect});var s=r("./core/mesh/Tw2Effect.js");r.d(t,"Tw2Effect",function(){return s.Tw2Effect});var a=r("./core/mesh/Tw2InstancedMesh.js");r.d(t,"Tw2InstancedMesh",function(){return a.Tw2InstancedMesh});var o=r("./core/mesh/Tw2Mesh.js");r.d(t,"Tw2Mesh",function(){return o.Tw2Mesh});var u=r("./core/mesh/Tw2MeshArea.js");r.d(t,"Tw2MeshArea",function(){return u.Tw2MeshArea});var c=r("./core/mesh/Tw2MeshLineArea.js");r.d(t,"Tw2MeshLineArea",function(){return c.Tw2MeshLineArea})},"./core/model/Tw2Animation.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2Animation",function(){return i});class i{constructor(){n(this,"animationRes",null),n(this,"time",0),n(this,"timeScale",1),n(this,"cycle",!1),n(this,"isPlaying",!1),n(this,"callback",null),n(this,"trackGroups",[])}IsFinished(){return!this.cycle&&this.time>=this.animationRes.duration}}},"./core/model/Tw2AnimationController.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2AnimationController",function(){return d});var n=r("./global/index.js"),i=r("./core/resource/index.js"),s=r("./core/model/Tw2Animation.js"),a=r("./core/model/Tw2Bone.js"),o=r("./core/model/Tw2Model.js"),u=r("./core/model/Tw2Track.js"),c=r("./core/model/Tw2TrackGroup.js");function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class d extends n.Tw2BaseClass{constructor(e){super(),l(this,"geometryResources",[]),l(this,"models",[]),l(this,"animations",[]),l(this,"meshBindings",[]),l(this,"loaded",!1),l(this,"update",!0),l(this,"pendingCommands",[]),l(this,"onPendingCleared",null),l(this,"_isPlaying",!1),l(this,"_boundsDirty",!1),e&&this.SetGeometryResource(e)}IsGood(){let e=this.geometryResources.length>0;for(let t=0;t<this.geometryResources.length;t++)this.geometryResources[t]&&this.geometryResources[t].IsGood()||(e=!1);if(!e||!this.animations.length)return!1;for(let e=0;e<this.animations.length;e++)if(!this.animations[e].animationRes)return!1;return!0}IsPlaying(){return this._isPlaying}GetAnimationsByName(){if(!this.loaded)return null;const e={};for(let t=0;t<this.animations.length;t++)e[this.animations[t].animationRes.name]=this.animations[t];return e}GetAnimation(e){for(let t=0;t<this.animations.length;t++)if(this.animations[t].animationRes.name===e)return this.animations[t];return null}ResetAnimation(e){const t=this.GetAnimation(e);if(t)return t.time=0,t.isPlaying=!1,t.callback=null,!0}PlayAnimation(e,t,r){if(0===this.animations.length)return this.pendingCommands.push({func:this.PlayAnimation,args:[e,t,r]}),!0;const i=this.GetAnimation(e);return i?(i.time=0,i.isPlaying=!0,n.util.isUndefined(t)||(i.cycle=t),r&&(i.callback=r),!0):void 0}PlayAnimationFrom(e,t,r,i){if(0===this.animations.length)return this.pendingCommands.push({func:this.PlayAnimationFrom,args:[e,t,r,i]}),!0;const s=this.GetAnimation(e);return s?(s.time=Math.max(Math.min(t,s.animationRes.duration),0),s.isPlaying=!0,n.util.isUndefined(r)||(s.cycle=r),i&&(s.callback=i),!0):void 0}GetPlayingAnimations(){const e=[];for(let t=0;t<this.animations.length;t++)this.animations[t].isPlaying&&e.push(this.animations[t].animationRes.name);return e}StopAnimation(e){if(0===this.animations.length)return void this.pendingCommands.push({func:this.StopAnimation,args:e});e=n.util.toArray(e);const t={};for(let r=0;r<e.length;r++)t[e[r]]=!0;for(let e=0;e<this.animations.length;++e)this.animations[e].animationRes.name in t&&(this.animations[e].isPlaying=!1)}StopAllAnimations(){if(0!==this.animations.length)for(let e=0;e<this.animations.length;++e)this.animations[e].isPlaying=!1;else this.pendingCommands.push({func:this.StopAllAnimations,args:null})}StopAllAnimationsExcept(e){if(0===this.animations.length)return void this.pendingCommands.push({func:this.StopAllAnimationsExcept,args:e});n.util.toArray(e);const t={};for(let r=0;r<e.length;r++)t[e[r]]=!0;for(let e=0;e<this.animations.length;++e)this.animations[e].animationRes.name in t||(this.animations[e].isPlaying=!1)}SetGeometryResource(e){this.models=[],this.animations=[],this.meshBindings=[];for(let e=0;e<this.geometryResources.length;++e)this.geometryResources[e].UnregisterNotification(this);this.loaded=!1,this.geometryResources=[],e&&(this.geometryResources.push(e),e.RegisterNotification(this))}AddGeometryResource(e){for(let t=0;t<this.geometryResources.length;++t)if(this.geometryResources[t]===e)return;this.geometryResources.push(e),e.RegisterNotification(this)}AddAnimationsFromRes(e){for(let t=0;t<e.animations.length;++t){let r=null;for(let n=0;n<this.animations.length;++n)if(this.animations[n].animationRes===e.animations[t]){r=this.animations[t];break}r||((r=new s.Tw2Animation).animationRes=e.animations[t],this.animations.push(r));for(let e=0;e<r.animationRes.trackGroups.length;++e){let t=!1;for(let n=0;n<r.trackGroups.length;++n)if(r.trackGroups[n].trackGroupRes===r.animationRes.trackGroups[e]){t=!0;break}if(t)continue;let n=null;for(let t=0;t<this.models.length;++t)if(this.models[t].modelRes.name===r.animationRes.trackGroups[e].name){n=this.models[t];break}if(null!==n){const t=new c.Tw2TrackGroup;t.trackGroupRes=r.animationRes.trackGroups[e];for(let e=0;e<t.trackGroupRes.transformTracks.length;++e)for(let r=0;r<n.bones.length;++r)if(n.bones[r].boneRes.name===t.trackGroupRes.transformTracks[e].name){const i=new u.Tw2Track;i.trackRes=t.trackGroupRes.transformTracks[e],i.bone=n.bones[r],t.transformTracks.push(i);break}r.trackGroups.push(t)}}}}ResetBoneTransforms(){for(let e=0;e<this.models.length;++e)for(let t=0;t<this.models[e].bones.length;++t){const r=this.models[e].bones[t],i=r.boneRes;n.mat4.copy(r.localTransform,i.localTransform),-1!==i.parentIndex?n.mat4.multiply(r.worldTransform,r.localTransform,this.models[e].bones[r.boneRes.parentIndex].worldTransform):n.mat4.set(r.worldTransform,r.localTransform),n.mat4.identity(r.offsetTransform)}const e=n.mat4.identity(d.global.mat4_0);for(let t=0;t<this.meshBindings.length;++t)for(let r=0;r<this.meshBindings[t].length;++r)for(let n=0;16*n<this.meshBindings[t][r].length;++n)for(let i=0;i<16;++i)this.meshBindings[t][r][16*n+i]=e[i]}GetBoneMatrices(e,t){if(0===this.geometryResources.length)return new Float32Array;t||(t=this.geometryResources[0]);const r=d.FindMeshBindings(this,t);return r&&e<r.length?r[e]:new Float32Array}FindModelForMesh(e,t){if(0===this.geometryResources.length)return null;if(t||(t=this.geometryResources[0]),!t.IsGood())return null;const r=t.meshes[e];for(let e=0;e<this.models.length;++e)for(let t=0;t<this.models[e].modelRes.meshBindings.length;++e)if(this.models[e].modelRes.meshBindings[t].mesh===r)return this.models[e];return null}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<this.geometryResources.length;t++)e.includes(this.geometryResources[t])||e.push(this.geometryResources[t]);return e}OnResPrepared(e){if(this.geometryResources.includes(e)){for(let e=0;e<this.geometryResources.length;++e)if(!this.geometryResources[e].IsGood())return;for(let e=0;e<this.geometryResources.length;++e)d.DoRebuildCachedData(this,this.geometryResources[e])}}Update(e){let t=this._isPlaying;if(this._isPlaying=!1,!this.models||!this.update)return;for(let e=0;e<this.geometryResources.length;++e)this.geometryResources[e].KeepAlive();const r=d.global,i=r.mat4_0,s=r.quat_0,a=r.vec3_0,o=r.mat3_0;for(let t=0;t<this.animations.length;++t){const r=this.animations[t];if(r.isPlaying){this._isPlaying=!0;const t=r.animationRes;r.time+=e*r.timeScale,r.time>t.duration&&(r.callback&&r.callback(this,r,!1),r.cycle?r.time=r.time%t.duration:(r.isPlaying=!1,r.time=t.duration));for(let e=0;e<r.trackGroups.length;++e)for(let u=0;u<r.trackGroups[e].transformTracks.length;++u){const c=r.trackGroups[e].transformTracks[u];c.trackRes.position?n.curve.evaluate(c.trackRes.position,r.time,a,r.cycle,t.duration):a[0]=a[1]=a[2]=0,c.trackRes.orientation?(n.curve.evaluate(c.trackRes.orientation,r.time,s,r.cycle,t.duration),n.quat.normalize(s,s)):n.quat.identity(s),c.trackRes.scaleShear?n.curve.evaluate(c.trackRes.scaleShear,r.time,o,r.cycle,t.duration):n.mat3.identity(o),n.mat4.fromMat3(c.bone.localTransform,o),n.mat4.multiply(c.bone.localTransform,c.bone.localTransform,n.mat4.fromQuat(i,s)),c.bone.localTransform[12]=a[0],c.bone.localTransform[13]=a[1],c.bone.localTransform[14]=a[2]}}}for(let e=0;e<this.models.length;++e)for(let t=0;t<this.models[e].bones.length;++t){const r=this.models[e].bones[t];if(-1!==r.boneRes.parentIndex?n.mat4.multiply(r.worldTransform,this.models[e].bones[r.boneRes.parentIndex].worldTransform,r.localTransform):n.mat4.copy(r.worldTransform,r.localTransform),n.mat4.multiply(r.offsetTransform,r.worldTransform,r.boneRes.worldTransformInv),r.bindingArrays)for(let e=0;e<r.bindingArrays.length;++e)r.bindingArrays[e].array[r.bindingArrays[e].offset+0]=r.offsetTransform[0],r.bindingArrays[e].array[r.bindingArrays[e].offset+1]=r.offsetTransform[4],r.bindingArrays[e].array[r.bindingArrays[e].offset+2]=r.offsetTransform[8],r.bindingArrays[e].array[r.bindingArrays[e].offset+3]=r.offsetTransform[12],r.bindingArrays[e].array[r.bindingArrays[e].offset+4]=r.offsetTransform[1],r.bindingArrays[e].array[r.bindingArrays[e].offset+5]=r.offsetTransform[5],r.bindingArrays[e].array[r.bindingArrays[e].offset+6]=r.offsetTransform[9],r.bindingArrays[e].array[r.bindingArrays[e].offset+7]=r.offsetTransform[13],r.bindingArrays[e].array[r.bindingArrays[e].offset+8]=r.offsetTransform[2],r.bindingArrays[e].array[r.bindingArrays[e].offset+9]=r.offsetTransform[6],r.bindingArrays[e].array[r.bindingArrays[e].offset+10]=r.offsetTransform[10],r.bindingArrays[e].array[r.bindingArrays[e].offset+11]=r.offsetTransform[14]}(this._isPlaying||this._isPlaying!==t)&&(this._boundsDirty=!0)}RenderDebugInfo(e){for(let t=0;t<this.models.length;++t)for(let r=0;r<this.models[t].bones.length;++r){const n=this.models[t].bones[r];if(n.boneRes.parentIndex>=0){const r=this.models[t].bones[n.boneRes.parentIndex];e.AddLine([n.worldTransform[12],n.worldTransform[13],n.worldTransform[14]],[r.worldTransform[12],r.worldTransform[13],r.worldTransform[14]])}}}static AddModel(e,t){for(let r=0;r<e.models.length;++r)if(e.models[r].modelRes.name===t.name)return null;const r=new o.Tw2Model;r.modelRes=t;const n=t.skeleton;if(null!==n)for(let e=0;e<n.bones.length;++e){const t=new a.Tw2Bone;t.boneRes=n.bones[e],r.bones.push(t),r.bonesByName[t.boneRes.name]=t}return e.models.push(r),r}static FindMeshBindings(e,t){for(let r=0;r<e.meshBindings.length;++r)if(e.meshBindings[r].resource===t)return e.meshBindings[r];return null}static DoRebuildCachedData(e,t){const r=[];if(t.meshes.length)for(let n=0;n<t.models.length;++n){const i=d.AddModel(e,t.models[n]);i&&r.push(i)}for(let t=0;t<e.geometryResources.length;++t)e.AddAnimationsFromRes(e.geometryResources[t]);if(0===t.models.length){for(let r=0;r<t.meshes.length;++r)i.Tw2GeometryRes.BindMeshToModel(t.meshes[r],e.geometryResources[0].models[0],t);t.models.push(e.geometryResources[0].models[0])}for(let r=0;r<t.models.length;++r){let n=null;for(let i=0;i<e.models.length;++i)if(e.models[i].modelRes.name===t.models[r].name){n=e.models[i];break}if(null!==n)for(let i=0;i<t.models[r].meshBindings.length;++i){const s=t.meshes.indexOf(t.models[r].meshBindings[i].mesh);let a=d.FindMeshBindings(e,t);null===a&&((a=[]).resource=t,e.meshBindings.push(a)),a[s]=new Float32Array(12*t.models[r].meshBindings[i].bones.length);for(let e=0;e<t.models[r].meshBindings[i].bones.length;++e)for(let o=0;o<n.bones.length;++o)if(n.bones[o].boneRes.name===t.models[r].meshBindings[i].bones[e].name){n.bones[o].bindingArrays||(n.bones[o].bindingArrays=[]),n.bones[o].bindingArrays[n.bones[o].bindingArrays.length]={array:a[s],offset:12*e};break}}}if(t.meshes.length&&t.models.length&&e.ResetBoneTransforms(),e.loaded=!0,e.animations.length){if(e.pendingCommands.length)for(let t=0;t<e.pendingCommands.length;++t)e.pendingCommands[t].args?e.pendingCommands[t].func.apply(e,e.pendingCommands[t].args):e.pendingCommands[t].func.apply(e);e.pendingCommands=[],e.onPendingCleared&&e.onPendingCleared(e)}}}l(d,"global",{vec3_0:n.vec3.create(),quat_0:n.quat.create(),mat3_0:n.mat3.create(),mat4_0:n.mat4.create()})},"./core/model/Tw2Bone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Bone",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"boneRes",null),i(this,"localTransform",n.mat4.create()),i(this,"worldTransform",n.mat4.create()),i(this,"offsetTransform",n.mat4.create())}}},"./core/model/Tw2Model.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2Model",function(){return i});class i{constructor(){n(this,"modelRes",null),n(this,"bones",[]),n(this,"bonesByName",{})}}},"./core/model/Tw2Track.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2Track",function(){return i});class i{constructor(){n(this,"trackRes",null),n(this,"bone",null)}}},"./core/model/Tw2TrackGroup.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2TrackGroup",function(){return i});class i{constructor(){n(this,"trackGroupRes",null),n(this,"model",null),n(this,"transformTracks",[])}}},"./core/model/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/model/Tw2Animation.js");r.d(t,"Tw2Animation",function(){return n.Tw2Animation});var i=r("./core/model/Tw2AnimationController.js");r.d(t,"Tw2AnimationController",function(){return i.Tw2AnimationController});var s=r("./core/model/Tw2Bone.js");r.d(t,"Tw2Bone",function(){return s.Tw2Bone});var a=r("./core/model/Tw2Model.js");r.d(t,"Tw2Model",function(){return a.Tw2Model});var o=r("./core/model/Tw2Track.js");r.d(t,"Tw2Track",function(){return o.Tw2Track});var u=r("./core/model/Tw2TrackGroup.js");r.d(t,"Tw2TrackGroup",function(){return u.Tw2TrackGroup})},"./core/parameter/Tw2FloatParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2FloatParameter",function(){return a});var n=r("./core/parameter/Tw2Parameter.js"),i=r("./global/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2Parameter{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(e),s(this,"value",1),s(this,"_constantBuffer",null),s(this,"_offset",null),this.value=i.util.isArrayLike(t)?t[0]:t}SetValue(e,t,r){this.value=e,this.UpdateValues(t,r)}GetValue(){return this.value}Apply(e,t){e[t]=this.value}Bind(e,t,r){return!this._constantBuffer&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t),!0)}Unbind(){this._constantBuffer=null}EqualsValue(e){return this.value===e}static isValue(e){return i.util.isNumber(e)}static black(e){return[["name",e.string],["value",e.float]]}}s(a,"constantBufferSize",1)},"./core/parameter/Tw2Matrix4Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Matrix4Parameter",function(){return u}),r.d(t,"Tw2MatrixParameter",function(){return c});var n,i,s,a=r("./global/index.js"),o=r("./core/parameter/Tw2VectorParameter.js");class u extends o.Tw2VectorParameter{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.mat4.create())}Compose(e,t,r){"value"in e&&(e=e.value),"value"in t&&(t=t.value),"value"in r&&(r=r.value),a.mat4.fromRotationTranslationScale(this.value,e,t,r),this.OnValueChanged()}Decompose(e,t,r){a.mat4.getRotation("value"in e?e.value:e,this.value),a.mat4.getTranslation("value"in t?t.value:t,this.value),a.mat4.getScaling("value"in r?r.value:r,this.value),"OnValueChanged"in e&&e.OnValueChanged(),"OnValueChanged"in t&&t.OnValueChanged(),"OnValueChanged"in r&&r.OnValueChanged()}get x(){return this.GetIndexValue(12)}set x(e){this.SetIndexValue(12,e)}get y(){return this.GetIndexValue(13)}set y(e){this.SetIndexValue(13,e)}get z(){return this.GetIndexValue(14)}set z(e){this.SetIndexValue(14,e)}static black(e){return[["name",e.string],["value",e.matrix]]}}function c(e,t){return console.warn("Tw2MatrixParameter is deprecated, use Tw2Matrix4Parameter instead"),new u(e,t)}s=16,(i="constantBufferSize")in(n=u)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./core/parameter/Tw2Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Parameter",function(){return u});var n,i,s,a=r("./global/index.js"),o=r("./core/Tw2Error.js");class u extends a.Tw2BaseClass{get size(){return this.constructor.constantBufferSize}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(),this.name=e}GetValue(){throw new o.ErrAbstractClassMethod}Bind(e,t,r){throw new o.ErrAbstractClassMethod}Unbind(){throw new o.ErrAbstractClassMethod}Apply(e,t,r){throw new o.ErrAbstractClassMethod}}s=0,(i="constantBufferSize")in(n=u)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./core/parameter/Tw2TextureParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureParameter",function(){return u});var n=r("./global/index.js"),i=r("./core/sampler/index.js"),s=r("./core/parameter/Tw2Parameter.js"),a=r("./core/resource/Tw2TextureRes.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends s.Tw2Parameter{constructor(e,t){super(e),o(this,"resourcePath",""),o(this,"addressUMode",1),o(this,"addressVMode",1),o(this,"addressWMode",1),o(this,"filterMode",2),o(this,"maxAnisotropy",4),o(this,"mipFilterMode",2),o(this,"textureRes",null),o(this,"useAllOverrides",!1),o(this,"_sampler",null),t&&(this.resourcePath=t,this.Initialize())}get isTextureAttached(){return this.textureRes&&this.textureRes._isAttached}Initialize(){this.UpdateValues()}SetValue(e){this.resourcePath=e,this.OnValueChanged()}GetValue(){return this.isTextureAttached?null:this.resourcePath}SetTextureRes(e){return this.textureRes!==e&&(this.resourcePath="",this.textureRes=e,this.textureRes&&(this.textureRes._isAttached=!0),!0)}OnValueChanged(e,t){if(this.resourcePath=this.resourcePath.toLowerCase(),""!==this.resourcePath)if(0===this.resourcePath.indexOf("rgba:/")){if(!this.textureRes||this.textureRes.path!==this.resourcePath){const e=this.resourcePath.replace("rgba:/","").split(","),t=n.device.CreateSolidTexture([parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),void 0!==e[3]?parseFloat(e[3]):255]);this.textureRes=new a.Tw2TextureRes,this.textureRes.path=this.resourcePath,this.textureRes.Attach(t)}}else this.textureRes=n.resMan.GetResource(this.resourcePath);else this.textureRes=null;this.UpdateOverrides()}Apply(e,t,r){this.textureRes&&(this.useAllOverrides&&this._sampler&&(this._sampler.samplerType=t.samplerType,this._sampler.isVolume=t.isVolume,this._sampler.registerIndex=t.registerIndex,t=this._sampler),n.device.gl.activeTexture(n.device.gl.TEXTURE0+e),this.textureRes.Bind(t,r))}SetOverrides(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.util.assignIfExists(this,e,u.overrideProperties),this.OnValueChanged()}GetOverrides(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.util.assignIfExists(e,this,u.overrideProperties),e}UpdateOverrides(){if(this.useAllOverrides){this._sampler=this._sampler||new i.Tw2SamplerState;const e=n.device.wrapModes,t=n.device.gl,r=this._sampler;if(1===this.filterMode){switch(this.mipFilterMode){case 0:r.minFilter=t.NEAREST;break;case 1:r.minFilter=t.NEAREST_MIPMAP_NEAREST;break;default:r.minFilter=t.NEAREST_MIPMAP_LINEAR}r.minFilterNoMips=t.NEAREST,r.magFilter=t.NEAREST}else{switch(this.mipFilterMode){case 0:r.minFilter=t.LINEAR;break;case 1:r.minFilter=t.LINEAR_MIPMAP_NEAREST;break;default:r.minFilter=t.LINEAR_MIPMAP_LINEAR}r.minFilterNoMips=t.LINEAR,r.magFilter=t.LINEAR}r.addressU=e[this.addressUMode],r.addressV=e[this.addressVMode],r.addressW=e[this.addressWMode],r.anisotropy=this.maxAnisotropy,r.ComputeHash()}else this._sampler&&(this._sampler=null)}EqualsValue(e){return e.toLowerCase()===this.GetValue()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.textureRes&&!e.includes(this.textureRes)&&e.push(this.textureRes),e}static isValue(e){return n.util.isString(e)}static black(e){return[["name",e.string],["resourcePath",e.string]]}}o(u,"overrideProperties",["useAllOverrides","addressUMode","addressVMode","addressWMode","filterMode","mipFilterMode","maxAnisotropy"])},"./core/parameter/Tw2TransformParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TransformParameter",function(){return a});var n=r("./global/index.js"),i=r("./core/parameter/Tw2Parameter.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2Parameter{constructor(){super(...arguments),s(this,"rotation",n.quat.create()),s(this,"scaling",n.vec3.fromValues(1,1,1)),s(this,"rotationCenter",n.vec3.create()),s(this,"translation",n.vec3.create()),s(this,"transform",n.mat4.create()),s(this,"_transformTranspose",n.mat4.create()),s(this,"_constantBuffer",null),s(this,"_offset",null)}Initialize(){this.UpdateValues()}GetValue(e){return e?Array.from(this.transform):new Float32Array(this.transform)}OnValueChanged(e,t){n.mat4.fromRotationTranslationScaleOrigin(this.transform,this.rotation,this.translation,this.scaling,this.rotationCenter),n.mat4.transpose(this._transformTranspose,this.transform)}Bind(e,t,r){return!this._constantBuffer&&r>=this.size&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t,r),!0)}Apply(e,t,r){r>=this.constructor.constantBufferSize?e.set(this._transformTranspose,t):e.set(this._transformTranspose.subarray(0,r),t)}static black(e){return[["name",e.string],["rotation",e.vector4]]}}s(a,"constantBufferSize",16)},"./core/parameter/Tw2VariableParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VariableParameter",function(){return s});var n=r("./global/index.js"),i=r("./core/parameter/Tw2Parameter.js");class s extends i.Tw2Parameter{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r,n,i;super(e),i="",(n="variableName")in(r=this)?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,this.variableName=t}get variable(){return n.store.variables.Get(this.variableName)}get size(){return this.variable?this.variable.size:0}GetValue(e){return n.store.variables.Get(this.variableName,e)}Apply(e,t,r){this.variable&&this.variable.Apply(e,t,r)}static black(e){return[["name",e.string],["variableName",e.string]]}}},"./core/parameter/Tw2Vector2Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector2Parameter",function(){return u});var n,i,s,a=r("./global/index.js"),o=r("./core/parameter/Tw2VectorParameter.js");class u extends o.Tw2VectorParameter{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.vec2.fromValues(1,1))}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}}s=2,(i="constantBufferSize")in(n=u)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./core/parameter/Tw2Vector3Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector3Parameter",function(){return u});var n,i,s,a=r("./global/index.js"),o=r("./core/parameter/Tw2VectorParameter.js");class u extends o.Tw2VectorParameter{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.vec3.fromValues(1,1,1))}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}get z(){return this.GetIndexValue(2)}set z(e){this.SetIndexValue(2,e)}}s=3,(i="constantBufferSize")in(n=u)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./core/parameter/Tw2Vector4Parameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector4Parameter",function(){return u});var n,i,s,a=r("./global/index.js"),o=r("./core/parameter/Tw2VectorParameter.js");class u extends o.Tw2VectorParameter{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.vec4.fromValues(1,1,1,1))}get x(){return this.GetIndexValue(0)}set x(e){this.SetIndexValue(0,e)}get y(){return this.GetIndexValue(1)}set y(e){this.SetIndexValue(1,e)}get z(){return this.GetIndexValue(2)}set z(e){this.SetIndexValue(2,e)}get w(){return this.GetIndexValue(3)}set w(e){this.SetIndexValue(3,e)}static black(e){return[["name",e.string],["value",e.vector4]]}}s=4,(i="constantBufferSize")in(n=u)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./core/parameter/Tw2VectorParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorParameter",function(){return a});var n=r("./core/Tw2Error.js"),i=r("./global/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2BaseClass{get size(){return this.constructor.constantBufferSize}constructor(e,t){super(),s(this,"value",new Float32Array(this.size)),s(this,"_constantBuffer",null),s(this,"_offset",null),this.name=e,t&&this.value.set(t)}SetValue(e,t,r){this.value.set(e),this.UpdateValues(t,r)}SetIndexValue(e,t,r,i){if(void 0===this.value[e])throw new n.ErrIndexBounds;this.value[e]!==t&&(this.value[e]=t,this.UpdateValues())}GetValue(e){const t=this._constantBuffer?this._constantBuffer.subarray(this._offset,this._offset+this.size):this.value;return e?Array.from(t):new Float32Array(t)}GetIndexValue(e){if(void 0!==this.value[e])return this.value[e];throw new n.ErrIndexBounds}OnValueChanged(e,t){this._constantBuffer&&this.Apply(this._constantBuffer,this._offset)}Bind(e,t,r){return!this._constantBuffer&&r>=this.size&&(this._constantBuffer=e,this._offset=t,this.Apply(e,t,r),!0)}Unbind(){this._constantBuffer=null}Apply(e,t,r){e.set(this.value,t)}EqualsValue(e){for(let t=0;t<this.size;t++)if(this.value[t]!==e[t])return!1;return!0}static isValue(e){return i.util.isArrayLike(e)&&e.length===this.constantBufferSize}}s(a,"constantBufferSize",0)},"./core/parameter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/parameter/Tw2Parameter.js");r.d(t,"Tw2Parameter",function(){return n.Tw2Parameter});var i=r("./core/parameter/Tw2FloatParameter.js");r.d(t,"Tw2FloatParameter",function(){return i.Tw2FloatParameter});var s=r("./core/parameter/Tw2Matrix4Parameter.js");r.d(t,"Tw2Matrix4Parameter",function(){return s.Tw2Matrix4Parameter}),r.d(t,"Tw2MatrixParameter",function(){return s.Tw2MatrixParameter});var a=r("./core/parameter/Tw2TransformParameter.js");r.d(t,"Tw2TransformParameter",function(){return a.Tw2TransformParameter});var o=r("./core/parameter/Tw2VariableParameter.js");r.d(t,"Tw2VariableParameter",function(){return o.Tw2VariableParameter});var u=r("./core/parameter/Tw2Vector2Parameter.js");r.d(t,"Tw2Vector2Parameter",function(){return u.Tw2Vector2Parameter});var c=r("./core/parameter/Tw2Vector3Parameter.js");r.d(t,"Tw2Vector3Parameter",function(){return c.Tw2Vector3Parameter});var l=r("./core/parameter/Tw2Vector4Parameter.js");r.d(t,"Tw2Vector4Parameter",function(){return l.Tw2Vector4Parameter});var d=r("./core/parameter/Tw2TextureParameter.js");r.d(t,"Tw2TextureParameter",function(){return d.Tw2TextureParameter})},"./core/post/Tr2PostProcess.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PostProcess",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"stages",[])}static black(e){return[["stages",e.array]]}}i(s,"__isStaging",4)},"./core/post/Tw2PostEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffect",function(){return l});var n=r("./global/index.js"),i=r("./core/Tw2RenderTarget.js"),s=r("./core/resource/Tw2TextureRes.js"),a=r("./core/parameter/index.js"),o=r("./core/post/Tw2PostEffectStep.js"),u=r("./global/util/index.js");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends n.Tw2BaseClass{constructor(){super(...arguments),c(this,"display",!0),c(this,"index",-1),c(this,"curveSet",null),c(this,"steps",[]),c(this,"_width",0),c(this,"_height",0),c(this,"_targets",{}),c(this,"_texture",null),c(this,"_visibleSteps",[]),c(this,"_dirty",!0),c(this,"_onChildModified",e=>this.UpdateValues(e)),c(this,"_onModified",null)}OnValueChanged(){this._dirty=!0,this._onModified&&this._onModified(this)}IsGood(){let e=0;for(let t=0;t<this.steps.length;t++)this.steps[t].IsGood()&&e++;return e===this.steps.length}KeepAlive(){for(let e=0;e<this.steps.length;e++)this.steps[e].KeepAlive()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<this.steps.length;t++)this.steps[t].GetResources(e);return e}CreateItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=o.Tw2PostEffectStep.from(e);return this.AddItem(t),t}AddItem(e){this.steps.includes(e)||(-1===e.index&&(e.index=this.steps.length),e._onModified=this._onChildModified,this.steps.push(e),this.UpdateValues(e))}RemoveItem(e){const t=this.steps.indexOf(e);-1!==t&&(e._onModified=null,this.steps.splice(t,1),this.UpdateValues(e))}ClearItems(){for(let e=0;e<this.steps.length;e++)this.steps[e]._onModified=null;this.steps=[],this.UpdateValues()}GetTarget(e){return e&&e in this._targets?this._targets[e]:null}HasTarget(e){return!(!e||!this._targets[e])}CreateTarget(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.device.viewportWidth,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.device.viewportHeight;return this._targets[e]||(this._targets[e]=new i.Tw2RenderTarget,this._targets[e].name=e),this._targets[e].Create(t,r,!1),this._targets[e]}Update(e){this.curveSet&&this.curveSet.Update(e)}Render(){const e=n.device,t=e.gl,r=e.viewportWidth,i=e.viewportHeight;if(!this.IsGood()||!this.display||r<=0||i<=0)return!1;if(r!==this._width||i!==this._height||this._dirty||!this._texture){this._texture||(this._texture=new s.Tw2TextureRes,this._texture.Attach(t.createTexture())),t.bindTexture(t.TEXTURE_2D,this._texture.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,i,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null),this._width=r,this._height=i,this._visibleSteps=[];for(let e=0;e<this.steps.length;++e){const t=this.steps[e],n=t.inputs,s=t.effect,o=s.shader,u=s.parameters;o.HasTexture("BlitCurrent")&&!u.BlitCurrent&&(u.BlitCurrent=new a.Tw2TextureParameter("BlitCurrent","rgba:/0,0,0,255")),o.HasTexture("BlitOriginal")&&!u.BlitOriginal&&(u.BlitOriginal=new a.Tw2TextureParameter("BlitOriginal","rgba:/0,0,0,255")),t.target?t._renderTarget=this.CreateTarget(t.target,r,i):t._renderTarget=null;for(let e in n)if(n.hasOwnProperty(e))if(o.HasTexture(e)){u[e]||(u[e]=new a.Tw2TextureParameter(e));const t=u[e],s=n[e];s?t.SetTextureRes(this.CreateTarget(s,r,i).texture):t.SetTextureRes(this._texture)}else console.warn("Invalid input parameter ".concat(e)),delete n[e];if("BlitCurrent"in n&&o.HasConstant("g_texelSize")){u.g_texelSize||(u.g_texelSize=new a.Tw2Vector4Parameter("g_texelSize",[1,1,1,1]));const e=u.g_texelSize,t=this.GetTarget(n.BlitCurrent);t?(e.value[0]=1/t.width,e.value[1]=1/t.width):(e.value[0]=1/r,e.value[1]=1/r),e.UpdateValues(this)}t.display&&this._visibleSteps.push(t),t._dirty=!1}this._visibleSteps.sort((e,t)=>e.index-t.index),this._dirty=!1}t.bindTexture(t.TEXTURE_2D,this._texture.texture),t.copyTexImage2D(t.TEXTURE_2D,0,e.alphaBlendBackBuffer?t.RGBA:t.RGB,0,0,r,i,0),t.bindTexture(t.TEXTURE_2D,null),e.SetStandardStates(n.device.RM_OPAQUE);let o=0;for(let n=0;n<this._visibleSteps.length;++n){const s=this._visibleSteps[n];s.display&&(s._renderTarget?s._renderTarget.Set():(t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,r,i)),e.RenderFullScreenQuad(s.effect),o++)}return!!o}static from(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new this;if(Object(u.assignIfExists)(t,e,["name","display","index"]),e.steps)for(let r=0;r<e.steps.length;r++)t.CreateItem(e.steps[r]);return t}}c(l,"Item",o.Tw2PostEffectStep)},"./core/post/Tw2PostEffectManager.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffectManager",function(){return a});var n=r("./core/post/Tw2PostEffect.js"),i=r("./global/class/Tw2BaseClass.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2BaseClass{constructor(){super(...arguments),s(this,"name","Post manager"),s(this,"display",!0),s(this,"effects",[]),s(this,"_dirty",!0),s(this,"_onChildValueChanged",e=>this.UpdateValues(e)),s(this,"_visibleEffects",[])}OnValueChanged(){this._dirty=!0}IsGood(){let e=0;for(let t=0;t<this.effects.length;t++)this.effects[t].IsGood()&&e++;return e===this.effects.length}KeepAlive(){for(let e=0;e<this.effects.length;e++)this.effects[e].KeepAlive()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<this.effects.length;t++)this.effects[t].GetResources(e);return e}CreateItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=n.Tw2PostEffect.from(e);return this.AddItem(t),t}AddItem(e){this.effects.includes(e)||(-1===e.index&&(e.index=this.effects.length),e._onModified=this._onChildValueChanged,this.effects.push(e),this.UpdateValues(e))}RemoveItem(e){const t=this.effects.indexOf(e);-1!==t&&(e._onModified=null,this.effects.splice(t,1),this.UpdateValues(e))}ClearItems(){for(let e=0;e<this.effects.length;e++)this.effects[e]._onModified=null,this.effects[e].ClearItems();this.effects=[],this.UpdateValues()}Update(e){if(this._dirty){this._visibleEffects=[];for(let e=0;e<this.effects.length;e++)this.effects[e].display&&this._visibleEffects.push(this.effects[e]);this._visibleEffects.sort((e,t)=>e.index-t.index),this._dirty=!1}for(let t=0;t<this.effects.length;t++)this.effects[t].Update(e)}Render(){if(!this.display)return this.KeepAlive(),!1;let e=0;for(let t=0;t<this._visibleEffects.length;t++)this._visibleEffects[t].Render()&&e++;return!!e}}s(a,"Item",n.Tw2PostEffect)},"./core/post/Tw2PostEffectStep.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PostEffectStep",function(){return o});var n=r("./global/util/index.js"),i=r("./core/mesh/Tw2Effect.js"),s=r("./global/class/Tw2BaseClass.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.Tw2BaseClass{constructor(){super(...arguments),a(this,"index",-1),a(this,"display",!0),a(this,"effect",null),a(this,"target",null),a(this,"inputs",{}),a(this,"_renderTarget",null),a(this,"_dirty",!0),a(this,"_onModified",null)}OnValueChanged(){this._dirty=!0,this._onModified&&this._onModified(this)}IsGood(){return!!this.effect&&this.effect.IsGood()}KeepAlive(){this.effect&&this.effect.KeepAlive()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}static from(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new this;return Object(n.assignIfExists)(t,e,["name","display","target","index"]),e.inputs&&Object.assign(t.inputs,e.inputs),t.effect=i.Tw2Effect.from({name:e.name,autoParameter:!0,effectFilePath:e.effectFilePath,parameters:e.parameters,textures:e.textures,overrides:e.overrides}),t}}},"./core/post/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/post/Tw2PostEffect.js");r.d(t,"Tw2PostEffect",function(){return n.Tw2PostEffect});var i=r("./core/post/Tw2PostEffectManager.js");r.d(t,"Tw2PostEffectManager",function(){return i.Tw2PostEffectManager});var s=r("./core/post/Tw2PostEffectStep.js");r.d(t,"Tw2PostEffectStep",function(){return s.Tw2PostEffectStep});var a=r("./core/post/Tr2PostProcess.js");r.d(t,"Tr2PostProcess",function(){return a.Tr2PostProcess})},"./core/reader/Tw2BinaryReader.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2BinaryReader",function(){return i});class i{constructor(e){n(this,"data",null),n(this,"cursor",0),this.data=e}ReadUInt8(){return this.data[this.cursor++]}ReadInt8(){let e=this.data[this.cursor++];return e>127&&(e=e-255-1),e}ReadUInt16(){return this.data[this.cursor++]+(this.data[this.cursor++]<<8)}ReadInt16(){let e=this.data[this.cursor++]+(this.data[this.cursor++]<<8);return e>32767&&(e=e-65535-1),e}ReadUInt32(){return this.data[this.cursor++]+(this.data[this.cursor++]<<8)+(this.data[this.cursor++]<<16)+(this.data[this.cursor++]<<24>>>0)}ReadInt32(){let e=this.data[this.cursor++]+(this.data[this.cursor++]<<8)+(this.data[this.cursor++]<<16)+(this.data[this.cursor++]<<24>>>0);return e>2147483647&&(e=e-4294967295-1),e}ReadFloat16(){let e=this.data[this.cursor++],t=this.data[this.cursor++];const r=(t>>2&31)-15,n=(3&t)<<8|e;return 0===n&&-15===r?0:(1-2*(t>>7))*(1+n*Math.pow(2,-10))*Math.pow(2,r)}ReadFloat32(){let e=this.data[this.cursor++],t=this.data[this.cursor++],r=this.data[this.cursor++],n=this.data[this.cursor++];const i=(n<<1&255|r>>7)-127,s=(127&r)<<16|t<<8|e;return 0===s&&-127===i?0:(1-2*(n>>7))*(1+s*Math.pow(2,-23))*Math.pow(2,i)}ReadString(){const e=this.data[this.cursor++];let t="";for(let r=0;r<e;++r)t+=String.fromCharCode(this.data[this.cursor++]);return t}}},"./core/reader/Tw2BlackBinaryReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlackBinaryReader",function(){return s});var n=r("./core/Tw2Error.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(e,t){i(this,"data",null),i(this,"context",null),i(this,"cursor",0),this.data=e,this.context=t,this.cursor=0}get length(){return this.data.byteLength-this.cursor}get stringTable(){return this.context._stringTable}get references(){return this.context._ids}AtEnd(){return 0===this.length}ReadBinaryReader(e){return new s(this.ReadDataView(e),this.context)}ReadCString(){const e=this.data,t=this.cursor;for(;0!==this.ReadU8(););const r=e.byteOffset+t,n=this.cursor-t-1,i=new Uint8Array(e.buffer,r,n);return s.stringDecoder.decode(i)}ReadCWString(){const e=this.data,t=this.cursor;for(;0!==this.ReadU16(););const r=e.byteOffset+t,n=this.cursor-t-2,i=new Uint8Array(e.buffer,r,n);return s.wstringDecoder.decode(i)}ReadDataView(e){if(e<0)throw new n.ErrBinaryReaderReadError({readError:'Argument should be positive: got "'.concat(e,'"')});if(this.length<e)throw new n.ErrBinaryReaderReadError({readError:"Argument is too big: remaining ".concat(this.length,', got "').concat(e,'"')});const t=this.data,r=new DataView(t.buffer,t.byteOffset+this.cursor,e);return this.cursor+=e,r}ReadF32(){const e=this.data.getFloat32(this.cursor,!0);return this.cursor+=4,e}ReadF64(){const e=this.data.getFloat64(this.cursor,!0);return this.cursor+=8,e}ReadStringU16(){let e=this.ReadU16();if(e>this.stringTable.length)throw new n.ErrBinaryReaderReadError({readError:'Reading string "'.concat(e,'" but only ').concat(this.stringTable.length," exist")});return this.stringTable[e]}ReadU8(){let e=this.data.getUint8(this.cursor);return this.cursor+=1,e}ReadU16(){let e=this.data.getUint16(this.cursor,!0);return this.cursor+=2,e}ReadU16Array(e){if(e<0)throw new n.ErrBinaryReaderReadError({readError:'Argument should be positive but got "'.concat(e,'"')});let t=new Uint16Array(e);for(let r=0;r<e;r++)t[r]=this.ReadU16();return t}ReadU32(){let e=this.data.getUint32(this.cursor,!0);return this.cursor+=4,e}ReadU32Array(e){if(e<0)throw new n.ErrBinaryReaderReadError({readError:"Argument should be positive: got ".concat(e)});let t=new Uint32Array(e);for(let r=0;r<e;r++)t[r]=this.ReadU32();return t}ExpectEnd(e){if(0!==this.length)throw new n.ErrBinaryReaderReadError({readError:"".concat(e,": expected 0 bytes remaining, got ").concat(this.length)})}ExpectU8(e,t){s.expect(this.ReadU8(),e,t)}ExpectU16(e,t){s.expect(this.ReadU16(),e,t)}ExpectU32(e,t){s.expect(this.ReadU32(),e,t)}static expect(e,t,r){if(e!==t)throw new n.ErrBinaryReaderReadError({readError:"".concat(r,": expected ").concat(t,", got ").concat(e)})}}i(s,"stringDecoder",new TextDecoder("utf-8")),i(s,"wstringDecoder",new TextDecoder("utf-16le"))},"./core/reader/Tw2BlackPropertyReaders.js":function(e,t,r){"use strict";r.r(t),r.d(t,"object",function(){return a}),r.d(t,"plain",function(){return o}),r.d(t,"array",function(){return u}),r.d(t,"boolean",function(){return c}),r.d(t,"string",function(){return l}),r.d(t,"enums",function(){return d}),r.d(t,"path",function(){return h}),r.d(t,"float",function(){return f}),r.d(t,"ushort",function(){return m}),r.d(t,"uint",function(){return v}),r.d(t,"byte",function(){return p}),r.d(t,"vector2",function(){return E}),r.d(t,"vector3",function(){return _}),r.d(t,"color",function(){return g}),r.d(t,"vector4",function(){return S}),r.d(t,"matrix",function(){return T}),r.d(t,"indexBuffer",function(){return b}),r.d(t,"struct",function(){return R}),r.d(t,"structList",function(){return j});var n=r("./global/index.js"),i=r("./core/Tw2Error.js");function s(e){0===e.indexOf("res:")&&(e="cdn:"+e.substring(4));let t="";const r=e.lastIndexOf(".");switch(-1!==r&&(t=e.substr(r+1).toLowerCase()),t){case"dds":case"png":e=(e=(e=e.replace("_lowdetail","")).replace("_mediumdetail","")).replace(t,"0.".concat(t));break;case"gr2":e=e.replace(t,"wbg").replace("cdn:","res:");break;case"red":e=e.replace(t,"black");break;case"sm_hi":case"sm_lo":e=e.replace(t,"fx");break;case"sm_depth":e=""}return e}function a(e,t,r){let s=e.context;const a=void 0!==r,o=n.store.classes.constructor.DEBUG_ENABLED;if(!a){if(0===(r=e.ReadU32()))return null;if(e.references.has(r))return e.references.get(r)}let u=e.ReadBinaryReader(e.ReadU32()),c=u.ReadStringU16();if(t||(t=s.ConstructType(c)),a||e.references.set(r,t),!n.store.blacks.Has(c))throw new i.ErrBinaryObjectTypeNotFound({type:c});let l=n.store.blacks.Get(c);for(;!u.AtEnd();){let e=u.ReadStringU16();if(!l.has(e))throw o&&console.dir(t),new i.ErrBinaryReaderReadError({readError:'Unknown property "'.concat(e,'" for "').concat(c,'"')});e in t||o&&console.log("'".concat(c,"' missing property: '").concat(e,"'"));try{t[e]=l.get(e)(u,t[e])}catch(r){throw o&&console.dir(t),new i.ErrBinaryReaderReadError({readError:"".concat(e," > ")+r.message})}}return u.ExpectEnd("object did not read to end"),"Initialize"in t&&t.Initialize(),t}function o(e){return a(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},null)}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e.ReadU32();for(let n=0;n<r;n++)t[n]=a(e);return t}function c(e){return 0!==e.ReadU8()}function l(e){return s(e.ReadStringU16())}function d(e){const t=e.ReadStringU16().split(","),r={};for(let e=0;e<t.length;e++){const n=t[e].split("=");r[n[0]]=Number(n[1])}return r}function h(e){return s(e.ReadStringU16())}function f(e){return e.ReadF32()}function m(e){return e.ReadU16()}function v(e){return e.ReadU32()}function p(e){return e.ReadU8()}function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.vec2.create();return n.vec2.set(t,e.ReadF32(),e.ReadF32())}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.vec3.create();return n.vec3.set(t,e.ReadF32(),e.ReadF32(),e.ReadF32())}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.vec4.create();return n.vec4.set(t,e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.vec4.create();return n.vec4.set(t,e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32())}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.mat4.create();const r=new ArrayBuffer(64);return n.mat4.set(t,...S(e,new Float32Array(r,0,4)),...S(e,new Float32Array(r,16,4)),...S(e,new Float32Array(r,32,4)),...S(e,new Float32Array(r,48,4)))}function b(e){let t=e.ReadU32();if(4===e.ReadU16())return e.ReadU32Array(t);throw"unsupported for now"}function R(e){return function(t){return e.blackStruct(t)}}function j(e){return function(t){let r=t.ReadU32(),n=t.ReadU16(),i=[];for(let s=0;s<r;s++){let r=t.ReadBinaryReader(n);i[s]=e.blackStruct(r),r.ExpectEnd("struct read to end")}return i}}},"./core/reader/Tw2BlackReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BlackReader",function(){return u});var n=r("./global/index.js"),i=r("./core/reader/Tw2BlackBinaryReader.js"),s=r("./core/Tw2Error.js"),a=r("./core/reader/Tw2BlackPropertyReaders.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u{constructor(e){o(this,"data",null),o(this,"_ids",null),o(this,"_comments",null),o(this,"_reader",null),o(this,"_start",0),o(this,"_stringTable",null),e&&(this.data=e instanceof ArrayBuffer?new DataView(e):e,this.Initialize())}Initialize(){if(!(this.data&&this.data instanceof DataView))throw new s.ErrBinaryFormat({formatError:"expected DataView"});const e=new i.Tw2BlackBinaryReader(this.data,this);if(2980901150!==e.ReadU32())throw new s.ErrBinaryFormat({formatError:"wrong FOURCC"});if(1!==e.ReadU32())throw new s.ErrBinaryFormat({formatError:"wrong version"});const t=e.ReadBinaryReader(e.ReadU32()),r=t.ReadU16();this._stringTable=[];for(let e=0;e<r;e++)this._stringTable[e]=t.ReadCString();t.ExpectEnd();const n=e.ReadBinaryReader(e.ReadU32()),a=n.ReadU16();this._comments=[];for(let e=0;e<a;e++)this._comments[e]=n.ReadCWString();n.ExpectEnd(),this._ids=new Map,this._reader=e,this._start=e.cursor}Construct(){return this._reader.cursor=this._start,Object(a.object)(this._reader)}ConstructType(e){const t=n.store.classes.Get(e);if(t)return new t;if(u.DEBUG_ENABLED)return{_type:e};throw new s.ErrBinaryObjectTypeNotFound({type:e})}}o(u,"DEBUG_ENABLED",!0)},"./core/reader/Tw2ObjectReader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ObjectReader",function(){return o});var n=r("./global/index.js"),i=r("./core/reader/Tw2BinaryReader.js"),s=r("./core/Tw2Error.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o{constructor(e){a(this,"xmlNode",null),a(this,"_inputStack",null),a(this,"_initializeObjects",null),a(this,"_ids",{}),a(this,"_reader",null),a(this,"_stringTable",null),a(this,"_start",null),e&&(this.xmlNode=e,e&&this.Initialize())}Initialize(){if(!o.IsValidXML(this.xmlNode))throw new s.ErrBinaryFormat({formatError:"Invalid binary, expected binred"});this._reader=new i.Tw2BinaryReader(new Uint8Array(this.xmlNode)),this._reader.cursor+=6,this._stringTable=[];const e=this._reader.ReadUInt32();for(let t=0;t<e;++t){const e=this._reader.ReadUInt16();this._stringTable.push(String.fromCharCode.apply(null,this._reader.data.subarray(this._reader.cursor,this._reader.cursor+e))),this._reader.cursor+=e}this._start=this._reader.cursor}Construct(){return this._reader.cursor=this._start,o.ReadElement(this)}static IsValidXML(e){return e&&"binred"===String.fromCharCode.apply(null,new Uint8Array(e).subarray(0,6))}static ConstructObject(e){if("json"===e.type)return e;let t=n.store.classes.Get(e.type);if(!t){if(!o.DEBUG_ENABLED)throw new s.ErrBinaryObjectTypeNotFound({type:e.type});t=Object}const r=new t;for(let t in e)if(e.hasOwnProperty(t)&&"type"!==t)if(e[t].constructor===Object){if(this.DEBUG_ENABLED&&(r[t]=r[t]||{}),r[t])for(let n in e[t])e[t].hasOwnProperty(n)&&(r[t][n]=e[t][n])}else r[t]=e[t];return"Initialize"in r&&r.Initialize(),r}static ReadUint(e,t){switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadUInt8();case this.ElementSize.MEDIUM:return e._reader.ReadUInt16();default:return e._reader.ReadUInt32()}}static ReadElementData(e,t){let r,n,i,a,o;switch(15&t){case this.ElementRawType.NULL:return null;case this.ElementRawType.BOOL:switch(48&t){case this.ElementSize.SMALL:return 0!==e._reader.ReadUInt8();case this.ElementSize.MEDIUM:return!1;default:return!0}case this.ElementRawType.INT:switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadInt8();case this.ElementSize.MEDIUM:return e._reader.ReadInt16();default:return e._reader.ReadInt32()}case this.ElementRawType.UINT:return this.ReadUint(e,t);case this.ElementRawType.FLOAT:switch(48&t){case this.ElementSize.SMALL:return e._reader.ReadFloat16();case this.ElementSize.MEDIUM:return e._reader.ReadFloat32();default:throw new s.ErrFeatureNotImplemented({feature:"Element raw type Float64"})}case this.ElementRawType.STRING:return r=this.ReadUint(e,t),e._stringTable[r];case this.ElementRawType.ARRAY:for(a=this.ReadUint(e,t),i=[],n=0;n<a;++n)i.push(this.ReadElement(e));return i;case this.ElementRawType.MAPPING:for(a=this.ReadUint(e,t),i={},n=0;n<a;++n)i[e._stringTable[this.ReadUint(e,t)]]=this.ReadElement(e);return i;case this.ElementRawType.OBJECT:for(a=this.ReadUint(e,t),i={},n=0;n<a;++n)i[e._stringTable[this.ReadUint(e,t)]]=this.ReadElement(e);return this.ConstructObject(i);case this.ElementRawType.TYPED_ARRAY:for(a=this.ReadUint(e,t),o=e._reader.ReadUInt8(),i=[],n=0;n<a;++n)i.push(this.ReadElementData(e,o));return o in this.TypedArrays&&(i=new this.TypedArrays[o](i)),i;case this.ElementRawType.TYPED_MAPPING:for(a=this.ReadUint(e,t),o=e._reader.ReadUInt8(),i={},n=0;n<a;++n)i[e._stringTable[this.ReadUint(e,t)]]=this.ReadElementData(e,o);return i}}static ReadElement(e){const t=e._reader.ReadUInt8();if(t===this.REFERENCE_BIT)return e._ids[e._reader.ReadUInt16()];let r;0!=(t&this.ID_BIT)&&(r=e._reader.ReadUInt16());const n=this.ReadElementData(e,63&t);return 0!=(t&this.ID_BIT)&&(e._ids[r]=n),n}}a(o,"DEBUG_ENABLED",!1),a(o,"ID_BIT",64),a(o,"REFERENCE_BIT",128),a(o,"ElementRawType",{NULL:0,BOOL:1,INT:2,UINT:3,FLOAT:4,STRING:5,ARRAY:6,MAPPING:7,OBJECT:8,TYPED_ARRAY:9,TYPED_MAPPING:10}),a(o,"ElementSize",{SMALL:0,MEDIUM:16,LARGE:32}),a(o,"TypedArrays",{2:Int8Array,3:Uint8Array,18:Int16Array,19:Uint16Array,34:Int32Array,35:Uint32Array,4:Float32Array,20:Float32Array,36:Float64Array});const u=o.ElementRawType,c=o.ElementSize;o.ElementTypes={NULL:u.NULL|c.SMALL,BOOL:u.BOOL|c.SMALL,FALSE:u.BOOL|c.MEDIUM,TRUE:u.BOOL|c.LARGE,INT8:u.INT|c.SMALL,UINT8:u.UINT|c.SMALL,INT16:u.INT|c.MEDIUM,UINT16:u.UINT|c.MEDIUM,INT32:u.INT|c.LARGE,UINT32:u.UINT|c.LARGE,FLOAT16:u.FLOAT|c.SMALL,FLOAT32:u.FLOAT|c.MEDIUM,FLOAT64:u.FLOAT|c.LARGE,SHORT_STRING:u.STRING|c.SMALL,MEDIUM_STRING:u.STRING|c.MEDIUM,LARGE_STRING:u.STRING|c.LARGE,SHORT_ARRAY:u.ARRAY|c.SMALL,MEDIUM_ARRAY:u.ARRAY|c.MEDIUM,LARGE_ARRAY:u.ARRAY|c.LARGE,SHORT_MAPPING:u.MAPPING|c.SMALL,MEDIUM_MAPPING:u.MAPPING|c.MEDIUM,LARGE_MAPPING:u.MAPPING|c.LARGE,SHORT_OBJECT:u.OBJECT|c.SMALL,MEDIUM_OBJECT:u.OBJECT|c.MEDIUM,LARGE_OBJECT:u.OBJECT|c.LARGE,SHORT_TYPED_ARRAY:u.TYPED_ARRAY|c.SMALL,MEDIUM_TYPED_ARRAY:u.TYPED_ARRAY|c.MEDIUM,LARGE_TYPED_ARRAY:u.TYPED_ARRAY|c.LARGE,SHORT_TYPED_MAPPING:u.TYPED_MAPPING|c.SMALL,MEDIUM_TYPED_MAPPING:u.TYPED_MAPPING|c.MEDIUM,LARGE_TYPED_MAPPING:u.TYPED_MAPPING|c.LARGE}},"./core/reader/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/reader/Tw2BinaryReader.js");r.d(t,"Tw2BinaryReader",function(){return n.Tw2BinaryReader});var i=r("./core/reader/Tw2BlackReader.js");r.d(t,"Tw2BlackReader",function(){return i.Tw2BlackReader});var s=r("./core/reader/Tw2ObjectReader.js");r.d(t,"Tw2ObjectReader",function(){return s.Tw2ObjectReader})},"./core/resource/Tw2EffectRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EffectRes",function(){return u});var n=r("./core/reader/index.js"),i=r("./core/resource/Tw2Resource.js"),s=r("./core/resource/Tw2Shader.js"),a=r("./core/Tw2Error.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends i.Tw2Resource{constructor(){super(...arguments),o(this,"passes",[]),o(this,"annotations",{}),o(this,"permutations",[]),o(this,"offsets",[]),o(this,"reader",null),o(this,"version",0),o(this,"stringTable",""),o(this,"shaders",{})}Prepare(e){this.permutations=[],this.offsets=[],this.passes=[],this.annotations={},this.reader=null,this.version=0,this.stringTable="",this.shaders={};const t=new n.Tw2BinaryReader(new Uint8Array(e));let r="";function i(){const e=t.ReadUInt32();let n=e;for(;r.charCodeAt(n);)++n;return r.substr(e,n-e)}const s=t.ReadUInt32();if(s<2||s>8)return void this.OnError(new a.ErrShaderVersion({path:this.path,version:s}));let o,u;if(s<5){if(0===(o=t.ReadUInt32()))return void this.OnError(new a.ErrShaderHeaderSize({path:this.path}));t.ReadUInt32();const e=t.ReadUInt32();t.cursor=8+3*o*4,u=t.ReadUInt32(),this.stringTableOffset=t.cursor,r=String.fromCharCode.apply(null,t.data.subarray(t.cursor,t.cursor+u)),t.cursor=e}else{u=t.ReadUInt32(),this.stringTableOffset=t.cursor,r=String.fromCharCode.apply(null,t.data.subarray(t.cursor,t.cursor+u)),t.cursor+=u;const e=t.ReadUInt8();for(let r=0;r<e;++r){let e={name:i(),defaultOption:t.ReadUInt8(),description:i(),type:t.ReadUInt8(),options:{},optionCount:t.ReadUInt8()};for(let t=0;t<e.optionCount;++t)e.options[i()]=t;this.permutations.push(e)}if(0===(o=t.ReadUInt32()))return void this.OnError(new a.ErrShaderHeaderSize({path:this.path}));for(let e=0;e<o;++e)this.offsets.push({index:t.ReadUInt32(),offset:t.ReadUInt32(),size:t.ReadUInt32()});t.ReadUInt32(),t.cursor=t.ReadUInt32()}this.reader=t,this.version=s,this.stringTable=r,this.OnPrepared()}GetShader(e){if(!this.IsGood())return null;let t=0,r=1;for(let n=0;n<this.permutations.length;++n){let i=this.permutations[n],s=i.defaultOption;if(e.hasOwnProperty(i.name)){let t=e[i.name];if(!i.options.hasOwnProperty(t))return this.OnError(new a.ErrShaderPermutationValue({path:this.path,permutation:i.name,valueName:t})),null;s=i.options[t]}t+=s*r,r*=i.optionCount}if(this.shaders.hasOwnProperty(t))return this.shaders[t];this.reader.cursor=this.offsets[t].offset;let n=null;try{n=new s.Tw2Shader(this.reader,this.version,this.stringTable,this.stringTableOffset,this.path)}catch(e){return this.OnError(e),null}return this.shaders[t]=n,n}}u.prototype.requestResponseType="arraybuffer"},"./core/resource/Tw2GeometryRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2GeometryRes",function(){return l});var n=r("./global/index.js"),i=r("./core/reader/index.js"),s=r("./core/vertex/index.js"),a=r("./core/resource/Tw2Resource.js"),o=r("./core/Tw2Error.js"),u=r("./core/geometry/index.js");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends a.Tw2Resource{constructor(){super(...arguments),c(this,"meshes",[]),c(this,"minBounds",n.vec3.fromValues(0,0,0)),c(this,"maxBounds",n.vec3.fromValues(0,0,0)),c(this,"boundsSpherePosition",n.vec3.create()),c(this,"boundsSphereRadius",0),c(this,"models",[]),c(this,"animations",[]),c(this,"systemMirror",n.resMan.systemMirror)}GetBoundingBox(e,t){return n.box3.fromBounds(e,this.minBounds,this.maxBounds),t&&n.box3.transformMat4(e,e,t),!0}GetBoundingSphere(e,t){return n.sph3.fromPositionRadius(e,this.boundsSpherePosition,this.boundsSphereRadius),t&&n.sph3.transformMat4(e,e,t),!0}RebuildBounds(e){const t=this.minBounds,r=this.maxBounds;n.box3.bounds.empty(t,r);for(let i=0;i<this.meshes.length;i++){const s=this.meshes[i];s.RebuildBounds(e),n.box3.bounds.union(t,r,t,r,s.minBounds,s.maxBounds)}this.boundsSphereRadius=n.box3.bounds.toPositionRadius(t,r,this.boundsSpherePosition)}GetInstanceBuffer(e){return e<this.meshes.length?this.meshes[e].buffer:void 0}GetInstanceDeclaration(e){return this.meshes[e].declaration}GetInstanceStride(e){return this.meshes[e].declaration.stride}GetInstanceCount(e){return 4*this.meshes[e].bufferLength/this.meshes[e].declaration.stride}Prepare(e){const t=n.device.gl,r=new i.Tw2BinaryReader(new Uint8Array(e));r.ReadUInt8();const s=r.ReadUInt8();for(let e=0;e<s;++e){const i=new u.Tw2GeometryMesh;i.name=r.ReadString();const s=l.ReadVertexBuffer(r,i.declaration,this.path);s?(i.bufferLength=s.length,i.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,i.buffer),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW)):i.buffer=null;const a=l.ReadIndexBuffer(r);a?(i.indexes=t.createBuffer(),i.indexType=2===a.BYTES_PER_ELEMENT?t.UNSIGNED_SHORT:t.UNSIGNED_INT,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexes),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a,t.STATIC_DRAW)):i.indexes=null;const o=r.ReadUInt8();for(let e=0;e<o;++e){const e=new u.Tw2GeometryMeshArea;i.areas.push(e),e.name=r.ReadString(),e.start=r.ReadUInt32()*a.BYTES_PER_ELEMENT,e.count=3*r.ReadUInt32(),n.vec3.set(e.minBounds,r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32()),n.vec3.set(e.maxBounds,r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32()),e.boundsSphereRadius=n.box3.bounds.toPositionRadius(e.minBounds,e.maxBounds,e.boundsSpherePosition),n.box3.bounds.isEmpty(e.minBounds,e.maxBounds)&&(i.RebuildAreaBounds(e,s,a,!0)||console.log("Could not generate bounds for area: "+e.name||!1))}const c=r.ReadUInt8();i.boneBindings=[];for(let e=0;e<c;++e)i.boneBindings[e]=r.ReadString();const d=r.ReadUInt16();if((d||this.systemMirror)&&(i.bufferData=s,i.indexData=a),d){i.blendShapes=[];for(let e=0;e<d;++e)i.blendShapes[e]=new u.Tw2BlendShapeData,i.blendShapes[e].name=r.ReadString(),i.blendShapes[e].buffer=l.ReadVertexBuffer(r,i.blendShapes[e].declaration,this.path),i.blendShapes[e].indexes=l.ReadIndexBuffer(r)}i._areas=o,i._faces=a.length/3,i._vertices=s.length/(i.declaration.stride/4),this.meshes[e]=i}this.RebuildBounds();const a=r.ReadUInt8();for(let e=0;e<a;++e){const e=new u.Tw2GeometryModel;e.name=r.ReadString(),e.skeleton=new u.Tw2GeometrySkeleton;const t=r.ReadUInt8();for(let i=0;i<t;++i){const t=new u.Tw2GeometryBone;t.name=r.ReadString();const s=r.ReadUInt8();if(t.parentIndex=r.ReadUInt8(),255===t.parentIndex&&(t.parentIndex=-1),0!=(1&s)?n.vec3.set(t.position,r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32()):n.vec3.set(t.position,0,0,0),0!=(2&s)?n.quat.set(t.orientation,r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32(),r.ReadFloat32()):n.quat.identity(t.orientation),0!=(4&s))for(let e=0;e<9;++e)t.scaleShear[e]=r.ReadFloat32();else n.mat3.identity(t.scaleShear);e.skeleton.bones[i]=t}for(let t=0;t<e.skeleton.bones.length;++t)e.skeleton.bones[t].UpdateTransform(),-1!==e.skeleton.bones[t].parentIndex?n.mat4.multiply(e.skeleton.bones[t].worldTransform,e.skeleton.bones[e.skeleton.bones[t].parentIndex].worldTransform,e.skeleton.bones[t].localTransform):n.mat4.copy(e.skeleton.bones[t].worldTransform,e.skeleton.bones[t].localTransform),n.mat4.invert(e.skeleton.bones[t].worldTransformInv,e.skeleton.bones[t].worldTransform);const i=r.ReadUInt8();for(let t=0;t<i;++t){const t=r.ReadUInt8();t<this.meshes.length&&l.BindMeshToModel(this.meshes[t],e,this)}this.models[this.models.length]=e}const o=r.ReadUInt8();for(let e=0;e<o;++e){const e=new u.Tw2GeometryAnimation;e.name=r.ReadString(),e.duration=r.ReadFloat32();const t=r.ReadUInt8();for(let n=0;n<t;++n){const t=new u.Tw2GeometryTrackGroup;t.name=r.ReadString();for(let e=0;e<this.models.length;++e)if(this.models[e].name===t.name){t.model=this.models[e];break}const n=r.ReadUInt8();for(let e=0;e<n;++e){const e=new u.Tw2GeometryTransformTrack;if(e.name=r.ReadString(),e.orientation=l.ReadCurve(r),e.position=l.ReadCurve(r),e.scaleShear=l.ReadCurve(r),e.orientation){let t=0,r=0,n=0,i=0;for(let s=0;s<e.orientation.controls.length;s+=4){let a=e.orientation.controls[s],o=e.orientation.controls[s+1],u=e.orientation.controls[s+2],c=e.orientation.controls[s+3];t*a+r*o+n*u+i*c<0&&(e.orientation.controls[s]=-a,e.orientation.controls[s+1]=-o,e.orientation.controls[s+2]=-u,e.orientation.controls[s+3]=-c),t=a,r=o,n=u,i=c}}t.transformTracks[t.transformTracks.length]=e}e.trackGroups[e.trackGroups.length]=t}this.animations[this.animations.length]=e}this.OnPrepared()}static BindMeshToModel(e,t,r){const n=new u.Tw2GeometryMeshBinding;n.mesh=e;for(let e=0;e<n.mesh.boneBindings.length;++e){const i=n.mesh.boneBindings[e],s=t.FindBoneByName(i);if(!s)throw new o.ErrGeometryMeshBoneNameInvalid({path:r.path,mesh:n.mesh.name,bone:i,model:t.name});n.bones[n.bones.length]=s}t.meshBindings[t.meshBindings.length]=n}RenderAreasInstanced(e,t,r,i,s,a,u,c,l){if(this.KeepAlive(),!this.IsGood()||!i.IsGood()||e>=this.meshes.length)return!1;const d=n.device,h=d.gl,f=this.meshes[e],m=i.GetPassCount(s);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,f.indexes);for(let e=0;e<m;++e){i.ApplyPass(s,e);const n=i.GetPassInput(s,e);if(0===n.elements.length)continue;h.bindBuffer(h.ARRAY_BUFFER,f.buffer),f.declaration.SetPartialDeclaration(d,n,f.declaration.stride),h.bindBuffer(h.ARRAY_BUFFER,a);const m=u.SetPartialDeclaration(d,n,c,8,1);d.ApplyShadowState();for(let e=0;e<r;++e)if(e+t<f.areas.length){let n=f.areas[e+t],i=n.start,s=n.count;for(;e+1<r;){if(!(n=f.areas[e+1+t]))return this.OnError(new o.ErrGeometryMeshAreaMissing({path:this.path,areaIndex:e+1+t})),!1;if(n.start!==i+2*s)break;s+=n.count,++e}h.drawElementsInstanced(h.TRIANGLES,s,f.indexType,i,l)}u.ResetInstanceDivisors(d,m)}return!0}RenderAreas(e,t,r,i,s){if(this.KeepAlive(),!this.IsGood()||!i.IsGood()||e>=this.meshes.length)return!1;const a=n.device,u=a.gl,c=this.meshes[e]||this.meshes[0],l=i.GetPassCount(s);u.bindBuffer(u.ARRAY_BUFFER,c.buffer),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,c.indexes);for(let e=0;e<l;++e){i.ApplyPass(s,e);const n=i.GetPassInput(s,e);if(!c.declaration.SetDeclaration(a,n,c.declaration.stride))return this.OnError(new o.ErrGeometryMeshEffectBinding({path:this.path,pass:e,passInput:n,meshStride:c.declaration.stride})),!1;a.ApplyShadowState();for(let e=0;e<r;++e)if(e+t<c.areas.length){let n=c.areas[e+t],i=n.start,s=n.count;for(;e+1<r;){if(!(n=c.areas[e+1+t]))return this.OnError(new o.ErrGeometryMeshAreaMissing({path:this.path,areaIndex:e+1+t})),!1;if(n.start!==i+2*s)break;s+=n.count,++e}u.drawElements(u.TRIANGLES,s,c.indexType,i)}}return!0}RenderLines(e,t,r,i,s){if(this.KeepAlive(),!this.IsGood()||!i.IsGood()||e>=this.meshes.length)return!1;const a=n.device,u=a.gl,c=this.meshes[e],l=i.GetPassCount(s);u.bindBuffer(u.ARRAY_BUFFER,c.buffer),u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,c.indexes);for(let e=0;e<l;++e){i.ApplyPass(s,e);const n=i.GetPassInput(s,e);if(!c.declaration.SetDeclaration(a,n,c.declaration.stride))return this.OnError(new o.ErrGeometryMeshEffectBinding({path:this.path,pass:e,passInput:n,meshStride:c.declaration.stride})),!1;a.ApplyShadowState();for(let e=0;e<r;++e)if(e+t<c.areas.length){let n=c.areas[e+t],i=n.start,s=n.count;for(;e+1<r;){if(!(n=c.areas[e+1+t]))return this.OnError(new o.ErrGeometryMeshAreaMissing({path:this.path,areaIndex:e+1+t})),!1;if(n.start!==i+2*s)break;s+=n.count,++e}u.drawElements(u.LINES,s,c.indexType,i)}}return!0}RenderDebugInfo(e){if(!this.IsGood())return!1;for(let t=0;t<this.models.length;++t)if(this.models[t].skeleton)for(let r=0;r<this.models[t].skeleton.bones.length;++r){const n=this.models[t].skeleton.bones[r];if(n.parentIndex>=0){const r=this.models[t].skeleton.bones[n.parentIndex];e.AddLine([n.worldTransform[12],n.worldTransform[13],n.worldTransform[14]],[r.worldTransform[12],r.worldTransform[13],r.worldTransform[14]],[0,.7,0,1],[0,.7,0,1])}}}Unload(){for(let e=0;e<this.meshes.length;++e){const t=n.device.gl;this.meshes[e].buffer&&(t.deleteBuffer(this.meshes[e].buffer),this.meshes[e].buffer=null),this.meshes[e].indexes&&(t.deleteBuffer(this.meshes[e].indexes),this.meshes[e].indexes=null)}return this.OnUnloaded(),!0}static ReadVertexBuffer(e,t,r){const i=e.ReadUInt8();let a=0;for(let r=0;r<i;++r){let i=new s.Tw2VertexElement;i.usage=e.ReadUInt8(),i.usageIndex=e.ReadUInt8(),i.fileType=e.ReadUInt8(),i.type=n.device.gl.FLOAT,i.elements=1+(i.fileType>>5),i.offset=4*a,t.elements[r]=i,a+=i.elements}t.RebuildHash(),t.stride=4*a;const u=e.ReadUInt32();if(0===u)return null;const c=new Float32Array(a*u);let l=0;for(let n=0;n<u;++n)for(let n=0;n<i;++n){let i=t.elements[n];switch(15&i.fileType){case 0:if(0!=(16&i.fileType))for(let t=0;t<i.elements;++t)c[l++]=e.ReadInt8()/127;else for(let t=0;t<i.elements;++t)c[l++]=e.ReadInt8();break;case 1:if(0!=(16&i.fileType))for(let t=0;t<i.elements;++t)c[l++]=e.ReadInt8()/32767;else for(let t=0;t<i.elements;++t)c[l++]=e.ReadInt16();break;case 2:for(let t=0;t<i.elements;++t)c[l++]=e.ReadInt32();break;case 3:for(let t=0;t<i.elements;++t)c[l++]=e.ReadFloat16();break;case 4:for(let t=0;t<i.elements;++t)c[l++]=e.ReadFloat32();break;case 8:if(0!=(16&i.fileType))for(let t=0;t<i.elements;++t)c[l++]=e.ReadUInt8()/255;else for(let t=0;t<i.elements;++t)c[l++]=e.ReadUInt8();break;case 9:if(0!=(16&i.fileType))for(let r=0;r<t.elements[n].elements;++r)c[l++]=e.ReadUInt8()/65535;else for(let t=0;t<i.elements;++t)c[l++]=e.ReadUInt16();break;case 10:for(let t=0;t<i.elements;++t)c[l++]=e.ReadUInt32();break;default:throw new o.ErrGeometryFileType({path:r,key:"fileType",value:15&i.fileType})}}return c}static ReadIndexBuffer(e){const t=e.ReadUInt8(),r=e.ReadUInt32();if(0===t){const t=new Uint16Array(r);for(let n=0;n<r;++n)t[n]=e.ReadUInt16();return t}{const t=new Uint32Array(r);for(let n=0;n<r;++n)t[n]=e.ReadUInt32();return t}}static ReadCurve(e){if(0===e.ReadUInt8())return null;const t=new u.Tw2GeometryCurve;t.dimension=e.ReadUInt8(),t.degree=e.ReadUInt8();const r=e.ReadUInt32();t.knots=new Float32Array(r);for(let n=0;n<r;++n)t.knots[n]=e.ReadFloat32();const n=e.ReadUInt32();t.controls=new Float32Array(n);for(let r=0;r<n;++r)t.controls[r]=e.ReadFloat32();return t}static black(e){return[]}}l.prototype.requestResponseType="arraybuffer"},"./core/resource/Tw2LoadingObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2LoadingObject",function(){return c});var n=r("./global/index.js"),i=r("./core/resource/Tw2Resource.js"),s=r("./core/reader/Tw2ObjectReader.js"),a=r("./core/reader/Tw2BlackReader.js"),o=r("./core/Tw2Error.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends i.Tw2Resource{constructor(){super(...arguments),u(this,"path",""),u(this,"_view",null),u(this,"_inPrepare",null),u(this,"_objects",[]),u(this,"_constructor",null)}AddObject(e,t){this.HasErrors()?t&&t(this.GetLastError()):this._objects.push({onResolved:e,onRejected:t})}Prepare(e){const t=this.path.lastIndexOf(".");if(-1===t)return null;const r=this.path.substr(t+1);if(null===this._inPrepare){switch(this._view=e,r){case"red":this._constructor=new s.Tw2ObjectReader(e);break;case"black":this._constructor=new a.Tw2BlackReader(e);break;default:throw new o.ErrResourceExtensionUnregistered({extension:r})}this._inPrepare=0,this._constructor.Construct()}for(;this._inPrepare<this._objects.length;){const e=this._objects[this._inPrepare];try{e.onResolved(this._constructor.Construct())}catch(t){e.onRejected&&(e.onRejected(t),e.onRejected=null),this.OnWarning({err:t,message:"Error preparing child object"})}this._inPrepare++}this.OnPrepared()}OnError(e){super.OnError(e);for(let t=0;t<this._objects.length;t++){const r=this._objects[t];r.onRejected&&r.onRejected(e)}return n.resMan.motherLode.Remove(this.path),this._objects=[],e}OnPrepared(e){n.resMan.motherLode.Remove(this.path),this._objects=[],super.OnPrepared(e)}}c.prototype.requestResponseType="arraybuffer"},"./core/resource/Tw2LodResource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2LodResource",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{get highDetailRes(){return this.GetLODResource(3)}get mediumDetailRes(){return this.GetLODResource(2)}get lowDetailRes(){return this.GetLODResource(1)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;super(),i(this,"name",""),i(this,"highDetailResPath",""),i(this,"lowDetailResPath",""),i(this,"mediumDetailResPath",""),this.name=e,t&&this.SetPaths(...t)}SetPaths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=!1;return e!==this.highDetailResPath&&(this.highDetailResPath=e,n=!0),t!==this.mediumDetailResPath&&(this.mediumDetailResPath=t,n=!0),r!==this.lowDetailResPath&&(this.lowDetailResPath=r,n=!0),n}GetLODResource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=this.highDetailResPath,r=this.mediumDetailResPath,i=this.lowDetailResPath;let s;return e>2?t?s=t:r?s=r:i&&(s=i):2===e?r?s=r:t?s=t:i&&(s=i):i?s=i:r?s=r:t&&(s=t),s?n.resMan.GetResource(s):null}static from(e){const t=new s;return e&&(t.name=e.name||"",t.SetPaths(e.highDetailResPath,e.mediumDetailResPath,e.lowDetailResPath)),t}static black(e){return[["name",e.string],["highDetailResPath",e.string],["lowDetailResPath",e.string],["mediumDetailResPath",e.string]]}}i(s,"__isStaging",2)},"./core/resource/Tw2Resource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Resource",function(){return a});var n=r("./global/index.js"),i=r("./core/Tw2Error.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"path",""),s(this,"activeFrame",0),s(this,"doNotPurge",0),s(this,"_state",a.State.NO_INIT),s(this,"_notifications",[])}IsGood(){return this.KeepAlive(),this.IsPrepared()||this.IsLoaded()}IsRequested(){return this._state===a.State.REQUESTED}IsLoaded(){return this._state===a.State.LOADED}IsPrepared(){return this._state===a.State.PREPARED}IsUnloaded(){return this._state===a.State.UNLOADED}IsPurged(){return this._state===a.State.PURGED}HasErrors(){return this._state===a.State.ERROR}HasCompleted(){return this._state===a.State.ERROR||this._state===a.State.PURGED||this._state===a.State.PREPARED}Unload(){return!1}Reload(){this.Unload(),n.resMan.ReloadResource(this)}KeepAlive(){this.activeFrame=n.resMan.activeFrame,this.IsPurged()&&!this.HasErrors()&&this.Reload()}GetErrors(){return n.resMan.motherLode.GetErrors(this.path)}GetLastError(){return n.resMan.motherLode.GetLastError(this.path)}OnWarning(e){n.resMan.OnResEvent("warning",this.path,e)}OnDebug(e){n.resMan.OnResEvent("debug",this.path,e)}OnError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Tw2Error;const t=!this.IsUnloaded();return this._state=a.State.ERROR,t&&this.Unload(),n.resMan.OnResEvent("error",this.path,e),this.UpdateNotifications(a.Callback.ERROR,e),e}OnRequested(e){if(this.HasErrors())return;const t=this.IsPurged()||this.IsUnloaded();this._state=a.State.REQUESTED,n.resMan.OnResEvent(t?"reloading":"requested",this.path,e),this.UpdateNotifications(a.Callback.REQUESTED)}OnLoaded(e){this.HasErrors()||(this._state=a.State.LOADED,n.resMan.OnResEvent("loaded",this.path,e),this.UpdateNotifications(a.Callback.LOADED))}OnPrepared(e){this.HasErrors()||(this._state=a.State.PREPARED,n.resMan.OnResEvent("prepared",this.path,e),this.UpdateNotifications(a.Callback.PREPARED))}OnUnloaded(e){this.HasErrors()||(this._state=a.State.UNLOADED,n.resMan.OnResEvent("unloaded",this.path,e),this.UpdateNotifications(a.Callback.UNLOADED))}OnPurged(e){this.HasErrors()||(this._state=a.State.PURGED),n.resMan.OnResEvent("purged",this.path,e),this.UpdateNotifications(a.Callback.PURGED)}RegisterCallbacks(e,t){const r={OnResError:(e,r)=>(t&&t(r),!0),OnResPrepared:t=>(e&&e(t),!0)};return this.RegisterNotification(r),r}RegisterNotification(e){if(!this._notifications.includes(e)){let t,r;switch(this._state){case a.State.ERROR:t=a.Callback.ERROR,r=n.resMan.motherLode.GetLastError(this.path);break;case a.State.REQUESTED:t=a.Callback.REQUESTED;break;case a.State.LOADED:t=a.Callback.LOADED;break;case a.State.PREPARED:t=a.Callback.PREPARED;break;case a.State.UNLOADED:t=a.Callback.UNLOADED;break;case a.State.PURGED:t=a.Callback.PURGED}if(t&&e[t]&&e[t](this,r))return;this._notifications.push(e)}}UnregisterNotification(e){this._notifications.splice(this._notifications.indexOf(e),1)}UpdateNotifications(e,t){for(let r=0;r<this._notifications.length;r++)e&&e in this._notifications[r]&&this._notifications[r][e](this,t)&&(this._notifications.splice(r,1),r--)}}s(a,"__isResource",!0),s(a,"State",{ERROR:-3,PURGED:-2,UNLOADED:-1,NO_INIT:0,REQUESTED:1,LOADED:2,PREPARED:3}),s(a,"Callback",{ERROR:"OnResError",PURGED:"OnResPurged",UNLOADED:"OnResUnloaded",REQUESTED:"OnResRequested",LOADED:"OnResLoaded",PREPARED:"OnResPrepared",DEBUG:"OnResDebug",WARNING:"OnResWarning"}),a.prototype.DoCustomLoad=null,a.prototype.requestResponseType=null},"./core/resource/Tw2Shader.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Shader",function(){return c});var n=r("./global/index.js"),i=r("./core/vertex/index.js"),s=r("./core/sampler/index.js"),a=r("./core/Tw2Error.js"),o=r("./core/resource/shaderOverrides.json");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c{constructor(e,t,r,a,o){function l(){const t=e.ReadUInt32();let n=t;for(;r.charCodeAt(n);)++n;return r.substr(t,n-t)}u(this,"techniques",{}),u(this,"annotations",{});const d=n.device.wrapModes,h=n.device.gl;let f=1;t>6&&(f=e.ReadUInt8());for(let u=0;u<f;++u){let u={name:"Main",passes:[]};t>6&&(u.name=l()),this.techniques[u.name]=u;const f=e.ReadUInt8();for(let m=0;m<f;++m){const f={stages:[{},{}]},v=e.ReadUInt8();let p=!0;for(let u=0;u<v;++u){const u={};u.inputDefinition=new i.Tw2VertexDeclaration,u.constants=[],u.textures=[],u.samplers=[];const m=e.ReadUInt8(),v=e.ReadUInt8();u.stageType=0===m?"vertex":"fragment";for(let t=0;t<v;++t){const r=e.ReadUInt8(),n=e.ReadUInt8(),s=e.ReadUInt8(),a=e.ReadUInt8();u.inputDefinition.elements[t]=i.Tw2VertexElement.from({usage:r,usageIndex:s,type:0,registerIndex:n,usedMask:a})}let E,_,g,S;if(u.inputDefinition.RebuildHash(),t<5)E=e.ReadUInt32(),_=e.data.subarray(e.cursor,e.cursor+E),e.cursor+=E,g=e.ReadUInt32(),S=e.data.subarray(e.cursor,e.cursor+g),e.cursor+=g;else{E=e.ReadUInt32();let t=e.ReadUInt32();_=c.InspectShaderCode(r.substr(t,E),o),g=e.ReadUInt32(),t=e.ReadUInt32(),S=c.InspectShaderCode(r.substr(t,g),o),c.DEBUG_ENABLED&&(u.shaderCode=_,u.shadowShaderCode=S)}try{u.shader=c.CompileShader(m,"",_,o)}catch(e){throw console.group(),console.error(e.message),console.dir(u),console.groupEnd(),e}p?(u.shadowShader=0===g?c.CompileShader(m,"\n#define PS\n",_,o,!0):c.CompileShader(m,"",S,o,!0),null===u.shadowShader&&(p=!1)):u.shadowShader=null,t>=3&&(e.ReadUInt32(),e.ReadUInt32(),e.ReadUInt32()),u.constantSize=0;const T=e.ReadUInt32();for(let t=0;t<T;++t){const r={};if(r.name=l(),r.offset=e.ReadUInt32()/4,r.size=e.ReadUInt32()/4,r.type=e.ReadUInt8(),r.dimension=e.ReadUInt8(),r.elements=e.ReadUInt32(),r.isSRGB=e.ReadUInt8(),r.isAutoregister=e.ReadUInt8(),u.constants[t]=r,c.ConstantIgnore.includes(r.name))continue;const n=r.offset+r.size;n>u.constantSize&&(u.constantSize=n)}const b=e.ReadUInt32()/4;if(u.constantValues=new Float32Array(b),t<5)for(let t=0;t<b;++t)u.constantValues[t]=e.ReadFloat32();else{const t=e.ReadUInt32(),r=e.cursor;e.cursor=a+t;for(let t=0;t<b;++t)u.constantValues[t]=e.ReadFloat32();e.cursor=r}u.constantSize=Math.max(u.constantSize,b);let R=e.ReadUInt8();for(let t=0;t<R;++t){const t={};t.registerIndex=e.ReadUInt8(),t.name=l(),t.type=e.ReadUInt8(),t.isSRGB=e.ReadUInt8(),t.isAutoregister=e.ReadUInt8(),u.textures.push(t)}const j=e.ReadUInt8();for(let r=0;r<j;++r){const r=new s.Tw2SamplerState;if(r.registerIndex=e.ReadUInt8(),r.name=t>=4?l():"",r._comparison=e.ReadUInt8(),r.minFilter=e.ReadUInt8(),r.magFilter=e.ReadUInt8(),r.mipFilter=e.ReadUInt8(),r.addressU=e.ReadUInt8(),r.addressV=e.ReadUInt8(),r.addressW=e.ReadUInt8(),r.mipLODBias=e.ReadFloat32(),r._maxAnisotropy=e.ReadUInt8(),r._comparisonFunc=e.ReadUInt8(),r._borderColor=n.quat.fromValues(e.ReadFloat32(),e.ReadFloat32(),e.ReadFloat32(),e.ReadFloat32()),r._minLOD=e.ReadFloat32(),r._maxLOD=e.ReadFloat32(),t<4&&e.ReadUInt8(),1===r.minFilter){switch(r.mipFilter){case 0:r.minFilter=h.NEAREST;break;case 1:r.minFilter=h.NEAREST_MIPMAP_NEAREST;break;default:r.minFilter=h.NEAREST_MIPMAP_LINEAR}r.minFilterNoMips=h.NEAREST}else{switch(r.mipFilter){case 0:r.minFilter=h.LINEAR;break;case 1:r.minFilter=h.LINEAR_MIPMAP_NEAREST;break;default:r.minFilter=h.LINEAR_MIPMAP_LINEAR}r.minFilterNoMips=h.LINEAR}r.magFilter=1===r.magFilter?h.NEAREST:h.LINEAR,r.addressU=d[r.addressU],r.addressV=d[r.addressV],r.addressW=d[r.addressW],3!==r.minFilter&&3!==r.magFilter&&3!==r.mipFilter||(r.anisotropy=Math.max(r.maxAnisotropy,1));for(let e=0;e<u.textures.length;++e)if(u.textures[e].registerIndex===r.registerIndex){r.samplerType=4===u.textures[e].type?h.TEXTURE_CUBE_MAP:h.TEXTURE_2D,r.isVolume=3===u.textures[e].type;break}r.ComputeHash(),u.samplers.push(r)}t>=3&&e.ReadUInt8(),t>7&&e.ReadUInt8(),f.stages[m]=u}f.states=[];const E=e.ReadUInt8();for(let t=0;t<E;++t){const t=e.ReadUInt32(),r=e.ReadUInt32();f.states.push({state:t,value:r})}f.shaderProgram=c.CreateProgram(f.stages[0].shader,f.stages[1].shader,f,o),p?(f.shadowShaderProgram=c.CreateProgram(f.stages[0].shadowShader,f.stages[1].shadowShader,f,o,!0),null===f.shadowShaderProgram&&(f.shadowShaderProgram=f.shaderProgram)):f.shadowShaderProgram=f.shaderProgram,u.passes[m]=f}}const m=e.ReadUInt16();for(let t=0;t<m;++t){const t=l(),r=[],n=e.ReadUInt8();for(let t=0;t<n;++t)switch(r[t]={},r[t].name=l(),r[t].type=e.ReadUInt8(),r[t].type){case 0:r[t].value=0!==e.ReadUInt32();break;case 1:r[t].value=e.ReadInt32();break;case 2:r[t].value=e.ReadFloat32();break;default:r[t].value=l()}this.annotations[t]=r}}ApplyPass(e,t){const r=n.device,i=r.gl;t=this.techniques[e].passes[t];for(let e=0;e<t.states.length;++e)r.SetRenderState(t.states[e].state,t.states[e].value);r.IsAlphaTestEnabled()?(i.useProgram(t.shadowShaderProgram.program),r.shadowHandles=t.shadowShaderProgram):(i.useProgram(t.shaderProgram.program),r.shadowHandles=null)}HasConstant(e){return this.constructor.Has(this.techniques,"constants",e)}HasTexture(e){return this.constructor.Has(this.techniques,"textures",e)}HasSampler(e){return this.constructor.Has(this.techniques,"samplers",e)}static Has(e,t,r){for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];for(let e=0;e<i.passes.length;e++){const n=i.passes[e];for(let e=0;e<n.stages.length;e++){const i=n.stages[e];for(let e=0;e<i[t].length;e++)if(i[t][e].name===r)return!0}}}return!1}static CompileShader(e,t,r,i,s){const o=n.device.ext,u=n.device.gl,c=u.createShader(0===e?u.VERTEX_SHADER:u.FRAGMENT_SHADER);if(o.ShaderBinary)o.ShaderBinary.shaderBinary(c,r);else{let e=t+(n.util.isString(r)?r:String.fromCharCode.apply(null,r));e=e.substr(0,e.length-1),u.shaderSource(c,e),u.compileShader(c)}if(!u.getShaderParameter(c,u.COMPILE_STATUS)){if(!s)throw new a.ErrShaderCompile({path:i,shaderType:0===e?"vertex":"fragment",infoLog:u.getShaderInfoLog(c)});return null}return c}static CreateProgram(e,t,r,s,o){const u=n.device.gl,c={};if(c.program=u.createProgram(),u.attachShader(c.program,e),u.attachShader(c.program,t),u.linkProgram(c.program),!u.getProgramParameter(c.program,u.LINK_STATUS)){if(!o)throw new a.ErrShaderLink({path:s,infoLog:u.getProgramInfoLog(c.program)});return null}u.useProgram(c.program),c.constantBufferHandles=[];for(let e=0;e<16;++e)c.constantBufferHandles[e]=u.getUniformLocation(c.program,"cb"+e);c.samplerHandles=[];for(let e=0;e<16;++e)c.samplerHandles[e]=u.getUniformLocation(c.program,"s"+e),u.uniform1i(c.samplerHandles[e],e);for(let e=0;e<16;++e)c.samplerHandles[e+12]=u.getUniformLocation(c.program,"vs"+e),u.uniform1i(c.samplerHandles[e+12],e+12);c.input=new i.Tw2VertexDeclaration;for(let e=0;e<r.stages[0].inputDefinition.elements.length;++e){const t="attr"+e;let n=u.getAttribLocation(c.program,t);if(n>=0){const s=i.Tw2VertexElement.from({usage:r.stages[0].inputDefinition.elements[e].usage,usageIndex:r.stages[0].inputDefinition.elements[e].usageIndex,location:n,attr:t});c.input.elements.push(s)}}c.input.RebuildHash(),c.shadowStateInt=u.getUniformLocation(c.program,"ssi"),c.shadowStateFloat=u.getUniformLocation(c.program,"ssf"),c.shadowStateYFlip=u.getUniformLocation(c.program,"ssyf"),u.uniform3f(c.shadowStateYFlip,0,0,1),c.volumeSlices=[];for(let e=0;e<r.stages[1].samplers.length;++e)r.stages[1].samplers[e].isVolume&&(c.volumeSlices[r.stages[1].samplers[e].registerIndex]=u.getUniformLocation(c.program,"s"+r.stages[1].samplers[e].registerIndex+"sl"));return c}static InspectShaderCode(e,t){const r=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")).toLowerCase(),n=o[r];if(!n)return e;for(const t in n)n.hasOwnProperty(t)&&(e=e.replace(t,n[t]));return e}}u(c,"ConstantIgnore",["PerFrameVS","PerObjectVS","PerFramePS","PerObjectPS"]),u(c,"DEBUG_ENABLED",!1)},"./core/resource/Tw2TextureRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TextureRes",function(){return o});var n=r("./core/resource/Tw2Resource.js"),i=r("./core/Tw2Error.js"),s=r("./global/index.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends n.Tw2Resource{constructor(){super(...arguments),a(this,"texture",null),a(this,"isCube",!1),a(this,"width",0),a(this,"height",0),a(this,"hasMipMaps",!1),a(this,"_currentSampler",0),a(this,"_isAttached",!1)}Prepare(e,t){const r=s.device.gl,n="ccpGLFormat"in e?e.ccpGLFormat:r.RGBA;switch(t){case"cube":this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_CUBE_MAP,this.texture);const a=document.createElement("canvas");a.width=a.height=e.height;const u=a.getContext("2d");for(let t=0;t<6;++t)u.drawImage(e,t*a.width,0,a.width,a.height,0,0,a.width,a.height),r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,n,n,r.UNSIGNED_BYTE,a);r.generateMipmap(r.TEXTURE_CUBE_MAP),r.bindTexture(r.TEXTURE_CUBE_MAP,null),this.width=a.width,this.height=a.height,this.hasMipMaps=!0;break;case"png":this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,n,n,r.UNSIGNED_BYTE,e),this.hasMipMaps=o.IsPowerOfTwo(e.width)&&o.IsPowerOfTwo(e.height),this.hasMipMaps&&r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null),this.width=e.width,this.height=e.height;break;case"dds":const c=s.device.ext.CompressedTextureS3TC,l=new Int32Array(e,0,s.DDS_HEADER_LENGTH_INT),d=l[s.DDS_HEADER_OFFSET_PF_FOURCC],h=l[s.DDS_HEADER_OFFSET_MAGIC]===s.DDS_MAGIC,f=(l[s.DDS_HEADER_OFFSET_CAPS2]&s.DDSCAPS2_CUBEMAP)===s.DDSCAPS2_CUBEMAP,m=l[s.DDS_HEADER_OFFSET_PF_FOURCC],v=1;if(!c)throw new i.ErrResourceFormat("Compressed textures not supported by your device");if(!h)throw new i.ErrResourceFormat("Invalid DDS, missing magic number");if(!d)throw new i.ErrResourceFormat("Invalid DDS, missing FourCC code");let p,E,_=l[s.DDS_HEADER_OFFSET_WIDTH],g=l[s.DDS_HEADER_OFFSET_HEIGHT],S=l[s.DDS_HEADER_OFFSET_SIZE]+4;switch(m){case s.FOURCC_DXT1:p=8,E=c.COMPRESSED_RGBA_S3TC_DXT1_EXT;break;case s.FOURCC_DXT3:p=16,E=c.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case s.FOURCC_DXT5:p=16,E=c.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:const e=o.Int32ToFourCC(m);throw new i.ErrResourceFormat("Invalid DDS, ".concat(e," unsupported"))}if(this.hasMipMaps=v>1,this.isCube=f,this.width=_,this.height=g,this.isCube)throw new i.ErrFeatureNotImplemented({feature:"DDS cube maps"});this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture);for(let t=0;t<v;++t){const n=Math.max(4,_)/4*Math.max(4,g)/4*p,i=new Uint8Array(e,S,n);r.compressedTexImage2D(r.TEXTURE_2D,t,E,_,g,0,i),S+=n,_*=.5,g*=.5}r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,v>1?r.LINEAR_MIPMAP_LINEAR:r.LINEAR),r.bindTexture(r.TEXTURE_2D,null);break;default:throw new i.ErrResourceFormat("Invalid format, ".concat(this._extension," unsupported"))}this._isAttached=!1,this.OnPrepared()}DoCustomLoad(e,t){switch(t){case"cube":this.isCube=!0,e=e.substr(0,e.length-5)+".png";break;case"png":this.isCube=!1;break;case"dds":return s.resMan._pendingLoads++,s.resMan.Fetch(o.AddMipLevelSkipCount(e),"arraybuffer").then(e=>{s.resMan._pendingLoads--,this.OnLoaded(),s.resMan.Queue(this,e,t)}).catch(e=>{s.resMan._pendingLoads--,this.OnError(e)}),!0;default:throw new i.ErrResourceExtensionUnregistered({path:e,extension:t})}s.resMan._pendingLoads++;const r=new Image;return r.crossOrigin="anonymous",r.onerror=()=>{s.resMan._pendingLoads--,this._extension=null,this.OnError(new i.ErrHTTPRequest({path:e}))},r.onload=()=>{s.resMan._pendingLoads--,s.resMan.Queue(this,r,t),this.OnLoaded()},r.src=o.AddMipLevelSkipCount(e),!0}Unload(){return this.texture&&(s.device.gl.deleteTexture(this.texture),this.texture=null),this._isAttached=!1,this.OnUnloaded(),!0}Attach(e){this.path="",this.texture=e,this._isAttached=!0,this.OnLoaded({hide:!0,data:{isAttachment:!0}}),this.OnPrepared({hide:!0,data:{isAttachment:!0}})}Reload(){if(!this._isAttached)return super.Reload()}Bind(e,t){const r=s.device,n=r.gl;this.KeepAlive();let i=e.samplerType;if(i===(this.isCube?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D))if(this.texture)e.isVolume&&n.uniform1f(t,this.height/this.width),n.bindTexture(i,this.texture),(e.hash!==this._currentSampler||this._updateSampler)&&(e.Apply(r,this.hasMipMaps),this._currentSampler=e.hash,this._updateSampler=!1);else{const e=i===n.TEXTURE_2D?r.GetFallbackTexture():r.GetFallbackCubeMap();n.bindTexture(i,e)}}static IsPowerOfTwo(e){return 0==(e&e-1)}static AddMipLevelSkipCount(e){const t=s.device;if(t.mipLevelSkipCount>0){const r=e.lastIndexOf(".");r>=0&&(e=e.substr(0,r-2)+"."+t.mipLevelSkipCount.toString()+e.substr(r))}return e}static Int32ToFourCC(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}static CreateImageFrom2DTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512;arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.device.gl.RGBA;const n=s.device.gl,i=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,i),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const a=new Uint8Array(t*r*4);n.readPixels(0,0,t,r,n.RGBA,n.UNSIGNED_BYTE,a),n.deleteFramebuffer(i);const o=document.createElement("canvas");o.width=t,o.height=r;const u=o.getContext("2d"),c=u.createImageData(t,r);c.data.set(a),u.putImageData(c,0,0);const l=new Image;return l.src=o.toDataURL(),l}}},"./core/resource/Tw2VideoRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VideoRes",function(){return o});var n=r("./global/index.js"),i=r("./core/resource/Tw2Resource.js"),s=r("./core/Tw2Error.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends i.Tw2Resource{constructor(){super(...arguments),a(this,"texture",null),a(this,"video",null),a(this,"width",0),a(this,"height",0),a(this,"cycle",!0),a(this,"playOnLoad",!0),a(this,"_currentSampler",0),a(this,"_currentTime",-1),a(this,"_playable",!1),a(this,"_isPlaying",!1),a(this,"_onPlaying",null),a(this,"_onPause",null),a(this,"_onEnded",null)}IsGood(){return this.KeepAlive(),super.IsGood()&&this.video&&this._playable}KeepAlive(){this.activeFrame=n.resMan.activeFrame}Play(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cycle=e,this._onEnded=t,this.video&&this._playable?(this.video.loop=this.cycle,this.video.play()):this.playOnLoad=!0}Pause(){this.video?this.video.pause():this.playOnLoad=!1}Prepare(e,t){const r=n.device.gl;switch(t){case"mp4":case"webm":case"ogg":this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this.video),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.bindTexture(r.TEXTURE_2D,null),this.width=this.video.width,this.height=this.video.height,this.video.loop=this.cycle,this.playOnLoad&&this.video.play();break;default:throw new s.ErrResourceExtensionUnregistered({path:this.path,extension:t})}this.OnPrepared()}DoCustomLoad(e,t,r){switch(t){case"mp4":case"webm":case"ogg":break;default:throw new s.ErrResourceExtensionUnregistered({path:e,extension:t})}return this.video=document.createElement("video"),this.video.crossOrigin="anonymous",this.video.muted=!0,this.video.onerror=()=>{r._pendingLoads--,this.video=null,this.OnError(new s.ErrHTTPRequest({path:e}))},this.video.oncanplay=()=>{this._playable=!0,this.video.oncanplay=null,r._pendingLoads--,r.Queue(this,void 0,t),this.OnLoaded()},this.video.onended=()=>{this._isPlaying=!1,this._onEnded&&this._onEnded(this)},this.video.onpause=()=>{this._isPlaying=!1,this._onPause&&this._onPause(this)},this.video.onplaying=()=>{this._isPlaying=!0,this._onPlaying&&this._onPlaying(this)},this.video.src=e,!0}Unload(){return this.texture&&(n.device.gl.deleteTexture(this.texture),this.texture=null),this._isPlaying=!1,this._playable=!1,this.playOnLoad=!0,this.video=null,this.OnUnloaded(),!0}Bind(e){const t=n.device,r=t.gl;this.KeepAlive();const i=e.samplerType;i===r.TEXTURE_2D&&(this.texture?(this._currentTime=this.video.currentTime,r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this.video),r.bindTexture(r.TEXTURE_2D,null),r.bindTexture(i,this.texture),e.hash!==this._currentSampler&&(e.Apply(t,!1),this._currentSampler=e.hash)):r.bindTexture(r.TEXTURE_2D,t.GetFallbackTexture()))}}},"./core/resource/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/resource/Tw2EffectRes.js");r.d(t,"Tw2EffectRes",function(){return n.Tw2EffectRes});var i=r("./core/resource/Tw2GeometryRes.js");r.d(t,"Tw2GeometryRes",function(){return i.Tw2GeometryRes});var s=r("./core/resource/Tw2LoadingObject.js");r.d(t,"Tw2LoadingObject",function(){return s.Tw2LoadingObject});var a=r("./core/resource/Tw2LodResource.js");r.d(t,"Tw2LodResource",function(){return a.Tw2LodResource});var o=r("./core/resource/Tw2Resource.js");r.d(t,"Tw2Resource",function(){return o.Tw2Resource});var u=r("./core/resource/Tw2Shader.js");r.d(t,"Tw2Shader",function(){return u.Tw2Shader});var c=r("./core/resource/Tw2TextureRes.js");r.d(t,"Tw2TextureRes",function(){return c.Tw2TextureRes});var l=r("./core/resource/Tw2VideoRes.js");r.d(t,"Tw2VideoRes",function(){return l.Tw2VideoRes})},"./core/resource/shaderOverrides.json":function(e){e.exports={blinkinglightspool:{"r0.xy=r0.xx*c[0+a0.x].xy;":"if(a0.x==0){r0.xy=r0.xx*c[0].xy;}else if(a0.x==1){r0.xy=r0.xx*c[1].xy;}else if(a0.x==2){r0.xy=r0.xx*c[2].xy;}else if(a0.x==3){r0.xy=r0.xx*c[3].xy;}else if(a0.x==4){r0.xy=r0.xx*c[4].xy;}","texcoord=r3.zzww*c[0+a0.x].zwzz;":"if(a0.x==0){texcoord=r3.zzww*c[0].zwzz;}else if(a0.x==1){texcoord=r3.zzww*c[1].zwzz;}else if(a0.x==2){texcoord=r3.zzww*c[2].zwzz;}else if(a0.x==3){texcoord=r3.zzww*c[3].zwzz;}else if(a0.x==4){texcoord=r3.zzww*c[4].zwzz;}"},boostervolumetric:{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<12;++i){"},fxarmorimpactv5:{"for(int i=0;i<i0.x;++i){":"for(int i=0;i<255;++i){"}}},"./core/sampler/Tw2SamplerOverride.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SamplerOverride",function(){return s});var n=r("./core/sampler/Tw2SamplerState.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"addressU",0),i(this,"addressV",0),i(this,"addressW",0),i(this,"filter",0),i(this,"mipFilter",0),i(this,"lodBias",0),i(this,"maxMipLevel",0),i(this,"maxAnisotropy",0),i(this,"_sampler",null)}GetSampler(e,t){if(this._sampler)return this._sampler;this._sampler=new n.Tw2SamplerState;const r=this._sampler;r.registerIndex=t.registerIndex,r.name=t.name;const i=e.wrapModes,s=e.gl;if(1===this.filter){switch(this.mipFilter){case 0:r.minFilter=s.NEAREST;break;case 1:r.minFilter=s.NEAREST_MIPMAP_NEAREST;break;default:r.minFilter=s.NEAREST_MIPMAP_LINEAR}r.minFilterNoMips=s.NEAREST,r.magFilter=s.NEAREST}else{switch(this.mipFilter){case 0:r.minFilter=s.LINEAR;break;case 1:r.minFilter=s.LINEAR_MIPMAP_NEAREST;break;default:r.minFilter=s.LINEAR_MIPMAP_LINEAR}r.minFilterNoMips=s.LINEAR,r.magFilter=s.LINEAR}return 3!==this.filter&&3!==this.mipFilter||(r.anisotropy=Math.max(this.maxAnisotropy,1)),r.addressU=i[this.addressU],r.addressV=i[this.addressV],r.addressW=i[this.addressW],r.samplerType=t.samplerType,r.isVolume=t.isVolume,r.ComputeHash(),r}}},"./core/sampler/Tw2SamplerState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SamplerState",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"registerIndex",0),i(this,"minFilter",n.GL_LINEAR),i(this,"maxFilter",n.GL_LINEAR),i(this,"magFilter",n.GL_LINEAR),i(this,"minFilterNoMips",n.GL_LINEAR),i(this,"addressU",n.GL_REPEAT),i(this,"addressV",n.GL_REPEAT),i(this,"addressW",n.GL_REPEAT),i(this,"anisotropy",1),i(this,"samplerType",n.GL_TEXTURE_2D),i(this,"isVolume",!1),i(this,"hash",0),i(this,"_borderColor",null),i(this,"_comparison",null),i(this,"_comparisonFunc",null),i(this,"_mipLODBias",null),i(this,"_minLOD",null),i(this,"_maxLOD",null)}get filterMode(){return this.minFilterNoMips in n.FilterMode?n.FilterMode[this.minFilterNoMips]:2}get mipFilterMode(){return this.minFilter in n.MipFilterMode?n.MipFilterMode[this.minFilter]:2}ComputeHash(){this.hash=2166136261,this.hash*=16777619,this.hash^=this.minFilter,this.hash*=16777619,this.hash^=this.maxFilter,this.hash*=16777619,this.hash^=this.addressU,this.hash*=16777619,this.hash^=this.addressV,this.hash*=16777619,this.hash^=this.anisotropy}Apply(e,t){const r=this.samplerType,n=e,i=n.gl;i.texParameteri(r,i.TEXTURE_WRAP_S,t?this.addressU:i.CLAMP_TO_EDGE),i.texParameteri(r,i.TEXTURE_WRAP_T,t?this.addressV:i.CLAMP_TO_EDGE),i.texParameteri(r,i.TEXTURE_MIN_FILTER,t?this.minFilter:this.minFilterNoMips),i.texParameteri(r,i.TEXTURE_MAG_FILTER,this.magFilter),n.ext.AnisotropicFilter&&n.enableAnisotropicFiltering&&i.texParameterf(r,n.ext.AnisotropicFilter.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.anisotropy,n.ext.AnisotropicFilter.maxAnisotropy))}}},"./core/sampler/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/sampler/Tw2SamplerState.js");r.d(t,"Tw2SamplerState",function(){return n.Tw2SamplerState});var i=r("./core/sampler/Tw2SamplerOverride.js");r.d(t,"Tw2SamplerOverride",function(){return i.Tw2SamplerOverride})},"./core/value/TriMatrix.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriMatrix",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"_11",0),i(this,"_12",0),i(this,"_13",0),i(this,"_14",0),i(this,"_21",0),i(this,"_22",0),i(this,"_23",0),i(this,"_24",0),i(this,"_31",0),i(this,"_32",0),i(this,"_33",0),i(this,"_34",0),i(this,"_41",0),i(this,"_42",0),i(this,"_43",0),i(this,"_44",0)}static black(e){return[["_11",e.float],["_12",e.float],["_13",e.float],["_14",e.float],["_21",e.float],["_22",e.float],["_23",e.float],["_24",e.float],["_31",e.float],["_32",e.float],["_33",e.float],["_34",e.float],["_41",e.float],["_42",e.float],["_43",e.float],["_44",e.float]]}}},"./core/value/Tw2Float.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Float",function(){return i});var n=r("./global/index.js");class i extends n.Tw2BaseClass{constructor(){var e,t,r;super(...arguments),r=0,(t="value")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}static black(e){return[["value",e.float]]}}},"./core/value/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/value/Tw2Float.js");r.d(t,"Tw2Float",function(){return n.Tw2Float});var i=r("./core/value/TriMatrix.js");r.d(t,"TriMatrix",function(){return i.TriMatrix})},"./core/vertex/Tw2VertexDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VertexDeclaration",function(){return s});var n=r("./core/vertex/Tw2VertexElement.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"elements",[]),i(this,"elementsSorted",[]),i(this,"stride",null)}Clear(){this.elements.splice(0,this.elements.length),this.RebuildHash()}SetStride(e){return this.stride=e,this}RebuildHash(){this.elementsSorted.splice(0,this.elementsSorted.length);for(let e=0;e<this.elements.length;++e)this.elementsSorted.push(this.elements[e]);this.elementsSorted.sort(s.CompareDeclarationElements)}FindUsage(e,t){for(let r=0;r<this.elementsSorted.length;++r){const n=this.elementsSorted[r];if(n.usage===e){if(n.usageIndex===t)return n;if(n.usageIndex>t)return null}if(n.usage>e)return null}return null}SetDeclaration(e,t,r){const n=e.gl;let i=0;for(let e=0;e<t.elementsSorted.length;++e){const a=t.elementsSorted[e];if(!(a.location<0))for(;;){if(i>=this.elementsSorted.length){n.disableVertexAttribArray(a.location),n.vertexAttrib4f(a.location,0,0,0,0);break}const e=this.elementsSorted[i],t=s.CompareDeclarationElements(e,a);if(t>0){n.disableVertexAttribArray(a.location),n.vertexAttrib4f(a.location,0,0,0,0);break}if(0===t){e.customSetter?e.customSetter(a):(n.enableVertexAttribArray(a.location),n.vertexAttribPointer(a.location,e.elements,e.type,!1,r,e.offset));break}i++}}return!0}SetPartialDeclaration(e,t,r,n,i){const a=e.gl,o=[];let u=0;for(let e=0;e<t.elementsSorted.length;++e){const c=t.elementsSorted[e];if(!(c.location<0))for(;;){const e=this.elementsSorted[u],t=s.CompareDeclarationElements(e,c,n);if(0===t){e.customSetter?e.customSetter(c):(a.enableVertexAttribArray(c.location),a.vertexAttribPointer(c.location,e.elements,e.type,!1,r,e.offset),a.vertexAttribDivisor(c.location,i),i&&o.push(c.location));break}if(t>0){i||(a.disableVertexAttribArray(c.location),a.vertexAttrib4f(c.location,0,0,0,0));break}if(++u>=this.elementsSorted.length)return i||(a.disableVertexAttribArray(c.location),a.vertexAttrib4f(c.location,0,0,0,0)),o}}return o}ResetInstanceDivisors(e,t){if(t)for(let r=0;r<t.length;++r)e.gl.vertexAttribDivisor(t[r],0)}static CompareDeclarationElements(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.usage<t.usage?-1:e.usage>t.usage?1:e.usageIndex+r<t.usageIndex?-1:e.usageIndex+r>t.usageIndex?1:0}static from(e,t){const r=new s;if(e){let i=0;for(let t=0;t<e.length;t++)e[t].offset=i,r.elements.push(n.Tw2VertexElement.from(e[t])),i+=4*e[t].elements;t&&t.skipUpdate||r.RebuildHash()}return r}}},"./core/vertex/Tw2VertexElement.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VertexElement",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"customSetter",null),i(this,"elements",null),i(this,"location",null),i(this,"offset",0),i(this,"type",null),i(this,"usage",-1),i(this,"usageIndex",null),i(this,"_registerIndex",null),i(this,"_usedMask",null),i(this,"_attr",null)}get string(){return s.TypeMap[this.usage]||"UNKNOWN"}static from(e){const t=new s;if(e){let r=e.usage,i=e.usageIndex;t.usage="string"==typeof r?this.Type[r.toUpperCase()]:r,t.usageIndex=i;const s=e.elements,a=void 0===s?null:s,o=e.type,u=void 0===o?n.GL_FLOAT:o,c=e.offset,l=void 0===c?0:c,d=e.location,h=void 0===d?null:d,f=e.customSetter,m=void 0===f?null:f;t.offset=l,t.elements=a,t.type=u,t.location=h,t.customSetter=m;const v=e.registerIndex,p=void 0===v?null:v,E=e.usedMask,_=void 0===E?null:E,g=e.attr,S=void 0===g?null:g;t._registerIndex=p,t._usedMask=_,t._attr=S}return t}}i(s,"Type",{POSITION:0,COLOR:1,NORMAL:2,TANGENT:3,BINORMAL:4,TEXCOORD:5,BLENDWEIGHT:6,BLENDINDICES:7}),i(s,"TypeMap",["POSITION","COLOR","NORMAL","TANGENT","BINORMAL","TEXCOORD","BLENDWEIGHT","BLENDINDICES"])},"./core/vertex/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./core/vertex/Tw2VertexDeclaration.js");r.d(t,"Tw2VertexDeclaration",function(){return n.Tw2VertexDeclaration});var i=r("./core/vertex/Tw2VertexElement.js");r.d(t,"Tw2VertexElement",function(){return i.Tw2VertexElement})},"./curve/Tw2CurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSet",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"bindings",[]),i(this,"curves",[]),i(this,"playOnLoad",!0),i(this,"ranges",[]),i(this,"scale",1),i(this,"useSimTimeRebase",!1),i(this,"scaledTime",0),i(this,"_isPlaying",!1)}Initialize(){this.playOnLoad&&this.Play()}Play(){this._isPlaying=!0,this.scaledTime=0}PlayFrom(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._isPlaying=!0,this.scaledTime=e*this.scale}Stop(){this._isPlaying=!1}Update(e){if(this._isPlaying){this.scaledTime+=e*this.scale;for(let e=0;e<this.curves.length;++e)this.curves[e].UpdateValue(this.scaledTime);for(let e=0;e<this.bindings.length;++e)this.bindings[e].CopyValue()}}GetRangeByName(e){for(let t=0;t<this.ranges.length;t++)if(this.ranges[t].name===e)return this.ranges[t];return null}GetMaxCurveDuration(){let e=0;for(let t=0;t<this.curves.length;++t)"GetLength"in this.curves[t]&&(e=Math.max(e,this.curves[t].GetLength()));return e}static black(e){return[["bindings",e.array],["curves",e.array],["name",e.string],["playOnLoad",e.boolean],["ranges",e.array],["scale",e.float],["useSimTimeRebase",e.boolean]]}}},"./curve/Tw2CurveSetRange.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSetRange",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"endTime",0),i(this,"looped",!1),i(this,"startTime",0)}static black(e){return[["endTime",e.float],["looped",e.boolean],["name",e.string],["startTime",e.float]]}}i(s,"__isStaging",4)},"./curve/Tw2ValueBinding.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ValueBinding",function(){return u});var n=r("./global/index.js"),i=r("./core/parameter/index.js"),s=r("./global/util/index.js"),a=r("./core/Tw2Error.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends n.Tw2BaseClass{constructor(){super(...arguments),o(this,"name",""),o(this,"destinationAttribute",""),o(this,"destinationObject",null),o(this,"offset",n.vec4.create()),o(this,"scale",1),o(this,"sourceAttribute",""),o(this,"sourceObject",null),o(this,"_copyFunc",null),o(this,"_destinationElement",null),o(this,"_destinationIsArray",null),o(this,"_destinationIsRGBA",null),o(this,"_sourceElement",null),o(this,"_sourceIsArray",null),o(this,"_sourceIsRGBA",null)}Initialize(){this.UpdateValues()}OnValueChanged(){if(null!==this._copyFunc)return;if(!this.sourceObject||""===this.sourceAttribute)return;if(!this.destinationObject||""===this.destinationAttribute)return;if(this.sourceObject&&"_ref"in this.sourceObject&&(this.sourceObject=this.FindIDFromRoot(this.sourceObject._ref),!this.sourceObject))throw new a.ErrBindingReference({object:"source"});if(this.destinationObject&&"_ref"in this.destinationObject&&(this.destinationObject=this.FindIDFromRoot(this.destinationObject._ref),!this.destinationObject))throw new a.ErrBindingReference({object:"destination"});let e=!1,t=!1,r=this.sourceAttribute.substr(-2);".x"===r||".r"===r?(e=!0,this._sourceElement=0,this.sourceAttribute=this.sourceAttribute.substr(0,this.sourceAttribute.length-2),this._sourceIsRGBA=".r"===r):".y"===r||".g"===r?(e=!0,this._sourceElement=1,this.sourceAttribute=this.sourceAttribute.substr(0,this.sourceAttribute.length-2),this._sourceIsRGBA=".g"===r):".z"===r||".b"===r?(e=!0,this._sourceElement=2,this.sourceAttribute=this.sourceAttribute.substr(0,this.sourceAttribute.length-2),this._sourceIsRGBA=".b"===r):".w"===r||".a"===r?(e=!0,this._sourceElement=3,this.sourceAttribute=this.sourceAttribute.substr(0,this.sourceAttribute.length-2),this._sourceIsRGBA=".a"===r):this.sourceObject instanceof i.Tw2Vector4Parameter&&("v1"===this.sourceAttribute?(e=!0,this._sourceElement=0,this.sourceAttribute="value"):"v2"===this.sourceAttribute?(e=!0,this._sourceElement=1,this.sourceAttribute="value"):"v3"===this.sourceAttribute?(e=!0,this._sourceElement=2,this.sourceAttribute="value"):"v4"===this.sourceAttribute&&(e=!0,this._sourceElement=3,this.sourceAttribute="value"));let n=this.destinationAttribute.substr(-2);".x"===n||".r"===n?(t=!0,this._destinationElement=0,this.destinationAttribute=this.destinationAttribute.substr(0,this.destinationAttribute.length-2),this._destinationIsRGBA=".r"===n):".y"===n||".g"===n?(t=!0,this._destinationElement=1,this.destinationAttribute=this.destinationAttribute.substr(0,this.destinationAttribute.length-2),this._destinationIsRGBA=".g"===n):".z"===n||".b"===n?(t=!0,this._destinationElement=2,this.destinationAttribute=this.destinationAttribute.substr(0,this.destinationAttribute.length-2),this._destinationIsRGBA=".b"===n):".w"===n||".a"===n?(t=!0,this._destinationElement=3,this.destinationAttribute=this.destinationAttribute.substr(0,this.destinationAttribute.length-2),this._destinationIsRGBA=".a"===n):this.destinationObject instanceof i.Tw2Vector4Parameter&&("v1"===this.destinationAttribute?(t=!0,this._destinationElement=0,this.destinationAttribute="value"):"v2"===this.destinationAttribute?(t=!0,this._destinationElement=1,this.destinationAttribute="value"):"v3"===this.destinationAttribute?(t=!0,this._destinationElement=2,this.destinationAttribute="value"):"v4"===this.destinationAttribute&&(t=!0,this._destinationElement=3,this.destinationAttribute="value"));const o=this.sourceObject[this.sourceAttribute],c=this.destinationObject[this.destinationAttribute];if(void 0===o)throw new a.ErrBindingValueUndefined({object:"source",property:this.sourceAttribute});if(void 0===c)throw new a.ErrBindingValueUndefined({object:"destination",property:this.destinationAttribute});const l=this._sourceIsArray=Object(s.isArrayLike)(o),d=this._destinationIsArray=Object(s.isArrayLike)(c),h=u;let f;if(l===d&&typeof o==typeof c?l?e?f=t?h.CopyElementToElement:h.ReplicateElement:o.length<=c.length?f=h.CopyArray:16===o.length&&(f=h.ExtractPos):f=h.CopyValueToValue:l&&e&&Object(s.isNumber)(c)?f=h.CopyElementToValue:d&&Object(s.isNumber)(o)?f=t?h.CopyValueToElement:h.ReplicateValue:Object(s.isNumber)(o)&&Object(s.isBoolean)(c)?f=h.CopyFloatToBoolean:Object(s.isBoolean)(o)&&Object(s.isNumber)(c)&&(f=h.CopyBooleanToFloat),!f)throw new a.ErrBindingType;this._copyFunc=f}CopyValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this._copyFunc&&(this._copyFunc(this),"UpdateValues"in this.destinationObject?this.destinationObject.UpdateValues({controller:e}):"OnValueChanged"in this.destinationObject&&this.destinationObject.OnValueChanged({controller:e}))}GetDestinationTarget(){return this._copyFunc?this.constructor.GetAttribute(this.destinationObject,this.destinationAttribute,this._destinationElement,this._destinationIsRGBA):this.destinationAttribute}GetSourceTarget(){return this._copyFunc?this.constructor.GetAttribute(this.sourceObject,this.sourceAttribute,this._sourceElement,this._sourceIsRGBA):this.sourceAttribute}SetSource(e,t,r,n){const i=this.constructor.GetTargets(e,t,r,n),s=i.object,a=i.attribute;this.sourceObject=s,this.sourceAttribute=a,this._copyFunc=null}SetDestination(e,t,r,n){const i=this.constructor.GetTargets(e,t,r,n),s=i.object,a=i.attribute;this.destinationObject=s,this.destinationAttribute=a,this._copyFunc=null}static GetAttribute(e,t,r,n){if(e instanceof i.Tw2Vector4Parameter&&"value"===t)switch(r){case 0:return"v0";case 1:return"v1";case 2:return"v2";case 3:return"v4";default:return t}switch(r){case 0:return t+n?".r":".x";case 1:return t+n?".g":".y";case 2:return t+n?".b":".z";case 3:return t+n?".a":".w";default:return t}}static GetTargets(e,t,r,n){if(void 0!==r&&void 0===n&&(n=t.toUpperCase().includes("COLOR")),e instanceof i.Tw2Vector4Parameter&&"value"===t)switch(r){case 0:t="v0";break;case 1:t="v1";break;case 2:t="v2";break;case 3:t="v3"}else switch(r){case 0:t+=n?".r":".x";break;case 1:t+=n?".g":".y";break;case 2:t+=n?".b":".z";break;case 3:t+=n?".a":".w"}return{object:e,attribute:t}}static CopyValueToValue(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[0]}static CopyArray(e){let t=Math.min(e.destinationObject[e.destinationAttribute].length,e.sourceObject[e.sourceAttribute].length);for(let r=0;r<t;++r)e.destinationObject[e.destinationAttribute][r]=e.sourceObject[e.sourceAttribute][r]*e.scale+e.offset[r]}static CopyElementToElement(e){e.destinationObject[e.destinationAttribute][e._destinationElement]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[0]}static ReplicateValue(e){for(let t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[t]}static ReplicateElement(e){for(let t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[t]}static ExtractPos(e){for(let t=0;t<e.destinationObject[e.destinationAttribute].length;++t)e.destinationObject[e.destinationAttribute][t]=e.sourceObject[e.sourceAttribute][t+12]*e.scale+e.offset[t]}static CopyElementToValue(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute][e._sourceElement]*e.scale+e.offset[0]}static CopyValueToElement(e){e.destinationObject[e.destinationAttribute][e._destinationElement]=e.sourceObject[e.sourceAttribute]*e.scale+e.offset[0]}static CopyFloatToBoolean(e){e.destinationObject[e.destinationAttribute]=0!==e.sourceObject[e.sourceAttribute]}static CopyBooleanToFloat(e){e.destinationObject[e.destinationAttribute]=e.sourceObject[e.sourceAttribute]?1:0}static black(e){return[["destinationObject",e.object],["destinationAttribute",e.string],["name",e.string],["offset",e.vector4],["scale",e.float],["sourceObject",e.object],["sourceAttribute",e.string]]}}},"./curve/adapter/Tr2RotationAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2RotationAdapter",function(){return a});var n=r("./curve/adapter/Tw2CurveAdapter.js"),i=r("./global/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2CurveAdapter{constructor(){super(...arguments),s(this,"value",i.vec4.create())}static black(e){return[["curve",e.object],["value",e.vector4]]}}s(a,"__isStaging",4)},"./curve/adapter/Tr2TranslationAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2TranslationAdapter",function(){return a});var n=r("./global/index.js"),i=r("./curve/adapter/Tw2CurveAdapter.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveAdapter{constructor(){super(...arguments),s(this,"value",n.vec3.create())}static black(e){return[["curve",e.object],["value",e.vector3]]}}s(a,"__isStaging",4)},"./curve/adapter/Tw2CurveAdapter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveAdapter",function(){return i});var n=r("./global/class/index.js");function i(){n.Tw2BaseClass.defineID(this),this.name="",this.curve=null,this.value=null}i.prototype=Object.assign(Object.create(n.Tw2BaseClass.prototype),{constructor:i})},"./curve/adapter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/adapter/Tr2RotationAdapter.js");r.d(t,"Tr2RotationAdapter",function(){return n.Tr2RotationAdapter});var i=r("./curve/adapter/Tr2TranslationAdapter.js");r.d(t,"Tr2TranslationAdapter",function(){return i.Tr2TranslationAdapter});var s=r("./curve/adapter/Tw2CurveAdapter.js");r.d(t,"Tw2CurveAdapter",function(){return s.Tw2CurveAdapter})},"./curve/curve/AudEventCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"AudEventKey",function(){return s}),r.d(t,"AudEventCurve",function(){return a});var n=r("./curve/curve/Tw2Curve.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveKey{constructor(){super(...arguments),i(this,"time",0),i(this,"value",0)}}class a extends n.Tw2Curve{constructor(){super(...arguments),i(this,"extrapolation",0),i(this,"keys",[]),i(this,"sourceTriObserver",null)}}i(a,"__isStaging",4)},"./curve/curve/Tr2BoneMatrixCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2BoneMatrixCurve",function(){return o});var n,i,s,a=r("./curve/curve/Tw2Curve.js");class o extends a.Tw2Curve{static black(e){return[["name",e.string]]}}s=4,(i="__isStaging")in(n=o)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./curve/curve/Tr2CurveScalar.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveScalarKey",function(){return a}),r.d(t,"Tr2CurveScalar",function(){return o});var n=r("./curve/curve/Tw2Curve.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2CurveKey{constructor(){super(...arguments),s(this,"endTangent",0),s(this,"extrapolation",0),s(this,"index",0),s(this,"interpolation",1),s(this,"startTangent",0),s(this,"value",0)}static blackStruct(e){const t=new this;return t.time=e.ReadF32(),t.value=e.ReadF32(),t.startTangent=e.ReadF32(),t.endTangent=e.ReadF32(),t.index=e.ReadU16(),t.interpolation=e.ReadU8(),t.extrapolation=e.ReadU8(),t}}class o extends n.Tw2Curve{constructor(){super(...arguments),s(this,"extrapolationAfter",0),s(this,"extrapolationBefore",0),s(this,"keys",[]),s(this,"timeOffset",0),s(this,"timeScale",0),s(this,"_length",0)}Sort(){this._length=n.Tw2Curve.Sort3(this.keys)}GetLength(){return this._length}GetValueAt(e){throw new i.ErrFeatureNotImplemented({feature:"GetValueAt"})}static black(e){return[["name",e.string],["timeOffset",e.float],["timeScale",e.float],["extrapolationAfter",e.uint],["extrapolationBefore",e.uint],["keys",e.structList(a)]]}}s(o,"inputDimension",1),s(o,"outputDimension",1),s(o,"valueProperty","value"),s(o,"curveType",n.Tw2Curve.Type.CURVE3),s(o,"Key",a),s(o,"Interpolation",{}),s(o,"Extrapolation",{}),s(o,"__isStaging",4)},"./curve/curve/Tr2ScalarExprKeyCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ScalarExprKey",function(){return s}),r.d(t,"Tr2ScalarExprKeyCurve",function(){return a});var n=r("./curve/curve/Tw2Curve.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveKey{constructor(){super(...arguments),i(this,"input1",-1),i(this,"input2",-1),i(this,"input3",-1),i(this,"interpolation",0),i(this,"left",0),i(this,"right",0),i(this,"time",0),i(this,"timeExpression",""),i(this,"value",0)}static black(e){return[["input1",e.float],["input2",e.float],["input3",e.float],["interpolation",e.uint],["left",e.float],["right",e.float],["time",e.float],["timeExpression",e.string],["value",e.float]]}}i(s,"__isStaging",4);class a extends n.Tw2Curve{constructor(){super(...arguments),i(this,"interpolation",0),i(this,"keys",[])}static black(e){return[["interpolation",e.uint],["keys",e.array],["name",e.string]]}}i(a,"__isStaging",4)},"./curve/curve/Tw2Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveKey",function(){return i}),r.d(t,"Tw2Curve",function(){return s});var n=r("./global/index.js");function i(){n.Tw2BaseClass.defineID(this),this.name="",this.time=0}function s(){n.Tw2BaseClass.defineID(this),this.name=""}i.prototype=Object.assign(Object.create(n.Tw2BaseClass.prototype),{constructor:i}),s.prototype=Object.assign(Object.create(n.Tw2BaseClass.prototype),{constructor:s,Initialize(){this.Sort()},Sort(){},GetLength:()=>0,UpdateValue(e){}}),s.Compare=function(e,t){return e.time<t.time?-1:e.time>t.time?1:0},s.Sort=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.keys;t&&t.length&&(t.sort(s.Compare),e.length=t[t.length-1].time)},s.Sort2=function(e){if(e.keys&&e.keys.length){e.keys.sort(s.Compare);const t=e.keys[e.keys.length-1];if(t.time>e.length){const r=e.length,n=e.endValue,i=e.endTangent;e.length=t.time,e.endValue=t.value,e.endTangent=t.leftTangent,r>0&&(t.time=r,t.value=n,t.leftTangent=i)}}},s.Sort3=function(e){e.sort((e,t)=>e.index<t.index?-1:e.index>t.index?1:0);let t=0;for(let r=0;r<e.length;r++)e[r].index=r,r===e.length-1&&(t=e[r].time);return t},s.inputDimension=null,s.outputDimension=null,s.valueProperty=null,s.curveType=null,s.Key=null,s.Interpolation=null,s.Extrapolation=null,s.Type={CURVE:1,CURVE2:2,CURVE3:3,CURVE_MAYA:4,CURVE_NO_KEYS:5,SEQUENCER:100,SEQUENCER2:101},s.global={vec3_0:n.vec3.create(),vec4_0:n.vec4.create(),quat_0:n.quat.create(),quat_1:n.quat.create()}},"./curve/curve/Tw2CurveConstant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveConstant",function(){return a});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2Curve{constructor(){super(...arguments),s(this,"value",n.vec4.create())}UpdateValue(e,t){n.vec4.copy(t,this.value)}static black(e){return[["name",e.string],["value",e.vector4]]}}s(a,"inputDimension",4),s(a,"outputDimension",4),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2Curve.Type.CURVE_NO_KEYS),s(a,"__isStaging",4)},"./curve/curve/Tw2EventCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EventKey",function(){return s}),r.d(t,"Tw2EventCurve",function(){return a});var n=r("./curve/curve/Tw2Curve.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveKey{constructor(){super(...arguments),i(this,"value",0)}static black(e){return[["time",e.float],["value",e.ushort]]}}class a extends n.Tw2Curve{constructor(){super(...arguments),i(this,"extrapolation",0),i(this,"keys",[]),i(this,"value",0),i(this,"_time",0),i(this,"_currentKey",0),i(this,"_length",0)}Sort(){this.keys.length&&(this.keys.sort(n.Tw2Curve.Compare),this._length=this.keys[this.keys.length-1].time)}GetLength(){return this._length}UpdateValue(e){if(this._length<=0)return this.value;let t=this._time;if(this._time=e,this._time<t&&(this._currentKey=0),this.extrapolation===a.Extrapolation.CYCLE){let e=this._time%this._length;e<t&&(this._currentKey=0),this._time=e}for(;this._currentKey<this.keys.length&&this._time>=this.keys[this._currentKey].time;)this.value=this.keys[this._currentKey].value,++this._currentKey}static black(e){return[["extrapolation",e.uint],["name",e.string],["keys",e.array],["value",e.ushort]]}}i(a,"dimension",1),i(a,"outputDimension",1),i(a,"valueProperty","value"),i(a,"curveType",n.Tw2Curve.Type.CURVE),i(a,"Key",s),i(a,"Extrapolation",{NONE:0,CYCLE:3})},"./curve/curve/Tw2PerlinCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2PerlinCurve",function(){return a});var n=r("./curve/curve/Tw2Curve.js"),i=r("./global/math/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2Curve{constructor(){super(...arguments),s(this,"N",0),s(this,"alpha",0),s(this,"beta",0),s(this,"offset",0),s(this,"scale",0),s(this,"speed",0),s(this,"value",0)}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){return e-=this.offset,(i.noise.perlin1D(e*this.speed,this.alpha,this.beta,this.N)+1)/2*this.scale+this.offset}static black(e){return[["alpha",e.float],["beta",e.float],["N",e.uint],["name",e.string],["offset",e.float],["scale",e.float],["speed",e.float],["value",e.float]]}}s(a,"outputDimension",1),s(a,"valueProperty","value"),s(a,"curveType",n.Tw2Curve.Type.CURVE_NO_KEYS)},"./curve/curve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/curve/AudEventCurve.js");r.d(t,"AudEventKey",function(){return n.AudEventKey}),r.d(t,"AudEventCurve",function(){return n.AudEventCurve});var i=r("./curve/curve/Tr2BoneMatrixCurve.js");r.d(t,"Tr2BoneMatrixCurve",function(){return i.Tr2BoneMatrixCurve});var s=r("./curve/curve/Tw2CurveConstant.js");r.d(t,"Tw2CurveConstant",function(){return s.Tw2CurveConstant});var a=r("./curve/curve/Tr2CurveScalar.js");r.d(t,"Tw2CurveScalarKey",function(){return a.Tw2CurveScalarKey}),r.d(t,"Tr2CurveScalar",function(){return a.Tr2CurveScalar});var o=r("./curve/curve/Tr2ScalarExprKeyCurve.js");r.d(t,"Tr2ScalarExprKey",function(){return o.Tr2ScalarExprKey}),r.d(t,"Tr2ScalarExprKeyCurve",function(){return o.Tr2ScalarExprKeyCurve});var u=r("./curve/curve/Tw2EventCurve.js");r.d(t,"Tw2EventKey",function(){return u.Tw2EventKey}),r.d(t,"Tw2EventCurve",function(){return u.Tw2EventCurve});var c=r("./curve/curve/Tw2PerlinCurve.js");r.d(t,"Tw2PerlinCurve",function(){return c.Tw2PerlinCurve});var l=r("./curve/curve/Tw2Curve.js");r.d(t,"Tw2CurveKey",function(){return l.Tw2CurveKey}),r.d(t,"Tw2Curve",function(){return l.Tw2Curve});var d=r("./curve/curve/legacy/index.js");r.d(t,"Tw2ColorKey",function(){return d.Tw2ColorKey}),r.d(t,"Tw2ColorCurve",function(){return d.Tw2ColorCurve}),r.d(t,"Tw2ColorKey2",function(){return d.Tw2ColorKey2}),r.d(t,"Tw2ColorCurve2",function(){return d.Tw2ColorCurve2}),r.d(t,"Tw2QuaternionKey2",function(){return d.Tw2QuaternionKey2}),r.d(t,"Tw2QuaternionCurve",function(){return d.Tw2QuaternionCurve}),r.d(t,"Tw2RandomConstantCurve",function(){return d.Tw2RandomConstantCurve}),r.d(t,"Tw2Torque",function(){return d.Tw2Torque}),r.d(t,"Tw2RigidOrientation",function(){return d.Tw2RigidOrientation}),r.d(t,"Tw2QuaternionKey",function(){return d.Tw2QuaternionKey}),r.d(t,"Tw2RotationCurve",function(){return d.Tw2RotationCurve}),r.d(t,"Tw2ScalarKey",function(){return d.Tw2ScalarKey}),r.d(t,"Tw2ScalarCurve",function(){return d.Tw2ScalarCurve}),r.d(t,"Tw2ScalarKey2",function(){return d.Tw2ScalarKey2}),r.d(t,"Tw2ScalarCurve2",function(){return d.Tw2ScalarCurve2}),r.d(t,"Tw2SineCurve",function(){return d.Tw2SineCurve}),r.d(t,"Tw2Vector2Key",function(){return d.Tw2Vector2Key}),r.d(t,"Tw2Vector2Curve",function(){return d.Tw2Vector2Curve}),r.d(t,"Tw2Vector3Key",function(){return d.Tw2Vector3Key}),r.d(t,"Tw2Vector3Curve",function(){return d.Tw2Vector3Curve}),r.d(t,"Tw2VectorKey",function(){return d.Tw2VectorKey}),r.d(t,"Tw2VectorCurve",function(){return d.Tw2VectorCurve})},"./curve/curve/legacy/Tw2ColorCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorKey",function(){return a}),r.d(t,"Tw2ColorCurve",function(){return o});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveKey{constructor(){super(...arguments),s(this,"value",n.vec4.create()),s(this,"left",n.vec4.create()),s(this,"right",n.vec4.create()),s(this,"interpolation",0)}}class o extends i.Tw2Curve{constructor(){super(...arguments),s(this,"start",0),s(this,"value",n.vec4.create()),s(this,"extrapolation",0),s(this,"keys",[]),s(this,"_currentKey",1),s(this,"length",0)}Sort(){i.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.length)return n.vec4.copy(t,this.value);const r=this.keys[0],i=this.keys[this.keys.length-1];if(e>=i.time)switch(this.extrapolation){case o.Extrapolation.NONE:return n.vec4.copy(t,this.value);case o.Extrapolation.CONSTANT:return n.vec4.copy(t,i.value);case o.Extrapolation.GRADIENT:return n.vec4.scaleAndAdd(t,i.value,i.right,e-i.time);default:e%=i.time}else if(e<0||e<r.time)switch(this.extrapolation){case o.Extrapolation.NONE:return n.vec4.copy(t,this.value);case o.Extrapolation.GRADIENT:return n.vec4.scaleAndAdd(t,r.value,r.left,e*this.length-i.time);default:return n.vec4.copy(t,r.value)}let s=this.keys[this._currentKey],a=this.keys[this._currentKey-1];for(;e>=s.time||e<a.time;)e<a.time&&(this._currentKey=0),this._currentKey++,s=this.keys[this._currentKey],a=this.keys[this._currentKey-1];const u=(e-a.time)/(s.time-a.time);switch(a.interpolation){case o.Interpolation.CONSTANT:return n.vec4.copy(t,a.value);default:return t[0]=a.value[0]*(1-u)+s.value[0]*u,t[1]=a.value[1]*(1-u)+s.value[1]*u,t[2]=a.value[2]*(1-u)+s.value[2]*u,t[3]=a.value[3]*(1-u)+s.value[3]*u,t}}}s(o,"inputDimension",4),s(o,"ouputDimension",4),s(o,"valueProperty","value"),s(o,"curveType",i.Tw2Curve.Type.CURVE),s(o,"Key",a),s(o,"Extrapolation",{NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3}),s(o,"Interpolation",{NONE:0,CONSTANT:1,LINEAR:2})},"./curve/curve/legacy/Tw2ColorCurve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorKey2",function(){return a}),r.d(t,"Tw2ColorCurve2",function(){return o});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveKey{constructor(){super(...arguments),s(this,"value",n.vec4.create()),s(this,"leftTangent",n.vec4.create()),s(this,"rightTangent",n.vec4.create()),s(this,"interpolation",1)}}class o extends i.Tw2Curve{constructor(){super(...arguments),s(this,"cycle",!1),s(this,"reversed",!1),s(this,"timeOffset",0),s(this,"timeScale",1),s(this,"startValue",n.vec4.fromValues(0,0,0,1)),s(this,"currentValue",n.vec4.fromValues(0,0,0,1)),s(this,"endValue",n.vec4.fromValues(0,0,0,1)),s(this,"startTangent",n.vec4.create()),s(this,"endTangent",n.vec4.create()),s(this,"interpolation",1),s(this,"keys",[]),s(this,"length",0)}Sort(){i.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return n.vec4.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?n.vec4.copy(t,this.startValue):n.vec4.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);let r=this.keys[0],i=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=i.time)return this.Interpolate(e,i,null,t);for(let t=0;t+1<this.keys.length&&(r=this.keys[t],i=this.keys[t+1],!(r.time<=e&&i.time>e));++t);return this.Interpolate(e,r,i,t)}Interpolate(e,t,r,i){n.vec4.copy(i,this.startValue);let s=this.startValue,a=this.endValue,u=this.interpolation,c=this.length;switch(null!==t&&(u=t.interpolation,e-=t.time),u){case o.Interpolation.LINEAR:return t&&r?(s=t.value,a=r.value,c=r.time-t.time):r?(a=r.value,c=r.time):t&&(s=t.value,c=this.length-t.time),i[0]=s[0]+(a[0]-s[0])*(e/c),i[1]=s[1]+(a[1]-s[1])*(e/c),i[2]=s[2]+(a[2]-s[2])*(e/c),i[3]=s[3]+(a[3]-s[3])*(e/c),i;default:return i}}}s(o,"inputDimension",4),s(o,"outputDimension",4),s(o,"valueProperty","currentValue"),s(o,"curveType",i.Tw2Curve.Type.CURVE2),s(o,"Key",a),s(o,"Interpolation",{CONSTANT:0,LINEAR:1})},"./curve/curve/legacy/Tw2QuaternionCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionKey2",function(){return a}),r.d(t,"Tw2QuaternionCurve",function(){return o});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveKey{constructor(){super(...arguments),s(this,"value",n.quat.create()),s(this,"leftTangent",n.vec4.create()),s(this,"rightTangent",n.vec4.create()),s(this,"interpolation",1)}}class o extends i.Tw2Curve{constructor(){super(...arguments),s(this,"cycle",!1),s(this,"reversed",!1),s(this,"timeOffset",0),s(this,"timeScale",1),s(this,"startValue",n.quat.create()),s(this,"currentValue",n.quat.create()),s(this,"endValue",n.quat.create()),s(this,"startTangent",n.vec4.create()),s(this,"endTangent",n.vec4.create()),s(this,"interpolation",1),s(this,"keys",[]),s(this,"length",0)}Sort(){i.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return t[0]=this.startValue[0],t[1]=this.startValue[1],t[2]=this.startValue[2],t;if(e>this.length){if(!this.cycle)return this.reversed?(t[0]=this.startValue[0],t[1]=this.startValue[1],t[2]=this.startValue[2],t):(t[0]=this.endValue[0],t[1]=this.endValue[1],t[2]=this.endValue[2],t);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);let r=this.keys[0],n=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=n.time)return this.Interpolate(e,n,null,t);for(let t=0;t+1<this.keys.length&&(r=this.keys[t],n=this.keys[t+1],!(r.time<=e&&n.time>e));++t);return this.Interpolate(e,r,n,t)}Interpolate(e,t,r,i){i[0]=this.startValue[0],i[1]=this.startValue[1],i[2]=this.startValue[2];let s=this.startValue,a=this.endValue,u=this.interpolation,c=this.length;switch(null!==t&&(u=t.interpolation,e-=t.time),u){case o.Interpolation.SPHERICAL_LINEAR:return t&&r?(s=t.value,a=r.value,c=r.time-t.time):r?(a=r.value,c=r.time):t&&(s=t.value,c=this.length-t.time),n.quat.slerp(i,s,a,e/c),i;default:return i}}}s(o,"inputDimension",4),s(o,"outputDimension",4),s(o,"valueProperty","currentValue"),s(o,"curveType",i.Tw2Curve.Type.CURVE2),s(o,"Key",a),s(o,"Interpolation",{CONSTANT:0,SPHERICAL_LINEAR:4})},"./curve/curve/legacy/Tw2RandomConstantCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomConstantCurve",function(){return s});var n=r("./curve/curve/Tw2Curve.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2Curve{constructor(){super(...arguments),i(this,"value",0),i(this,"min",0),i(this,"max",1),i(this,"hold",!0)}UpdateValue(){this.value=this.GetValueAt()}GetValueAt(){return this.hold?this.value:this.min+(this.max-this.min)*Math.random()}}i(s,"outputDimension",1),i(s,"valueProperty","value"),i(s,"curveType",n.Tw2Curve.Type.CURVE_NO_KEYS)},"./curve/curve/legacy/Tw2RigidOrientation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Torque",function(){return a}),r.d(t,"Tw2RigidOrientation",function(){return o});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveKey{constructor(){super(...arguments),s(this,"rot0",n.quat.create()),s(this,"omega0",n.vec3.create()),s(this,"torque",n.vec3.create())}}class o extends i.Tw2Curve{constructor(){super(...arguments),s(this,"name",""),s(this,"I",1),s(this,"drag",1),s(this,"value",n.quat.create()),s(this,"start",0),s(this,"states",[]),s(this,"length",0)}Sort(){i.Tw2Curve.Sort(this,this.states)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.states.length||e<0||e<this.states[0].time)return n.quat.copy(t,this.value);let r=0;if(e>=this.states[this.states.length-1].time)r=this.states.length-1;else for(;r+1<this.states.length&&!(e>=this.states[r].time&&e<this.states[r+1].time);++r);const s=i.Tw2Curve.global.vec3_0,a=i.Tw2Curve.global.quat_0,o=this.states[r];return n.vec3.exponentialDecay(s,o.omega0,o.torque,this.I,this.drag,e-o.time),n.quat.exp(a,s),n.quat.multiply(t,this.states[r].rot0,a),t}}s(o,"inputDimension",4),s(o,"outputDimension",4),s(o,"valueProperty","value"),s(o,"curveType",i.Tw2Curve.Type.CURVE),s(o,"Key",a)},"./curve/curve/legacy/Tw2RotationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionKey",function(){return a}),r.d(t,"Tw2RotationCurve",function(){return o});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveKey{constructor(){super(...arguments),s(this,"value",n.quat.create()),s(this,"left",n.vec4.create()),s(this,"right",n.vec4.create()),s(this,"interpolation",5)}}class o extends i.Tw2Curve{constructor(){super(...arguments),s(this,"start",0),s(this,"value",n.quat.create()),s(this,"extrapolation",0),s(this,"keys",[]),s(this,"length",0),s(this,"_currentKey",1)}Sort(){i.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.length)return n.quat.copy(t,this.value);const r=i.Tw2Curve.global,s=this.keys[0],a=this.keys[this.keys.length-1];if(e>=a.time)switch(this.extrapolation){case o.Extrapolation.NONE:return n.quat.copy(t,this.value);case o.Extrapolation.CONSTANT:return n.quat.copy(t,a.value);default:e%=a.time}else if(e<0||e<s.time)switch(this.extrapolation){case o.Extrapolation.NONE:return n.quat.copy(t,this.value);default:return n.quat.copy(t,s.value)}let u=this.keys[this._currentKey],c=this.keys[this._currentKey-1];for(;e>=u.time||e<c.time;)e<c.time&&(this._currentKey=0),this._currentKey++,u=this.keys[this._currentKey],c=this.keys[this._currentKey-1];const l=(e-c.time)/(u.time-c.time);switch(c.interpolation){case o.Interpolation.CONSTANT:return n.quat.copy(t,c.value);case o.Interpolation.LINEAR:return t[0]=c.value[0]*(1-l)+u.value[0]*l,t[1]=c.value[1]*(1-l)+u.value[1]*l,t[2]=c.value[2]*(1-l)+u.value[2]*l,t[3]=c.value[3]*(1-l)+u.value[3]*l,t;case o.Interpolation.HERMITE:const e=n.quat.identity(r.quat_0),i=[c.value,c.right,u.left,u.value];for(let r=3;r>0;r--){const s=n.num.biCumulative(l,r);s>1&&n.quat.multiply(t,e,i[r]),t[0]=-i[r-1][0],t[1]=-i[r-1][1],t[2]=-i[r-1][2],t[3]=i[r-1][3],n.quat.multiply(t,t,i[r]),n.quat.pow(t,t,s),n.quat.multiply(e,e,t)}return n.quat.multiply(t,e,c.value);case o.Interpolation.SLERP:return n.quat.slerp(t,c.value,u.value,l);default:return n.quat.sqlerp(t,c.value,c.right,u.left,u.value,l)}}}s(o,"outputDimention",4),s(o,"inputDimension",4),s(o,"valueProperty","value"),s(o,"curveType",i.Tw2Curve.Type.CURVE),s(o,"Child",a),s(o,"Extrapolation",{NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3}),s(o,"Interpolation",{NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,SLERP:5,SQUAD:6})},"./curve/curve/legacy/Tw2ScalarCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarKey",function(){return s}),r.d(t,"Tw2ScalarCurve",function(){return a});var n=r("./curve/curve/Tw2Curve.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveKey{constructor(){super(...arguments),i(this,"value",0),i(this,"left",0),i(this,"right",0),i(this,"interpolation",0)}}class a extends n.Tw2Curve{constructor(){super(...arguments),i(this,"start",0),i(this,"timeScale",1),i(this,"timeOffset",0),i(this,"value",0),i(this,"extrapolation",0),i(this,"keys",[]),i(this,"_currentKey",1),i(this,"length",0)}Sort(){n.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){if(e=e/this.timeScale-this.timeOffset,0===this.length)return this.value;const t=this.keys[0],r=this.keys[this.keys.length-1];if(e>=r.time)switch(this.extrapolation){case a.Extrapolation.NONE:return this.value;case a.Extrapolation.CONSTANT:return r.value;case a.Extrapolation.GRADIENT:return r.value+(e-r.time)*r.right;default:e%=r.time}else if(e<0||e<t.time)switch(this.extrapolation){case a.Extrapolation.NONE:return this.value;case a.Extrapolation.GRADIENT:return t.value+(e*this.length-r.time)*t.left;default:return t.value}let n=this.keys[this._currentKey],i=this.keys[this._currentKey-1];for(;e>=n.time||e<i.time;)e<i.time&&(this._currentKey=0),this._currentKey++,n=this.keys[this._currentKey],i=this.keys[this._currentKey-1];const s=(e-i.time)/(n.time-i.time);switch(i.interpolation){case a.Interpolation.CONSTANT:return i.value;case a.Interpolation.LINEAR:return i.value*(1-s)+n.value*s;case a.Interpolation.HERMITE:const t=-2*s*s*s+3*s*s,r=s*s*s-2*s*s+s,o=s*s*s-s*s;return(2*s*s*s-3*s*s+1)*i.value+t*n.value+r*i.right+o*n.left;default:const u=1+(Math.sqrt(i.value/n.value)-1)*Math.exp(-e/i.right);return u*u*n.value}}}i(a,"inputDimension",1),i(a,"outputDimension",1),i(a,"valueProperty","value"),i(a,"curveType",n.Tw2Curve.Type.CURVE),i(a,"Key",s),i(a,"Extrapolation",{NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3}),i(a,"Interpolation",{NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3,CATMULROM:4})},"./curve/curve/legacy/Tw2ScalarCurve2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarKey2",function(){return s}),r.d(t,"Tw2ScalarCurve2",function(){return a});var n=r("./curve/curve/Tw2Curve.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveKey{constructor(){super(...arguments),i(this,"value",0),i(this,"leftTangent",0),i(this,"rightTangent",0),i(this,"interpolation",1)}}class a extends n.Tw2Curve{constructor(){super(...arguments),i(this,"cycle",!1),i(this,"reversed",!1),i(this,"timeOffset",0),i(this,"timeScale",1),i(this,"startValue",0),i(this,"currentValue",0),i(this,"endValue",0),i(this,"startTangent",0),i(this,"endTangent",0),i(this,"interpolation",1),i(this,"keys",[]),i(this,"length",0)}Sort(){n.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.currentValue=this.GetValueAt(e)}GetValueAt(e){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return this.startValue;if(e>this.length){if(!this.cycle)return this.reversed?this.startValue:this.endValue;e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null);let t=this.keys[0],r=this.keys[this.keys.length-1];if(e<=t.time)return this.Interpolate(e,null,t);if(e>=r.time)return this.Interpolate(e,r,null);for(let n=0;n+1<this.keys.length&&(t=this.keys[n],r=this.keys[n+1],!(t.time<=e&&r.time>e));++n);return this.Interpolate(e,t,r)}Interpolate(e,t,r){let n=this.startValue,i=this.endValue,s=this.interpolation,o=this.length;switch(null!==t&&(s=t.interpolation,e-=t.time),s){case a.Interpolation.LINEAR:return t&&r?(n=t.value,i=r.value,o=r.time-t.time):r?(i=r.value,o=r.time):t&&(n=t.value,o=this.length-t.time),n+e/o*(i-n);case a.Interpolation.HERMITE:let u=this.startTangent,c=this.endTangent;t&&r?(n=t.value,u=t.rightTangent,i=r.value,c=r.leftTangent,o=r.time-t.time):r?(i=r.value,c=r.leftTangent,o=r.time):t&&(n=t.value,u=t.rightTangent,o=this.length-t.time);const l=e/o,d=l*l,h=d*l,f=-2*h+3*d,m=h-d;return n*(1-f)+i*f+u*(l+m-d)+c*m;default:return this.startValue}}}i(a,"inputDimension",1),i(a,"outputDimension",1),i(a,"valueProperty","currentValue"),i(a,"curveType",n.Tw2Curve.Type.CURVE2),i(a,"Key",s),i(a,"Interpolation",{CONSTANT:0,LINEAR:1,HERMITE:2})},"./curve/curve/legacy/Tw2SineCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SineCurve",function(){return s});var n=r("./curve/curve/Tw2Curve.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2Curve{constructor(){super(...arguments),i(this,"value",0),i(this,"offset",0),i(this,"scale",1),i(this,"speed",1)}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){return Math.sin(e*Math.PI*2*this.speed)*this.scale+this.offset}}i(s,"outputDimension",1),i(s,"valueProperty","value"),i(s,"curveType",n.Tw2Curve.Type.CURVE_NO_KEYS)},"./curve/curve/legacy/Tw2Vector2Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector2Key",function(){return a}),r.d(t,"Tw2Vector2Curve",function(){return o});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveKey{constructor(){super(...arguments),s(this,"value",n.vec2.create()),s(this,"leftTangent",n.vec2.create()),s(this,"rightTangent",n.vec2.create()),s(this,"interpolation",1)}}class o extends i.Tw2Curve{constructor(){super(...arguments),s(this,"cycle",!1),s(this,"reversed",!1),s(this,"timeOffset",0),s(this,"timeScale",1),s(this,"startValue",n.vec2.create()),s(this,"currentValue",n.vec2.create()),s(this,"endValue",n.vec2.create()),s(this,"startTangent",n.vec2.create()),s(this,"endTangent",n.vec2.create()),s(this,"interpolation",1),s(this,"keys",[]),s(this,"length",0)}Sort(){i.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return n.vec2.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?n.vec2.copy(t,this.startValue):n.vec2.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);let r=this.keys[0],i=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=i.time)return this.Interpolate(e,i,null,t);for(let t=0;t+1<this.keys.length&&(r=this.keys[t],i=this.keys[t+1],!(r.time<=e&&i.time>e));++t);return this.Interpolate(e,r,i,t)}Interpolate(e,t,r,i){n.vec2.copy(i,this.startValue);let s=this.startValue,a=this.endValue,u=this.interpolation,c=this.length;switch(null!==t&&(u=t.interpolation,e-=t.time),u){case o.Interpolation.LINEAR:return t&&r?(s=t.value,a=r.value,c=r.time-t.time):r?(a=r.value,c=r.time):t&&(s=t.value,c=this.length-t.time),i[0]=s[0]+(a[0]-s[0])*(e/c),i[1]=s[1]+(a[1]-s[1])*(e/c),i;case o.Interpolation.HERMITE:let n=this.startTangent,l=this.endTangent;t&&r?(s=t.value,n=t.rightTangent,a=r.value,l=r.leftTangent,c=r.time-t.time):r?(a=r.value,l=r.leftTangent,c=r.time):t&&(s=t.value,n=t.rightTangent,c=this.length-t.time);const d=e/c,h=d*d,f=h*d,m=-2*f+3*h,v=1-m,p=f-h,E=d+p-h;return i[0]=s[0]*v+a[0]*m+n[0]*E+l[0]*p,i[1]=s[1]*v+a[1]*m+n[1]*E+l[1]*p,i;default:return i}}}s(o,"inputDimension",2),s(o,"outputDimension",2),s(o,"valueProperty","value"),s(o,"curveType",i.Tw2Curve.Type.CURVE2),s(o,"Key",a),s(o,"Interpolation",{CONSTANT:0,LINEAR:1,HERMITE:2})},"./curve/curve/legacy/Tw2Vector3Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Vector3Key",function(){return a}),r.d(t,"Tw2Vector3Curve",function(){return o});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveKey{constructor(){super(...arguments),s(this,"value",n.vec3.create()),s(this,"leftTangent",n.vec3.create()),s(this,"rightTangent",n.vec3.create()),s(this,"interpolation",1)}}class o extends i.Tw2Curve{constructor(){super(...arguments),s(this,"cycle",!1),s(this,"reversed",!1),s(this,"timeOffset",0),s(this,"timeScale",1),s(this,"startValue",n.vec3.create()),s(this,"currentValue",n.vec3.create()),s(this,"endValue",n.vec3.create()),s(this,"startTangent",n.vec3.create()),s(this,"endTangent",n.vec3.create()),s(this,"interpolation",1),s(this,"keys",[]),s(this,"length",0)}Sort(){i.Tw2Curve.Sort2(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){if(e=e/this.timeScale+this.timeOffset,this.length<=0||e<=0)return n.vec3.copy(t,this.startValue);if(e>this.length){if(!this.cycle)return this.reversed?n.vec3.copy(t,this.startValue):n.vec3.copy(t,this.endValue);e%=this.length}if(this.reversed&&(e=this.length-e),0===this.keys.length)return this.Interpolate(e,null,null,t);let r=this.keys[0],i=this.keys[this.keys.length-1];if(e<=r.time)return this.Interpolate(e,null,r,t);if(e>=i.time)return this.Interpolate(e,i,null,t);for(let t=0;t+1<this.keys.length&&(r=this.keys[t],i=this.keys[t+1],!(r.time<=e&&i.time>e));++t);return this.Interpolate(e,r,i,t)}Interpolate(e,t,r,i){n.vec3.copy(i,this.startValue);let s=this.startValue,a=this.endValue,u=this.interpolation,c=this.length;switch(null!==t&&(u=t.interpolation,e-=t.time),u){case o.Interpolation.LINEAR:return t&&r?(s=t.value,a=r.value,c=r.time-t.time):r?(a=r.value,c=r.time):t&&(s=t.value,c=this.length-t.time),i[0]=s[0]+(a[0]-s[0])*(e/c),i[1]=s[1]+(a[1]-s[1])*(e/c),i[2]=s[2]+(a[2]-s[2])*(e/c),i;case o.Interpolation.HERMITE:let n=this.startTangent,l=this.endTangent;t&&r?(s=t.value,n=t.rightTangent,a=r.value,l=r.leftTangent,c=r.time-t.time):r?(a=r.value,l=r.leftTangent,c=r.time):t&&(s=t.value,n=t.rightTangent,c=this.length-t.time);const d=e/c,h=d*d,f=h*d,m=-2*f+3*h,v=1-m,p=f-h,E=d+p-h;return i[0]=s[0]*v+a[0]*m+n[0]*E+l[0]*p,i[1]=s[1]*v+a[1]*m+n[1]*E+l[1]*p,i[2]=s[2]*v+a[2]*m+n[2]*E+l[2]*p,i;default:return i}}}s(o,"inputDimension",3),s(o,"outputDimension",3),s(o,"valueProperty","currentValue"),s(o,"curveType",i.Tw2Curve.Type.CURVE2),s(o,"Key",a),s(o,"Interpolation",{CONSTANT:0,LINEAR:1,HERMITE:2})},"./curve/curve/legacy/Tw2VectorCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorKey",function(){return a}),r.d(t,"Tw2VectorCurve",function(){return o});var n=r("./global/index.js"),i=r("./curve/curve/Tw2Curve.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveKey{constructor(){super(...arguments),s(this,"value",n.vec3.create()),s(this,"left",n.vec3.create()),s(this,"right",n.vec3.create()),s(this,"interpolation",0)}}class o extends i.Tw2Curve{constructor(){super(...arguments),s(this,"start",0),s(this,"value",n.vec3.create()),s(this,"extrapolation",0),s(this,"keys",[]),s(this,"_currentKey",1),s(this,"length",0)}Sort(){i.Tw2Curve.Sort(this)}GetLength(){return this.length}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){if(0===this.length)return n.vec3.copy(t,this.value);const r=this.keys[0],i=this.keys[this.keys.length-1];if(e>=i.time)switch(this.extrapolation){case o.Extrapolation.NONE:return n.vec3.copy(t,this.value);case o.Extrapolation.CONSTANT:return n.vec3.copy(t,i.value);case o.Extrapolation.GRADIENT:return n.vec3.scaleAndAdd(t,i.value,i.right,e-i.time);default:e%=i.time}else if(e<0||e<r.time)switch(this.extrapolation){case o.Extrapolation.NONE:return n.vec3.copy(t,this.value);case o.Extrapolation.GRADIENT:return n.vec3.scaleAndAdd(t,r.value,r.left,e*this.length-i.time);default:return n.vec3.copy(t,r.value)}let s=this.keys[this._currentKey],a=this.keys[this._currentKey-1];for(;e>=s.time||e<a.time;)e<a.time&&(this._currentKey=0),this._currentKey++,s=this.keys[this._currentKey],a=this.keys[this._currentKey-1];const u=(e-a.time)/(s.time-a.time);switch(a.interpolation){case o.Interpolation.CONSTANT:return n.vec3.copy(t,a.value);case o.Interpolation.LINEAR:return t[0]=a.value[0]*(1-u)+s.value[0]*u,t[1]=a.value[1]*(1-u)+s.value[1]*u,t[2]=a.value[2]*(1-u)+s.value[2]*u,t;case o.Interpolation.HERMITE:const e=2*u*u*u-3*u*u+1,r=-2*u*u*u+3*u*u,i=u*u*u-2*u*u+u,c=u*u*u-u*u;return t[0]=e*a.value[0]+r*s.value[0]+i*a.right[0]+c*s.left[0],t[1]=e*a.value[1]+r*s.value[1]+i*a.right[1]+c*s.left[1],t[2]=e*a.value[2]+r*s.value[2]+i*a.right[2]+c*s.left[2],t;default:return t}}}s(o,"inputDimension",3),s(o,"outputDimension",3),s(o,"valueProperty","value"),s(o,"curveType",i.Tw2Curve.Type.CURVE),s(o,"Key",a),s(o,"Extrapolation",{NONE:0,CONSTANT:1,GRADIENT:2,CYCLE:3}),s(o,"Interpolation",{NONE:0,CONSTANT:1,LINEAR:2,HERMITE:3})},"./curve/curve/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/curve/legacy/Tw2ColorCurve.js");r.d(t,"Tw2ColorKey",function(){return n.Tw2ColorKey}),r.d(t,"Tw2ColorCurve",function(){return n.Tw2ColorCurve});var i=r("./curve/curve/legacy/Tw2ColorCurve2.js");r.d(t,"Tw2ColorKey2",function(){return i.Tw2ColorKey2}),r.d(t,"Tw2ColorCurve2",function(){return i.Tw2ColorCurve2});var s=r("./curve/curve/legacy/Tw2QuaternionCurve.js");r.d(t,"Tw2QuaternionKey2",function(){return s.Tw2QuaternionKey2}),r.d(t,"Tw2QuaternionCurve",function(){return s.Tw2QuaternionCurve});var a=r("./curve/curve/legacy/Tw2RandomConstantCurve.js");r.d(t,"Tw2RandomConstantCurve",function(){return a.Tw2RandomConstantCurve});var o=r("./curve/curve/legacy/Tw2RigidOrientation.js");r.d(t,"Tw2Torque",function(){return o.Tw2Torque}),r.d(t,"Tw2RigidOrientation",function(){return o.Tw2RigidOrientation});var u=r("./curve/curve/legacy/Tw2RotationCurve.js");r.d(t,"Tw2QuaternionKey",function(){return u.Tw2QuaternionKey}),r.d(t,"Tw2RotationCurve",function(){return u.Tw2RotationCurve});var c=r("./curve/curve/legacy/Tw2ScalarCurve.js");r.d(t,"Tw2ScalarKey",function(){return c.Tw2ScalarKey}),r.d(t,"Tw2ScalarCurve",function(){return c.Tw2ScalarCurve});var l=r("./curve/curve/legacy/Tw2ScalarCurve2.js");r.d(t,"Tw2ScalarKey2",function(){return l.Tw2ScalarKey2}),r.d(t,"Tw2ScalarCurve2",function(){return l.Tw2ScalarCurve2});var d=r("./curve/curve/legacy/Tw2SineCurve.js");r.d(t,"Tw2SineCurve",function(){return d.Tw2SineCurve});var h=r("./curve/curve/legacy/Tw2Vector2Curve.js");r.d(t,"Tw2Vector2Key",function(){return h.Tw2Vector2Key}),r.d(t,"Tw2Vector2Curve",function(){return h.Tw2Vector2Curve});var f=r("./curve/curve/legacy/Tw2Vector3Curve.js");r.d(t,"Tw2Vector3Key",function(){return f.Tw2Vector3Key}),r.d(t,"Tw2Vector3Curve",function(){return f.Tw2Vector3Curve});var m=r("./curve/curve/legacy/Tw2VectorCurve.js");r.d(t,"Tw2VectorKey",function(){return m.Tw2VectorKey}),r.d(t,"Tw2VectorCurve",function(){return m.Tw2VectorCurve})},"./curve/expression/Tr2CurveEulerRotationExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveEulerRotationExpression",function(){return s});var n=r("./curve/expression/Tw2CurveExpression.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveExpression{constructor(){super(...arguments),i(this,"expressionPitch",""),i(this,"expressionRoll",""),i(this,"expressionYaw","")}static black(e){return[["inputs",e.array],["name",e.string],["expressionYaw",e.string],["expressionPitch",e.string],["expressionRoll",e.string]]}}i(s,"__isStaging",4)},"./curve/expression/Tr2CurveScalarExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveScalarExpression",function(){return s});var n=r("./curve/expression/Tw2CurveExpression.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveExpression{constructor(){super(...arguments),i(this,"expression",""),i(this,"input1",-1),i(this,"input2",-1),i(this,"input3",-1)}static black(e){return[["inputs",e.array],["name",e.string],["expression",e.string],["input1",e.float],["input2",e.float],["input3",e.float]]}}i(s,"__isStaging",4)},"./curve/expression/Tr2CurveVector3Expression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2CurveVector3Expression",function(){return s});r("./global/index.js");var n=r("./curve/expression/Tw2CurveExpression.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveExpression{constructor(){super(...arguments),i(this,"expressionX",""),i(this,"expressionY",""),i(this,"expressionZ","")}static black(e){return[["inputs",e.array],["name",e.string],["expressionX",e.string],["expressionY",e.string],["expressionZ",e.string]]}}i(s,"__isStaging",4)},"./curve/expression/Tw2CurveExpression.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveExpression",function(){return i});var n=r("./global/class/index.js");function i(){n.Tw2BaseClass.defineID(this),this.name="",this.inputs=[]}i.prototype=Object.assign(Object.create(n.Tw2BaseClass.prototype),{constructor:i})},"./curve/expression/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/expression/Tr2CurveEulerRotationExpression.js");r.d(t,"Tr2CurveEulerRotationExpression",function(){return n.Tr2CurveEulerRotationExpression});var i=r("./curve/expression/Tr2CurveScalarExpression.js");r.d(t,"Tr2CurveScalarExpression",function(){return i.Tr2CurveScalarExpression});var s=r("./curve/expression/Tr2CurveVector3Expression.js");r.d(t,"Tr2CurveVector3Expression",function(){return s.Tr2CurveVector3Expression});var a=r("./curve/expression/Tw2CurveExpression.js");r.d(t,"Tw2CurveExpression",function(){return a.Tw2CurveExpression})},"./curve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/Tw2CurveSet.js");r.d(t,"Tw2CurveSet",function(){return n.Tw2CurveSet});var i=r("./curve/Tw2CurveSetRange.js");r.d(t,"Tw2CurveSetRange",function(){return i.Tw2CurveSetRange});var s=r("./curve/Tw2ValueBinding.js");r.d(t,"Tw2ValueBinding",function(){return s.Tw2ValueBinding});var a=r("./curve/adapter/index.js");r.d(t,"Tr2RotationAdapter",function(){return a.Tr2RotationAdapter}),r.d(t,"Tr2TranslationAdapter",function(){return a.Tr2TranslationAdapter}),r.d(t,"Tw2CurveAdapter",function(){return a.Tw2CurveAdapter});var o=r("./curve/curve/index.js");r.d(t,"AudEventKey",function(){return o.AudEventKey}),r.d(t,"AudEventCurve",function(){return o.AudEventCurve}),r.d(t,"Tr2BoneMatrixCurve",function(){return o.Tr2BoneMatrixCurve}),r.d(t,"Tw2CurveConstant",function(){return o.Tw2CurveConstant}),r.d(t,"Tw2CurveScalarKey",function(){return o.Tw2CurveScalarKey}),r.d(t,"Tr2CurveScalar",function(){return o.Tr2CurveScalar}),r.d(t,"Tr2ScalarExprKey",function(){return o.Tr2ScalarExprKey}),r.d(t,"Tr2ScalarExprKeyCurve",function(){return o.Tr2ScalarExprKeyCurve}),r.d(t,"Tw2EventKey",function(){return o.Tw2EventKey}),r.d(t,"Tw2EventCurve",function(){return o.Tw2EventCurve}),r.d(t,"Tw2PerlinCurve",function(){return o.Tw2PerlinCurve}),r.d(t,"Tw2CurveKey",function(){return o.Tw2CurveKey}),r.d(t,"Tw2Curve",function(){return o.Tw2Curve}),r.d(t,"Tw2ColorKey",function(){return o.Tw2ColorKey}),r.d(t,"Tw2ColorCurve",function(){return o.Tw2ColorCurve}),r.d(t,"Tw2ColorKey2",function(){return o.Tw2ColorKey2}),r.d(t,"Tw2ColorCurve2",function(){return o.Tw2ColorCurve2}),r.d(t,"Tw2QuaternionKey2",function(){return o.Tw2QuaternionKey2}),r.d(t,"Tw2QuaternionCurve",function(){return o.Tw2QuaternionCurve}),r.d(t,"Tw2RandomConstantCurve",function(){return o.Tw2RandomConstantCurve}),r.d(t,"Tw2Torque",function(){return o.Tw2Torque}),r.d(t,"Tw2RigidOrientation",function(){return o.Tw2RigidOrientation}),r.d(t,"Tw2QuaternionKey",function(){return o.Tw2QuaternionKey}),r.d(t,"Tw2RotationCurve",function(){return o.Tw2RotationCurve}),r.d(t,"Tw2ScalarKey",function(){return o.Tw2ScalarKey}),r.d(t,"Tw2ScalarCurve",function(){return o.Tw2ScalarCurve}),r.d(t,"Tw2ScalarKey2",function(){return o.Tw2ScalarKey2}),r.d(t,"Tw2ScalarCurve2",function(){return o.Tw2ScalarCurve2}),r.d(t,"Tw2SineCurve",function(){return o.Tw2SineCurve}),r.d(t,"Tw2Vector2Key",function(){return o.Tw2Vector2Key}),r.d(t,"Tw2Vector2Curve",function(){return o.Tw2Vector2Curve}),r.d(t,"Tw2Vector3Key",function(){return o.Tw2Vector3Key}),r.d(t,"Tw2Vector3Curve",function(){return o.Tw2Vector3Curve}),r.d(t,"Tw2VectorKey",function(){return o.Tw2VectorKey}),r.d(t,"Tw2VectorCurve",function(){return o.Tw2VectorCurve});var u=r("./curve/expression/index.js");r.d(t,"Tr2CurveEulerRotationExpression",function(){return u.Tr2CurveEulerRotationExpression}),r.d(t,"Tr2CurveScalarExpression",function(){return u.Tr2CurveScalarExpression}),r.d(t,"Tr2CurveVector3Expression",function(){return u.Tr2CurveVector3Expression}),r.d(t,"Tw2CurveExpression",function(){return u.Tw2CurveExpression});var c=r("./curve/legacy/index.js");r.d(t,"Tw2WbgTrack",function(){return c.Tw2WbgTrack}),r.d(t,"Tw2WbgTransformTrack",function(){return c.Tw2WbgTransformTrack}),r.d(t,"Tw2TransformTrack",function(){return c.Tw2TransformTrack}),r.d(t,"Tw2MayaEulerRotationCurve",function(){return c.Tw2MayaEulerRotationCurve}),r.d(t,"Tw2MayaScalarCurve",function(){return c.Tw2MayaScalarCurve}),r.d(t,"Tw2MayaVector3Curve",function(){return c.Tw2MayaVector3Curve}),r.d(t,"Tw2MayaAnimationEngine",function(){return c.Tw2MayaAnimationEngine});var l=r("./curve/sequencer/index.js");r.d(t,"TriColorSequencer",function(){return l.TriColorSequencer}),r.d(t,"Tw2CurveColor",function(){return l.Tw2CurveColor}),r.d(t,"Tw2CurveEulerRotation",function(){return l.Tw2CurveEulerRotation}),r.d(t,"Tw2CurveVector3",function(){return l.Tw2CurveVector3}),r.d(t,"Tw2CurveSequencer",function(){return l.Tw2CurveSequencer}),r.d(t,"Tw2ColorSequencer",function(){return l.Tw2ColorSequencer}),r.d(t,"Tw2EulerRotation",function(){return l.Tw2EulerRotation}),r.d(t,"Tw2QuaternionSequencer",function(){return l.Tw2QuaternionSequencer}),r.d(t,"Tw2RGBAScalarSequencer",function(){return l.Tw2RGBAScalarSequencer}),r.d(t,"Tw2ScalarSequencer",function(){return l.Tw2ScalarSequencer}),r.d(t,"Tw2VectorSequencer",function(){return l.Tw2VectorSequencer}),r.d(t,"Tw2XYZScalarSequencer",function(){return l.Tw2XYZScalarSequencer}),r.d(t,"Tw2YPRSequencer",function(){return l.Tw2YPRSequencer})},"./curve/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/tracks/index.js");r.d(t,"Tw2WbgTrack",function(){return n.Tw2WbgTrack}),r.d(t,"Tw2WbgTransformTrack",function(){return n.Tw2WbgTransformTrack}),r.d(t,"Tw2TransformTrack",function(){return n.Tw2TransformTrack});var i=r("./curve/legacy/maya/index.js");r.d(t,"Tw2MayaEulerRotationCurve",function(){return i.Tw2MayaEulerRotationCurve}),r.d(t,"Tw2MayaScalarCurve",function(){return i.Tw2MayaScalarCurve}),r.d(t,"Tw2MayaVector3Curve",function(){return i.Tw2MayaVector3Curve}),r.d(t,"Tw2MayaAnimationEngine",function(){return i.Tw2MayaAnimationEngine})},"./curve/legacy/maya/Tw2MayaAnimationEngine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaAnimationEngine",function(){return a});var n=r("./global/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"_id",n.util.generateID()),s(this,"curves",[]),s(this,"hermiteSegments",[]),s(this,"bezierSegments",[]),s(this,"_currentCurveIndex",0),s(this,"_evalCache",null)}Evaluate(e,t){if(this.curves.length<=e)return 0;if(this._currentCurveIndex=e,!this._evalCache){this._evalCache=new Array(this.curves.length);for(let e=0;e<this._evalCache.length;++e)this._evalCache[e]=-1}let r=this.curves[e],n=r[a.AnimCurveFields.SEGMENT_OFFSET],i=null;return t<(i=r[a.AnimCurveFields.IS_WEIGHTED]?this.bezierSegments:this.hermiteSegments)[n][a.AnimSegment.TIME]?r[a.AnimCurveFields.PRE_INFINITY]===a.INFINITY?i[n][a.AnimSegment.VALUE]:this._EvaluateInfinities(r,i,n,t,!0):t>r[a.AnimCurveFields.END_TIME]?r[a.AnimCurveFields.POST_INFINITY]===a.INFINITY?r[a.AnimCurveFields.END_VALUE]:this._EvaluateInfinities(r,i,n,t,!1):this._EvaluateImpl(r,i,n,t)}_EvaluateImpl(e,t,r,n){let i,s=!1,o=null,u=null;if(this._evalCache[this._currentCurveIndex]>=0)if(u=r+this._evalCache[this._currentCurveIndex],this._evalCache[this._currentCurveIndex]<e[a.AnimCurveFields.NUM_SEGMENTS-1]&&n>t[u][a.AnimSegment.TIME]){if(n===t[o=r+this._evalCache[this._currentCurveIndex]+1][a.AnimSegment.TIME])return this._evalCache[this._currentCurveIndex]++,t[o][a.AnimSegment.VALUE];n<t[o][a.AnimSegment.TIME]?(i=this._evalCache[this._currentCurveIndex]+1,s=!0):o=null}else if(this._evalCache[this._currentCurveIndex]>0&&n<t[u][a.AnimSegment.TIME]){let e=r+this._evalCache[this._currentCurveIndex]-1;if(n>t[e][a.AnimSegment.TIME])i=this._evalCache[this._currentCurveIndex],s=!0;else if(n===t[e][a.AnimSegment.TIME])return this._evalCache[this._currentCurveIndex]--,t[e][a.AnimSegment.VALUE]}if(!s){let s=this._Find(e,n,t,r);if(i=s[1],s[0]||0===i)return i===e[a.AnimCurveFields.NUM_SEGMENTS]?(i--,this._evalCache[this._currentCurveIndex]=i,e[a.AnimCurveFields.END_VALUE]):(this._evalCache[this._currentCurveIndex]=i,t[r+i][a.AnimSegment.VALUE]);if(i===e[a.AnimCurveFields.NUM_SEGMENTS]+1)return this._evalCache[this._currentCurveIndex]=0,e[a.AnimCurveFields.END_VALUE]}if(this._evalCache[this._currentCurveIndex]!==i-1&&(this._evalCache[this._currentCurveIndex]=i-1,u=r+this._evalCache[this._currentCurveIndex],null===o&&(o=r+i)),e[a.AnimCurveFields.IS_WEIGHTED]){let r=t[u];if(r[a.BezierSegment.IS_STEP])return r[a.BezierSegment.VALUE];if(r[a.BezierSegment.IS_STEP_NEXT])return null===o?e[a.AnimCurveFields.END_VALUE]:t[o][a.BezierSegment.VALUE];{let i=e[a.AnimCurveFields.END_TIME];return this._evalCache[this._currentCurveIndex]+1<e[a.AnimCurveFields.NUM_SEGMENTS]&&(i=t[o][a.BezierSegment.TIME]),this._EvaluateBezier(r,n,i)}}{let r=t[u];return r[a.HermiteSegment.IS_STEP]?r[a.HermiteSegment.VALUE]:r[a.HermiteSegment.IS_STEP_NEXT]?null===o?e[a.AnimCurveFields.END_VALUE]:t[o][a.HermiteSegment.VALUE]:this._EvaluateHermite(r,n)}}_EvaluateInfinities(e,t,r,n,s){throw new i.ErrFeatureNotImplemented({feature:"Maya animation engine evaluate infinities"})}_EvaluateHermite(e,t){let r=t-e[a.HermiteSegment.TIME],n=e[a.HermiteSegment.COEFF];return r*(r*(r*n[0]+n[1])+n[2])+n[3]}_EvaluateBezier(e,t,r){let i,s;if(s=(t-e[a.BezierSegment.TIME])/(r-e[a.BezierSegment.TIME]),e[a.BezierSegment.IS_LINEAR])i=s;else{let t=n.vec4.create();t[3]=e[a.BezierSegment.COEFF][3],t[2]=e[a.BezierSegment.COEFF][2],t[1]=e[a.BezierSegment.COEFF][1],t[0]=e[a.BezierSegment.COEFF][0]-s;let r=[];i=1===n.curve.polyZeroes(t,3,0,1,1,1,r)?r[0]:0}let o=e[a.BezierSegment.POLYY];return i*(i*(i*o[3]+o[2])+o[1])+o[0]}_Find(e,t,r,n){let i,s,o,u,c=0,l=null,d=0;if((i=e[a.AnimCurveFields.NUM_SEGMENTS]+1)>0){o=0,u=i-1;do{if(t<(d=(s=o+u>>1)<i-1?r[l=n+s][a.AnimSegment.TIME]:e[a.AnimCurveFields.END_TIME]))u=s-1;else{if(!(t>d))return[!0,c=s];o=s+1}}while(o<=u);c=o}return[!1,c]}GetNumberOfCurves(){return this.curves.length}GetLength(e){if(e<0||e>=this.curves.length)return 0;let t,r=this.curves[e];return t=r[a.AnimCurveFields.IS_WEIGHTED]?this.bezierSegments[r[a.AnimCurveFields.SEGMENT_OFFSET]]:this.hermiteSegments[r[a.AnimCurveFields.SEGMENT_OFFSET]],r[a.AnimCurveFields.END_TIME]-t[a.AnimSegment.TIME]}}s(a,"AnimCurveFields",{NUM_SEGMENTS:0,SEGMENT_OFFSET:1,END_TIME:2,END_VALUE:3,IN_TANGENT:4,OUT_TANGENT:5,PRE_INFINITY:6,POST_INFINITY:7,IS_WEIGHTED:8}),s(a,"AnimSegment",{TIME:0,VALUE:1}),s(a,"HermiteSegment",{TIME:0,VALUE:1,COEFF:2,IS_STEP:3,IS_STEP_NEXT:4}),s(a,"BezierSegment",{TIME:0,VALUE:1,COEFF:2,POLYY:3,IS_STEP:4,IS_STEP_NEXT:5,IS_LINEAR:6}),s(a,"INFINITY",0)},"./curve/legacy/maya/Tw2MayaEulerRotationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaEulerRotationCurve",function(){return a});var n=r("./global/index.js"),i=r("./curve/curve/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2Curve{constructor(){super(...arguments),s(this,"xIndex",-1),s(this,"yIndex",-1),s(this,"zIndex",-1),s(this,"animationEngine",null),s(this,"eulerValue",n.vec3.create()),s(this,"updateQuaternion",!1),s(this,"quatValue",n.quat.create()),s(this,"length",0)}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){if(this.animationEngine&&(this.xIndex&&(this.eulerValue[0]=this.animationEngine.Evaluate(this.xIndex,e)),this.yIndex&&(this.yIndex===this.xIndex?this.eulerValue[1]=this.eulerValue[0]:this.eulerValue[1]=this.animationEngine.Evaluate(this.yIndex,e)),this.zIndex&&(this.zIndex===this.xIndex?this.eulerValue[2]=this.eulerValue[0]:this.eulerValue[2]=this.animationEngine.Evaluate(this.zIndex,e)),this.updateQuaternion)){const e=Math.sin(this.eulerValue[0]/2),t=Math.cos(this.eulerValue[0]/2),r=Math.sin(this.eulerValue[1]/2),n=Math.cos(this.eulerValue[1]/2),i=Math.sin(this.eulerValue[2]/2),s=Math.cos(this.eulerValue[2]/2);this.quatValue[0]=e*n*i+t*r*s,this.quatValue[1]=e*n*s-t*r*i,this.quatValue[2]=t*n*i-e*r*s,this.quatValue[3]=t*n*s+e*r*i}}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&(this.length=0,this.xIndex>=0&&(this.length=this.animationEngine.GetLength(this.xIndex)),this.yIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.yIndex))),this.zIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.zIndex))))}}s(a,"outputDimension",3),s(a,"valueProperty","eulerValue"),s(a,"curveType",i.Tw2Curve.Type.CURVE_MAYA)},"./curve/legacy/maya/Tw2MayaScalarCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaScalarCurve",function(){return s});var n=r("./curve/curve/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2Curve{constructor(){super(...arguments),i(this,"index",-1),i(this,"animationEngine",null),i(this,"value",0),i(this,"length",0)}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){this.animationEngine&&(this.value=this.animationEngine.Evaluate(this.index,e))}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&this.index>=0&&(this.length=this.animationEngine.GetLength(this.index))}}i(s,"outputDimension",1),i(s,"valueProperty","value"),i(s,"curveType",n.Tw2Curve.Type.CURVE_MAYA)},"./curve/legacy/maya/Tw2MayaVector3Curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MayaVector3Curve",function(){return a});var n=r("./global/index.js"),i=r("./curve/curve/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2Curve{constructor(){super(...arguments),s(this,"xIndex",-1),s(this,"yIndex",-1),s(this,"zIndex",-1),s(this,"animationEngine",null),s(this,"value",n.vec3.create()),s(this,"length",0)}Sort(){this.ComputeLength()}GetLength(){return this.length}UpdateValue(e){this.animationEngine&&(this.xIndex&&(this.value[0]=this.animationEngine.Evaluate(this.xIndex,e)),this.yIndex&&(this.yIndex===this.xIndex?this.value[1]=this.value[0]:this.value[1]=this.animationEngine.Evaluate(this.yIndex,e)),this.zIndex&&(this.zIndex===this.xIndex?this.value[2]=this.value[0]:this.value[2]=this.animationEngine.Evaluate(this.zIndex,e)))}ComputeLength(){this.animationEngine&&0!==this.animationEngine.GetNumberOfCurves()&&(this.length=0,this.xIndex>=0&&(this.length=this.animationEngine.GetLength(this.xIndex)),this.yIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.yIndex))),this.zIndex>=0&&(this.length=Math.max(this.length,this.animationEngine.GetLength(this.zIndex))))}}s(a,"outputDimension",3),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2Curve.Type.CURVE_MAYA)},"./curve/legacy/maya/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/maya/Tw2MayaEulerRotationCurve.js");r.d(t,"Tw2MayaEulerRotationCurve",function(){return n.Tw2MayaEulerRotationCurve});var i=r("./curve/legacy/maya/Tw2MayaScalarCurve.js");r.d(t,"Tw2MayaScalarCurve",function(){return i.Tw2MayaScalarCurve});var s=r("./curve/legacy/maya/Tw2MayaVector3Curve.js");r.d(t,"Tw2MayaVector3Curve",function(){return s.Tw2MayaVector3Curve});var a=r("./curve/legacy/maya/Tw2MayaAnimationEngine.js");r.d(t,"Tw2MayaAnimationEngine",function(){return a.Tw2MayaAnimationEngine})},"./curve/legacy/tracks/Tw2TransformTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2TransformTrack",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"_id",n.util.generateID()),i(this,"name",""),i(this,"resPath",""),i(this,"res",null),i(this,"group",""),i(this,"cycle",!1),i(this,"duration",0),i(this,"translation",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scale",n.vec3.fromValues(0,0,0)),i(this,"scaleShear",n.mat4.create()),i(this,"positionCurve",null),i(this,"orientationCurve",null),i(this,"scaleCurve",null)}Initialize(){""!==this.resPath&&(this.res=n.resMan.GetResource(this.resPath))}GetLength(){return this.duration}UpdateValue(e){this.res&&this.res.IsGood()&&(this.positionCurve||this.FindTracks(),this.positionCurve&&(this.cycle&&(e%=this.duration),e>this.duration||e<0||(n.curve.evaluate(this.positionCurve,e,this.translation,this.cycle,this.duration),n.curve.evaluate(this.orientationCurve,e,this.rotation,this.cycle,this.duration),n.quat.normalize(this.rotation,this.rotation),n.curve.evaluate(this.scaleCurve,e,this.scaleShear,this.cycle,this.duration),n.mat4.getScaling(this.scale,this.scaleCurve))))}FindTracks(){let e=null;for(let t=0;t<this.res.animations.length;++t)for(let r=0;r<this.res.animations[t].trackGroups.length;++r)if(this.res.animations[t].trackGroups[r].name===this.group){this.duration=this.res.animations[t].duration,e=this.res.animations[t].trackGroups[r];break}if(e)for(let t=0;t<e.transformTracks.length;++t)if(this.name===e.transformTracks[t].name){this.positionCurve=e.transformTracks[t].position,this.orientationCurve=e.transformTracks[t].orientation,this.scaleCurve=e.transformTracks[t].scaleShear;break}}}},"./curve/legacy/tracks/Tw2WbgTrack.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2WbgTrack",function(){return i}),r.d(t,"Tw2WbgTransformTrack",function(){return s});var n=r("./global/index.js");function i(){this._id=n.util.generateID(),this.name="",this.geometryResPath="",this.geometryRes=null,this.group="",this.duration=0,this.cycle=!1,this.Initialize=function(){if(this.geometryResPath){this.geometryRes=n.resMan.GetResource(this.geometryResPath);const e=this;this.geometryRes.RegisterNotification({OnResPrepared:function(){!function(e){if(e.name&&e.group&&e.geometryRes)for(let t=0;t<e.geometryRes.animations.length;++t){let r=e.geometryRes.animations[t];for(let t=0;t<r.trackGroups.length;++t)r.trackGroups[t].name===e.group&&e._ApplyTracks(r.trackGroups[t],r.duration)}}(e)}})}},this.UpdateValue=function(e){this._TracksReady()&&(this.cycle&&(e%=this.duration),e<=this.duration&&e>=0&&this._UpdateValue(e))}}function s(){this._id=n.util.generateID(),this.translation=n.vec3.create(),this.rotation=n.quat.create(),this.rotation[3]=1,this.scale=n.vec3.create();let e=null,t=null,r=null,i=n.mat4.create();this._TracksReady=function(){return e||t||r},this._ApplyTracks=function(n,i){for(let s=0;s<n.transformTracks.length;++s){let a=n.transformTracks[s];a.name===this.name&&(this.duration=i,e=a.position,t=a.orientation,r=a.scaleShear)}this.UpdateValue(0)},this._UpdateValue=function(s){e&&n.curve.evaluate(e,s,this.translation,this.cycle,this.duration),t&&(n.curve.evaluate(t,s,this.rotation,this.cycle,this.duration),n.quat.normalize(this.rotation,this.rotation)),r&&n.curve.evaluate(r,s,i,this.cycle,this.duration),this.scale[0]=i[0],this.scale[1]=i[5],this.scale[2]=i[10]}}s.prototype=new i},"./curve/legacy/tracks/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/legacy/tracks/Tw2WbgTrack.js");r.d(t,"Tw2WbgTrack",function(){return n.Tw2WbgTrack}),r.d(t,"Tw2WbgTransformTrack",function(){return n.Tw2WbgTransformTrack});var i=r("./curve/legacy/tracks/Tw2TransformTrack.js");r.d(t,"Tw2TransformTrack",function(){return i.Tw2TransformTrack})},"./curve/sequencer/TriColorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"TriColorSequencer",function(){return a});var n=r("./global/index.js"),i=r("./curve/sequencer/Tw2CurveSequencer.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"functions",[]),s(this,"value",n.vec4.create())}Sort(){i.Tw2CurveSequencer.Sort(this)}GetLength(){return i.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){const r=i.Tw2CurveSequencer.global.vec4_0;n.vec4.set(r,0,0,0,0);for(let i=0;i<this.functions.length;i++)this.functions[i].GetValueAt(e,t),n.vec4.add(t,t,r);return t}static black(e){return[["functions",e.array],["name",e.string],["value",e.vector4]]}}s(a,"inputDimension",4),s(a,"outputDimension",4),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2CurveSequencer.Type.SEQUENCER),s(a,"childArray","functions"),s(a,"__isStaging",2)},"./curve/sequencer/Tw2CurveColor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveColor",function(){return a});var n=r("./curve/sequencer/Tw2CurveSequencer.js"),i=r("./global/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"r",null),s(this,"g",null),s(this,"b",null),s(this,"a",null),s(this,"_value",i.vec4.fromValues(0,0,0,0))}Sort(){n.Tw2CurveSequencer.Sort2(this)}GetLength(){return n.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this._value)}GetValueAt(e,t){return t[0]=this.r?this.r.GetValueAt(e):0,t[1]=this.g?this.g.GetValueAt(e):0,t[2]=this.b?this.b.GetValueAt(e):0,t[3]=this.a?this.a.GetValueAt(e):0,t}static black(e){return[["name",e.string],["r",e.object],["g",e.object],["b",e.object],["a",e.object]]}}s(a,"inputDimension",1),s(a,"outputDimension",4),s(a,"valueProperty","_value"),s(a,"curveType",n.Tw2CurveSequencer.Type.SEQUENCER),s(a,"childProperties",["r","g","b","a"]),s(a,"__isStaging",2)},"./curve/sequencer/Tw2CurveEulerRotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveEulerRotation",function(){return a});var n=r("./curve/sequencer/Tw2CurveSequencer.js"),i=r("./global/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"pitch",null),s(this,"roll",null),s(this,"yaw",null),s(this,"_value",i.quat.create())}Sort(){n.Tw2CurveSequencer.Sort2(this)}GetLength(){return n.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this._value)}GetValueAt(e,t){const r=this.yaw?this.yaw.GetValueAt(e):0,n=this.pitch?this.pitch.GetValueAt(e):0,i=this.roll?this.roll.GetValueAt(e):0,s=Math.sin(r/2),a=Math.cos(r/2),o=Math.sin(n/2),u=Math.cos(n/2),c=Math.sin(i/2),l=Math.cos(i/2);return t[0]=s*u*c+a*o*l,t[1]=s*u*l-a*o*c,t[2]=a*u*c-s*o*l,t[3]=a*u*l+s*o*c,t}static black(e){return[["name",e.string],["pitch",e.object],["roll",e.object],["yaw",e.object]]}}s(a,"inputDimension",1),s(a,"outputDimension",4),s(a,"valueProperty","_value"),s(a,"curveType",n.Tw2CurveSequencer.Type.SEQUENCER2),s(a,"childProperties",["yaw","pitch","roll"]),s(a,"__isStaging",2)},"./curve/sequencer/Tw2CurveSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveSequencer",function(){return s});var n=r("./curve/curve/Tw2Curve.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2Curve{static Sort(e){let t=e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor.childArray];if(t&&t.length)for(let e=0;e<t.length;e++)t[e]&&"Sort"in t[e]&&t[e].Sort()}static Sort2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor.childProperties;if(t)for(let r=0;r<t.length;r++){let n=e[t[r]];n&&"Sort"in n&&n.Sort()}}static GetLengthFromKeys(e){const t=e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor.childArray];let r=0;for(let e=0;e<t.length;++e)"GetLength"in t[e]&&(r=Math.max(r,t[e].GetLength()));return r}static GetLengthFromProperties(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor.childProperties,r=0;for(let n=0;n<t.length;n++){const i=e[t[n]];i&&"GetLength"in i&&(r=Math.max(r,i.GetLength()))}return r}}i(s,"inputDimension",null),i(s,"outputDimension",null),i(s,"childProperties",null),i(s,"childArray",null),i(s,"Operator",null)},"./curve/sequencer/Tw2CurveVector3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2CurveVector3",function(){return a});var n=r("./curve/sequencer/Tw2CurveSequencer.js"),i=r("./global/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"x",null),s(this,"y",null),s(this,"z",null),s(this,"_value",i.vec3.create())}Sort(){n.Tw2CurveSequencer.Sort2(this)}GetLength(){return n.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this._value)}GetValueAt(e,t){return t[0]=this.x?this.x.GetValueAt(e):0,t[1]=this.y?this.y.GetValueAt(e):0,t[2]=this.z?this.z.GetValueAt(e):0,t}static black(e){return[["name",e.string],["x",e.object],["y",e.object],["z",e.object]]}}s(a,"inputDimension",1),s(a,"outputDimension",3),s(a,"valueProperty","_value"),s(a,"curveType",n.Tw2CurveSequencer.Type.SEQUENCER2),s(a,"childProperties",["x","y","z"]),s(a,"__isStaging",2)},"./curve/sequencer/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/sequencer/TriColorSequencer.js");r.d(t,"TriColorSequencer",function(){return n.TriColorSequencer});var i=r("./curve/sequencer/Tw2CurveColor.js");r.d(t,"Tw2CurveColor",function(){return i.Tw2CurveColor});var s=r("./curve/sequencer/Tw2CurveEulerRotation.js");r.d(t,"Tw2CurveEulerRotation",function(){return s.Tw2CurveEulerRotation});var a=r("./curve/sequencer/Tw2CurveVector3.js");r.d(t,"Tw2CurveVector3",function(){return a.Tw2CurveVector3});var o=r("./curve/sequencer/Tw2CurveSequencer.js");r.d(t,"Tw2CurveSequencer",function(){return o.Tw2CurveSequencer});var u=r("./curve/sequencer/legacy/index.js");r.d(t,"Tw2ColorSequencer",function(){return u.Tw2ColorSequencer}),r.d(t,"Tw2EulerRotation",function(){return u.Tw2EulerRotation}),r.d(t,"Tw2QuaternionSequencer",function(){return u.Tw2QuaternionSequencer}),r.d(t,"Tw2RGBAScalarSequencer",function(){return u.Tw2RGBAScalarSequencer}),r.d(t,"Tw2ScalarSequencer",function(){return u.Tw2ScalarSequencer}),r.d(t,"Tw2VectorSequencer",function(){return u.Tw2VectorSequencer}),r.d(t,"Tw2XYZScalarSequencer",function(){return u.Tw2XYZScalarSequencer}),r.d(t,"Tw2YPRSequencer",function(){return u.Tw2YPRSequencer})},"./curve/sequencer/legacy/Tw2ColorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ColorSequencer",function(){return a});var n=r("./global/index.js"),i=r("./curve/sequencer/Tw2CurveSequencer.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"start",0),s(this,"value",n.vec4.create()),s(this,"operator",0),s(this,"functions",[])}Sort(){i.Tw2CurveSequencer.Sort(this)}GetLength(){return i.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){const r=i.Tw2CurveSequencer.global.vec4_0;switch(this.operator){case a.Operator.MULTIPLY:n.vec4.set(t,1,1,1,1);for(let i=0;i<this.functions.length;++i)this.functions[i].GetValueAt(e,r),n.vec4.multiply(t,t,r);break;default:n.vec4.set(t,0,0,0,0);for(let i=0;i<this.functions.length;++i)this.functions[i].GetValueAt(e,r),n.vec4.add(t,t,r)}return t}}s(a,"inputDimension",4),s(a,"outputDimension",4),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2CurveSequencer.Type.SEQUENCER),s(a,"childArray","functions"),s(a,"Operator",{MULTIPLY:0,ADD:1})},"./curve/sequencer/legacy/Tw2EulerRotation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EulerRotation",function(){return a});var n=r("./global/index.js"),i=r("./curve/sequencer/Tw2CurveSequencer.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"yawCurve",null),s(this,"pitchCurve",null),s(this,"rollCurve",null),s(this,"currentValue",n.quat.create())}Sort(){i.Tw2CurveSequencer.Sort2(this)}GetLength(){return i.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.currentValue)}GetValueAt(e,t){const r=this.yawCurve?this.yawCurve.GetValueAt(e):0,n=this.pitchCurve?this.pitchCurve.GetValueAt(e):0,i=this.rollCurve?this.rollCurve.GetValueAt(e):0,s=Math.sin(r/2),a=Math.cos(r/2),o=Math.sin(n/2),u=Math.cos(n/2),c=Math.sin(i/2),l=Math.cos(i/2);return t[0]=s*u*c+a*o*l,t[1]=s*u*l-a*o*c,t[2]=a*u*c-s*o*l,t[3]=a*u*l+s*o*c,t}}s(a,"inputDimension",1),s(a,"outputDimension",4),s(a,"valueProperty","currentValue"),s(a,"curveType",i.Tw2CurveSequencer.Type.SEQUENCER2),s(a,"childProperties",["yawCurve","pitchCurve","rollCurve"])},"./curve/sequencer/legacy/Tw2QuaternionSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2QuaternionSequencer",function(){return a});var n=r("./global/index.js"),i=r("./curve/sequencer/Tw2CurveSequencer.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"start",0),s(this,"value",n.quat.create()),s(this,"functions",[])}Sort(){i.Tw2CurveSequencer.Sort(this)}GetLength(){return i.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){n.quat.identity(t);const r=i.Tw2CurveSequencer.global.quat_0;for(let i=0;i<this.functions.length;++i)this.functions[i].GetValueAt(e,r),n.quat.multiply(t,t,r);return t}}s(a,"inputDimension",4),s(a,"outputDimension",4),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2CurveSequencer.Type.SEQUENCER),s(a,"childArray","functions")},"./curve/sequencer/legacy/Tw2RGBAScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RGBAScalarSequencer",function(){return a});var n=r("./global/index.js"),i=r("./curve/sequencer/Tw2CurveSequencer.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"value",n.vec4.create()),s(this,"RedCurve",null),s(this,"GreenCurve",null),s(this,"BlueCurve",null),s(this,"AlphaCurve",null)}Sort(){i.Tw2CurveSequencer.Sort2(this)}GetLength(){return i.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){return t[0]=this.RedCurve?this.RedCurve.GetValueAt(e):0,t[1]=this.GreenCurve?this.GreenCurve.GetValueAt(e):0,t[2]=this.BlueCurve?this.BlueCurve.GetValueAt(e):0,t[3]=this.AlphaCurve?this.AlphaCurve.GetValueAt(e):0,t}}s(a,"inputDimension",1),s(a,"outputDimension",4),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2CurveSequencer.Type.SEQUENCER2),s(a,"childProperties",["RedCurve","GreenCurve","BlueCurve","AlphaCurve"])},"./curve/sequencer/legacy/Tw2ScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ScalarSequencer",function(){return s});var n=r("./curve/sequencer/Tw2CurveSequencer.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2CurveSequencer{constructor(){super(...arguments),i(this,"value",0),i(this,"operator",0),i(this,"functions",[]),i(this,"inMinClamp",0),i(this,"inMaxClamp",1),i(this,"outMinClamp",0),i(this,"outMaxClamp",1),i(this,"clamping",!1)}Sort(){n.Tw2CurveSequencer.Sort(this)}GetLength(){return n.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.value=this.GetValueAt(e)}GetValueAt(e){let t;switch(this.operator){case s.Operator.MULTIPLY:t=1;for(let r=0;r<this.functions.length;++r){let n=this.functions[r].GetValueAt(e);this.clamping&&(n=Math.min(Math.max(n,this.inMinClamp),this.inMaxClamp)),t*=n}break;default:t=0;for(let r=0;r<this.functions.length;++r){let n=this.functions[r].GetValueAt(e);this.clamping&&(n=Math.min(Math.max(n,this.inMinClamp),this.inMaxClamp)),t+=n}}return this.clamping&&(t=Math.min(Math.max(t,this.outMinClamp),this.outMaxClamp)),t}}i(s,"inputDimension",1),i(s,"outputDimension",1),i(s,"valueProperty","value"),i(s,"curveType",n.Tw2CurveSequencer.Type.SEQUENCER),i(s,"childArray","functions"),i(s,"Operator",{MULTIPLY:0,ADD:1})},"./curve/sequencer/legacy/Tw2VectorSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2VectorSequencer",function(){return a});var n=r("./global/index.js"),i=r("./curve/sequencer/Tw2CurveSequencer.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"start",0),s(this,"value",n.vec3.create()),s(this,"operator",0),s(this,"functions",[])}Sort(){i.Tw2CurveSequencer.Sort(this)}GetLength(){return i.Tw2CurveSequencer.GetLengthFromKeys(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){const r=i.Tw2CurveSequencer.global.vec3_0;switch(this.operator){case a.Operator.MULTIPLY:n.vec3.set(t,1,1,1);for(let i=0;i<this.functions.length;++i)this.functions[i].GetValueAt(e,r),n.vec3.multiply(t,t,r);return t;default:n.vec3.set(t,0,0,0);for(let i=0;i<this.functions.length;++i)this.functions[i].GetValueAt(e,r),n.vec3.add(t,t,r);return t}}}s(a,"inputDimension",3),s(a,"outputDimension",3),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2CurveSequencer.Type.SEQUENCER),s(a,"childArray","functions"),s(a,"Operator",{MULTIPLY:0,ADD:1})},"./curve/sequencer/legacy/Tw2XYZScalarSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2XYZScalarSequencer",function(){return a});var n=r("./global/index.js"),i=r("./curve/sequencer/Tw2CurveSequencer.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"value",n.vec3.create()),s(this,"XCurve",null),s(this,"YCurve",null),s(this,"ZCurve",null)}Sort(){i.Tw2CurveSequencer.Sort2(this)}GetLength(){return i.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){return t[0]=this.XCurve?this.XCurve.GetValueAt(e):0,t[1]=this.YCurve?this.YCurve.GetValueAt(e):0,t[2]=this.ZCurve?this.ZCurve.GetValueAt(e):0,t}}s(a,"inputDimension",1),s(a,"outputDimension",3),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2CurveSequencer.Type.SEQUENCER2),s(a,"childProperties",["XCurve","YCurve","ZCurve"])},"./curve/sequencer/legacy/Tw2YPRSequencer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2YPRSequencer",function(){return a});var n=r("./global/index.js"),i=r("./curve/sequencer/Tw2CurveSequencer.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2CurveSequencer{constructor(){super(...arguments),s(this,"value",n.quat.create()),s(this,"YawPitchRoll",n.vec3.create()),s(this,"YawCurve",null),s(this,"PitchCurve",null),s(this,"RollCurve",null)}Sort(){i.Tw2CurveSequencer.Sort2(this)}GetLength(){return i.Tw2CurveSequencer.GetLengthFromProperties(this)}UpdateValue(e){this.GetValueAt(e,this.value)}GetValueAt(e,t){this.YawCurve&&(this.YawPitchRoll[0]=this.YawCurve.GetValueAt(e)),this.PitchCurve&&(this.YawPitchRoll[1]=this.PitchCurve.GetValueAt(e)),this.RollCurve&&(this.YawPitchRoll[2]=this.RollCurve.GetValueAt(e));const r=Math.sin(this.YawPitchRoll[0]/180*Math.PI/2),n=Math.cos(this.YawPitchRoll[0]/180*Math.PI/2),i=Math.sin(this.YawPitchRoll[1]/180*Math.PI/2),s=Math.cos(this.YawPitchRoll[1]/180*Math.PI/2),a=Math.sin(this.YawPitchRoll[2]/180*Math.PI/2),o=Math.cos(this.YawPitchRoll[2]/180*Math.PI/2);return t[0]=r*s*a+n*i*o,t[1]=r*s*o-n*i*a,t[2]=n*s*a-r*i*o,t[3]=n*s*o+r*i*a,t}}s(a,"inputDimension",1),s(a,"outputDimension",4),s(a,"valueProperty","value"),s(a,"curveType",i.Tw2CurveSequencer.Type.SEQUENCER2),s(a,"childProperties",["YawCurve","PitchCurve","RollCurve"])},"./curve/sequencer/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./curve/sequencer/legacy/Tw2ColorSequencer.js");r.d(t,"Tw2ColorSequencer",function(){return n.Tw2ColorSequencer});var i=r("./curve/sequencer/legacy/Tw2EulerRotation.js");r.d(t,"Tw2EulerRotation",function(){return i.Tw2EulerRotation});var s=r("./curve/sequencer/legacy/Tw2QuaternionSequencer.js");r.d(t,"Tw2QuaternionSequencer",function(){return s.Tw2QuaternionSequencer});var a=r("./curve/sequencer/legacy/Tw2RGBAScalarSequencer.js");r.d(t,"Tw2RGBAScalarSequencer",function(){return a.Tw2RGBAScalarSequencer});var o=r("./curve/sequencer/legacy/Tw2ScalarSequencer.js");r.d(t,"Tw2ScalarSequencer",function(){return o.Tw2ScalarSequencer});var u=r("./curve/sequencer/legacy/Tw2VectorSequencer.js");r.d(t,"Tw2VectorSequencer",function(){return u.Tw2VectorSequencer});var c=r("./curve/sequencer/legacy/Tw2XYZScalarSequencer.js");r.d(t,"Tw2XYZScalarSequencer",function(){return c.Tw2XYZScalarSequencer});var l=r("./curve/sequencer/legacy/Tw2YPRSequencer.js");r.d(t,"Tw2YPRSequencer",function(){return l.Tw2YPRSequencer})},"./eve/EveCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCamera",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"fieldOfView",0),i(this,"friction",0),i(this,"frontClip",0),i(this,"idleMove",!1),i(this,"idleScale",0),i(this,"idleSpeed",0),i(this,"intr",n.vec3.create()),i(this,"maxSpeed",0),i(this,"noiseScale",0),i(this,"noiseScaleCurve",null),i(this,"pitch",0),i(this,"pos",n.vec3.create()),i(this,"rotationAroundParent",n.quat.create()),i(this,"translationFromParent",0),i(this,"yaw",0),i(this,"zoomCurve",null)}static black(e){return[["fieldOfView",e.float],["friction",e.float],["frontClip",e.float],["idleMove",e.boolean],["idleScale",e.float],["idleSpeed",e.float],["intr",e.vector3],["pitch",e.float],["pos",e.vector3],["maxSpeed",e.float],["noiseScale",e.float],["noiseScaleCurve",e.object],["rotationAroundParent",e.vector4],["translationFromParent",e.float],["yaw",e.float],["zoomCurve",e.object]]}}i(s,"__isStaging",4)},"./eve/EveLineContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLineContainer",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"lineSet",null)}static black(e){return[["lineSet",e.object]]}}i(s,"__isStaging",4)},"./eve/EveSpaceScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceScene",function(){return a});var n=r("./global/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2BaseClass{constructor(){super(),s(this,"ambientColor",n.vec4.fromValues(.25,.25,.25,1)),s(this,"backgroundEffect",null),s(this,"backgroundObjects",[]),s(this,"backgroundRenderingEnabled",!0),s(this,"curveSets",[]),s(this,"enableShadows",!1),s(this,"envMap1ResPath",""),s(this,"envMap2ResPath",""),s(this,"envMapResPath",""),s(this,"envMapRotation",n.quat.create()),s(this,"externalParameters",[]),s(this,"fogColor",n.vec4.fromValues(.25,.25,.25,1)),s(this,"fogEnd",0),s(this,"fogMax",0),s(this,"fogStart",0),s(this,"nebulaIntensity",1),s(this,"objects",[]),s(this,"postProcessPath",""),s(this,"selfShadowOnly",!1),s(this,"shLightingManager",null),s(this,"shadowFadeThreshold",0),s(this,"shadowThreshold",0),s(this,"starfield",null),s(this,"sunDiffuseColor",n.vec4.fromValues(1,1,1,1)),s(this,"sunDiffuseColorWithDynamicLights",n.vec4.fromValues(1,1,1,1)),s(this,"sunDirection",n.vec3.fromValues(1,-1,1)),s(this,"useSunDiffuseColorWithDynamicLights",!1),s(this,"clearColor",n.vec4.fromValues(0,0,0,1)),s(this,"display",!0),s(this,"envMapScaling",n.vec3.fromValues(1,1,1)),s(this,"fogBlur",0),s(this,"fogType",0),s(this,"lensflares",[]),s(this,"localTransform",n.mat4.create()),s(this,"planets",[]),s(this,"postProcess",null),s(this,"visible",{backgroundObjects:!0,clearColor:!0,debug:!1,environmentReflection:!0,environmentDiffuse:!0,environmentBlur:!0,fog:!0,lensflares:!0,objects:!0,planets:!0,post:!0,starField:!0}),s(this,"_debugHelper",null),s(this,"_batches",new i.Tw2BatchAccumulator),s(this,"_emptyTexture",null),s(this,"_frustum",new i.Tw2Frustum),s(this,"_lodEnabled",!1),s(this,"_perFrameVS",i.Tw2RawData.from(a.perFrameData.vs)),s(this,"_perFramePS",i.Tw2RawData.from(a.perFrameData.ps)),s(this,"_envMapRes",null),s(this,"_envMap1Res",null),s(this,"_envMap2Res",null),s(this,"spriteScale",1),Object.defineProperty(this.visible,"environment",{get:()=>this.backgroundRenderingEnabled,set:e=>this.backgroundRenderingEnabled=e?1:0}),Object.defineProperty(this.visible,"shadow",{get:()=>this.enableShadows,set:e=>this.enableShadows=e?1:0}),a.init()}Initialize(){this.SetEnvMapReflection(this.envMapPath),this.SetEnvMapDiffuse(this.envMap1ResPath),this.SetEnvMapBlur(this.envMap2ResPath),this.SetPostProcess(this.postProcessPath)}SetPostProcess(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?(this.postProcessPath=e.toLowerCase(),n.resMan.GetObject(e,e=>this.postProcess=e)):(this.postProcessPath="",this.postProcess=null)}SetEnvMapReflection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?(this.envMapResPath=e,this._envMapRes=n.resMan.GetResource(e)):(this.envMapPath="",this._envMapRes=null)}SetEnvMapDiffuse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?(this.envMap1ResPath=e.toLowerCase(),this._envMap1Res=n.resMan.GetResource(e)):(this.envMap1ResPath="",this._envMap1Res=null)}SetEnvMapBlur(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return this.envMap2ResPath="",void(this._envMap1Res=null);this.envMap2ResPath=e.toLowerCase(),this._envMap2Res=n.resMan.GetResource(e)}EnableLod(e){this._lodEnabled=e,e||this.PerChildObject("ResetLod")}KeepAlive(){const e=this.GetResources();this.GetChildResources(e);for(let t=0;t<e.length;t++)e[t].KeepAlive()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<this.lensflares.length;t++)this.lensflares[t].GetResources(e);return this.backgroundEffect&&this.backgroundEffect.GetResources(e),this.postProcess&&this.postProcess.GetResources(e),this.starfield&&this.starfield.GetResources(e),this._envMapRes&&!e.includes(this._envMapRes)&&e.push(this._envMapRes),this._envMap1Res&&!e.includes(this._envMap1Res)&&e.push(this._envMapRes),this._envMap2Res&&!e.includes(this._envMap2Res)&&e.push(this._envMapRes),e}GetChildResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.PerChildObject("GetResources",e),e}PerChildObject(e,t){for(let r=0;r<this.planets.length;r++)e in this.planets[r]&&this.planets[r][e](t);for(let r=0;r<this.objects.length;r++)e in this.objects[r]&&this.objects[r][e](t);for(let r=0;r<this.backgroundObjects.length;r++)e in this.backgroundObjects[r]&&this.backgroundObjects[r][e](t)}GetEmptyTexture(){return this._emptyTexture||(this._emptyTexture=n.resMan.GetResource("res:/texture/global/black.dds.0.png")),this._emptyTexture}Update(e){for(let t=0;t<this.curveSets.length;t++)this.curveSets[t].Update(e);this.PerChildObject("Update",e)}RenderBatches(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._batches;for(let n=0;n<t.length;++n)"GetBatches"in t[n]&&t[n].GetBatches(e,r)}Render(e){this.ApplyPerFrameData();const t=n.device,r=a.global,i=this.localTransform,s=n.mat4.maxScaleOnAxis(i)*this.spriteScale,o=this.visible;if(o.environment&&this.backgroundEffect&&(t.SetStandardStates(t.RM_FULLSCREEN),t.RenderCameraSpaceQuad(this.backgroundEffect)),o.planets&&this.planets.length){const s=n.mat4.copy(r.mat4_0,t.projection),a=n.mat4.copy(r.mat4_1,t.projection),o=1e4,u=1e11;a[10]=u/(o-u),a[14]=u*o/(o-u),t.SetProjection(a,!0),this.ApplyPerFrameData();for(let t=0;t<this.planets.length;++t)this.planets[t].UpdateViewDependentData&&this.planets[t].UpdateViewDependentData(i,e);this._batches.Clear(),t.gl.depthRange(.9,1),this.RenderBatches(t.RM_OPAQUE,this.planets),this.RenderBatches(t.RM_DECAL,this.planets),this.RenderBatches(t.RM_TRANSPARENT,this.planets),this.RenderBatches(t.RM_ADDITIVE,this.planets),this._batches.Render(),t.SetProjection(s,!0),this.ApplyPerFrameData(),t.gl.depthRange(0,.9)}if(this._lodEnabled&&(this._frustum.Initialize(t.view,t.projection,t.viewportWidth,t.viewInverse,t.viewProjection),this.PerChildObject("UpdateLod",this._frustum)),o.objects)for(let t=0;t<this.objects.length;++t)this.objects[t].UpdateViewDependentData&&this.objects[t].UpdateViewDependentData(i,e,s);if(o.backgroundObjects)for(let t=0;t<this.backgroundObjects.length;t++)this.backgroundObjects[t].UpdateViewDependentData&&this.backgroundObjects[t].UpdateViewDependentData(i,e,s);if(o.lensflares)for(let e=0;e<this.lensflares.length;++e)this.lensflares[e].PrepareRender();if(this._batches.Clear(),o.planets)for(let e=0;e<this.planets.length;++e)this.planets[e].GetZOnlyBatches(t.RM_OPAQUE,this._batches);if(o.objects&&(this.RenderBatches(t.RM_OPAQUE,this.objects),this.RenderBatches(t.RM_DECAL,this.objects),this.RenderBatches(t.RM_TRANSPARENT,this.objects),this.RenderBatches(t.RM_ADDITIVE,this.objects)),o.backgroundObjects&&(this.RenderBatches(t.RM_OPAQUE,this.backgroundObjects),this.RenderBatches(t.RM_DECAL,this.backgroundObjects),this.RenderBatches(t.RM_TRANSPARENT,this.backgroundObjects),this.RenderBatches(t.RM_ADDITIVE,this.backgroundObjects)),o.lensflares)for(let e=0;e<this.lensflares.length;++e)this.lensflares[e].GetBatches(t.RM_ADDITIVE,this._batches);if(this._batches.Render(),o.lensflares)for(let e=0;e<this.lensflares.length;++e)this.lensflares[e].UpdateOccluders();this.starfield,this.postProcess,o.debug&&a.DebugRenderer&&(this._debugHelper||(this._debugHelper=new a.DebugRenderer),this.PerChildObject("RenderDebugInfo",this._debugHelper),this._debugHelper.Render())}ApplyPerFrameData(){const e=n.device,t=a.global,r=t.mat4_2,i=t.vec3_0,s=this.visible;n.mat4.fromQuat(r,this.envMapRotation),n.mat4.scale(r,r,this.envMapScaling),n.mat4.transpose(r,r),n.vec3.negate(i,this.sunDirection),n.vec3.normalize(i,i);let o=this.fogEnd-this.fogStart;Math.abs(o)<1e-5&&(o=1e-5);const u=1/o,c=this._perFrameVS;c.Set("FogFactors",[this.fogEnd*u,u,this.visible.fog?this.fogMax:0,1]),c.Set("ViewportAdjustment",[1,1,1,1]),c.Set("MiscSettings",[e.currentTime,0,e.viewportWidth,e.viewportHeight]),c.Set("SunData.DirWorld",i),c.Set("SunData.DiffuseColor",this.sunDiffuseColor),c.Set("TargetResolution",e.targetResolution),c.Set("ViewInverseTransposeMat",e.viewInverse),c.Set("ViewProjectionMat",e.viewProjectionTranspose),c.Set("ViewMat",e.viewTranspose),c.Set("ProjectionMat",e.projectionTranspose),c.Set("EnvMapRotationMat",r),e.perFrameVSData=c;const l=this._perFramePS;l.Set("ViewInverseTransposeMat",e.viewInverse),l.Set("ViewMat",e.viewTranspose),l.Set("EnvMapRotationMat",r),l.Set("SunData.DirWorld",i),l.Set("SunData.DiffuseColor",this.sunDiffuseColor),l.Set("SceneData.AmbientColor",this.ambientColor),l.Set("MiscSettings",[e.currentTime,this.fogType,this.fogBlur,1]),l.Set("SceneData.FogColor",this.fogColor),l.Set("FovXY",[e.targetResolution[3],e.targetResolution[2]]),l.Set("ShadowMapSettings",[1,1,0,0]),l.Set("TargetResolution",e.targetResolution),l.Get("SceneData.NebulaIntensity")[0]=this.nebulaIntensity,l.Get("ViewportSize")[0]=e.viewportWidth,l.Get("ViewportSize")[1]=e.viewportHeight,l.Get("ShadowCameraRange")[0]=1,l.Get("ProjectionToView")[0]=-e.projection[14],l.Get("ProjectionToView")[1]=-e.projection[10]-1,e.perFramePSData=l;const d=this._envMapRes&&s.environmentReflection?this._envMapRes:this.GetEmptyTexture(),h=this._envMap1Res&&s.environmentDiffuse?this._envMap1Res:this.GetEmptyTexture(),f=this._envMap2Res&&s.environmentBlur?this._envMap2Res:this.GetEmptyTexture();n.store.variables.Get("EveSpaceSceneEnvMap").SetTextureRes(d),n.store.variables.Get("EnvMap1").SetTextureRes(h),n.store.variables.Get("EnvMap2").SetTextureRes(f)}static init(){a.global||(a.global={vec3_0:n.vec3.create(),vec4_0:n.vec4.create(),mat4_0:n.mat4.create(),mat4_1:n.mat4.create(),mat4_2:n.mat4.create()})}static black(e){return[["ambientColor",e.color],["backgroundEffect",e.object],["backgroundObjects",e.array],["backgroundRenderingEnabled",e.boolean],["curveSets",e.array],["enableShadows",e.boolean],["envMapResPath",e.string],["envMap1ResPath",e.string],["envMap2ResPath",e.string],["envMapRotation",e.vector4],["externalParameters",e.array],["fogColor",e.color],["fogStart",e.float],["fogEnd",e.float],["fogMax",e.float],["nebulaIntensity",e.float],["objects",e.array],["postProcessPath",e.string],["selfShadowOnly",e.boolean],["starfield",e.object],["shadowFadeThreshold",e.float],["shadowThreshold",e.float],["shLightingManager",e.object],["sunDiffuseColor",e.color],["sunDiffuseColorWithDynamicLights",e.vector4],["sunDirection",e.vector3],["useSunDiffuseColorWithDynamicLights",e.boolean]]}}s(a,"perFrameData",{ps:[["ViewInverseTransposeMat",16],["ViewMat",16],["EnvMapRotationMat",16],["SunData.DirWorld",4],["SunData.DiffuseColor",4],["SceneData.AmbientColor",3],["SceneData.NebulaIntensity",1],["SceneData.FogColor",4],["ViewportOffset",2],["ViewportSize",2],["TargetResolution",4],["ShadowMapSettings",4],["ShadowCameraRange",4],["ProjectionToView",2],["FovXY",2],["MiscSettings",4]],vs:[["ViewInverseTransposeMat",16],["ViewProjectionMat",16],["ViewMat",16],["ProjectionMat",16],["ShadowViewMat",16],["ShadowViewProjectionMat",16],["EnvMapRotationMat",16],["SunData.DirWorld",4],["SunData.DiffuseColor",4],["FogFactors",4],["TargetResolution",4],["ViewportAdjustment",4],["MiscSettings",4]]}),s(a,"global",null),s(a,"DebugRenderer",window.Tw2DebugRenderer||null),s(a,"__isStaging",2)},"./eve/animation/EveAnimation.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveAnimation",function(){return i});class i{constructor(){n(this,"name",""),n(this,"loops",0)}static black(e){return[["name",e.string],["loops",e.uint]]}}},"./eve/animation/EveAnimationCommand.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationCommand",function(){return n});class n{constructor(){var e,t,r;r=-1,(t="command")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}static black(e){return[["command",e.uint]]}}},"./eve/animation/EveAnimationCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationCurve",function(){return n});class n{constructor(){var e,t,r;r="",(t="name")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}static black(e){return[["name",e.string]]}}},"./eve/animation/EveAnimationState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveAnimationState",function(){return s});var n=r("./eve/animation/EveAnimationStateTransition.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"animation",null),i(this,"curves",[]),i(this,"commands",[]),i(this,"initCommands",[]),i(this,"transitions",[])}static black(e){return[["name",e.string],["animation",e.object],["curves",e.array],["commands",e.array],["initCommands",e.array],["transitions",e.structList(n.EveAnimationStateTransition)]]}}},"./eve/animation/EveAnimationStateMachine.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveAnimationStateMachine",function(){return i});class i{constructor(){n(this,"name",""),n(this,"autoPlayDefault",!0),n(this,"states",[]),n(this,"transitions",[]),n(this,"trackMask",""),n(this,"defaultAnimation","")}static black(e){return[["name",e.string],["autoPlayDefault",e.boolean],["states",e.array],["transitions",e.array],["trackMask",e.string],["defaultAnimation",e.string]]}}},"./eve/animation/EveAnimationStateTransition.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveAnimationStateTransition",function(){return i});class i{constructor(){n(this,"state",""),n(this,"transition","")}static blackStruct(e){const t=new i;return t.state=e.ReadStringU16(),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),t.transition=e.ReadStringU16(),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),e.ExpectU8(0,"unknown content"),t}}},"./eve/animation/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/animation/EveAnimation.js");r.d(t,"EveAnimation",function(){return n.EveAnimation});var i=r("./eve/animation/EveAnimationCommand.js");r.d(t,"EveAnimationCommand",function(){return i.EveAnimationCommand});var s=r("./eve/animation/EveAnimationCurve.js");r.d(t,"EveAnimationCurve",function(){return s.EveAnimationCurve});var a=r("./eve/animation/EveAnimationState.js");r.d(t,"EveAnimationState",function(){return a.EveAnimationState});var o=r("./eve/animation/EveAnimationStateMachine.js");r.d(t,"EveAnimationStateMachine",function(){return o.EveAnimationStateMachine})},"./eve/child/EveChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChild",function(){return a});var n=r("./global/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2BaseClass{Update(e,t){throw new i.ErrAbstractClassMethod}GetResources(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw new i.ErrAbstractClassMethod}GetBatches(e,t,r){throw new i.ErrAbstractClassMethod}}s(a,"global",{mat4_0:n.mat4.create(),vec3_0:n.vec3.create()}),s(a,"perObjectData",{ffe:[["world",16],["worldInverseTranspose",16]]}),s(a,"__isEffectChild",!0)},"./eve/child/EveChildBulletStorm.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildBulletStorm",function(){return s});var n=r("./eve/child/EveChild.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.EveChild{constructor(){super(...arguments),i(this,"effect",null),i(this,"multiplier",0),i(this,"range",0),i(this,"sourceLocatorSet",""),i(this,"speed",0)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}static black(e){return[["effect",e.object],["multiplier",e.uint],["range",e.float],["speed",e.float],["sourceLocatorSet",e.string]]}}i(s,"__isStaging",4)},"./eve/child/EveChildCloud.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildCloud",function(){return a});var n=r("./global/index.js"),i=r("./eve/child/EveChild.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveChild{constructor(){super(...arguments),s(this,"name",""),s(this,"cellScreenSize",0),s(this,"effect",null),s(this,"preTesselationLevel",0),s(this,"rotation",n.quat.create()),s(this,"scaling",n.vec3.fromValues(1,1,1)),s(this,"sortingModifier",0),s(this,"translation",n.vec3.create())}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}static black(e){return[["cellScreenSize",e.float],["sortingModifier",e.float],["effect",e.object],["name",e.string],["preTesselationLevel",e.uint],["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3]]}}s(a,"__isStaging",4)},"./eve/child/EveChildContainer.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildContainer",function(){return a});var n=r("./eve/child/EveChild.js"),i=r("./global/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.EveChild{constructor(){super(...arguments),s(this,"name",""),s(this,"controllers",[]),s(this,"curveSets",[]),s(this,"display",!0),s(this,"hideOnLowQuality",!1),s(this,"inheritProperties",null),s(this,"lights",[]),s(this,"localTransform",i.mat4.create()),s(this,"objects",[]),s(this,"observers",[]),s(this,"rotation",i.quat.create()),s(this,"scaling",i.vec3.fromValues(1,1,1)),s(this,"staticTransform",!1),s(this,"transformModifiers",[]),s(this,"translation",i.vec3.create()),s(this,"useSRT",!0),s(this,"_worldTransform",i.mat4.create()),s(this,"_worldTransformLast",i.mat4.create())}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<this.objects.length;t++)this.objects[t].GetResources(e);return e}Update(e,t){this.useSRT&&(i.quat.normalize(this.rotation,this.rotation),i.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),i.mat4.copy(this._worldTransformLast,this._worldTransform),i.mat4.multiply(this._worldTransform,t,this.localTransform);for(let t=0;t<this.curveSets.length;t++)this.curveSets[t].Update(e);for(let t=0;t<this.objects.length;t++)this.objects[t].Update(e,this._worldTransform)}GetBatches(e,t,r){if(this.display)for(let n=0;n<this.objects.length;n++)this.objects[n].GetBatches(e,t,r)}static black(e){return[["boneIndex",e.uint],["controllers",e.array],["display",e.boolean],["localTransform",e.matrix],["name",e.string],["curveSets",e.array],["hideOnLowQuality",e.boolean],["inheritProperties",e.object],["lights",e.array],["observers",e.array],["objects",e.array],["rotation",e.vector4],["scaling",e.vector3],["staticTransform",e.boolean],["transformModifiers",e.array],["translation",e.vector3]]}}s(a,"__isStaging",2)},"./eve/child/EveChildExplosion.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildExplosion",function(){return a});var n=r("./global/index.js"),i=r("./eve/child/EveChild.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveChild{constructor(){super(...arguments),s(this,"name",""),s(this,"globalDuration",0),s(this,"globalExplosion",null),s(this,"globalExplosionDelay",0),s(this,"globalScaling",n.vec3.fromValues(1,1,1)),s(this,"localDuration",0),s(this,"localExplosion",null),s(this,"localExplosionInterval",0),s(this,"localExplosionIntervalFactor",0),s(this,"localExplosionShared",null),s(this,"localExplosions",[]),s(this,"localTransform",n.mat4.create()),s(this,"rotation",n.quat.create()),s(this,"scaling",n.vec3.fromValues(1,1,1))}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.localExplosion&&this.localExplosion.GetResources(e),this.localExplosionShared&&this.localExplosionShared.GetResources(e);for(let t=0;t<this.localExplosions.length;t++)this.localExplosions[t].GetResources(e);return e}static black(e){return[["globalDuration",e.float],["globalExplosion",e.object],["globalExplosionDelay",e.float],["globalExplosions",e.array],["globalScaling",e.vector3],["localDuration",e.float],["localExplosion",e.object],["localExplosions",e.array],["localExplosionInterval",e.float],["localExplosionIntervalFactor",e.float],["localExplosionShared",e.object],["localTransform",e.matrix],["name",e.string],["rotation",e.vector4],["scaling",e.vector3]]}}s(a,"__isStaging",4)},"./eve/child/EveChildInheritProperties.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildInheritProperties",function(){return n});class n{static black(e){return[]}}var i,s,a;a=4,(s="__isStaging")in(i=n)?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a},"./eve/child/EveChildLink.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildLink",function(){return a});var n=r("./global/index.js"),i=r("./eve/child/EveChild.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveChild{constructor(){super(...arguments),s(this,"name",""),s(this,"linkStrengthBindings",[]),s(this,"linkStrengthCurves",[]),s(this,"mesh",null),s(this,"rotation",n.quat.create())}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),e}static black(e){return[["linkStrengthBindings",e.array],["linkStrengthCurves",e.array],["mesh",e.object],["name",e.string],["rotation",e.vector4]]}}s(a,"__isStaging",4)},"./eve/child/EveChildMesh.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildMesh",function(){return o});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/child/EveChild.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.EveChild{constructor(){super(...arguments),a(this,"name",""),a(this,"display",!0),a(this,"localTransform",n.mat4.create()),a(this,"lowestLodVisible",2),a(this,"mesh",null),a(this,"minScreenSize",0),a(this,"rotation",n.quat.create()),a(this,"scaling",n.vec3.fromValues(1,1,1)),a(this,"sortValueOffset",0),a(this,"staticTransform",!1),a(this,"transformModifiers",[]),a(this,"translation",n.vec3.create()),a(this,"useSRT",!0),a(this,"useSpaceObjectData",!0),a(this,"_worldTransform",n.mat4.create()),a(this,"_worldTransformLast",n.mat4.create()),a(this,"_perObjectData",null)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),e}Update(e,t){this.useSRT&&(n.quat.normalize(this.rotation,this.rotation),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),n.mat4.copy(this._worldTransformLast,this._worldTransform),n.mat4.multiply(this._worldTransform,t,this.localTransform)}GetBatches(e,t,r){this.display&&this.mesh&&(this.useSpaceObjectData?(this._perObjectData||(this._perObjectData=new i.Tw2PerObjectData,this._perObjectData.vs=new i.Tw2RawData,this._perObjectData.vs.data=new Float32Array(r.vs.data.length),this._perObjectData.vs.data[33]=1,this._perObjectData.vs.data[35]=1,this._perObjectData.ps=new i.Tw2RawData,this._perObjectData.ps.data=new Float32Array(r.ps.data.length),this._perObjectData.ps.data[1]=1,this._perObjectData.ps.data[3]=1),this._perObjectData.vs.data.set(r.vs.data),this._perObjectData.ps.data.set(r.ps.data),n.mat4.transpose(this._perObjectData.vs.data,this._worldTransform),n.mat4.transpose(this._perObjectData.vs.data.subarray(16),this._worldTransformLast)):(this._perObjectData||(this._perObjectData=i.Tw2PerObjectData.from(s.EveChild.perObjectData)),n.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),n.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform)),this.mesh.GetBatches(e,t,this._perObjectData))}static black(e){return[["display",e.boolean],["localTransform",e.matrix],["lowestLodVisible",e.uint],["mesh",e.object],["minScreenSize",e.float],["name",e.string],["rotation",e.vector4],["scaling",e.vector3],["sortValueOffset",e.float],["staticTransform",e.boolean],["transformModifiers",e.array],["translation",e.vector3],["useSpaceObjectData",e.boolean],["useSRT",e.boolean]]}}a(o,"__isStaging",1)},"./eve/child/EveChildParticleSphere.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildParticleSphere",function(){return s});var n=r("./eve/child/EveChild.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.EveChild{constructor(){super(...arguments),i(this,"name",""),i(this,"generators",[]),i(this,"maxSpeed",0),i(this,"mesh",null),i(this,"movementScale",0),i(this,"particleSystem",null),i(this,"positionShiftDecreaseSpeed",0),i(this,"positionShiftIncreaseSpeed",0),i(this,"positionShiftMax",0),i(this,"positionShiftMin",0),i(this,"radius",0),i(this,"useSpaceObjectData",!1)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),this.particleSystem&&this.particleSystem.GetResources&&this.particleSystem.GetResources(e),e}static black(e){return[["generators",e.array],["maxSpeed",e.float],["mesh",e.object],["movementScale",e.float],["name",e.string],["particleSystem",e.object],["positionShiftDecreaseSpeed",e.float],["positionShiftIncreaseSpeed",e.float],["positionShiftMax",e.float],["positionShiftMin",e.float],["radius",e.float],["useSpaceObjectData",e.boolean]]}}i(s,"__isStaging",4)},"./eve/child/EveChildParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildParticleSystem",function(){return o});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/child/EveChild.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.EveChild{constructor(){super(...arguments),a(this,"name",""),a(this,"display",!0),a(this,"localTransform",n.mat4.create()),a(this,"lodSphereRadius",0),a(this,"mesh",null),a(this,"minScreenSize",0),a(this,"particleEmitters",[]),a(this,"particleSystems",[]),a(this,"rotation",n.quat.create()),a(this,"scaling",n.vec3.fromValues(1,1,1)),a(this,"translation",n.vec3.create()),a(this,"useDynamicLod",!1),a(this,"useSRT",!0),a(this,"_worldTransform",n.mat4.create()),a(this,"_worldTransformLast",n.mat4.create()),a(this,"_perObjectData",i.Tw2PerObjectData.from(s.EveChild.perObjectData))}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.mesh&&this.mesh.GetResources(e);for(let t=0;t<this.particleEmitters.length;t++)this.particleEmitters[t].GetResources(e);for(let t=0;t<this.particleSystems.length;t++)this.particleSystems[t].GetResources(e);return e}Update(e,t){this.useSRT&&(n.quat.normalize(this.rotation,this.rotation),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),n.mat4.copy(this._worldTransformLast,this._worldTransform),n.mat4.multiply(this._worldTransform,t,this.localTransform);for(let t=0;t<this.particleEmitters.length;++t)this.particleEmitters[t].Update(e);for(let t=0;t<this.particleSystems.length;++t)this.particleSystems[t].Update(e)}GetBatches(e,t){this.display&&this.mesh&&(n.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),n.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform),this.mesh.GetBatches(e,t,this._perObjectData))}static black(e){return[["display",e.boolean],["localTransform",e.matrix],["lodSphereRadius",e.float],["mesh",e.object],["minScreenSize",e.float],["name",e.string],["particleEmitters",e.array],["particleSystems",e.array],["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3],["useDynamicLod",e.boolean]]}}a(o,"__isStaging",1)},"./eve/child/EveChildQuad.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildQuad",function(){return a});var n=r("./global/index.js"),i=r("./eve/child/EveChild.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveChild{constructor(){super(...arguments),s(this,"name",""),s(this,"brightness",0),s(this,"color",n.vec4.create()),s(this,"effect",null),s(this,"localTransform",n.mat4.create()),s(this,"minScreenSize",0),s(this,"rotation",n.quat.create()),s(this,"scaling",n.vec3.fromValues(1,1,1)),s(this,"translation",n.vec3.create())}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}static black(e){return[["brightness",e.float],["color",e.color],["effect",e.object],["localTransform",e.matrix],["minScreenSize",e.float],["name",e.string],["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3]]}}s(a,"__isStaging",4)},"./eve/child/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/child/EveChildBulletStorm.js");r.d(t,"EveChildBulletStorm",function(){return n.EveChildBulletStorm});var i=r("./eve/child/EveChildCloud.js");r.d(t,"EveChildCloud",function(){return i.EveChildCloud});var s=r("./eve/child/EveChildContainer.js");r.d(t,"EveChildContainer",function(){return s.EveChildContainer});var a=r("./eve/child/EveChildExplosion.js");r.d(t,"EveChildExplosion",function(){return a.EveChildExplosion});var o=r("./eve/child/EveChildInheritProperties.js");r.d(t,"EveChildInheritProperties",function(){return o.EveChildInheritProperties});var u=r("./eve/child/EveChildLink.js");r.d(t,"EveChildLink",function(){return u.EveChildLink});var c=r("./eve/child/EveChildMesh.js");r.d(t,"EveChildMesh",function(){return c.EveChildMesh});var l=r("./eve/child/EveChildParticleSphere.js");r.d(t,"EveChildParticleSphere",function(){return l.EveChildParticleSphere});var d=r("./eve/child/EveChildParticleSystem.js");r.d(t,"EveChildParticleSystem",function(){return d.EveChildParticleSystem});var h=r("./eve/child/EveChildQuad.js");r.d(t,"EveChildQuad",function(){return h.EveChildQuad});var f=r("./eve/child/legacy/index.js");r.d(t,"EveChildBillboard",function(){return f.EveChildBillboard});var m=r("./eve/child/modifier/index.js");r.d(t,"EveChildModifierAttachToBone",function(){return m.EveChildModifierAttachToBone}),r.d(t,"EveChildModifierBillboard2D",function(){return m.EveChildModifierBillboard2D}),r.d(t,"EveChildModifierBillboard3D",function(){return m.EveChildModifierBillboard3D}),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",function(){return m.EveChildModifierCameraOrientedRotationConstrained}),r.d(t,"EveChildModifierSRT",function(){return m.EveChildModifierSRT}),r.d(t,"EveChildModifierTranslateWithCamera",function(){return m.EveChildModifierTranslateWithCamera})},"./eve/child/legacy/EveChildBillboard.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildBillboard",function(){return u});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/child/EveChild.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=n.tw2.device;class u extends s.EveChild{constructor(){super(...arguments),a(this,"display",!0),a(this,"localTransform",n.mat4.create()),a(this,"lowestLodVisible",2),a(this,"mesh",null),a(this,"rotation",n.quat.create()),a(this,"translation",n.vec3.create()),a(this,"scaling",n.vec3.fromValues(1,1,1)),a(this,"staticTransform",!1),a(this,"useSRT",!0),a(this,"_perObjectData",i.Tw2PerObjectData.from(s.EveChild.perObjectData)),a(this,"_worldTransform",n.mat4.create()),a(this,"_worldTransformLast",n.mat4.create())}GetResources(e){return this.mesh&&this.mesh.GetResources(e),e}Update(e,t){this.useSRT&&(n.quat.normalize(this.rotation,this.rotation),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)),n.mat4.copy(this._worldTransformLast,this._worldTransform),n.mat4.multiply(this._worldTransform,t,this.localTransform);const r=s.EveChild.global.mat4_0,i=s.EveChild.global.vec3_0;n.mat4.lookAt(r,o.eyePosition,this._worldTransform.subarray(12),[0,1,0]),n.mat4.transpose(r,r),n.mat4.getScaling(i,t),n.vec3.multiply(i,i,this.scaling),this._worldTransform[0]=r[0]*i[0],this._worldTransform[1]=r[1]*i[0],this._worldTransform[2]=r[2]*i[0],this._worldTransform[4]=r[4]*i[1],this._worldTransform[5]=r[5]*i[1],this._worldTransform[6]=r[6]*i[1],this._worldTransform[8]=r[8]*i[2],this._worldTransform[9]=r[9]*i[2],this._worldTransform[10]=r[10]*i[2]}GetBatches(e,t){this.display&&this.mesh&&(n.mat4.transpose(this._perObjectData.ffe.Get("world"),this._worldTransform),n.mat4.invert(this._perObjectData.ffe.Get("worldInverseTranspose"),this._worldTransform),this.mesh.GetBatches(e,t,this._perObjectData))}}},"./eve/child/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/child/legacy/EveChildBillboard.js");r.d(t,"EveChildBillboard",function(){return n.EveChildBillboard})},"./eve/child/modifier/EveChildModifierAttachToBone.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierAttachToBone",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"boneIndex",-1)}static black(e){return[["boneIndex",e.uint]]}}i(s,"__isStaging",4)},"./eve/child/modifier/EveChildModifierBillboard2D.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierBillboard2D",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{}i(s,"black",function(e){return[]}),i(s,"__isStaging",4)},"./eve/child/modifier/EveChildModifierBillboard3D.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierBillboard3D",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{}i(s,"black",function(e){return[]}),i(s,"__isStaging",4)},"./eve/child/modifier/EveChildModifierCameraOrientedRotationConstrained.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{}i(s,"black",function(e){return[]}),i(s,"__isStaging",4)},"./eve/child/modifier/EveChildModifierSRT.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierSRT",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1)),i(this,"translation",n.vec3.create())}static black(e){return[["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3]]}}i(s,"__isStaging",2)},"./eve/child/modifier/EveChildModifierTranslateWithCamera.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveChildModifierTranslateWithCamera",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{}i(s,"black",function(e){return[]}),i(s,"__isStaging",4)},"./eve/child/modifier/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/child/modifier/EveChildModifierAttachToBone.js");r.d(t,"EveChildModifierAttachToBone",function(){return n.EveChildModifierAttachToBone});var i=r("./eve/child/modifier/EveChildModifierBillboard2D.js");r.d(t,"EveChildModifierBillboard2D",function(){return i.EveChildModifierBillboard2D});var s=r("./eve/child/modifier/EveChildModifierBillboard3D.js");r.d(t,"EveChildModifierBillboard3D",function(){return s.EveChildModifierBillboard3D});var a=r("./eve/child/modifier/EveChildModifierCameraOrientedRotationConstrained.js");r.d(t,"EveChildModifierCameraOrientedRotationConstrained",function(){return a.EveChildModifierCameraOrientedRotationConstrained});var o=r("./eve/child/modifier/EveChildModifierSRT.js");r.d(t,"EveChildModifierSRT",function(){return o.EveChildModifierSRT});var u=r("./eve/child/modifier/EveChildModifierTranslateWithCamera.js");r.d(t,"EveChildModifierTranslateWithCamera",function(){return u.EveChildModifierTranslateWithCamera})},"./eve/effect/EveLensflare.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLensflare",function(){return o});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/effect/EveOccluder.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends n.Tw2BaseClass{constructor(){super(),a(this,"name",""),a(this,"backgroundOccluders",[]),a(this,"bindings",[]),a(this,"distanceToCenterCurves",[]),a(this,"distanceToEdgeCurves",[]),a(this,"mesh",null),a(this,"occluders",[]),a(this,"position",n.vec3.create()),a(this,"radialAngleCurves",[]),a(this,"xDistanceToCenter",[]),a(this,"yDistanceToCenter",[]),a(this,"zDistanceToCenter",[]),a(this,"display",!0),a(this,"update",!0),a(this,"doOcclusionQueries",!0),a(this,"cameraFactor",20),a(this,"flares",[]),a(this,"occlusionIntensity",1),a(this,"backgroundOcclusionIntensity",1),a(this,"curveSets",[]),a(this,"_direction",n.vec3.create()),a(this,"_transform",n.mat4.create()),a(this,"_backBuffer",null),o.init()}UpdateOccluders(){if(!this.doOcclusionQueries)return;const e=n.device,t=e.gl,r=o.global;if(!r.occluderLevels[0].texture||r.occluderLevels[0].width<2*this.occluders.length)for(let e=0;e<r.occluderLevels.length;++e)r.occluderLevels[e].Create(2*this.occluders.length,1,!1);for(let e=0;e<this.flares.length;++e)"_backBuffer"in this.flares[e]&&(this.flares[e]._backBuffer.textureRes=r.occluderLevels.texture);this.occlusionIntensity=1,this.backgroundOcclusionIntensity=1,r.occluderLevels[r.occludedLevelIndex].Set(),e.SetStandardStates(e.RM_OPAQUE),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),r.occluderLevels[r.occludedLevelIndex].Unset();let i=1;e.antialiasing&&(i=e.msaaSamples,t.sampleCoverage(1/i,!1));for(let a=0;a<this.occluders.length;++a)e.SetRenderState(n.RS_COLORWRITEENABLE,8),t.colorMask(!1,!1,!1,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e.antialiasing&&(t.enable(t.SAMPLE_COVERAGE),t.sampleCoverage(.25,!1)),this.occluders[a].UpdateValue(this._transform,a),e.antialiasing&&t.disable(t.SAMPLE_COVERAGE),r.backBuffer.texture||r.backBuffer.Attach(t.createTexture()),t.bindTexture(t.TEXTURE_2D,r.backBuffer.texture),r.backBuffer.width===e.viewportWidth&&r.backBuffer.height===e.viewportHeight||(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.viewportWidth,e.viewportHeight,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),r.backBuffer.width=e.viewportWidth,r.backBuffer.height=e.viewportHeight),t.copyTexImage2D(t.TEXTURE_2D,0,e.alphaBlendBackBuffer?t.RGBA:t.RGB,0,0,r.backBuffer.width,r.backBuffer.height,0),t.bindTexture(t.TEXTURE_2D,null),r.occluderLevels[r.occludedLevelIndex].Set(),s.EveOccluder.CollectSamples(r.backBuffer,a,r.occluderLevels[0].width/2,i),r.occluderLevels[r.occludedLevelIndex].Unset();e.antialiasing&&t.sampleCoverage(1,!1),r.occluderLevels[(r.occludedLevelIndex+1)%r.occluderLevels.length].Set();const a=new Uint8Array(4*r.occluderLevels[0].width);t.readPixels(0,0,2,1,t.RGBA,t.UNSIGNED_BYTE,a),r.occluderLevels[(r.occludedLevelIndex+1)%r.occluderLevels.length].Unset(),this.occlusionIntensity=1;for(let e=0;e<2*r.occluderLevels[0].width;e+=4)this.occlusionIntensity*=a[e+1]?a[e]/a[e+1]:1;this.backgroundOcclusionIntensity=this.occlusionIntensity,n.store.variables.SetValue("LensflareFxOccScale",[this.occlusionIntensity,this.occlusionIntensity,0,0]),r.occludedLevelIndex=(r.occludedLevelIndex+1)%r.occluderLevels.length}GetBatches(e,t,r){if(this.display){const i=n.vec4.set(o.global.vec4_0,0,0,1,0);if(n.vec4.transformMat4(i,i,n.device.viewInverse),n.vec3.dot(i,this._direction)<0)return;for(let n=0;n<this.flares.length;++n)this.flares[n].GetBatches(e,t,r);this.mesh&&this.mesh.GetBatches(e,t,r)}}PrepareRender(){if(!this.display)return;const e=o.global,t=e.vec4_0,r=e.vec3_0,i=n.mat4.identity(e.mat4_0),s=e.vec3_2,a=e.vec3_3,u=e.vec3_1,c=e.vec4_1;n.vec3.transformMat4(r,[0,0,0],n.device.viewInverse),0===n.vec3.length(this.position)?n.vec3.negate(u,r):(n.vec3.negate(u,this.position),n.vec3.normalize(this._direction,u)),n.vec4.transformMat4(t,[0,0,1,0],n.device.viewInverse),n.vec3.scaleAndAdd(s,r,t,-this.cameraFactor),n.vec3.negate(a,this._direction),n.mat4.arcFromForward(this._transform,a),n.mat4.setTranslation(this._transform,s),n.mat4.scale(i,i,[this.occlusionIntensity,this.occlusionIntensity,1]);const l=this._direction;n.store.variables.SetValue("LensflareFxDirectionScale",[l[0],l[1],l[2],1]),n.vec4.set(c,l[0],l[1],l[2],0),n.vec4.transformMat4(c,c,n.device.view),n.vec4.transformMat4(c,c,n.device.projection),c[0]/=c[3],c[1]/=c[3];const d=1-Math.min(1-Math.abs(c[0]),1-Math.abs(c[1])),h=Math.sqrt(c[0]*c[0]+c[1]*c[1]),f=Math.atan2(c[1],c[0])+Math.PI;for(let e=0;e<this.distanceToEdgeCurves.length;++e)this.distanceToEdgeCurves[e].UpdateValue(d);for(let e=0;e<this.distanceToCenterCurves.length;++e)this.distanceToCenterCurves[e].UpdateValue(h);for(let e=0;e<this.radialAngleCurves.length;++e)this.radialAngleCurves[e].UpdateValue(f);for(let e=0;e<this.xDistanceToCenter.length;++e)this.xDistanceToCenter[e].UpdateValue(c[0]+10);for(let e=0;e<this.yDistanceToCenter.length;++e)this.yDistanceToCenter[e].UpdateValue(c[1]+10);for(let e=0;e<this.bindings.length;++e)this.bindings[e].CopyValue();for(let e=0;e<this.flares.length;++e)this.flares[e].UpdateViewDependentData(this._transform)}static init(){if(!o.global){const e=o.global={};e.vec3_0=n.vec3.create(),e.vec3_1=n.vec3.create(),e.vec3_2=n.vec3.create(),e.vec3_3=n.vec3.create(),e.vec4_0=n.vec4.create(),e.vec4_1=n.vec4.create(),e.mat4_0=n.mat4.create(),e.backBuffer=new i.Tw2TextureRes,e.backBuffer.width=0,e.backBuffer.height=0,e.backBuffer.hasMipMaps=!1,e.occludedLevelIndex=0,e.occluderLevels=[new i.Tw2RenderTarget,new i.Tw2RenderTarget,new i.Tw2RenderTarget,new i.Tw2RenderTarget]}}static black(e){return[["backgroundOccluders",e.array],["bindings",e.array],["distanceToCenterCurves",e.array],["distanceToEdgeCurves",e.array],["mesh",e.object],["name",e.string],["occluders",e.array],["position",e.vector3],["radialAngleCurves",e.array],["xDistanceToCenter",e.array],["yDistanceToCenter",e.array],["zDistanceToCenter",e.array]]}}a(o,"global",null),a(o,"__isStaging",1)},"./eve/effect/EveMeshOverlayEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMeshOverlayEffect",function(){return u});var n=r("./core/index.js"),i=r("./curve/index.js"),s=r("./global/index.js"),a=r("./global/util/index.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends s.Tw2BaseClass{constructor(){super(...arguments),o(this,"name",""),o(this,"additiveEffects",[]),o(this,"curveSet",null),o(this,"distortionEffects",[]),o(this,"opaqueEffects",[]),o(this,"transparentEffects",[]),o(this,"decalEffects",[]),o(this,"display",!0),o(this,"update",!0),o(this,"visible",{opaqueEffects:!0,decalEffects:!0,transparentEffects:!0,additiveEffects:!0,distortionEffects:!0})}static createAreaEffects(e,t,r){r=Object(a.toArray)(r);for(let i=0;i<r.length;i++){const s=r[i];if(s in t&&s in e)for(let r=0;r<t[s].length;r++)e[s].push(n.Tw2Effect.from(t[s][r]))}}static from(e,t){const r=new u;if(e){Object(a.assignIfExists)(r,e,["name","display","update"]),e.curveSet&&(r.curveSet=i.Tw2CurveSet.from(e.curveSet));const t=["additiveEffects","distortionEffects","opaqueEffects","transparentEffects","decalEffects"];e.visible&&Object(a.assignIfExists)(r.visible,e.visible,t),this.createAreaEffects(r,e,t)}return!t||t.skipUpdate,r}Update(e){this.update&&this.curveSet&&this.curveSet.Update(e)}GetBatches(e,t,r,i){if(!this.display||!i||!i.IsGood())return;const s=this.GetEffects(e);for(let a=0;a<s.length;a++){const o=new n.Tw2GeometryBatch;o.renderMode=e,o.perObjectData=r,o.geometryRes=i.geometryResource,o.meshIx=i.meshIndex,o.start=0,o.count=i.geometryResource.meshes[i.meshIndex].areas.length,o.effect=s[a],t.Commit(o)}}GetEffects(e){if(this.display)switch(e){case s.RM_OPAQUE:if(this.visible.opaqueEffects)return this.opaqueEffects;break;case s.RM_TRANSPARENT:if(this.visible.transparentEffects)return this.transparentEffects;break;case s.RM_ADDITIVE:if(this.visible.additiveEffects)return this.additiveEffects;break;case s.RM_DECAL:if(this.visible.decalEffects)return this.decalEffects;break;case s.RM_DISTORTION:if(this.visible.distortionEffects)return this.distortionEffects}return[]}static black(e){return[["additiveEffects",e.array],["curveSet",e.object],["distortionEffects",e.array],["name",e.string],["opaqueEffects",e.array],["transparentEffects",e.array]]}}o(u,"__isStaging",1)},"./eve/effect/EveOccluder.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveOccluder",function(){return a});var n=r("./global/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2BaseClass{constructor(){super(),s(this,"name",""),s(this,"sprites",[]),a.init()}UpdateValue(e,t){if(!n.device.alphaBlendBackBuffer)return;const r=n.device,i=a.global,s=i.mat4_0,o=i.vec4_0;i.accumulator.Clear();for(let t=0;t<this.sprites.length;++t)this.sprites[t].UpdateViewDependentData(e),this.sprites[t].GetBatches(r.RM_DECAL,i.accumulator);n.store.variables.SetValue("OccluderValue",[(1<<2*t)/255,(2<<2*t)/255,0,0]),i.accumulator.Render(),n.mat4.multiply(s,r.viewProjection,this.sprites[0].worldTransform),n.vec4.transformMat4(o,[0,0,0,1],s);const u=.5*(o[0]/o[3]+1),c=.5*(o[1]/o[3]+1);n.vec4.set(o,.5,.5,0,1),n.vec4.transformMat4(o,o,s);const l=.5*(o[0]/o[3]+1),d=.5*(o[1]/o[3]+1);o[0]=u,o[1]=c,o[2]=l-u,o[3]=d-c,i.effect.parameters.OccluderPosition.SetValue(o)}static CollectSamples(e,t,r,i){const s=n.device,a=this.global,o=a.effect,u=a.vertexBuffer,c=a.decl;if(!o.effectRes||!o.effectRes.IsGood())return!1;o.parameters.BackBuffer.SetTextureRes(e),o.parameters.OccluderIndex.SetValue([t,r,i]),s.SetStandardStates(s.RM_ADDITIVE),s.gl.bindBuffer(s.gl.ARRAY_BUFFER,u);for(let e=0;e<o.GetPassCount("Main");++e){if(o.ApplyPass("Main",e),c.SetDeclaration(s,o.GetPassInput("Main",e),16))return!1;s.ApplyShadowState(),s.gl.drawArrays(s.gl.TRIANGLES,0,1530)}return!0}static init(){if(a.global)return;const e=n.device,t=a.global={};t.mat4_0=n.mat4.create(),t.vec4_0=n.vec4.create(),t.accumulator=new i.Tw2BatchAccumulator,t.effect=i.Tw2Effect.from({name:"Occluder sampler",effectFilePath:"res:/graphics/effect/managed/space/specialfx/lensflares/collectsamples.fx",parameters:{OccluderPosition:[1,1,1,1],OccluderIndex:[1,1,1],BackBuffer:""}}),t.vertexBuffer=null,t.decl=i.Tw2VertexDeclaration.from([{usage:"POSITION",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:0,elements:2}]),t.decl.RebuildHash();const r=new Float32Array(6120);let s=0;for(let e=0;e<16;++e)for(let t=0;t<16;++t){const n=(e+Math.random())/16*2-1,i=(t+Math.random())/16*2-1;r[s++]=1,r[s++]=1,r[s++]=n,r[s++]=i,r[s++]=-1,r[s++]=1,r[s++]=n,r[s++]=i,r[s++]=1,r[s++]=-1,r[s++]=n,r[s++]=i,r[s++]=-1,r[s++]=1,r[s++]=n,r[s++]=i,r[s++]=1,r[s++]=-1,r[s++]=n,r[s++]=i,r[s++]=-1,r[s++]=-1,r[s++]=n,r[s++]=i}t.vertexBuffer=e.gl.createBuffer(),e.gl.bindBuffer(e.gl.ARRAY_BUFFER,t.vertexBuffer),e.gl.bufferData(e.gl.ARRAY_BUFFER,r,e.gl.STATIC_DRAW),e.gl.bindBuffer(e.gl.ARRAY_BUFFER,null)}static black(e){return[["name",e.string],["sprites",e.array]]}}s(a,"global",null)},"./eve/effect/EveStarfield.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStarfield",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"effect",null),i(this,"maxDist",0),i(this,"maxFlashRate",0),i(this,"minDist",0),i(this,"minFlashIntensity",0),i(this,"minFlashRate",0),i(this,"numStars",0),i(this,"seed",0)}static black(e){return[["effect",e.object],["maxDist",e.float],["maxFlashRate",e.float],["minDist",e.float],["minFlashIntensity",e.float],["minFlashRate",e.float],["numStars",e.uint],["seed",e.uint]]}}i(s,"__isStaging",4)},"./eve/effect/EveStretch.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStretch",function(){return a});var n=r("./global/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2BaseClass{constructor(){super(),s(this,"name",""),s(this,"curveSets",[]),s(this,"dest",null),s(this,"destObject",null),s(this,"length",new i.Tw2Float),s(this,"moveCompletion",null),s(this,"moveObject",null),s(this,"progressCurve",null),s(this,"source",null),s(this,"sourceLights",[]),s(this,"sourceObject",null),s(this,"stretchObject",null),s(this,"useCurveLod",!1),s(this,"display",!0),s(this,"update",!0),s(this,"_destinationPosition",n.vec3.create()),s(this,"_displayDestObject",!0),s(this,"_displaySourceObject",!0),s(this,"_isNegZForward",!1),s(this,"_useTransformsForStretch",!1),s(this,"_sourcePosition",n.vec3.create()),s(this,"_sourceTransform",null),s(this,"_time",0),s(this,"_useParentMatrix",!1),a.init()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.source&&this.source.GetResources&&this.source.GetResources(e),this.dest&&this.dest.GetResources&&this.dest.GetResources(e),this.sourceObject&&this.sourceObject.GetResources&&this.sourceObject.GetResources(e),this.destObject&&this.destObject.GetResources&&this.destObject.GetResources(e),this.stretchObject&&this.stretchObject.GetResources&&this.stretchObject.GetResources(e),e}SetSourcePosition(e){this._useTransformsForStretch=!1,n.vec3.copy(this._sourcePosition,e)}SetSourcePositionFromTransform(e){this._useTransformsForStretch=!1,this._sourcePosition[0]=e[12],this._sourcePosition[1]=e[13],this._sourcePosition[2]=e[14]}SetDestinationPosition(e){n.vec3.copy(this._destinationPosition,e)}SetSourceTransform(e){this._useTransformsForStretch=!0,this._sourceTransform=e}SetIsNegZForward(e){this._isNegZForward=e}UpdateViewDependentData(e){if(!this.display)return;const t=a.global,r=n.vec3.subtract(t.vec3_0,this._destinationPosition,this._sourcePosition),i=n.mat4.identity(t.mat4_0),s=n.vec3.set(t.vec3_1,0,0,0),o=n.vec3.set(t.vec3_2,0,0,0),u=n.mat4.identity(t.mat4_1);let c=n.vec3.length(r);n.vec3.normalize(r,r),this._useTransformsForStretch?(n.mat4.rotateX(i,i,-Math.PI/2),n.mat4.multiply(i,this._sourceTransform,i)):(Math.abs(r[1])>.9?o[2]=1:o[1]=1,n.vec3.cross(s,o,r),n.vec3.normalize(s,s),n.vec3.cross(o,r,s),i[0]=s[0],i[1]=s[1],i[2]=s[2],i[4]=-r[0],i[5]=-r[1],i[6]=-r[2],i[8]=o[0],i[9]=o[1],i[10]=o[2],n.mat4.multiply(i,e,i)),this.destObject&&this._displayDestObject&&(n.mat4.setTranslation(i,this._destinationPosition),this.destObject.UpdateViewDependentData(i)),this.sourceObject&&this._displaySourceObject&&(this._useTransformsForStretch?(n.mat4.identity(i),n.mat4.rotateX(i,i,-Math.PI/2),n.mat4.multiply(i,this._sourceTransform,i)):n.mat4.setTranslation(i,this._sourcePosition),this.sourceObject.UpdateViewDependentData(i)),this.stretchObject&&(this._useTransformsForStretch?(n.mat4.identity(i),n.mat4.scale(i,i,[1,1,c]),n.mat4.multiply(i,this._sourceTransform,i)):(i[0]=s[0],i[1]=s[1],i[2]=s[2],i[4]=o[0],i[5]=o[1],i[6]=o[2],i[8]=-r[0],i[9]=-r[1],i[10]=-r[2],this._isNegZForward&&(c=-c),n.mat4.scale(u,u,[1,1,c]),n.mat4.multiply(i,i,u)),this.stretchObject.UpdateViewDependentData(i))}Update(e){for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);this._time+=e,this.source?this.source.GetValueAt(this._time,this._sourcePosition):this._useTransformsForStretch&&(this._sourcePosition[0]=this._sourceTransform[12],this._sourcePosition[1]=this._sourceTransform[13],this._sourcePosition[2]=this._sourceTransform[14]),this.dest&&this.source.GetValueAt(this._time,this._destinationPosition);const t=n.vec3.subtract(a.global.vec3_0,this._destinationPosition,this._sourcePosition);this.length.value=n.vec3.length(t),n.vec3.normalize(t,t),this.sourceObject&&this._displaySourceObject&&this.sourceObject.Update(e),this.destObject&&this._displayDestObject&&this.destObject.Update(e),this.stretchObject&&this.stretchObject.Update(e)}GetBatches(e,t,r){this.display&&(this.sourceObject&&this._displaySourceObject&&this.sourceObject.GetBatches(e,t,r),this.destObject&&this._displayDestObject&&this.destObject.GetBatches(e,t,r),this.stretchObject&&this.stretchObject.GetBatches(e,t,r))}static init(){a.global||(a.global={vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec3_2:n.vec3.create(),mat4_0:n.mat4.create(),mat4_1:n.mat4.create()})}static black(e){return[["curveSets",e.array],["dest",e.object],["destObject",e.object],["length",e.object],["moveCompletion",e.object],["moveObject",e.object],["name",e.string],["progressCurve",e.object],["source",e.object],["sourceLights",e.array],["sourceObject",e.object],["stretchObject",e.object],["useCurveLod",e.boolean]]}}s(a,"global",null),s(a,"__isStaging",1)},"./eve/effect/EveStretch2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStretch2",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"destinationEmitter",null),i(this,"destinationLight",null),i(this,"effect",null),i(this,"loop",null),i(this,"sourceEmitter",null),i(this,"sourceLight",null),i(this,"quadCount",0)}static black(e){return[["destinationEmitter",e.object],["destinationLight",e.object],["effect",e.object],["loop",e.object],["name",e.string],["sourceEmitter",e.object],["sourceLight",e.object],["quadCount",e.uint]]}}i(s,"__isStaging",4)},"./eve/effect/EveTurretFiringFX.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePerMuzzleData",function(){return s}),r.d(t,"EveTurretFiringFX",function(){return a});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"constantDelay",0),i(this,"currentStartDelay",0),i(this,"elapsedTime",0),i(this,"muzzlePositionBone",null),i(this,"muzzleTransform",n.mat4.create()),i(this,"readyToStart",!1),i(this,"started",!1)}}class a extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"boneName",""),i(this,"destinationObserver",null),i(this,"firingDelay1",0),i(this,"firingDelay2",0),i(this,"firingDelay3",0),i(this,"firingDelay4",0),i(this,"firingDurationOverride",0),i(this,"firingPeakTime",0),i(this,"isLoopFiring",!1),i(this,"maxRadius",0),i(this,"maxScale",0),i(this,"minRadius",0),i(this,"minScale",0),i(this,"scaleEffectTarget",!1),i(this,"sourceObserver",null),i(this,"startCurveSet",null),i(this,"stopCurveSet",null),i(this,"stretch",[]),i(this,"useMuzzleTransform",!1),i(this,"display",!0),i(this,"firingDelay5",0),i(this,"firingDelay6",0),i(this,"firingDelay7",0),i(this,"firingDelay8",0),i(this,"_endPosition",n.vec3.create()),i(this,"_firingDuration",0),i(this,"_isFiring",!1),i(this,"_perMuzzleData",[])}Initialize(){this._firingDuration=this.GetCurveDuration();for(let e=0;e<this.stretch.length;++e)this._perMuzzleData[e]=new s;const e=this._perMuzzleData;e.length>0&&(e[0].constantDelay=this.firingDelay1),e.length>1&&(e[1].constantDelay=this.firingDelay2),e.length>2&&(e[2].constantDelay=this.firingDelay3),e.length>3&&(e[3].constantDelay=this.firingDelay4),e.length>4&&(e[4].constantDelay=this.firingDelay5),e.length>5&&(e[5].constantDelay=this.firingDelay6),e.length>6&&(e[6].constantDelay=this.firingDelay7),e.length>7&&(e[7].constantDelay=this.firingDelay8)}GetCurveDuration(){let e=0;for(let t=0;t<this.stretch.length;++t){const r=this.stretch[t];for(let t=0;t<r.curveSets.length;++t)e=Math.max(e,r.curveSets[t].GetMaxCurveDuration())}return e}GetPerMuzzleEffectCount(){return this.stretch.length}SetEndPosition(e){this._endPosition[0]=e[0],this._endPosition[1]=e[1],this._endPosition[2]=e[2]}SetMuzzleBoneID(e,t){this._perMuzzleData[e].muzzlePositionBone=t}GetMuzzleTransform(e){return this._perMuzzleData[e].muzzleTransform}PrepareFiring(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let r=0;r<this.stretch.length;++r)t<0||t===r?(this._perMuzzleData[r].currentStartDelay=e+this._perMuzzleData[r].constantDelay,this._perMuzzleData[r].started=!1,this._perMuzzleData[r].readyToStart=!1,this._perMuzzleData[r].elapsedTime=0):(this._perMuzzleData[r].currentStartDelay=Number.MAX_VALUE,this._perMuzzleData[r].started=!1,this._perMuzzleData[r].readyToStart=!1,this._perMuzzleData[r].elapsedTime=0);this._isFiring=!0}StartMuzzleEffect(e){const t=this.stretch[e];for(let r=0;r<t.curveSets.length;++r){const n=t.curveSets[r];switch(n.name){case"play_start":case"play_loop":n.PlayFrom(-this._perMuzzleData[e].currentStartDelay);break;case"play_stop":n.Stop()}}this._perMuzzleData[e].started=!0,this._perMuzzleData[e].readyToStart=!1}StopFiring(){for(let e=0;e<this.stretch.length;++e){const t=this.stretch[e];for(let e=0;e<t.curveSets.length;++e){const r=t.curveSets[e];switch(r.name){case"play_start":case"play_loop":r.Stop();break;case"play_stop":r.Play()}}this._perMuzzleData[e].started=!1,this._perMuzzleData[e].readyToStart=!1,this._perMuzzleData[e].currentStartDelay=0,this._perMuzzleData[e].elapsedTime=0}this._isFiring=!1}UpdateViewDependentData(e){for(let t=0;t<this.stretch.length;++t)this.stretch[t].UpdateViewDependentData(e)}Update(e){for(let t=0;t<this.stretch.length;++t)this._perMuzzleData[t].started&&(this._perMuzzleData[t].elapsedTime+=e),(this._perMuzzleData[t].elapsedTime<this._firingDuration||this.isLoopFiring)&&this._isFiring&&(this._perMuzzleData[t].started?(this.useMuzzleTransform?this.stretch[t].SetSourceTransform(this._perMuzzleData[t].muzzleTransform):this.stretch[t].SetSourcePositionFromTransform(this._perMuzzleData[t].muzzleTransform),this.stretch[t].SetDestinationPosition(this._endPosition),this.stretch[t].SetIsNegZForward(!0)):(this._perMuzzleData[t].readyToStart?(this.StartMuzzleEffect(t),this._perMuzzleData[t].currentStartDelay=0,this._perMuzzleData[t].elapsedTime=0):this._perMuzzleData[t].currentStartDelay-=e,this._perMuzzleData[t].currentStartDelay<=0&&(this._perMuzzleData[t].readyToStart=!0))),this.stretch[t].Update(e)}GetBatches(e,t,r){if(this.display&&this._isFiring)for(let n=0;n<this.stretch.length;++n)this._perMuzzleData[n].started&&(this._firingDuration>=this._perMuzzleData[n].elapsedTime||this.isLoopFiring)&&this.stretch[n].GetBatches(e,t,r)}static black(e){return[["boneName",e.string],["destinationObserver",e.object],["firingDelay1",e.float],["firingDelay2",e.float],["firingDelay3",e.float],["firingDelay4",e.float],["firingDurationOverride",e.float],["firingPeakTime",e.float],["isLoopFiring",e.boolean],["maxRadius",e.float],["maxScale",e.float],["minRadius",e.float],["minScale",e.float],["name",e.string],["scaleEffectTarget",e.boolean],["sourceObserver",e.object],["startCurveSet",e.object],["stopCurveSet",e.object],["stretch",e.array],["useMuzzleTransform",e.boolean]]}}i(a,"__isStaging",1)},"./eve/effect/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/effect/EveLensflare.js");r.d(t,"EveLensflare",function(){return n.EveLensflare});var i=r("./eve/effect/EveMeshOverlayEffect.js");r.d(t,"EveMeshOverlayEffect",function(){return i.EveMeshOverlayEffect});var s=r("./eve/effect/EveOccluder.js");r.d(t,"EveOccluder",function(){return s.EveOccluder});var a=r("./eve/effect/EveStarfield.js");r.d(t,"EveStarfield",function(){return a.EveStarfield});var o=r("./eve/effect/EveStretch.js");r.d(t,"EveStretch",function(){return o.EveStretch});var u=r("./eve/effect/EveStretch2.js");r.d(t,"EveStretch2",function(){return u.EveStretch2});var c=r("./eve/effect/EveTurretFiringFX.js");r.d(t,"EvePerMuzzleData",function(){return c.EvePerMuzzleData}),r.d(t,"EveTurretFiringFX",function(){return c.EveTurretFiringFX})},"./eve/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/animation/index.js");r.d(t,"EveAnimation",function(){return n.EveAnimation}),r.d(t,"EveAnimationCommand",function(){return n.EveAnimationCommand}),r.d(t,"EveAnimationCurve",function(){return n.EveAnimationCurve}),r.d(t,"EveAnimationState",function(){return n.EveAnimationState}),r.d(t,"EveAnimationStateMachine",function(){return n.EveAnimationStateMachine});var i=r("./eve/child/index.js");r.d(t,"EveChildBulletStorm",function(){return i.EveChildBulletStorm}),r.d(t,"EveChildCloud",function(){return i.EveChildCloud}),r.d(t,"EveChildContainer",function(){return i.EveChildContainer}),r.d(t,"EveChildExplosion",function(){return i.EveChildExplosion}),r.d(t,"EveChildInheritProperties",function(){return i.EveChildInheritProperties}),r.d(t,"EveChildLink",function(){return i.EveChildLink}),r.d(t,"EveChildMesh",function(){return i.EveChildMesh}),r.d(t,"EveChildParticleSphere",function(){return i.EveChildParticleSphere}),r.d(t,"EveChildParticleSystem",function(){return i.EveChildParticleSystem}),r.d(t,"EveChildQuad",function(){return i.EveChildQuad}),r.d(t,"EveChildBillboard",function(){return i.EveChildBillboard}),r.d(t,"EveChildModifierAttachToBone",function(){return i.EveChildModifierAttachToBone}),r.d(t,"EveChildModifierBillboard2D",function(){return i.EveChildModifierBillboard2D}),r.d(t,"EveChildModifierBillboard3D",function(){return i.EveChildModifierBillboard3D}),r.d(t,"EveChildModifierCameraOrientedRotationConstrained",function(){return i.EveChildModifierCameraOrientedRotationConstrained}),r.d(t,"EveChildModifierSRT",function(){return i.EveChildModifierSRT}),r.d(t,"EveChildModifierTranslateWithCamera",function(){return i.EveChildModifierTranslateWithCamera});var s=r("./eve/effect/index.js");r.d(t,"EveLensflare",function(){return s.EveLensflare}),r.d(t,"EveMeshOverlayEffect",function(){return s.EveMeshOverlayEffect}),r.d(t,"EveOccluder",function(){return s.EveOccluder}),r.d(t,"EveStarfield",function(){return s.EveStarfield}),r.d(t,"EveStretch",function(){return s.EveStretch}),r.d(t,"EveStretch2",function(){return s.EveStretch2}),r.d(t,"EvePerMuzzleData",function(){return s.EvePerMuzzleData}),r.d(t,"EveTurretFiringFX",function(){return s.EveTurretFiringFX});var a=r("./eve/item/index.js");r.d(t,"EveBanner",function(){return a.EveBanner}),r.d(t,"EveBoosterSet2Batch",function(){return a.EveBoosterSet2Batch}),r.d(t,"EveBoosterSet2Item",function(){return a.EveBoosterSet2Item}),r.d(t,"EveBoosterSet2",function(){return a.EveBoosterSet2}),r.d(t,"EveCurveLineSetItem",function(){return a.EveCurveLineSetItem}),r.d(t,"EveCurveLineSet",function(){return a.EveCurveLineSet}),r.d(t,"EveCustomMask",function(){return a.EveCustomMask}),r.d(t,"EveHazeSetBatch",function(){return a.EveHazeSetBatch}),r.d(t,"EveHazeSetItem",function(){return a.EveHazeSetItem}),r.d(t,"EveHazeSet",function(){return a.EveHazeSet}),r.d(t,"EveLocator2",function(){return a.EveLocator2}),r.d(t,"EveLocator",function(){return a.EveLocator}),r.d(t,"EveObjectSetItem",function(){return a.EveObjectSetItem}),r.d(t,"EveObjectSet",function(){return a.EveObjectSet}),r.d(t,"EvePlaneSetBatch",function(){return a.EvePlaneSetBatch}),r.d(t,"EvePlaneSetItem",function(){return a.EvePlaneSetItem}),r.d(t,"EvePlaneSet",function(){return a.EvePlaneSet}),r.d(t,"EveSpaceObjectDecal",function(){return a.EveSpaceObjectDecal}),r.d(t,"EveSpotlightSetBatch",function(){return a.EveSpotlightSetBatch}),r.d(t,"EveSpotlightSetItem",function(){return a.EveSpotlightSetItem}),r.d(t,"EveSpotlightSet",function(){return a.EveSpotlightSet}),r.d(t,"EveSpriteLineSetBatch",function(){return a.EveSpriteLineSetBatch}),r.d(t,"EveSpriteLineSetItem",function(){return a.EveSpriteLineSetItem}),r.d(t,"EveSpriteLineSet",function(){return a.EveSpriteLineSet}),r.d(t,"EveSpriteSetBatch",function(){return a.EveSpriteSetBatch}),r.d(t,"EveSpriteSetItem",function(){return a.EveSpriteSetItem}),r.d(t,"EveSpriteSet",function(){return a.EveSpriteSet}),r.d(t,"EveTrailSetRenderBatch",function(){return a.EveTrailSetRenderBatch}),r.d(t,"EveTrailsSet",function(){return a.EveTrailsSet}),r.d(t,"EveTurretSetItem",function(){return a.EveTurretSetItem}),r.d(t,"EveTurretSet",function(){return a.EveTurretSet}),r.d(t,"EveBoosterBatch",function(){return a.EveBoosterBatch}),r.d(t,"EveBoosterSetItem",function(){return a.EveBoosterSetItem}),r.d(t,"EveBoosterSet",function(){return a.EveBoosterSet});var o=r("./eve/object/index.js");r.d(t,"EveEffectRoot2",function(){return o.EveEffectRoot2}),r.d(t,"EveMissileWarhead",function(){return o.EveMissileWarhead}),r.d(t,"EveMissile",function(){return o.EveMissile}),r.d(t,"EveMobile",function(){return o.EveMobile}),r.d(t,"EveRootTransform",function(){return o.EveRootTransform}),r.d(t,"EveShip2",function(){return o.EveShip2}),r.d(t,"EveStation2",function(){return o.EveStation2}),r.d(t,"EveTransform",function(){return o.EveTransform}),r.d(t,"EveEffectRoot",function(){return o.EveEffectRoot}),r.d(t,"EvePlanet",function(){return o.EvePlanet}),r.d(t,"EveShip",function(){return o.EveShip}),r.d(t,"EveSpaceObject",function(){return o.EveSpaceObject}),r.d(t,"EveStation",function(){return o.EveStation});var u=r("./eve/particle/index.js");r.d(t,"EveParticleDirectForce",function(){return u.EveParticleDirectForce}),r.d(t,"EveParticleDragForce",function(){return u.EveParticleDragForce});var c=r("./eve/pi/index.js");r.d(t,"EveConnector",function(){return c.EveConnector}),r.d(t,"EveLocalPositionCurve",function(){return c.EveLocalPositionCurve}),r.d(t,"EveSpherePin",function(){return c.EveSpherePin});var l=r("./eve/ui/index.js");r.d(t,"EveTacticalOverlay",function(){return l.EveTacticalOverlay}),r.d(t,"EveUiObject",function(){return l.EveUiObject});var d=r("./eve/EveCamera.js");r.d(t,"EveCamera",function(){return d.EveCamera});var h=r("./eve/EveLineContainer.js");r.d(t,"EveLineContainer",function(){return h.EveLineContainer});var f=r("./eve/EveSpaceScene.js");r.d(t,"EveSpaceScene",function(){return f.EveSpaceScene})},"./eve/item/EveBanner.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBanner",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"angleX",0),i(this,"angleY",0),i(this,"boneIndex",0),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1)),i(this,"usage",0),i(this,"display",!0),i(this,"transform",n.mat4.create())}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling)}}},"./eve/item/EveBoosterSet2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBoosterSet2Batch",function(){return o}),r.d(t,"EveBoosterSet2Item",function(){return u}),r.d(t,"EveBoosterSet2",function(){return c});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/item/EveObjectSet.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends i.Tw2RenderBatch{constructor(){super(...arguments),a(this,"boosterSet",null)}Commit(e){this.boosterSet.Render(e)}}class u extends s.EveObjectSetItem{}a(u,"__isStaging",4);class c extends s.EveObjectSet{constructor(){super(...arguments),a(this,"alwaysOn",!1),a(this,"alwaysOnIntensity",0),a(this,"effect",null),a(this,"glowColor",n.vec4.create()),a(this,"glowScale",0),a(this,"glows",null),a(this,"haloColor",n.vec4.create()),a(this,"haloScaleX",0),a(this,"haloScaleY",0),a(this,"lightColor",n.vec4.create()),a(this,"lightFlickerAmplitude",0),a(this,"lightFlickerFrequency",0),a(this,"lightRadius",0),a(this,"lightWarpColor",n.vec4.create()),a(this,"lightWarpRadius",0),a(this,"symHaloScale",0),a(this,"trails",null),a(this,"warpGlowColor",n.vec4.create()),a(this,"warpHaloColor",n.vec4.create())}static black(e){return[["alwaysOn",e.boolean],["alwaysOnIntensity",e.float],["effect",e.object],["glows",e.object],["glowColor",e.color],["glowScale",e.float],["haloColor",e.color],["haloScaleX",e.float],["haloScaleY",e.float],["lightFlickerAmplitude",e.float],["lightFlickerColor",e.color],["lightFlickerFrequency",e.float],["lightFlickerRadius",e.float],["lightColor",e.color],["lightRadius",e.float],["lightWarpColor",e.color],["lightWarpRadius",e.float],["symHaloScale",e.float],["trails",e.object],["warpGlowColor",e.color],["warpHaloColor",e.color]]}}a(c,"__isStaging",4)},"./eve/item/EveCurveLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCurveLineSetItem",function(){return o}),r.d(t,"EveCurveLineSet",function(){return u});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/item/EveObjectSet.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.EveObjectSetItem{constructor(){super(...arguments),a(this,"animationSpeed",0),a(this,"animationScale",1),a(this,"color1",n.vec4.fromValues(1,1,1,1)),a(this,"color2",n.vec4.fromValues(1,1,1,1)),a(this,"intermediatePosition",n.vec3.create()),a(this,"multiColor",n.vec4.fromValues(0,0,0,1)),a(this,"multiColorBorder",-1),a(this,"numOfSegments",1),a(this,"overlayColor",n.vec4.fromValues(0,0,0,1)),a(this,"position1",n.vec3.create()),a(this,"position2",n.vec3.create()),a(this,"type",o.Type.INVALID),a(this,"width",1)}ChangeColor(e,t){n.vec3.copy(this.color1,e),n.vec3.copy(this.color2,t),this.OnValueChanged()}ChangeWidth(e){this.width=e,this.OnValueChanged()}ChangeCartesian(e,t,r){n.vec3.copy(this.position1,e),n.vec3.copy(this.position2,t),n.vec3.copy(this.intermediatePosition,r),this.OnValueChanged()}ChangePositionCartesian(e,t){n.vec3.copy(this.position1,e),n.vec3.copy(this.position2,t),this.OnValueChanged()}ChangeIntermediateCartesian(e){n.vec3.copy(this.intermediatePosition,e),this.OnValueChanged()}ChangeSpherical(e,t,r,i){n.vec3.fromSpherical(this.position1,e,i),n.vec3.fromSpherical(this.position2,t,i),n.vec3.fromSpherical(this.intermediatePosition,r,i),this.OnValueChanged()}ChangePositionSpherical(e,t,r){n.vec3.fromSpherical(this.position1,e,r),n.vec3.fromSpherical(this.position2,t,r),this.OnValueChanged()}ChangeIntermediateSpherical(e,t){n.vec3.fromSpherical(this.intermediatePosition,e,t),this.OnValueChanged()}ChangeMultiColor(e,t){n.vec4.copy(this.multiColor,e),this.multiColorBorder=t,this.OnValueChanged()}ChangeAnimation(e,t,r){n.vec4.copy(this.overlayColor,e),this.animationSpeed=t,this.animationScale=r,this.OnValueChanged()}ChangeSegmentation(e){this.type!==o.Type.STRAIGHT&&(this.numOfSegments=e,this.OnValueChanged())}static from(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new this;return n.util.assignIfExists(t,e,["name","display","type","position1","color1","position2","color2","intermediatePosition","width","multiColor","multiColorBorder","overlayColor","animationSpeed","animationScale","numOfSegments"]),t}}a(o,"Type",{INVALID:0,STRAIGHT:1,SPHERED:2,CURVED:3}),a(o,"DEFAULT_CURVED_SEGMENTS",20),a(o,"DEFAULT_SPHERED_SEGMENTS",20);class u extends s.EveObjectSet{constructor(){super(),a(this,"lineEffect",i.Tw2Effect.from({effectFilePath:"res:/Graphics/Effect/Managed/Space/SpecialFX/Lines3D.fx",textures:{TexMap:"res:/texture/global/white.dds.0.png",OverlayTexMap:"res:/texture/global/white.dds.0.png"}})),a(this,"pickEffect",null),a(this,"lineWidthFactor",1),a(this,"additive",!1),a(this,"depthOffset",0),a(this,"pickable",!0),a(this,"rotation",n.quat.create()),a(this,"scaling",n.vec3.fromValues(1,1,1)),a(this,"translation",n.vec3.create()),a(this,"transform",n.mat4.create()),a(this,"_parentTransform",n.mat4.create()),a(this,"_vertexSize",26),a(this,"_vbSize",0),a(this,"_vb",null),a(this,"_perObjectData",i.Tw2PerObjectData.from(u.perObjectData)),a(this,"_decl",i.Tw2VertexDeclaration.from(u.vertexDeclarations).SetStride(104)),u.init()}get lines(){return this.items}set lines(e){this.items=e}get lineCount(){let e=0;for(let t=0;t<this.items.length;t++)this.items[t].type!==o.Type.INVALID&&(e+=this.items[t].numOfSegments);return e}Initialize(){this.OnValueChanged(),this.Rebuild()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.lineEffect&&this.lineEffect.GetResources(e),e}AddStraightLine(e,t,r,n,i){return this.CreateItem({type:o.Type.STRAIGHT,position1:e,position2:t,color1:n,color2:i,width:r})}AddCurvedLineCrt(e,t,r,n,i,s){return this.CreateItem({type:o.Type.CURVED,position1:e,position2:t,intermediatePosition:r,color1:i,color2:s,width:n,numOfSegments:o.DEFAULT_CURVED_SEGMENTS})}AddCurvedLineSph(e,t,r,i,s,a,c){const l=u.global;return this.CreateItem({type:o.Type.CURVED,position1:n.vec3.fromSpherical(l.vec3_0,e,r),position2:n.vec3.fromSpherical(l.vec3_1,t,r),intermediatePosition:n.vec3.fromSpherical(l.vec3_2,i,r),color1:a,color2:c,width:s,numOfSegments:o.DEFAULT_CURVED_SEGMENTS})}AddSpheredLineCrt(e,t,r,n,i,s){return this.CreateItem({type:o.Type.SPHERED,position1:e,position2:t,intermediatePosition:r,color1:i,color2:s,width:n,numOfSegments:o.DEFAULT_SPHERED_SEGMENTS})}AddSpheredLineSph(e,t,r,i,s,a,c){const l=u.global;return this.CreateItem({type:o.Type.SPHERED,position1:n.vec3.fromSpherical(l.vec3_0,e,r),position2:n.vec3.fromSpherical(l.vec3_1,t,r),intermediatePosition:n.vec3.fromSpherical(l.vec3_2,i,r),color1:a,color2:c,width:s,numOfSegments:o.DEFAULT_SPHERED_SEGMENTS})}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.translation,this.scaling),this._dirty=!0}UpdateViewDependentData(e){n.mat4.copy(this._parentTransform,e)}Unload(e){this._vb&&(n.device.gl.deleteBuffer(this._vb),this._vb=null),super.Unload(e)}Rebuild(){this.Unload(!0),this.RebuildItems(),this._vbSize=this.lineCount,this._dirty=!1;const e=this._visibleItems.length;if(!e)return void super.Rebuild();const t=u.global,r=new Float32Array(6*this._vbSize*this._vertexSize),i=t.vec3_0,s=t.vec3_1,a=t.vec3_2,c=t.vec3_3,l=t.vec3_4,d=t.vec3_5,h=t.vec3_6,f=t.mat4_0;let m,v=t.vec3_7,p=t.vec3_8,E=t.vec3_9,_=t.vec3_10,g=t.vec4_0,S=t.vec4_1,T=0;for(let t=0;t<e;++t){const e=this._visibleItems[t];switch(e.type){case o.Type.INVALID:break;case o.Type.STRAIGHT:u.WriteLineVerticesToBuffer(this,e.position1,e.color1,0,e.position2,e.color2,1,t,r,T),T+=6*this._vertexSize;break;case o.Type.SPHERED:n.vec3.subtract(i,e.position1,e.intermediatePosition),n.vec3.subtract(s,e.position2,e.intermediatePosition),n.vec3.normalize(a,i),n.vec3.normalize(c,s),n.vec3.cross(l,i,s);const b=Math.acos(n.vec3.dot(a,c))/e.numOfSegments;n.mat4.identity(f),n.mat4.rotate(f,f,b,l),n.vec3.copy(v,i),n.vec4.copy(g,e.color1);for(let i=0;i<this.lines[t].numOfSegments;++i){const s=(i+1)/e.numOfSegments;n.vec3.transformMat4(p,v,f),S[0]=e.color1[0]*(1-s)+e.color2[0]*s,S[1]=e.color1[1]*(1-s)+e.color2[1]*s,S[2]=e.color1[2]*(1-s)+e.color2[2]*s,S[3]=e.color1[3]*(1-s)+e.color2[3]*s,n.vec3.add(E,v,e.intermediatePosition),n.vec3.add(_,p,e.intermediatePosition),u.WriteLineVerticesToBuffer(this,E,g,i/e.numOfSegments,_,S,s,t,r,T),T+=6*this._vertexSize,m=v,v=p,p=m,m=g,g=S,S=m}break;case o.Type.CURVED:n.vec3.subtract(d,e.intermediatePosition,e.position1),n.vec3.subtract(h,e.position2,e.intermediatePosition),n.vec3.copy(E,e.position1),n.vec3.copy(g,e.color1);for(let i=0;i<e.numOfSegments;++i){const s=(i+1)/e.numOfSegments;n.vec3.hermite(_,e.position1,d,e.position2,h,s),S[0]=e.color1[0]*(1-s)+e.color2[0]*s,S[1]=e.color1[1]*(1-s)+e.color2[1]*s,S[2]=e.color1[2]*(1-s)+e.color2[2]*s,S[3]=e.color1[3]*(1-s)+e.color2[3]*s,u.WriteLineVerticesToBuffer(this,E,g,i/e.numOfSegments,_,S,s,t,r,T),T+=6*this._vertexSize,m=E,E=_,_=m,m=g,g=S,S=m}}}this._vb=n.device.gl.createBuffer(),n.device.gl.bindBuffer(n.device.gl.ARRAY_BUFFER,this._vb),n.device.gl.bufferData(n.device.gl.ARRAY_BUFFER,r,n.device.gl.STATIC_DRAW),n.device.gl.bindBuffer(n.device.gl.ARRAY_BUFFER,null),super.Rebuild()}GetBatches(e,t,r){if(!this.display||!this._vb)return;let s;switch(e){case n.device.RM_TRANSPARENT:if(this.additive||!this.lineEffect)return;s=this.lineEffect;break;case n.device.RM_ADDITIVE:if(!this.additive||!this.lineEffect)return;s=this.lineEffect;break;case n.device.RM_PICKABLE:if(!this.pickable||!this.pickEffect)return;s=this.pickEffect}const a=new i.Tw2ForwardingRenderBatch,o=u.global.mat4_0;n.mat4.multiply(o,this.transform,this._parentTransform),n.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),o),n.mat4.transpose(this._perObjectData.ps.Get("WorldMat"),o),a.perObjectData=this._perObjectData,a.geometryProvider=this,a.renderMode=e,a.effect=s,t.Commit(a)}Render(e,t){if(!e.effect||!e.effect.IsGood()||!this._vb)return!1;const r=n.device,i=r.gl;i.bindBuffer(i.ARRAY_BUFFER,this._vb);let s=e.effect.GetPassCount(t);for(let n=0;n<s;++n){e.effect.ApplyPass(t,n);let s=e.effect.GetPassInput(t,n);if(!this._decl.SetDeclaration(r,s,this._decl.stride))return!1;r.ApplyShadowState(),i.drawArrays(i.TRIANGLES,0,6*this._vbSize)}return!0}static FillColorVertices(e,t,r){return t[r++]=e.multiColor[0],t[r++]=e.multiColor[1],t[r++]=e.multiColor[2],t[r++]=e.multiColor[3],t[r++]=e.overlayColor[0],t[r++]=e.overlayColor[1],t[r++]=e.overlayColor[2],t[r++]=e.overlayColor[3],r}static WriteLineVerticesToBuffer(e,t,r,n,i,s,a,o,c,l){const d=e.items[o];c[l++]=t[0],c[l++]=t[1],c[l++]=t[2],c[l++]=i[0]-t[0],c[l++]=i[1]-t[1],c[l++]=i[2]-t[2],c[l++]=-e.lineWidthFactor*d.width,c[l++]=0,c[l++]=n,c[l++]=d.multiColorBorder,c[l++]=a-n,c[l++]=d.animationSpeed,c[l++]=d.animationScale,c[l++]=o,c[l++]=r[0],c[l++]=r[1],c[l++]=r[2],c[l++]=r[3],l=u.FillColorVertices(d,c,l),c[l++]=t[0],c[l++]=t[1],c[l++]=t[2],c[l++]=i[0]-t[0],c[l++]=i[1]-t[1],c[l++]=i[2]-t[2],c[l++]=e.lineWidthFactor*d.width,c[l++]=0,c[l++]=n,c[l++]=d.multiColorBorder,c[l++]=a-n,c[l++]=d.animationSpeed,c[l++]=d.animationScale,c[l++]=o,c[l++]=r[0],c[l++]=r[1],c[l++]=r[2],c[l++]=r[3],l=u.FillColorVertices(d,c,l),c[l++]=i[0],c[l++]=i[1],c[l++]=i[2],c[l++]=t[0]-i[0],c[l++]=t[1]-i[1],c[l++]=t[2]-i[2],c[l++]=-e.lineWidthFactor*d.width,c[l++]=1,c[l++]=a,c[l++]=d.multiColorBorder,c[l++]=a-n,c[l++]=d.animationSpeed,c[l++]=d.animationScale,c[l++]=o,c[l++]=s[0],c[l++]=s[1],c[l++]=s[2],c[l++]=s[3],l=u.FillColorVertices(d,c,l),c[l++]=t[0],c[l++]=t[1],c[l++]=t[2],c[l++]=i[0]-t[0],c[l++]=i[1]-t[1],c[l++]=i[2]-t[2],c[l++]=e.lineWidthFactor*d.width,c[l++]=0,c[l++]=n,c[l++]=d.multiColorBorder,c[l++]=a-n,c[l++]=d.animationSpeed,c[l++]=d.animationScale,c[l++]=o,c[l++]=r[0],c[l++]=r[1],c[l++]=r[2],c[l++]=r[3],l=u.FillColorVertices(d,c,l),c[l++]=i[0],c[l++]=i[1],c[l++]=i[2],c[l++]=t[0]-i[0],c[l++]=t[1]-i[1],c[l++]=t[2]-i[2],c[l++]=e.lineWidthFactor*d.width,c[l++]=1,c[l++]=a,c[l++]=d.multiColorBorder,c[l++]=a-n,c[l++]=d.animationSpeed,c[l++]=d.animationScale,c[l++]=o,c[l++]=s[0],c[l++]=s[1],c[l++]=s[2],c[l++]=s[3],l=u.FillColorVertices(d,c,l),c[l++]=i[0],c[l++]=i[1],c[l++]=i[2],c[l++]=t[0]-i[0],c[l++]=t[1]-i[1],c[l++]=t[2]-i[2],c[l++]=-e.lineWidthFactor*d.width,c[l++]=1,c[l++]=a,c[l++]=d.multiColorBorder,c[l++]=a-n,c[l++]=d.animationSpeed,c[l++]=d.animationScale,c[l++]=o,c[l++]=s[0],c[l++]=s[1],c[l++]=s[2],c[l++]=s[3],u.FillColorVertices(d,c,l)}static init(){u.global||(u.global={vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec3_2:n.vec3.create(),vec3_3:n.vec3.create(),vec3_4:n.vec3.create(),vec3_5:n.vec3.create(),vec3_6:n.vec3.create(),vec3_7:n.vec3.create(),vec3_8:n.vec3.create(),vec3_9:n.vec3.create(),vec3_10:n.vec3.create(),vec4_0:n.vec4.create(),vec4_1:n.vec4.create(),mat4_0:n.mat4.create()})}static black(e){return[["lineEffect",e.object],["pickEffect",e.object]]}}a(u,"Item",o),a(u,"global",null),a(u,"perObjectData",{vs:[["WorldMat",16]],ps:[["WorldMat",16]]}),a(u,"vertexDeclarations",[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:3},{usage:"COLOR",usageIndex:0,elements:4},{usage:"COLOR",usageIndex:1,elements:4},{usage:"COLOR",usageIndex:2,elements:4}]),a(u,"__isStaging",1)},"./eve/item/EveCustomMask.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveCustomMask",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"materialIndex",0),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1)),i(this,"targetMaterials",n.vec4.create()),i(this,"display",!0),i(this,"isMirrored",!1),i(this,"localTransform",n.mat4.create()),i(this,"_dirty",!0),i(this,"_parentTransformLast",n.mat4.create()),i(this,"_maskMatrix",n.mat4.create())}Initialize(){n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.position,this.scaling)}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.position,this.scaling),this._dirty=!0}UpdatePerObjectData(e,t,r,i){(this.display&&this._dirty||!n.mat4.equals(this._parentTransformLast,e))&&(n.mat4.copy(this._parentTransformLast,e),n.mat4.multiply(this._maskMatrix,e,this.localTransform),n.mat4.invert(this._maskMatrix,this._maskMatrix),n.mat4.transpose(this._maskMatrix,this._maskMatrix),this._dirty=!1);const s=this.display&&i?this.targetMaterials:[0,0,0,0];t.vs.Set("CustomMaskMatrix"+r,this._maskMatrix),t.vs.Set("CustomMaskData"+r,[1,this.isMirrored?1:0,0,0]),t.ps.Set("CustomMaskMaterialID"+r,[this.materialIndex,0,0,0]),t.ps.Set("CustomMaskTarget"+r,s)}static black(e){return[["materialIndex",e.byte],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["targetMaterials",e.vector4]]}}i(s,"__isStaging",1)},"./eve/item/EveHazeSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveHazeSetBatch",function(){return o}),r.d(t,"EveHazeSetItem",function(){return u}),r.d(t,"EveHazeSet",function(){return c});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/item/EveObjectSet.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends i.Tw2RenderBatch{constructor(){super(...arguments),a(this,"hazeSet",null)}Commit(e){this.hazeSet.Render(e)}}class u extends s.EveObjectSetItem{constructor(){super(...arguments),a(this,"boosterGainInfluence",!1),a(this,"colorType",0),a(this,"hazeBrightness",0),a(this,"hazeFalloff",0),a(this,"position",n.vec3.create()),a(this,"rotation",n.quat.create()),a(this,"scaling",n.vec3.fromValues(1,1,1)),a(this,"sourceBrightness",0),a(this,"sourceSize",0),a(this,"transform",n.mat4.create())}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling),this._dirty=!0}}class c extends s.EveObjectSet{Unload(){}Rebuild(){}GetBatches(e,t,r){}Render(e){}}},"./eve/item/EveLocator2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocator2",function(){return a}),r.d(t,"EveLocator",function(){return a});var n=r("./global/index.js"),i=r("./global/util/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2BaseClass{constructor(){super(...arguments),s(this,"name",""),s(this,"transform",n.mat4.create()),s(this,"atlasIndex0",null),s(this,"atlasIndex1",null),s(this,"bone",null)}FindBone(e){this.bone=null;const t=e.FindModelForMesh(0);if(t)for(let e=0;e<t.bones.length;++e)if(t.bones[e].boneRes.name===this.name){this.bone=t.bones[e];break}return this.bone}static from(e,t){const r=new a;return e&&Object(i.assignIfExists)(r,e,["transform","name","atlasIndex0","atlasIndex1"]),r}static black(e){return[["name",e.string],["transform",e.matrix]]}}s(a,"Prefix",{AUDIO:"locator_audio",ATTACH:"locator_attach",BOOSTER:"locator_booster",TURRET:"locator_turret",XL_TURRET:"locator_xl"}),s(a,"__isStaging",1)},"./eve/item/EveObjectSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveObjectSetItem",function(){return a}),r.d(t,"EveObjectSet",function(){return o});var n=r("./global/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2BaseClass{constructor(){super(...arguments),s(this,"display",!0),s(this,"_dirty",!0)}OnValueChanged(){this._dirty=!0}OnDestroyed(){}}class o extends n.Tw2BaseClass{constructor(){super(...arguments),s(this,"autoRebuild",!0),s(this,"display",!0),s(this,"items",[]),s(this,"_dirty",!0),s(this,"_visibleItems",[])}Initialize(){this.Rebuild()}OnValueChanged(){this._dirty=!0}CreateItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;const n=this.constructor.Item.from(e);return this.items.push(n),this._dirty=!0,r||this.emit("item_created",{ctx:n}),t||this.UpdateValues(),n}AddItem(e,t,r){return!this.items.includes(e)&&(this.items.push(e),this._dirty=!0,r||this.emit("item_added",{ctx:e}),t||this.UpdateValues(e),!0)}RemoveItem(e,t,r){const n=this.items.indexOf(e);return-1!==n&&(this.items.splice(n,1),this._dirty=!0,r||this.emit("item_removed",{ctx:e}),t||this.UpdateValues(e),!0)}ClearItems(e,t){for(let e=0;e<this.items.length;e++)this.RemoveItem(this.items[e],!0,t),e--;e||this.UpdateValues()}RebuildItems(){this._visibleItems.splice(0);for(let e=0;e<this.items.length;e++){const t=this.items[e];t.display&&this._visibleItems.push(t),t._dirty=!1}this._dirty=!0}AreItemsDirty(){for(let e=0;e<this.items.length;e++)if(this.items[e]._dirty)return!0;return!1}Update(e){!this._dirty&&this.autoRebuild&&this.AreItemsDirty()&&(this._dirty=!0),this._dirty&&this.Rebuild()}Unload(e){e||this.emit("unloaded")}Rebuild(){this.emit("rebuilt")}GetBatches(e,t,r){throw new i.ErrAbstractClassMethod}Render(){throw new i.ErrAbstractClassMethod}}s(o,"Item",null),s(o,"global",{vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec3_2:n.vec3.create(),vec4_0:n.vec4.create(),vec4_1:n.vec4.create(),mat4_0:n.mat4.create()})},"./eve/item/EvePlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePlaneSetBatch",function(){return c}),r.d(t,"EvePlaneSetItem",function(){return l}),r.d(t,"EvePlaneSet",function(){return d});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/item/EveObjectSet.js"),a=r("./global/util/index.js"),o=r("./core/mesh/index.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends i.Tw2RenderBatch{constructor(){super(...arguments),u(this,"planeSet",null)}Commit(e){this.planeSet.Render(e)}}class l extends s.EveObjectSetItem{constructor(){super(...arguments),u(this,"name",""),u(this,"color",n.vec4.create()),u(this,"layer1Scroll",n.vec4.create()),u(this,"layer1Transform",n.vec4.create()),u(this,"layer2Scroll",n.vec4.create()),u(this,"layer2Transform",n.vec4.create()),u(this,"maskAtlasID",0),u(this,"position",n.vec3.create()),u(this,"rotation",n.quat.create()),u(this,"scaling",n.vec3.fromValues(1,1,1)),u(this,"boneIndex",0),u(this,"groupIndex",-1),u(this,"transform",n.mat4.create())}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.translation,this.scaling),this._dirty=!0}static from(e){const t=new l;return e&&(n.util.assignIfExists(t,e,["name","display","boneIndex","groupIndex","position","scaling","rotation","transform","color","layer1Transform","layer2Transform","layer1Scroll","layer2Scroll","maskAtlasID"]),void 0!==e.maskMapAtlasIndex&&(t.maskAtlasID=e.maskMapAtlasIndex)),t}static black(e){return[["color",e.color],["layer1Scroll",e.vector4],["layer1Transform",e.vector4],["layer2Scroll",e.vector4],["layer2Transform",e.vector4],["maskAtlasID",e.uint],["name",e.string],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3]]}}class d extends s.EveObjectSet{constructor(){super(...arguments),u(this,"name",""),u(this,"effect",null),u(this,"hideOnLowQuality",!1),u(this,"pickBufferID",0),u(this,"_time",0),u(this,"_vertexBuffer",null),u(this,"_indexBuffer",null),u(this,"_decl",i.Tw2VertexDeclaration.from(d.vertexDeclarations))}get planes(){return this.items}set planes(e){this.items=e}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}Update(e,t){this._time+=e,super.Update(e)}Unload(e){this._vertexBuffer&&(n.device.gl.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(n.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),super.Unload(e)}Rebuild(){this.Unload(!0),this.RebuildItems(),this._dirty=!1;const e=this._visibleItems.length;if(!e)return void super.Rebuild();d.global.mat4_0;const t=new Float32Array(4*e*35);for(let r=0;r<e;++r){const e=this._visibleItems[r],i=4*r*35;t[i+35-3]=0,t[i+35+35-3]=1,t[i+70+35-3]=2,t[i+105+35-3]=3;const s=n.mat4.fromRotationTranslationScale(e.transform,e.rotation,e.position,e.scaling);for(let r=0;r<4;++r){const n=i+35*r;t[n]=s[0],t[n+1]=s[4],t[n+2]=s[8],t[n+3]=s[12],t[n+4]=s[1],t[n+5]=s[5],t[n+6]=s[9],t[n+7]=s[13],t[n+8]=s[2],t[n+9]=s[6],t[n+10]=s[10],t[n+11]=s[14],t[n+12]=e.color[0],t[n+13]=e.color[1],t[n+14]=e.color[2],t[n+15]=e.color[3],t[n+16]=e.layer1Transform[0],t[n+17]=e.layer1Transform[1],t[n+18]=e.layer1Transform[2],t[n+19]=e.layer1Transform[3],t[n+20]=e.layer2Transform[0],t[n+21]=e.layer2Transform[1],t[n+22]=e.layer2Transform[2],t[n+23]=e.layer2Transform[3],t[n+24]=e.layer1Scroll[0],t[n+25]=e.layer1Scroll[1],t[n+26]=e.layer1Scroll[2],t[n+27]=e.layer1Scroll[3],t[n+28]=e.layer2Scroll[0],t[n+29]=e.layer2Scroll[1],t[n+30]=e.layer2Scroll[2],t[n+31]=e.layer2Scroll[3],t[n+33]=e.boneIndex,t[n+34]=e.maskAtlasID}}this._vertexBuffer=n.device.gl.createBuffer(),n.device.gl.bindBuffer(n.device.gl.ARRAY_BUFFER,this._vertexBuffer),n.device.gl.bufferData(n.device.gl.ARRAY_BUFFER,t,n.device.gl.STATIC_DRAW),n.device.gl.bindBuffer(n.device.gl.ARRAY_BUFFER,null);const r=new Uint16Array(6*e);for(let t=0;t<e;++t){const e=6*t,n=4*t;r[e]=n,r[e+1]=n+2,r[e+2]=n+1,r[e+3]=n,r[e+4]=n+3,r[e+5]=n+2}this._indexBuffer=n.device.gl.createBuffer(),n.device.gl.bindBuffer(n.device.gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer),n.device.gl.bufferData(n.device.gl.ELEMENT_ARRAY_BUFFER,r,n.device.gl.STATIC_DRAW),n.device.gl.bindBuffer(n.device.gl.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*e,super.Rebuild()}GetBatches(e,t,r){if(this.display&&e===n.device.RM_ADDITIVE&&this._indexBuffer&&this._vertexBuffer&&this._visibleItems.length){const e=new c;e.renderMode=n.device.RM_ADDITIVE,e.planeSet=this,e.perObjectData=r,t.Commit(e)}}Render(e){if(!(this.effect&&this.effect.IsGood()&&this._vertexBuffer&&this._indexBuffer))return!1;const t=n.device,r=t.gl;t.SetStandardStates(t.RM_ADDITIVE),r.bindBuffer(r.ARRAY_BUFFER,this._vertexBuffer),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(let n=0;n<this.effect.GetPassCount(e);++n){if(this.effect.ApplyPass(e,n),!this._decl.SetDeclaration(t,this.effect.GetPassInput(e,n),140))return!1;t.ApplyShadowState(),r.drawElements(r.TRIANGLES,this._indexBuffer.count,r.UNSIGNED_SHORT,0)}return!0}static from(e,t){const r=new d;if(e&&(Object(a.assignIfExists)(r,e,["name","display","hideOnLowQuality"]),e.effect&&(r.effect=o.Tw2Effect.from(e.effect)),e.items))for(let t=0;t<e.items.length;t++)r.CreateItem(e.items[t]);return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["effect",e.object],["hideOnLowQuality",e.boolean],["name",e.string],["pickBufferID",e.byte],["planes",e.array]]}}u(d,"Item",l),u(d,"vertexDeclarations",[{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:4},{usage:"TEXCOORD",usageIndex:7,elements:3}])},"./eve/item/EveSpaceObjectDecal.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceObjectDecal",function(){return u});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./global/util/index.js"),a=r("./core/mesh/index.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends n.Tw2BaseClass{constructor(){super(...arguments),o(this,"name",""),o(this,"decalEffect",null),o(this,"indexBuffer",[]),o(this,"position",n.vec3.create()),o(this,"rotation",n.quat.create()),o(this,"scaling",n.vec3.fromValues(1,1,1)),o(this,"display",!0),o(this,"groupIndex",-1),o(this,"parentBoneIndex",-1),o(this,"pickable",!0),o(this,"pickEffect",null),o(this,"_indexBuffer",null),o(this,"_parentGeometry",null),o(this,"_perObjectData",i.Tw2PerObjectData.from(u.perObjectData)),o(this,"_transform",n.mat4.create()),o(this,"_transformInv",n.mat4.create()),o(this,"_dirty",!0)}Initialize(){this.Rebuild(),this.UpdateValues()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.decalEffect&&this.decalEffect.GetResources(e),this.pickEffect&&this.pickEffect.GetResources(e),e}OnValueChanged(){n.mat4.fromRotationTranslationScale(this._transform,this.rotation,this.position,this.scaling),n.mat4.invert(this._transformInv,this._transform)}SetParentGeometry(e){this._parentGeometry=e}Unload(e){this._indexBuffer&&(n.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),e||this.emit("unloaded")}Rebuild(){if(this.Unload(!0),this.indexBuffer){const e=n.device.gl,t=new Uint16Array(this.indexBuffer);this._indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}this._dirty=!1,this.emit("rebuilt")}GetBatches(e,t,r,s){let a;switch(e){case n.device.RM_DECAL:a=this.decalEffect;break;case n.device.RM_PICKABLE:a=this.pickable?this.pickEffect:null}if(this._dirty&&this.Rebuild(),this.display&&a&&this._parentGeometry&&this._parentGeometry.meshes[0]&&this._indexBuffer&&a.IsGood()&&this._parentGeometry.IsGood()){const o=new i.Tw2ForwardingRenderBatch;if(this._perObjectData.vs.Set("worldMatrix",r.vs.Get("WorldMat")),this.parentBoneIndex>=0){const e=r.vs.Get("JointMat"),t=12*this.parentBoneIndex;if(e[t]||e[t+4]||e[t+8]){const r=this._perObjectData.vs.Get("parentBoneMatrix");r[0]=e[t],r[1]=e[t+4],r[2]=e[t+8],r[3]=0,r[4]=e[t+1],r[5]=e[t+5],r[6]=e[t+9],r[7]=0,r[8]=e[t+2],r[9]=e[t+6],r[10]=e[t+10],r[11]=0,r[12]=e[t+3],r[13]=e[t+7],r[14]=e[t+11],r[15]=1,n.mat4.transpose(r,r)}}n.mat4.invert(this._perObjectData.vs.Get("invWorldMatrix"),this._perObjectData.vs.Get("worldMatrix")),n.mat4.transpose(this._perObjectData.vs.Get("decalMatrix"),this._transform),n.mat4.transpose(this._perObjectData.vs.Get("invDecalMatrix"),this._transformInv),this._perObjectData.ps.Get("displayData")[0]=s||0,this._perObjectData.ps.Set("shipData",r.ps.data),o.perObjectData=this._perObjectData,o.geometryProvider=this,o.renderMode=e,o.effect=a,t.Commit(o)}}Render(e,t){const r=this._parentGeometry.meshes[0],i=r.indexes,s=r.areas[0].start,a=r.areas[0].count,o=r.indexType;n.store.variables.SetValue("u_DecalMatrix",this._transform),n.store.variables.SetValue("u_InvDecalMatrix",this._transformInv),r.indexes=this._indexBuffer,r.areas[0].start=0,r.areas[0].count=this.indexBuffer.length,r.indexType=n.device.gl.UNSIGNED_SHORT,this._parentGeometry.RenderAreas(0,0,1,e.effect,t),r.indexes=i,r.areas[0].start=s,r.areas[0].count=a,r.indexType=o}static from(e,t){const r=new u;if(e){Object(s.assignIfExists)(r,e,["name","display","pickable","position","rotation","scaling","groupIndex","parentBoneIndex"]),e.indexBuffer&&(r.indexBuffer=new Uint16Array(e.indexBuffer)),e.pickEffect&&(r.pickEffect=a.Tw2Effect.from(e.pickEffect));const t=e.decalEffect||e.effect;t&&(r.decalEffect=a.Tw2Effect.from(t))}return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["decalEffect",e.object],["name",e.string],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["indexBuffer",e.indexBuffer]]}}o(u,"perObjectData",{vs:[["worldMatrix",16],["invWorldMatrix",16],["decalMatrix",16],["invDecalMatrix",16],["parentBoneMatrix",n.mat4.identity([])]],ps:[["displayData",4],["shipData",12]]})},"./eve/item/EveSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpotlightSetBatch",function(){return c}),r.d(t,"EveSpotlightSetItem",function(){return l}),r.d(t,"EveSpotlightSet",function(){return d});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/item/EveObjectSet.js"),a=r("./global/util/index.js"),o=r("./core/mesh/index.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends i.Tw2RenderBatch{constructor(){super(...arguments),u(this,"spotlightSet",null)}Commit(e){this.spotlightSet.RenderCones(e),this.spotlightSet.RenderGlow(e)}}class l extends s.EveObjectSetItem{constructor(){super(...arguments),u(this,"name",""),u(this,"coneColor",n.vec4.create()),u(this,"flareColor",n.vec4.create()),u(this,"spriteColor",n.vec4.create()),u(this,"spriteScale",n.vec3.fromValues(1,1,1)),u(this,"transform",n.mat4.create()),u(this,"boosterGainInfluence",0),u(this,"boneIndex",0),u(this,"display",!0),u(this,"groupIndex",-1),u(this,"coneIntensity",0),u(this,"spriteIntensity",0),u(this,"flareIntensity",0)}static from(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new this;return n.util.assignIfExists(t,e,["name","display","boosterGainInfluence","boneIndex","groupIndex","coneIntensity","spriteIntensity","flareIntensity","transform","coneColor","spriteColor","flareColor","spriteScale"]),t}static black(e){return[["coneColor",e.color],["flareColor",e.color],["name",e.string],["spriteColor",e.color],["spriteScale",e.vector3],["transform",e.matrix]]}}class d extends s.EveObjectSet{constructor(){super(...arguments),u(this,"name",""),u(this,"coneEffect",null),u(this,"glowEffect",null),u(this,"intensity",1),u(this,"_coneVertexBuffer",null),u(this,"_spriteVertexBuffer",null),u(this,"_indexBuffer",null),u(this,"_decl",i.Tw2VertexDeclaration.from(d.vertexDeclarations))}get spotlightItems(){return this.items}set spotlightItems(e){this.items=e}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.coneEffect&&this.coneEffect.GetResources(e),this.glowEffect&&this.glowEffect.GetResources(e),e}Unload(e){this._coneVertexBuffer&&(n.device.gl.deleteBuffer(this._coneVertexBuffer),this._coneVertexBuffer=null),this._spriteVertexBuffer&&(n.device.gl.deleteBuffer(this._spriteVertexBuffer),this._spriteVertexBuffer=null),this._indexBuffer&&(n.device.gl.deleteBuffer(this._indexBuffer),this._indexBuffer=null),super.Unload(e)}Rebuild(){this.Unload(!0),this.RebuildItems(),this._dirty=!1;const e=this._visibleItems.length;if(!e)return void super.Rebuild();const t=n.device,r=[1,0,2,3],i=new Float32Array(22*(4*e*4));for(let t=0;t<e;++t){const e=this._visibleItems[t];for(let n=0;n<4;++n)for(let s=0;s<4;++s){const a=22*(4*t*4+4*n+s);i[a]=e.coneColor[0]*e.coneIntensity*this.intensity,i[a+1]=e.coneColor[1]*e.coneIntensity*this.intensity,i[a+2]=e.coneColor[2]*e.coneIntensity*this.intensity,i[a+3]=e.coneColor[3],i[a+4]=e.transform[0],i[a+5]=e.transform[4],i[a+6]=e.transform[8],i[a+7]=e.transform[12],i[a+8]=e.transform[1],i[a+9]=e.transform[5],i[a+10]=e.transform[9],i[a+11]=e.transform[13],i[a+12]=e.transform[2],i[a+13]=e.transform[6],i[a+14]=e.transform[10],i[a+15]=e.transform[14],i[a+16]=1,i[a+17]=1,i[a+18]=1,i[a+19]=4*n+r[s],i[a+20]=e.boneIndex,i[a+21]=e.boosterGainInfluence?255:0}}this._coneVertexBuffer=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,this._coneVertexBuffer),t.gl.bufferData(t.gl.ARRAY_BUFFER,i,t.gl.STATIC_DRAW),this._coneVertexBuffer.count=4*e*6;const s=new Float32Array(22*(2*e*4)),a=[1,0,2,3];for(let t=0;t<e;++t){const e=this._visibleItems[t];for(let r=0;r<2;++r)for(let n=0;n<4;++n){const i=22*(2*t*4+4*r+n);r%2==0?(s[i]=e.spriteColor[0]*e.spriteIntensity*this.intensity,s[i+1]=e.spriteColor[1]*e.spriteIntensity*this.intensity,s[i+2]=e.spriteColor[2]*e.spriteIntensity*this.intensity,s[i+3]=e.spriteColor[3],s[i+16]=e.spriteScale[0],s[i+17]=1,s[i+18]=1):(s[i]=e.flareColor[0]*e.flareIntensity*this.intensity,s[i+1]=e.flareColor[1]*e.flareIntensity*this.intensity,s[i+2]=e.flareColor[2]*e.flareIntensity*this.intensity,s[i+3]=e.flareColor[3],s[i+16]=1,s[i+17]=e.spriteScale[1],s[i+18]=e.spriteScale[2]),s[i+4]=e.transform[0],s[i+5]=e.transform[4],s[i+6]=e.transform[8],s[i+7]=e.transform[12],s[i+8]=e.transform[1],s[i+9]=e.transform[5],s[i+10]=e.transform[9],s[i+11]=e.transform[13],s[i+12]=e.transform[2],s[i+13]=e.transform[6],s[i+14]=e.transform[10],s[i+15]=e.transform[14],s[i+19]=4*r+a[n],s[i+20]=e.boneIndex,s[i+21]=e.boosterGainInfluence?255:0}}this._spriteVertexBuffer=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,this._spriteVertexBuffer),t.gl.bufferData(t.gl.ARRAY_BUFFER,s,t.gl.STATIC_DRAW),this._spriteVertexBuffer.count=2*e*6;const o=new Uint16Array(4*e*6);for(let t=0;t<4*e;++t){const e=6*t,r=4*t;o[e]=r,o[e+1]=r+1,o[e+2]=r+2,o[e+3]=r+2,o[e+4]=r+3,o[e+5]=r}this._indexBuffer=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.gl.bufferData(t.gl.ELEMENT_ARRAY_BUFFER,o,t.gl.STATIC_DRAW),t.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=e,super.Rebuild()}GetBatches(e,t,r){if(this.display&&e===n.device.RM_ADDITIVE&&this._indexBuffer&&this._indexBuffer.count){const e=new c;e.renderMode=n.device.RM_ADDITIVE,e.spotlightSet=this,e.perObjectData=r,t.Commit(e)}}RenderCones(e){return d.Render(this,this.coneEffect,e,this._coneVertexBuffer)}RenderGlow(e){return d.Render(this,this.glowEffect,e,this._spriteVertexBuffer)}static Render(e,t,r,i){if(!(t&&t.IsGood()&&i&&e._indexBuffer))return!1;const s=n.device,a=s.gl;s.SetStandardStates(s.RM_ADDITIVE),a.bindBuffer(a.ARRAY_BUFFER,i),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e._indexBuffer);for(let n=0;n<t.GetPassCount(r);++n){if(t.ApplyPass(r,n),!e._decl.SetDeclaration(s,t.GetPassInput(r,n),88))return!1;s.ApplyShadowState(),s.gl.drawElements(a.TRIANGLES,i.count,a.UNSIGNED_SHORT,0)}return!0}static from(e,t){const r=new d;if(e&&(Object(a.assignIfExists)(r,e,["name","display","intensity"]),e.coneEffect&&(Object(a.isFunction)(e.coneEffect)?r.coneEffect=e.coneEffect:r.coneEffect=o.Tw2Effect.from(e.coneEffect)),e.glowEffect&&(Object(a.isFunction)(e.glowEffect)?r.glowEffect=e.glowEffect:r.glowEffect=o.Tw2Effect.from(e.glowEffect)),e.items))for(let t=0;t<e.items.length;t++)r.CreateItem(e.items[t]);return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["coneEffect",e.object],["glowEffect",e.object],["intensity",e.float],["name",e.string],["spotlightItems",e.array]]}}u(d,"Item",l),u(d,"vertexDeclarations",[{usage:"COLOR",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:3},{usage:"TEXCOORD",usageIndex:4,elements:3}])},"./eve/item/EveSpriteLineSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpriteLineSetBatch",function(){return a}),r.d(t,"EveSpriteLineSetItem",function(){return o}),r.d(t,"EveSpriteLineSet",function(){return u});var n=r("./global/index.js"),i=r("./eve/item/EveObjectSet.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"spriteLineSet",null)}Commit(e){this.spriteLineSet.Render(e)}}class o extends i.EveObjectSetItem{constructor(){super(...arguments),s(this,"blinkPhase",0),s(this,"blinkPhaseShift",0),s(this,"blinkRate",0),s(this,"boneIndex",0),s(this,"colorType",0),s(this,"falloff",0),s(this,"intensity",0),s(this,"isCircle",!1),s(this,"maxScale",0),s(this,"minScale",0),s(this,"position",n.vec3.create()),s(this,"rotation",n.quat.create()),s(this,"scaling",n.vec3.fromValues(1,1,1)),s(this,"spacing",0),s(this,"display",!0),s(this,"transform",n.mat4.create()),s(this,"_dirty",!0)}OnValueChanged(){n.mat4.fromRotationTranslationScale(this.transform,this.rotation,this.position,this.scaling),this._dirty=!0}}class u extends i.EveObjectSet{Unload(){}Rebuild(){}GetBatches(e,t,r){}Render(e){}}},"./eve/item/EveSpriteSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpriteSetBatch",function(){return c}),r.d(t,"EveSpriteSetItem",function(){return l}),r.d(t,"EveSpriteSet",function(){return d});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/item/EveObjectSet.js"),a=r("./global/util/index.js"),o=r("./core/mesh/index.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends i.Tw2RenderBatch{constructor(){super(...arguments),u(this,"boosterGlow",!1),u(this,"spriteSet",null),u(this,"world",null),u(this,"boosterGain",0),u(this,"warpIntensity",0)}Commit(e){this.boosterGlow?this.spriteSet.RenderBoosterGlow(e,this.world,this.boosterGain,this.warpIntensity):this.spriteSet.Render(e,this.world,this.perObjectData)}}class l extends s.EveObjectSetItem{constructor(){super(...arguments),u(this,"name",""),u(this,"blinkPhase",0),u(this,"blinkRate",0),u(this,"boneIndex",0),u(this,"color",n.vec4.create()),u(this,"falloff",0),u(this,"maxScale",0),u(this,"minScale",0),u(this,"position",n.vec3.create()),u(this,"warpColor",n.vec4.create()),u(this,"groupIndex",-1),u(this,"groupName","")}static from(e){const t=new this;return e&&n.util.assignIfExists(t,e,["name","display","blinkRate","blinkPhase","minScale","maxScale","falloff","boneIndex","groupIndex","position","color","warpColor","groupName"]),t}static black(e){return[["blinkPhase",e.float],["blinkRate",e.float],["boneIndex",e.uint],["color",e.color],["falloff",e.float],["maxScale",e.float],["minScale",e.float],["name",e.string],["position",e.vector3],["warpColor",e.color]]}}class d extends s.EveObjectSet{constructor(){super(...arguments),u(this,"name",""),u(this,"effect",null),u(this,"intensity",0),u(this,"skinned",!1),u(this,"useQuads",null),u(this,"_time",0),u(this,"_vertexBuffer",null),u(this,"_indexBuffer",null),u(this,"_instanceBuffer",null),u(this,"_decl",null),u(this,"_vdecl",i.Tw2VertexDeclaration.from([{usage:"TEXCOORD",usageType:5,elements:1}]))}get sprites(){return this.items}set sprites(e){this.items=e}Initialize(){this.UseQuads(!!this.useQuads),this.Rebuild()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}UseQuads(e){this.useQuads=e,this._decl=i.Tw2VertexDeclaration.from(e?d.quadVertexDeclarations:d.vertexDeclarations),this._dirty=!0}Update(e,t){this._time+=e,this._worldSpriteScale=void 0===t?1:t,super.Update(e)}Unload(e){const t=n.device.gl;this._vertexBuffer&&(t.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null),this._indexBuffer&&(t.deleteBuffer(this._indexBuffer),this._indexBuffer=null),this._instanceBuffer&&(t.deleteBuffer(this._instanceBuffer),this._instanceBuffer=null),super.Unload(e)}Rebuild(){this.RebuildItems(),this._dirty=!1;const e=this._visibleItems.length;if(!e)return void super.Rebuild();const t=n.device.gl;if(this.useQuads)return this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,2,2,3,0]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),void(this._instanceBuffer=t.createBuffer());const r=new Float32Array(4*e*13);for(let t=0;t<e;++t){const e=this._visibleItems[t],n=4*t*13;r[n]=0,r[n+13]=1,r[n+26]=2,r[n+39]=3;for(let t=0;t<4;++t){const i=n+13*t;r[i+1]=e.boneIndex,r[i+2]=e.position[0],r[i+3]=e.position[1],r[i+4]=e.position[2],r[i+5]=e.color[0],r[i+6]=e.color[1],r[i+7]=e.color[2],r[i+8]=e.blinkPhase,r[i+9]=e.blinkRate,r[i+10]=e.minScale*this._worldSpriteScale,r[i+11]=e.maxScale*this._worldSpriteScale,r[i+12]=e.falloff}}this._vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null);const i=new Uint16Array(6*e);for(let t=0;t<e;++t){const e=6*t,r=4*t;i[e]=r,i[e+1]=r+2,i[e+2]=r+1,i[e+3]=r,i[e+4]=r+3,i[e+5]=r+2}this._indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this._indexBuffer.count=6*e,super.Rebuild()}GetBatches(e,t,r,i){if(this.display&&e===n.device.RM_ADDITIVE&&this._vertexBuffer&&this._visibleItems.length){const e=new c;e.world=i,e.renderMode=n.device.RM_ADDITIVE,e.spriteSet=this,e.perObjectData=r,t.Commit(e)}}GetBoosterGlowBatches(e,t,r,i,s,a){if(this.display&&e===n.device.RM_ADDITIVE&&this._vertexBuffer&&this._visibleItems.length){const e=new c;e.boosterGlow=!0,e.world=i,e.boosterGain=s,e.warpIntensity=a,e.renderMode=n.device.RM_ADDITIVE,e.spriteSet=this,e.perObjectData=r,t.Commit(e)}}Render(e,t,r){if(this.useQuads)return this.RenderQuads(e,t,r);if(!(this.effect&&this.effect.IsGood()&&this._indexBuffer&&this._vertexBuffer))return!1;const i=n.device,s=i.gl;i.SetStandardStates(i.RM_ADDITIVE),s.bindBuffer(s.ARRAY_BUFFER,this._vertexBuffer),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this._indexBuffer);for(let t=0;t<this.effect.GetPassCount(e);++t){if(this.effect.ApplyPass(e,t),!this._decl.SetDeclaration(i,this.effect.GetPassInput(e,t),52))return!1;i.ApplyShadowState(),s.drawElements(s.TRIANGLES,this._indexBuffer.count,s.UNSIGNED_SHORT,0)}return!0}RenderBoosterGlow(e,t,r,i){if(!(this.effect&&this.effect.IsGood()&&this._instanceBuffer&&this._vertexBuffer))return!1;const a=n.device,o=a.gl,u=s.EveObjectSet.global.vec3_0,c=this._visibleItems.length,l=new Float32Array(17*c);a.SetStandardStates(a.RM_ADDITIVE);let d=0;for(let e=0;e<c;++e){const s=this._visibleItems[e];n.vec3.transformMat4(u,s.position,t),l[d++]=u[0],l[d++]=u[1],l[d++]=u[2],l[d++]=t[8],l[d++]=s.blinkPhase,l[d++]=t[9],l[d++]=s.minScale*this._worldSpriteScale,l[d++]=s.maxScale*this._worldSpriteScale,l[d++]=t[10],l[d++]=s.color[0],l[d++]=s.color[1],l[d++]=s.color[2],l[d++]=r,l[d++]=s.warpColor[0],l[d++]=s.warpColor[1],l[d++]=s.warpColor[2],l[d++]=i}o.bindBuffer(o.ARRAY_BUFFER,this._instanceBuffer),o.bufferData(o.ARRAY_BUFFER,l,o.DYNAMIC_DRAW);for(let t=0;t<this.effect.GetPassCount(e);++t){this.effect.ApplyPass(e,t);const r=this.effect.GetPassInput(e,t);o.bindBuffer(o.ARRAY_BUFFER,this._vertexBuffer),this._vdecl.SetPartialDeclaration(a,r,4),o.bindBuffer(o.ARRAY_BUFFER,this._instanceBuffer);const n=this._decl.SetPartialDeclaration(a,r,68,0,1);a.ApplyShadowState(),o.drawArraysInstanced(o.TRIANGLES,0,6,c),this._decl.ResetInstanceDivisors(a,n)}return!0}RenderQuads(e,t,r){if(!(this.effect&&this.effect.IsGood()&&this._instanceBuffer&&this._vertexBuffer))return!1;const i=n.device,a=i.gl,o=this._visibleItems.length,u=new Float32Array(17*o),c=s.EveObjectSet.global.vec3_0,l=r.vs.Get("JointMat");i.SetStandardStates(i.RM_ADDITIVE);let d=0;for(let e=0;e<o;++e){const r=this._visibleItems[e];if(this.skinned){const e=12*r.boneIndex;c[0]=l[e]*r.position[0]+l[e+1]*r.position[1]+l[e+2]*r.position[2]+l[e+3],c[1]=l[e+4]*r.position[0]+l[e+5]*r.position[1]+l[e+6]*r.position[2]+l[e+7],c[2]=l[e+8]*r.position[0]+l[e+9]*r.position[1]+l[e+10]*r.position[2]+l[e+11],n.vec3.transformMat4(c,c,t)}else n.vec3.transformMat4(c,r.position,t);u[d++]=c[0],u[d++]=c[1],u[d++]=c[2],u[d++]=1,u[d++]=r.blinkPhase,u[d++]=r.blinkRate,u[d++]=r.minScale*this._worldSpriteScale,u[d++]=r.maxScale*this._worldSpriteScale,u[d++]=r.falloff,u[d++]=r.color[0],u[d++]=r.color[1],u[d++]=r.color[2],u[d++]=1,u[d++]=r.warpColor[0],u[d++]=r.warpColor[1],u[d++]=r.warpColor[2],u[d++]=1}a.bindBuffer(a.ARRAY_BUFFER,this._instanceBuffer),a.bufferData(a.ARRAY_BUFFER,u,a.DYNAMIC_DRAW);for(let t=0;t<this.effect.GetPassCount(e);++t){this.effect.ApplyPass(e,t);const r=this.effect.GetPassInput(e,t);a.bindBuffer(a.ARRAY_BUFFER,this._vertexBuffer),this._vdecl.SetPartialDeclaration(i,r,4),a.bindBuffer(a.ARRAY_BUFFER,this._instanceBuffer);const n=this._decl.SetPartialDeclaration(i,r,68,0,1);i.ApplyShadowState(),a.drawArraysInstanced(a.TRIANGLES,0,6,o),this._decl.ResetInstanceDivisors(i,n)}return!0}static from(e,t){const r=new d;if(e&&(Object(a.assignIfExists)(r,e,["name","intensity","skinned","useQuads"]),e.effect&&(r.effect=o.Tw2Effect.from(e.effect)),e.items))for(let t=0;t<e.items.length;t++)r.CreateItem(e.items[t]);return t&&t.skipUpdate||r.Initialize(),r}static black(e){return[["effect",e.object],["name",e.string],["intensity",e.float],["skinned",e.boolean],["sprites",e.array]]}}u(d,"Item",l),u(d,"vertexDeclarations",[{usage:"TEXCOORD",usageIndex:5,elements:2},{usage:"POSITION",usageIndex:0,elements:3},{usage:"COLOR",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:1},{usage:"TEXCOORD",usageIndex:1,elements:1},{usage:"TEXCOORD",usageIndex:2,elements:1},{usage:"TEXCOORD",usageIndex:3,elements:1},{usage:"TEXCOORD",usageIndex:4,elements:1}]),u(d,"quadVertexDeclarations",[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:1,elements:2},{usage:"COLOR",usageIndex:0,elements:4},{usage:"COLOR",usageIndex:1,elements:4}])},"./eve/item/EveTrailsSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTrailSetRenderBatch",function(){return a}),r.d(t,"EveTrailsSet",function(){return o});var n=r("./global/index.js"),i=r("./core/batch/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2RenderBatch{constructor(){super(...arguments),s(this,"trailsSet",null)}Commit(e){this.boosters.Render(e)}}class o extends n.Tw2BaseClass{constructor(){super(...arguments),s(this,"effect",null),s(this,"geometryResPath",""),s(this,"display",!0),s(this,"geometryRes",null)}Initialize(){this.geometryResPath&&(this.geometryRes=n.resMan.GetResource(this.geometryResPath),this.geometryRes.RegisterNotification(this))}OnResPrepared(e){}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),this.geometryRes&&!e.includes(this.geometryRes)&&e.push(this.geometryRes),e}Update(e){}Unload(){}Rebuild(){}GetBatches(e,t,r){}Render(e){}static black(e){return[["effect",e.object],["geometryResPath",e.string]]}}s(o,"__isStaging",4)},"./eve/item/EveTurretSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTurretSetItem",function(){return o}),r.d(t,"EveTurretSet",function(){return u});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/item/EveObjectSet.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.EveObjectSetItem{constructor(){super(...arguments),a(this,"locatorName",null),a(this,"updateFromLocator",!1),a(this,"canFireWhenHidden",!1),a(this,"position",n.vec3.create()),a(this,"rotation",n.quat.create()),a(this,"_bone",null),a(this,"_localTransform",n.mat4.create()),a(this,"_localRotation",n.quat.create())}OnValueChanged(){this._dirty=!0,this.UpdateTransforms()}UpdateTransforms(){n.mat4.fromRotationTranslation(this._localTransform,this.rotation,this.position),this._bone?(n.mat4.multiply(this._localTransform,this._bone.offsetTransform,this._localTransform),n.mat4.getRotation(this._localRotation,this._localTransform)):n.quat.copy(this._localRotation,this.rotation)}static from(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new this;return n.util.assignIfExists(t,e,["name","display","locatorName","updateFromLocator","position","rotation","canFireWhenHidden"]),t.UpdateValues(),t}}class u extends s.EveObjectSet{constructor(){super(...arguments),a(this,"bottomClipHeight",0),a(this,"boundingSphere",n.vec4.create()),a(this,"chooseRandomLocator",!1),a(this,"cyclingFireGroupCount",0),a(this,"firingEffectResPath",""),a(this,"geometryResPath",""),a(this,"impactSize",0),a(this,"laserMissBehaviour",!1),a(this,"locatorName",""),a(this,"maxCyclingFirePos",0),a(this,"projectileMissBehaviour",!1),a(this,"sysBoneHeight",0),a(this,"sysBonePitch01Factor",0),a(this,"sysBonePitch02Factor",0),a(this,"sysBonePitchFactor",0),a(this,"sysBonePitchMax",0),a(this,"sysBonePitchMin",0),a(this,"sysBonePitchOffset",0),a(this,"turretEffect",null),a(this,"updatePitchPose",!1),a(this,"useDynamicBounds",!1),a(this,"useRandomFiringDelay",!1),a(this,"firingEffect",null),a(this,"geometryResource",null),a(this,"visible",{turrets:!0,firingEffects:!0}),a(this,"_activeAnimation",new i.Tw2AnimationController),a(this,"_activeTurret",-1),a(this,"_currentCyclingFiresPos",0),a(this,"_fireCallback",null),a(this,"_fireCallbackPending",!1),a(this,"_hasCyclingFiringPos",!1),a(this,"_inactiveAnimation",new i.Tw2AnimationController),a(this,"_locatorDirty",!0),a(this,"_parentTransform",n.mat4.create()),a(this,"_perObjectDataActive",i.Tw2PerObjectData.from(u.perObjectData)),a(this,"_perObjectDataInactive",i.Tw2PerObjectData.from(u.perObjectData)),a(this,"_state",u.State.IDLE),a(this,"_targetPosition",n.vec3.create()),a(this,"_recheckTimeLeft",0)}get turrets(){return this.items}set turrets(e){this.items=e}Initialize(){this.turretEffect&&""!==this.geometryResPath&&(this.geometryResource=n.resMan.GetResource(this.geometryResPath),this._activeAnimation.SetGeometryResource(this.geometryResource),this._inactiveAnimation.SetGeometryResource(this.geometryResource),this.geometryResource&&this.geometryResource.RegisterNotification(this)),""!==this.firingEffectResPath&&n.resMan.GetObject(this.firingEffectResPath,e=>this.firingEffect=e),this.Rebuild()}InitializeFiringEffect(){if(this.firingEffect&&this.geometryResource&&this.geometryResource.models.length){const e=this.geometryResource.models[0];for(let t=0;t<this.firingEffect.GetPerMuzzleEffectCount();++t)this.firingEffect.SetMuzzleBoneID(t,e.FindBoneByName(u.positionBoneSkeletonNames[t]))}}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.turretEffect&&this.turretEffect.GetResources(e),this.firingEffect&&this.firingEffect.GetResources(e),this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),e}OnTurretFired(e){this._fireCallback=e}SetTargetPosition(e){n.vec3.copy(this._targetPosition,e)}GetClosestTurret(){let e=-1,t=-2;const r=u.global,i=r.vec3_0,s=r.vec4_0,a=r.vec4_1;for(let r=0;r<this.items.length;++r){const o=this.items[r];if(!o.display&&!o.canFireWhenHidden)continue;a[0]=o._localTransform[12],a[1]=o._localTransform[13],a[2]=o._localTransform[14],a[3]=1,n.vec4.transformMat4(a,a,this._parentTransform),n.vec3.subtract(i,this._targetPosition,a),n.vec3.normalize(i,i),n.vec4.set(s,0,1,0,0),n.vec4.transformMat4(s,s,o._localTransform),n.vec4.transformMat4(s,s,this._parentTransform);const u=n.vec3.dot(s,i);u>t&&(e=this.items.indexOf(o),t=u)}return e}EnterStateDeactive(){this._state!==u.State.INACTIVE&&this._state!==u.State.PACKING&&(this.turretEffect?(this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._activeAnimation.PlayAnimation("Pack",!1,()=>{this._state=u.State.INACTIVE,this._activeAnimation.PlayAnimation("Inactive",!0)}),this._inactiveAnimation.PlayAnimation("Pack",!1,()=>{this._state=u.State.INACTIVE,this._inactiveAnimation.PlayAnimation("Inactive",!0)}),this._state=u.State.PACKING):this._state=u.State.INACTIVE,this._activeTurret=-1,this.DoStopFiring())}EnterStateIdle(){this._state!==u.State.IDLE&&this._state!==u.State.UNPACKING&&(this.turretEffect?(this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._state===u.State.FIRING?(this._activeAnimation.PlayAnimation("Active",!0),this._inactiveAnimation.PlayAnimation("Active",!0)):(this._activeAnimation.PlayAnimation("Deploy",!1,()=>{this._state=u.State.IDLE,this._activeAnimation.PlayAnimation("Active",!0)}),this._inactiveAnimation.PlayAnimation("Deploy",!1,()=>{this._state=u.State.IDLE,this._inactiveAnimation.PlayAnimation("Active",!0)})),this._state=u.State.UNPACKING):this._state=u.State.IDLE,this._activeTurret=-1,this.DoStopFiring())}EnterStateFiring(){if(!this.turretEffect||this._state===u.State.FIRING)return this.DoStartFiring(),void(this.turretEffect&&this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)}));this._activeAnimation.StopAllAnimations(),this._inactiveAnimation.StopAllAnimations(),this._state===u.State.INACTIVE?(this._activeAnimation.PlayAnimation("Deploy",!1,()=>{this.DoStartFiring(),this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)})}),this._inactiveAnimation.PlayAnimation("Deploy",!1,()=>{this._inactiveAnimation.PlayAnimation("Active",!0)}),this._state=u.State.UNPACKING):(this.DoStartFiring(),this._activeAnimation.PlayAnimation("Fire",!1,()=>{this._activeAnimation.PlayAnimation("Active",!0)}),this._inactiveAnimation.PlayAnimation("Active",!0))}OnResPrepared(){const e=i.Tw2VertexElement.from({usage:"TEXCOORD",usageIndex:1,elements:2}),t=this.geometryResource.meshes,r=this._activeAnimation,n=this._inactiveAnimation;for(let r=0;r<t.length;++r)t[r].declaration.elements.push(e),t[r].declaration.RebuildHash();switch(this._state){case u.State.INACTIVE:r.PlayAnimation("Inactive",!0),n.PlayAnimation("Inactive",!0);break;case u.State.IDLE:r.PlayAnimation("Active",!0),n.PlayAnimation("Active",!0);break;case u.State.FIRING:r.PlayAnimation("Fire",!1,()=>r.PlayAnimation("Active",!0)),n.PlayAnimation("Active",!0);break;case u.State.PACKING:this.EnterStateIdle();break;case u.State.UNPACKING:this.EnterStateDeactive()}}FindItemByLocatorName(e){for(let t=0;t<this.items.length;t++)if(this.items[t].locatorName===e)return this.items[t];return null}UpdateItemsFromLocators(e){const t=u.global,r=Array.from(this.items),i=t.mat4_0;for(let t=0;t<e.length;t++){const s=e[t],a=s.name,o=s.transform,u=s.bone,c=void 0===u?null:u;let l=this.FindItemByLocatorName(a);l?r.splice(r.indexOf(l),1):l=this.CreateItem({name:a,locatorName:a,updateFromLocator:!0}),l.updateFromLocator&&(l._bone=c,n.mat4.copy(i,o),n.vec3.normalize(i.subarray(0,3),i.subarray(0,3)),n.vec3.normalize(i.subarray(4,7),i.subarray(4,7)),n.vec3.normalize(i.subarray(8,11),i.subarray(8,11)),n.mat4.getRotation(l.rotation,i),n.mat4.getTranslation(l.position,i),l.UpdateValues())}for(let e=0;e<r.length;e++)r[e].locatorName&&(this.RemoveItem(r[e]),e--);this.RebuildItemsFromLocators(),this._dirty&&this.Rebuild()}RebuildItemsFromLocators(){this._locatorDirty=!0}UpdateViewDependentData(e){n.mat4.copy(this._parentTransform,e),this.firingEffect&&this.firingEffect.UpdateViewDependentData(e)}Rebuild(){this.RebuildItems(),this._dirty=!1,super.Rebuild()}Update(e){if(super.Update(e),this.turretEffect&&(this._activeAnimation.Update(e),this._inactiveAnimation.Update(e)),this.firingEffect&&this._visibleItems.length){if(-1!==this._activeTurret){this.firingEffect.isLoopFiring&&this._state===u.State.FIRING&&(this._recheckTimeLeft-=e,this._recheckTimeLeft<=0&&this.DoStartFiring());const t=this.items[this._activeTurret];if(this._activeAnimation.models.length){const e=this._activeAnimation.models[0].bonesByName;for(let r=0;r<this.firingEffect.GetPerMuzzleEffectCount();++r){const i=e[u.positionBoneSkeletonNames[r]].worldTransform,s=this.firingEffect.GetMuzzleTransform(r);n.mat4.multiply(s,t._localTransform,i),n.mat4.multiply(s,this._parentTransform,s)}}else for(let e=0;e<this.firingEffect.GetPerMuzzleEffectCount();++e)n.mat4.multiply(this.firingEffect.GetMuzzleTransform(e),this._parentTransform,t._localTransform);if(this._fireCallbackPending){if(this._fireCallback){const e=[];for(let t=0;t<this.firingEffect.GetPerMuzzleEffectCount();++t)e.push(this.firingEffect.GetMuzzleTransform(t));this._fireCallback(this,e,t)}this._fireCallbackPending=!1}}this.firingEffect.SetEndPosition(this._targetPosition),this.firingEffect.Update(e)}}GetBatches(e,t,r,s){if(this.turretEffect&&this.geometryResource&&this.display&&this._visibleItems.length){if(e===n.device.RM_OPAQUE&&this.visible.turrets){const n=this._inactiveAnimation.GetBoneMatrices(0);if(0!==n.length){this.UpdatePerObjectData(this._perObjectDataInactive.vs,n),this._perObjectDataInactive.ps=r.ps;const s=new i.Tw2ForwardingRenderBatch;if(s.renderMode=e,s.renderActive=!1,s.perObjectData=this._perObjectDataInactive,s.geometryProvider=this,t.Commit(s),this._state===u.State.FIRING){const e=this._activeAnimation.GetBoneMatrices(0);if(0!==e.length){this.UpdatePerObjectData(this._perObjectDataActive.vs,e,!0),this._perObjectDataActive.ps=r.ps;const n=new i.Tw2ForwardingRenderBatch;n.renderActive=!0,n.perObjectData=this._perObjectDataActive,n.geometryProvider=this,t.Commit(n)}}}}this.GetFiringEffectBatches(e,t,r,s)}}GetFiringEffectBatches(e,t,r,n){this.firingEffect&&this.display&&this._visibleItems.length&&this.visible.firingEffects&&!n&&this.firingEffect.GetBatches(e,t,r)}Render(e,t){if(!this.turretEffect||!this.turretEffect.IsGood()||!this._visibleItems.length)return!1;let r=0;const s=function(e){n.device.gl.disableVertexAttribArray(e.location),n.device.gl.vertexAttrib2f(e.location,r,r)};for(let e=0;e<this.geometryResource.meshes.length;++e){this.geometryResource.meshes[e].declaration.FindUsage(i.Tw2VertexElement.Type.TEXCOORD,1).customSetter=s}let a=0;for(;r<this.items.length;++r)if(this.items[r].display){const n=this._state===u.State.FIRING&&r===this._activeTurret;e.renderActive===n&&(this.geometryResource.RenderAreas(0,0,1,this.turretEffect,t),a++)}return!!a}UpdatePerObjectData(e,t,r){n.mat4.transpose(e.Get("shipMatrix"),this._parentTransform);const i=t.length/12;e.Get("turretSetData")[0]=i,e.Get("baseCutoffData")[0]=this.bottomClipHeight;const s=e.Get("turretTranslation"),a=e.Get("turretRotation"),o=e.Get("turretPoseTransAndRot");for(let e=0;e<this._visibleItems.length;++e){const n=this._visibleItems[e];for(let r=0;r<i;++r)o[2*(e*i+r)*4]=t[12*r+3],o[2*(e*i+r)*4+1]=t[12*r+7],o[2*(e*i+r)*4+2]=t[12*r+11],o[2*(e*i+r)*4+3]=1,u.mat3x4toquat(t,r,o,2*(e*i+r)+1);n._bone&&!r&&n.UpdateTransforms(),s[4*e]=n._localTransform[12],s[4*e+1]=n._localTransform[13],s[4*e+2]=n._localTransform[14],s[4*e+3]=1,a[4*e]=n.rotation[0],a[4*e+1]=n.rotation[1],a[4*e+2]=n.rotation[2],a[4*e+3]=n.rotation[3]}}DoStartFiring(){this._hasCyclingFiringPos&&(this._currentCyclingFiresPos=1-this._currentCyclingFiresPos),this.firingEffect&&this.firingEffect.PrepareFiring(0,this._hasCyclingFiringPos?this._currentCyclingFiresPos:-1),this._activeTurret=this.GetClosestTurret(),this._state=u.State.FIRING,this._recheckTimeLeft=2,this._fireCallback&&(this._fireCallbackPending=!0)}DoStopFiring(){this.firingEffect&&this.firingEffect.StopFiring()}static black(e){return[["name",e.string],["bottomClipHeight",e.float],["boundingSphere",e.vector4],["chooseRandomLocator",e.boolean],["cyclingFireGroupCount",e.uint],["firingEffectResPath",e.string],["geometryResPath",e.string],["impactSize",e.float],["laserMissBehaviour",e.boolean],["locatorName",e.string],["maxCyclingFirePos",e.uint],["projectileMissBehaviour",e.boolean],["sysBoneHeight",e.float],["sysBonePitchMax",e.float],["sysBonePitchMin",e.float],["sysBonePitchFactor",e.float],["sysBonePitch01Factor",e.float],["sysBonePitch02Factor",e.float],["sysBonePitchOffset",e.float],["turretEffect",e.object],["updatePitchPose",e.boolean],["useDynamicBounds",e.boolean],["useRandomFiringDelay",e.boolean]]}}a(u,"Item",o),a(u,"State",{INACTIVE:0,IDLE:1,FIRING:2,PACKING:2,UNPACKING:4}),a(u,"worldNames",["turretWorld0","turretWorld1","turretWorld2"]),a(u,"positionBoneSkeletonNames",["Pos_Fire01","Pos_Fire02","Pos_Fire03","Pos_Fire04","Pos_Fire05","Pos_Fire06","Pos_Fire07","Pos_Fire08"]),a(u,"perObjectData",{vs:[["baseCutoffData",4],["turretSetData",4],["shipMatrix",16],["turretTranslation",96],["turretRotation",96],["turretPoseTransAndRot",576]]}),a(u,"mat3x4toquat",function(){let e,t;return function(r,i,s,a){e||(e=n.mat4.create(),t=n.quat.create()),i*=12,a*=4,e[0]=r[i],e[1]=r[i+4],e[2]=r[i+8],e[3]=0,e[4]=r[i+1],e[5]=r[i+5],e[6]=r[i+9],e[7]=0,e[8]=r[i+2],e[9]=r[i+6],e[10]=r[i+10],e[11]=0,e[12]=r[i+3],e[13]=r[i+7],e[14]=r[i+11],e[15]=1,n.mat4.getRotation(t,e),s[a]=t[0],s[a+1]=t[1],s[a+2]=t[2],s[a+3]=t[3]}}()),a(u,"__isStaging",1)},"./eve/item/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/item/legacy/index.js");r.d(t,"EveBoosterBatch",function(){return n.EveBoosterBatch}),r.d(t,"EveBoosterSetItem",function(){return n.EveBoosterSetItem}),r.d(t,"EveBoosterSet",function(){return n.EveBoosterSet});var i=r("./eve/item/EveBanner.js");r.d(t,"EveBanner",function(){return i.EveBanner});var s=r("./eve/item/EveBoosterSet2.js");r.d(t,"EveBoosterSet2Batch",function(){return s.EveBoosterSet2Batch}),r.d(t,"EveBoosterSet2Item",function(){return s.EveBoosterSet2Item}),r.d(t,"EveBoosterSet2",function(){return s.EveBoosterSet2});var a=r("./eve/item/EveCurveLineSet.js");r.d(t,"EveCurveLineSetItem",function(){return a.EveCurveLineSetItem}),r.d(t,"EveCurveLineSet",function(){return a.EveCurveLineSet});var o=r("./eve/item/EveCustomMask.js");r.d(t,"EveCustomMask",function(){return o.EveCustomMask});var u=r("./eve/item/EveHazeSet.js");r.d(t,"EveHazeSetBatch",function(){return u.EveHazeSetBatch}),r.d(t,"EveHazeSetItem",function(){return u.EveHazeSetItem}),r.d(t,"EveHazeSet",function(){return u.EveHazeSet});var c=r("./eve/item/EveLocator2.js");r.d(t,"EveLocator2",function(){return c.EveLocator2}),r.d(t,"EveLocator",function(){return c.EveLocator});var l=r("./eve/item/EveObjectSet.js");r.d(t,"EveObjectSetItem",function(){return l.EveObjectSetItem}),r.d(t,"EveObjectSet",function(){return l.EveObjectSet});var d=r("./eve/item/EvePlaneSet.js");r.d(t,"EvePlaneSetBatch",function(){return d.EvePlaneSetBatch}),r.d(t,"EvePlaneSetItem",function(){return d.EvePlaneSetItem}),r.d(t,"EvePlaneSet",function(){return d.EvePlaneSet});var h=r("./eve/item/EveSpaceObjectDecal.js");r.d(t,"EveSpaceObjectDecal",function(){return h.EveSpaceObjectDecal});var f=r("./eve/item/EveSpotlightSet.js");r.d(t,"EveSpotlightSetBatch",function(){return f.EveSpotlightSetBatch}),r.d(t,"EveSpotlightSetItem",function(){return f.EveSpotlightSetItem}),r.d(t,"EveSpotlightSet",function(){return f.EveSpotlightSet});var m=r("./eve/item/EveSpriteLineSet.js");r.d(t,"EveSpriteLineSetBatch",function(){return m.EveSpriteLineSetBatch}),r.d(t,"EveSpriteLineSetItem",function(){return m.EveSpriteLineSetItem}),r.d(t,"EveSpriteLineSet",function(){return m.EveSpriteLineSet});var v=r("./eve/item/EveSpriteSet.js");r.d(t,"EveSpriteSetBatch",function(){return v.EveSpriteSetBatch}),r.d(t,"EveSpriteSetItem",function(){return v.EveSpriteSetItem}),r.d(t,"EveSpriteSet",function(){return v.EveSpriteSet});var p=r("./eve/item/EveTrailsSet.js");r.d(t,"EveTrailSetRenderBatch",function(){return p.EveTrailSetRenderBatch}),r.d(t,"EveTrailsSet",function(){return p.EveTrailsSet});var E=r("./eve/item/EveTurretSet.js");r.d(t,"EveTurretSetItem",function(){return E.EveTurretSetItem}),r.d(t,"EveTurretSet",function(){return E.EveTurretSet})},"./eve/item/legacy/EveBoosterSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveBoosterBatch",function(){return l}),r.d(t,"EveBoosterSetItem",function(){return d}),r.d(t,"EveBoosterSet",function(){return h});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/item/EveObjectSet.js"),a=r("./global/util/index.js"),o=r("./core/mesh/index.js"),u=r("./eve/item/EveSpriteSet.js");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends i.Tw2RenderBatch{constructor(){super(...arguments),c(this,"boosters",null)}Commit(e){this.boosters.Render(e)}}class d extends s.EveObjectSetItem{constructor(){super(...arguments),c(this,"atlas0",0),c(this,"atlas1",0),c(this,"customValues",null),c(this,"locatorName",null),c(this,"seed",7*Math.random()),c(this,"transform",n.mat4.create()),c(this,"updateFromLocator",!1),c(this,"visible",{glow:!0,symHalo:!0,halo:!0,trail:!0,customValues:!0}),c(this,"wavePhase",Math.random())}GetPosition(e){return n.mat4.getTranslation(e,this.transform)}GetDirection(e){n.vec3.set(e,this.transform[8],this.transform[9],this.transform[10]),n.vec3.normalize(e,e);const t=this.GetScale();return t<3&&n.vec3.scale(e,e,t/3),e}GetScale(){const e=this.transform;return Math.max(n.vec3.length([e[0],e[1],e[2]]),n.vec3.length([e[4],e[5],e[6]]))}static from(e){const t=new this;return e&&(n.util.assignIfExists(t.visible,e.visible,["glow","symHalo","halo","trail"]),n.util.assignIfExists(t,e,["name","display","seed","wavePhase","transform","locatorName","updateFromLocator","atlas0","atlas1"])),t}}class h extends s.EveObjectSet{constructor(){super(...arguments),c(this,"alwaysOn",!0),c(this,"effect",null),c(this,"glowColor",n.vec4.create()),c(this,"glows",null),c(this,"glowScale",1),c(this,"haloColor",n.vec4.create()),c(this,"haloScaleX",1),c(this,"haloScaleY",1),c(this,"maxVel",250),c(this,"symHaloScale",1),c(this,"trailColor",n.vec4.create()),c(this,"trailSize",n.vec4.create()),c(this,"warpGlowColor",n.vec4.create()),c(this,"warpHaloColor",n.vec4.create()),c(this,"glowDistance",2.5),c(this,"haloDistance",3.01),c(this,"symHaloDistance",3),c(this,"visible",{glows:!0,symHalos:!0,halos:!0,trails:!0}),c(this,"_parentTransform",n.mat4.create()),c(this,"_positions",null),c(this,"_decl",i.Tw2VertexDeclaration.from(h.vertexDeclarations)),c(this,"_perObjectData",i.Tw2PerObjectData.from(h.perObjectData)),c(this,"_locatorDirty",!0),c(this,"_worldSpriteScale",1)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.effect&&this.effect.GetResources(e),e}RebuildItems(e){const t=this.glows,r=h.global,i=r.vec3_0;t&&t.ClearItems(),this._visibleItems=[];for(let e=0;e<this.items.length;e++){const s=this.items[e];if(s.display){if(this._visibleItems.push(s),t){const e=s.customValues&&s.customValues.display?s.customValues:this,a=s.GetPosition(r.vec3_1),o=s.GetDirection(r.vec3_2),u=s.GetScale();this.visible.glows&&s.visible.glow&&t.CreateItem({name:s.name+"_glow",position:n.vec3.subtract(i,a,n.vec3.scale(i,o,e.glowDistance)),blinkRate:s.seed,blinkPhase:s.seed,minScale:e.glowScale*u,maxScale:e.glowScale*u,color:e.glowColor,warpColor:e.warpGlowColor}),this.visible.symHalos&&s.visible.symHalo&&t.CreateItem({name:s.name+"_symHalo",position:n.vec3.subtract(i,a,n.vec3.scale(i,o,e.symHaloDistance)),blinkRate:s.seed,blinkPhase:s.seed+1,minScale:e.symHaloScale*u,maxScale:e.symHaloScale*u,color:e.haloColor,warpColor:e.warpHaloColor}),this.visible.halos&&s.visible.halo&&t.CreateItem({name:s.name+"_halo",position:n.vec3.subtract(i,a,n.vec3.scale(i,o,e.haloDistance)),blinkRate:s.seed,blinkPhase:s.seed+1,minScale:e.haloScaleX*u,maxScale:e.haloScaleY*u,color:e.haloColor,warpColor:e.warpHaloColor})}s._dirty=!1}}this._dirty=!0}FindItemByLocatorName(e){for(let t=0;t<this.items.length;t++)if(this.items[t].locatorName&&this.items[t].locatorName===e)return this.items[t];return null}UpdateItemsFromLocators(e){const t=Array.from(this.items);for(let r=0;r<e.length;r++){const i=e[r],s=i.name,a=i.transform,o=i.atlasIndex0,u=i.atlasIndex1;let c=this.FindItemByLocatorName(s);c?(t.splice(t.indexOf(c),1),c.updateFromLocator&&(n.mat4.copy(c.transform,a),c.atlas0=o,c.atlas1=u,c.OnValueChanged())):this.CreateItem({name:s,locatorName:s,updateFromLocator:!0,atlas0:o,atlas1:u,transform:a})}for(let e=0;e<t.length;e++)null!==t[e].locatorName&&(this.RemoveItem(t[e]),e--);this._locatorDirty=!1,this._dirty&&this.Rebuild()}RebuildItemsFromLocators(){this._locatorDirty=!0}Update(e,t,r){n.mat4.copy(this._parentTransform,t),this._worldSpriteScale!==r&&(this._dirty=!0),super.Update(e),this.glows&&this.glows.Update(e,r)}Unload(e){this._positions&&(n.device.gl.deleteBuffer(this._positions),this._positions=null),this.glows&&this.glows.Unload(e),super.Unload(e)}Rebuild(){this.RebuildItems();const e=this._visibleItems.length;if(this._dirty=!1,!e)return void super.Rebuild();const t=n.device,r=h._box,i=new Float32Array(e*r.length*6*28),s=[0,3,1,3,2,1];let a=0;for(let t=0;t<e;++t){const e=this._visibleItems[t];for(let t=0;t<r.length;++t)for(let n=0;n<s.length;++n)i[a++]=r[t][s[n]][0],i[a++]=r[t][s[n]][1],i[a++]=r[t][s[n]][2],i[a++]=0,i[a++]=0,i.set(e.transform,a),a+=16,i[a++]=0,i[a++]=1,i[a++]=1,i[a++]=1,i[a++]=e.wavePhase,i[a++]=e.atlas0,i[a++]=e.atlas1}this._positions=t.gl.createBuffer(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,this._positions),t.gl.bufferData(t.gl.ARRAY_BUFFER,i,t.gl.STATIC_DRAW),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,null),this._positions.count=12*e*3,this.glows&&this.glows.Rebuild(),super.Rebuild()}GetBatches(e,t,r){if(this.display&&e===n.device.RM_ADDITIVE&&this._positions&&this._visibleItems.length){if(this.effect){const e=new l;n.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._parentTransform),this._perObjectData.vs.Set("Shipdata",r.vs.Get("Shipdata")),this._perObjectData.ps=r.ps,e.perObjectData=this._perObjectData,e.boosters=this,e.renderMode=n.device.RM_ADDITIVE,t.Commit(e)}this.glows&&this.glows.GetBoosterGlowBatches(e,t,r,this._parentTransform,r.vs.Get("Shipdata")[0],0)}}Render(e){if(!this.effect||!this.effect.IsGood()||!this._positions)return!1;const t=n.device,r=t.gl;r.bindBuffer(r.ARRAY_BUFFER,this._positions);for(let n=0;n<this.effect.GetPassCount(e);++n){if(this.effect.ApplyPass(e,n),!this._decl.SetDeclaration(t,this.effect.GetPassInput(e,n),112))return!1;t.ApplyShadowState(),r.drawArrays(r.TRIANGLES,0,this._positions.count)}return!0}static from(e,t){const r=new h;if(e&&(Object(a.assignIfExists)(r,e,["alwaysOn","glowColor","glowScale","haloColor","haloScaleX","haloScaleY","maxVel","symHaloScale","trailColor","trailSize","warpGlowColor","name","display","glowDistance","haloDistance","symHaloDistance","warpHaloColor"]),void 0!==e.warpHalpColor&&(r.warpHaloColor=e.warpHalpColor),e.visible&&Object(a.assignIfExists)(r.visible,e.visible,["glows","symHalos","halos","trails"]),e.effect&&(r.effect=o.Tw2Effect.from(e.effect)),e.glows&&(r.glows=u.EveSpriteSet.from(e.glows)),e.items))for(let t=0;t<e.items.length;t++)r.CreateItem(e.items[t]);return t&&t.skipUpdate||r.Initialize(),r}}c(h,"Item",d),c(h,"perObjectData",{vs:[["WorldMat",16],["Shipdata",4]]}),c(h,"vertexDeclarations",[{usage:"POSITION",usageIndex:0,elements:3},{usage:"TEXCOORD",usageIndex:0,elements:2},{usage:"TEXCOORD",usageIndex:1,elements:4},{usage:"TEXCOORD",usageIndex:2,elements:4},{usage:"TEXCOORD",usageIndex:3,elements:4},{usage:"TEXCOORD",usageIndex:4,elements:4},{usage:"TEXCOORD",usageIndex:5,elements:4},{usage:"TEXCOORD",usageIndex:6,elements:1},{usage:"TEXCOORD",usageIndex:7,elements:2}]),c(h,"_box",[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]],[[-1,-1,-1],[-1,1,-1],[1,1,-1],[1,-1,-1]],[[-1,-1,0],[-1,1,0],[-1,1,-1],[-1,-1,-1]],[[1,-1,0],[1,-1,-1],[1,1,-1],[1,1,0]],[[-1,-1,0],[-1,-1,-1],[1,-1,-1],[1,-1,0]],[[-1,1,0],[1,1,0],[1,1,-1],[-1,1,-1]]])},"./eve/item/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/item/legacy/EveBoosterSet.js");r.d(t,"EveBoosterBatch",function(){return n.EveBoosterBatch}),r.d(t,"EveBoosterSetItem",function(){return n.EveBoosterSetItem}),r.d(t,"EveBoosterSet",function(){return n.EveBoosterSet})},"./eve/object/EveEffectRoot2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveEffectRoot2",function(){return a});var n=r("./global/index.js"),i=r("./eve/object/legacy/EveObject.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveObject{constructor(){super(...arguments),s(this,"name",""),s(this,"boundingSphereCenter",n.vec3.create()),s(this,"boundingSphereRadius",0),s(this,"curveSets",[]),s(this,"duration",0),s(this,"dynamicLOD",!1),s(this,"effectChildren",[]),s(this,"lights",[]),s(this,"observers",[]),s(this,"rotation",n.quat.create()),s(this,"scaling",n.vec3.fromValues(1,1,1)),s(this,"secondaryLightingEmissiveColor",n.vec4.create()),s(this,"secondaryLightingSphereRadius",0),s(this,"translation",n.vec3.create())}static black(e){return[["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["curveSets",e.array],["duration",e.float],["dynamicLOD",e.boolean],["effectChildren",e.array],["lights",e.array],["name",e.string],["observers",e.array],["rotation",e.vector4],["scaling",e.vector3],["secondaryLightingEmissiveColor",e.color],["secondaryLightingSphereRadius",e.float],["translation",e.vector3]]}}s(a,"__isStaging",4)},"./eve/object/EveMissile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMissileWarhead",function(){return o}),r.d(t,"EveMissile",function(){return u});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/object/legacy/EveObject.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.EveObject{constructor(){super(...arguments),a(this,"acceleration",1),a(this,"durationEjectPhase",0),a(this,"impactDuration",.6),a(this,"impactSize",0),a(this,"maxExplosionDistance",40),a(this,"mesh",null),a(this,"particleEmitters",[]),a(this,"pathOffsetNoiseScale",0),a(this,"pathOffsetNoiseSpeed",0),a(this,"spriteSet",null),a(this,"startEjectVelocity",0),a(this,"warheadLength",0),a(this,"warheadRadius",0),a(this,"_perObjectData",i.Tw2PerObjectData.from(o.perObjectData)),a(this,"_state",o.State.READY),a(this,"_time",0),a(this,"_transform",n.mat4.create()),a(this,"_velocity",n.vec3.create())}Initialize(){this.spriteSet&&this.spriteSet.UseQuads(!0)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),this.spriteSet&&this.spriteSet.GetResources(e),e}Launch(e){n.mat4.copy(this._transform,e),this._velocity[0]=e[8]*this.startEjectVelocity,this._velocity[1]=e[9]*this.startEjectVelocity,this._velocity[2]=e[10]*this.startEjectVelocity,this._time=0,this._state=o.State.IN_FLIGHT}UpdateViewDependentData(){this.display&&this._state!==o.State.DEAD&&(n.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._transform),n.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._transform))}Update(e,t,r){if(this._state===o.State.IN_FLIGHT){const i=s.EveObject.global,a=n.mat4.getTranslation(i.vec3_0,this._transform),u=i.vec3_1,c=i.vec3_2,l=i.vec3_3;this._time+=e,this._time>this.durationEjectPhase?(n.vec3.subtract(a,this._velocity,t),n.vec3.lerp(a,a,t,1-Math.exp(.9999*-e)),n.mat4.setTranslation(this._transform,a),n.vec3.subtract(u,r,a),n.vec3.length(u)<this.maxExplosionDistance&&(console.log(a,u),this._state=o.State.DEAD)):(n.vec3.scale(u,this._velocity,e),this._transform[12]+=u[0],this._transform[13]+=u[1],this._transform[14]+=u[2]);const d=n.vec3.normalize(u,this._velocity);Math.abs(d[0])<.99?n.vec3.cross(c,d,[1,0,0]):n.vec3.cross(c,d,[0,1,0]),n.vec3.normalize(c,c),n.vec3.cross(l,c,d),this._transform[0]=c[0],this._transform[1]=c[1],this._transform[2]=c[2],this._transform[4]=l[0],this._transform[5]=l[1],this._transform[6]=l[2],this._transform[8]=d[0],this._transform[9]=d[1],this._transform[10]=d[2]}this.spriteSet&&this.spriteSet.Update(e)}GetBatches(e,t){this.display&&this.mesh&&this._state!==o.State.DEAD&&(this.mesh&&this.mesh.GetBatches(e,t,this._perObjectData),this.spriteSet&&this.spriteSet.GetBatches(e,t,this._perObjectData,this._transform))}static black(e){return[["acceleration",e.float],["durationEjectPhase",e.float],["impactDuration",e.float],["impactSize",e.float],["maxExplosionDistance",e.float],["mesh",e.object],["particleEmitters",e.array],["pathOffsetNoiseScale",e.float],["pathOffsetNoiseSpeed",e.float],["spriteSet",e.object],["startEjectVelocity",e.float],["warheadLength",e.float],["warheadRadius",e.float]]}}a(o,"perObjectData",{vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4]]}),a(o,"State",{READY:0,IN_FLIGHT:1,DEAD:2}),a(o,"__isStaging",2);class u extends s.EveObject{constructor(){super(...arguments),a(this,"boundingSphereCenter",n.vec3.create()),a(this,"boundingSphereRadius",0),a(this,"modelTranslationCurve",null),a(this,"warheads",[]),a(this,"curveSets",[]),a(this,"speed",1),a(this,"_position",n.vec3.create()),a(this,"_target",n.vec3.create()),a(this,"_warheadExplosionCallback",null),a(this,"_missileFinishedCallback",null)}OnWarheadExplosion(e){this._warheadExplosionCallback=e}OnMissileFinished(e){this._missileFinishedCallback=e}Launch(e,t,r){if(n.vec3.copy(this._position,e),n.vec3.copy(this._target,r),this.warheads.length>t.length)this.warheads.splice(t.length);else for(;this.warheads.length<t.length;)this.warheads.push(this.constructor.CloneWarhead(this.warheads[0]));for(let e=0;e<this.warheads.length;++e)this.warheads[0].Launch(t[e])}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<this.warheads.length;++t)this.warheads[t].GetResources(e);return e}UpdateViewDependentData(){for(let e=0;e<this.warheads.length;++e)this.warheads[e].UpdateViewDependentData()}Update(e){const t=n.vec3.subtract(s.EveObject.global.vec3_0,this._target,this._position),r=n.vec3.length(t);r>.1&&(n.vec3.normalize(t,t),n.vec3.scale(t,t,Math.min(e*this.speed,r)),n.vec3.add(this._position,this._position,t));for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);let i=!1;for(let t=0;t<this.warheads.length;++t){const r=this.warheads[t]._state;this.warheads[t].Update(e,this._position,this._target),r!==o.State.DEAD&&this.warheads[t]._state===o.State.DEAD&&(this._warheadExplosionCallback&&this._warheadExplosionCallback(this.warheads[t]),i=!0)}if(i&&this._missileFinishedCallback){for(let e=0;e<this.warheads.length;++e)if(this.warheads[e]._state!==o.State.DEAD)return;this._missileFinishedCallback(this)}}GetBatches(e,t){if(this.display)for(let r=0;r<this.warheads.length;++r)this.warheads[r].GetBatches(e,t)}static CloneWarhead(e){const t=new o;return t.mesh=e.mesh,t.spriteSet=e.spriteSet,t}static black(e){return[["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["modelTranslationCurve",e.object],["name",e.string],["warheads",e.array]]}}a(u,"__isStaging",2)},"./eve/object/EveMobile.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveMobile",function(){return a});var n=r("./global/index.js"),i=r("./eve/object/legacy/EveObject.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveObject{constructor(){super(...arguments),s(this,"name",""),s(this,"attachments",[]),s(this,"boundingSphereCenter",n.vec3.create()),s(this,"boundingSphereRadius",0),s(this,"children",[]),s(this,"controllers",[]),s(this,"curveSets",[]),s(this,"locatorSets",[]),s(this,"meshLod",null),s(this,"observers",[]),s(this,"shadowEffect",null)}static black(e){return[["attachments",e.array],["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["children",e.array],["controllers",e.array],["curveSets",e.array],["locatorSets",e.array],["name",e.string],["meshLod",e.object],["observers",e.array],["shadowEffect",e.object]]}}s(a,"__isStaging",4)},"./eve/object/EveRootTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveRootTransform",function(){return a});var n=r("./global/index.js"),i=r("./eve/object/legacy/EveObject.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveObject{constructor(){super(...arguments),s(this,"name",""),s(this,"boundingSphereRadius",0),s(this,"children",[]),s(this,"curveSets",[]),s(this,"display",!1),s(this,"mesh",null),s(this,"modifier",0),s(this,"observers",[]),s(this,"rotation",n.quat.create()),s(this,"rotationCurve",null),s(this,"scaling",n.vec3.fromValues(1,1,1)),s(this,"sortValueMultiplier",0),s(this,"translation",n.vec3.create()),s(this,"translationCurve",null)}static black(e){return[["boundingSphereRadius",e.float],["children",e.array],["curveSets",e.array],["display",e.boolean],["mesh",e.object],["modifier",e.uint],["name",e.string],["observers",e.array],["position",e.vector3],["rotation",e.vector4],["rotationCurve",e.object],["scaling",e.vector3],["sortValueMultiplier",e.float],["translation",e.vector3],["translationCurve",e.object],["useDistanceBasedScale",e.boolean]]}}s(a,"__isStaging",4)},"./eve/object/EveShip2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveShip2",function(){return a});var n=r("./global/index.js"),i=r("./eve/object/legacy/EveObject.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveObject{constructor(){super(...arguments),s(this,"attachments",[]),s(this,"boosters",null),s(this,"boundingSphereCenter",n.vec3.create()),s(this,"boundingSphereRadius",0),s(this,"children",[]),s(this,"customMasks",[]),s(this,"decals",[]),s(this,"dna",""),s(this,"locatorSets",[]),s(this,"locators",[]),s(this,"mesh",null),s(this,"rotationCurve",null),s(this,"shadowEffect",null),s(this,"shapeEllipsoidCenter",n.vec3.create()),s(this,"shapeEllipsoidRadius",n.vec3.create()),s(this,"translationCurve",null)}static black(e){return[["attachments",e.array],["boosters",e.object],["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["children",e.array],["customMasks",e.array],["decals",e.array],["dna",e.string],["locatorSets",e.array],["locators",e.array],["mesh",e.object],["name",e.string],["meshLod",e.object],["rotationCurve",e.object],["shadowEffect",e.object],["shapeEllipsoidCenter",e.vector3],["shapeEllipsoidRadius",e.vector3],["translationCurve",e.object]]}}s(a,"__isStaging",4)},"./eve/object/EveStation2.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveStation2",function(){return a});var n=r("./global/index.js"),i=r("./eve/object/legacy/EveObject.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.EveObject{constructor(){super(...arguments),s(this,"attachments",[]),s(this,"boundingSphereCenter",n.vec3.create()),s(this,"boundingSphereRadius",0),s(this,"children",[]),s(this,"curveSets",[]),s(this,"decals",[]),s(this,"effectChildren",[]),s(this,"lights",[]),s(this,"locatorSets",[]),s(this,"locators",[]),s(this,"mesh",null),s(this,"meshLod",null),s(this,"modelRotationCurve",null),s(this,"modelScale",0),s(this,"observers",[]),s(this,"rotationCurve",null),s(this,"shadowEffect",null),s(this,"translationCurve",null)}static black(e){return[["attachments",e.array],["boundingSphereCenter",e.vector3],["boundingSphereRadius",e.float],["children",e.array],["curveSets",e.array],["decals",e.array],["effectChildren",e.array],["lights",e.array],["locatorSets",e.array],["locators",e.array],["name",e.string],["mesh",e.object],["meshLod",e.object],["modelScale",e.float],["observers",e.array],["rotationCurve",e.object],["modelRotationCurve",e.object],["shadowEffect",e.object],["translationCurve",e.object]]}}s(a,"__isStaging",4)},"./eve/object/EveTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTransform",function(){return o});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/object/legacy/EveObject.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.EveObject{constructor(){super(...arguments),a(this,"name",""),a(this,"children",[]),a(this,"curveSets",[]),a(this,"display",!0),a(this,"distanceBasedScaleArg1",.2),a(this,"distanceBasedScaleArg2",.63),a(this,"hideOnLowQuality",!1),a(this,"mesh",null),a(this,"modifier",o.Modifier.NONE),a(this,"observers",[]),a(this,"overrideBoundsMax",n.vec3.create()),a(this,"overrideBoundsMin",n.vec3.create()),a(this,"particleEmitters",[]),a(this,"particleSystems",[]),a(this,"rotation",n.quat.create()),a(this,"scaling",n.vec3.fromValues(1,1,1)),a(this,"sortValueMultiplier",1),a(this,"translation",n.vec3.create()),a(this,"update",!1),a(this,"useDistanceBasedScale",!1),a(this,"useLodLevel",!1),a(this,"visibilityThreshold",0),a(this,"visible",{mesh:!0,children:!0}),a(this,"localTransform",n.mat4.create()),a(this,"worldTransform",n.mat4.create()),a(this,"_perObjectData",i.Tw2PerObjectData.from(o.perObjectData))}Initialize(){n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling)}SetLocalTransform(e){n.mat4.getRotation(this.rotation,e),n.mat4.getScaling(this.scaling,e),n.mat4.getTranslation(this.translation,e)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.mesh&&this.mesh.GetResources(e);for(let t=0;t<this.children.length;t++)this.children[t].GetResources(e);return e}UpdateViewDependentData(e){const t=n.device,r=s.EveObject.global,i=r.vec3_0,a=r.vec3_1,u=r.vec3_2,c=t.viewInverse;switch(n.quat.normalize(this.rotation,this.rotation),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),n.mat4.getScaling(a,e),this.modifier){case o.Modifier.BILLBOARD:case o.Modifier.SIMPLE_HALO:const s=r.vec3_3;if(n.mat4.multiply(this.worldTransform,e,this.localTransform),n.vec3.multiply(i,this.scaling,a),this.modifier===o.Modifier.SIMPLE_HALO){n.vec3.subtract(u,t.GetEyePosition(u),this.worldTransform.subarray(12)),n.vec3.normalize(s,this.worldTransform.subarray(8)),n.vec3.normalize(u,u);let e=n.vec3.dot(u,s);e<0&&(e=0),n.vec3.scale(i,i,e*e)}this.worldTransform[0]=c[0]*i[0],this.worldTransform[1]=c[1]*i[0],this.worldTransform[2]=c[2]*i[0],this.worldTransform[4]=c[4]*i[1],this.worldTransform[5]=c[5]*i[1],this.worldTransform[6]=c[6]*i[1],this.worldTransform[8]=c[8]*i[2],this.worldTransform[9]=c[9]*i[2],this.worldTransform[10]=c[10]*i[2];break;case o.Modifier.EVE_CAMERA_ROTATION:const l=r.vec3_3;n.vec3.transformMat4(l,this.translation,e),n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,l,this.scaling),n.mat4.multiply(this.worldTransform,c,this.localTransform),this.worldTransform[12]=this.localTransform[12],this.worldTransform[13]=this.localTransform[13],this.worldTransform[14]=this.localTransform[14];break;case o.Modifier.EVE_CAMERA_ROTATION_ALIGNED:case o.Modifier.EVE_SIMPLE_HALO:const d=r.vec3_3,h=r.vec3_4,f=r.vec3_5,m=r.vec3_6,v=r.vec3_7,p=r.mat4_0,E=r.mat4_1,_=r.mat4_2;if(n.mat4.translate(this.worldTransform,e,this.translation),n.mat4.transpose(p,e),t.GetEyePosition(u),u[0]-=this.worldTransform[12],u[1]-=this.worldTransform[13],u[2]-=this.worldTransform[14],n.vec3.copy(d,u),n.vec3.transformMat4(d,d,p),n.vec3.divide(d,d,a),n.vec3.normalize(d,d),n.vec3.set(h,t.view[0],t.view[4],t.view[8]),n.vec3.transformMat4(h,h,p),n.vec3.normalize(h,h),n.vec3.cross(f,d,h),n.vec3.normalize(f,f),n.vec3.cross(h,f,d),E[0]=h[0],E[1]=h[1],E[2]=h[2],E[4]=f[0],E[5]=f[1],E[6]=f[2],E[8]=d[0],E[9]=d[1],E[10]=d[2],E[15]=1,n.mat4.fromQuat(_,this.rotation),n.mat4.multiply(E,E,_),this.modifier===o.Modifier.EVE_SIMPLE_HALO){n.vec3.normalize(m,this.worldTransform.subarray(8)),n.vec3.normalize(v,u);let e=-n.vec3.dot(v,m);e<0&&(e=0),n.mat4.multiply(this.worldTransform,this.worldTransform,E),n.mat4.scale(this.worldTransform,this.worldTransform,[this.scaling[0]*e,this.scaling[1]*e,this.scaling[2]*e])}else n.mat4.scale(this.worldTransform,this.worldTransform,this.scaling),n.mat4.multiply(this.worldTransform,this.worldTransform,E);break;case o.Modifier.LOOK_AT_CAMERA:const g=r.mat4_0;n.mat4.multiply(this.worldTransform,e,this.localTransform),n.mat4.lookAt(g,c.subarray(12),this.worldTransform.subarray(12),[0,1,0]),n.mat4.transpose(g,g),n.vec3.multiply(i,this.scaling,a),this.worldTransform[0]=g[0]*i[0],this.worldTransform[1]=g[1]*i[0],this.worldTransform[2]=g[2]*i[0],this.worldTransform[4]=g[4]*i[1],this.worldTransform[5]=g[5]*i[1],this.worldTransform[6]=g[6]*i[1],this.worldTransform[8]=g[8]*i[2],this.worldTransform[9]=g[9]*i[2],this.worldTransform[10]=g[10]*i[2];break;default:n.mat4.multiply(this.worldTransform,e,this.localTransform)}for(let e=0;e<this.children.length;++e)this.children[e].UpdateViewDependentData(this.worldTransform)}Update(e){for(let t=0;t<this.children.length;++t)this.children[t].Update(e);for(let t=0;t<this.particleEmitters.length;++t)this.particleEmitters[t].Update(e);for(let t=0;t<this.particleSystems.length;++t)this.particleSystems[t].Update(e);for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e)}GetBatches(e,t,r){if(this.display&&(this.visible.mesh&&this.mesh&&(n.mat4.transpose(this._perObjectData.ffe.Get("World"),this.worldTransform),n.mat4.invert(this._perObjectData.ffe.Get("WorldInverseTranspose"),this.worldTransform),r&&(this._perObjectData.vs=r.vs,this._perObjectData.ps=r.ps),this.mesh.GetBatches(e,t,this._perObjectData)),this.visible.children))for(let n=0;n<this.children.length;++n)this.children[n].GetBatches(e,t,r)}static Multiply3x3(e,t,r){r||(r=t);let n=t[0],i=t[1];return t=t[2],r[0]=e[0]*n+e[4]*i+e[8]*t,r[1]=e[1]*n+e[5]*i+e[9]*t,r[2]=e[2]*n+e[6]*i+e[10]*t,r}static black(e){return[["children",e.array],["curveSets",e.array],["display",e.boolean],["distanceBasedScaleArg1",e.float],["distanceBasedScaleArg2",e.float],["hideOnLowQuality",e.boolean],["name",e.string],["mesh",e.object],["meshLod",e.object],["modifier",e.uint],["observers",e.array],["overrideBoundsMax",e.vector3],["overrideBoundsMin",e.vector3],["particleEmitters",e.array],["particleSystems",e.array],["rotation",e.vector4],["scaling",e.vector3],["sortValueMultiplier",e.float],["translation",e.vector3],["update",e.boolean],["useDistanceBasedScale",e.boolean],["useLodLevel",e.boolean],["visibilityThreshold",e.float]]}}a(o,"perObjectData",{ffe:[["World",16],["WorldInverseTranspose",16]]}),a(o,"Modifier",{NONE:0,BILLBOARD:1,TRANSLATE_WITH_CAMERA:2,LOOK_AT_CAMERA:3,SIMPLE_HALO:4,EVE_CAMERA_ROTATION_ALIGNED:100,EVE_BOOSTER:101,EVE_SIMPLE_HALO:102,EVE_CAMERA_ROTATION:103}),a(o,"__isStaging",1)},"./eve/object/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/object/legacy/index.js");r.d(t,"EveEffectRoot",function(){return n.EveEffectRoot}),r.d(t,"EvePlanet",function(){return n.EvePlanet}),r.d(t,"EveShip",function(){return n.EveShip}),r.d(t,"EveSpaceObject",function(){return n.EveSpaceObject}),r.d(t,"EveStation",function(){return n.EveStation});var i=r("./eve/object/EveEffectRoot2.js");r.d(t,"EveEffectRoot2",function(){return i.EveEffectRoot2});var s=r("./eve/object/EveMissile.js");r.d(t,"EveMissileWarhead",function(){return s.EveMissileWarhead}),r.d(t,"EveMissile",function(){return s.EveMissile});var a=r("./eve/object/EveMobile.js");r.d(t,"EveMobile",function(){return a.EveMobile});var o=r("./eve/object/EveRootTransform.js");r.d(t,"EveRootTransform",function(){return o.EveRootTransform});var u=r("./eve/object/EveShip2.js");r.d(t,"EveShip2",function(){return u.EveShip2});var c=r("./eve/object/EveStation2.js");r.d(t,"EveStation2",function(){return c.EveStation2});var l=r("./eve/object/EveTransform.js");r.d(t,"EveTransform",function(){return l.EveTransform})},"./eve/object/legacy/EveEffectRoot.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveEffectRoot",function(){return u});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/object/legacy/EveObject.js"),a=r("./eve/object/legacy/EveSpaceObject.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends s.EveObject{constructor(){super(...arguments),o(this,"curveSets",[]),o(this,"effectChildren",[]),o(this,"duration",0),o(this,"scaling",n.vec3.fromValues(1,1,1)),o(this,"rotation",n.quat.create()),o(this,"translation",n.vec3.create()),o(this,"localTransform",n.mat4.create()),o(this,"boundingSphereCenter",n.vec3.create()),o(this,"boundingSphereRadius",0),o(this,"_worldTransform",n.mat4.create()),o(this,"_perObjectData",i.Tw2PerObjectData.from(a.EveSpaceObject.perObjectData))}SetLocalTransform(e){n.mat4.getRotation(this.rotation,e),n.mat4.getScaling(this.scaling,e),n.mat4.getTranslation(this.translation,e)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=0;t<this.effectChildren.length;++t)this.effectChildren[t].GetResources(e);return e}Start(){for(let e=0;e<this.curveSets.length;++e)this.curveSets[e].Play()}Stop(){for(let e=0;e<this.curveSets.length;++e)this.curveSets[e].Stop()}UpdateViewDependentData(e){n.mat4.fromRotationTranslationScale(this.localTransform,this.rotation,this.translation,this.scaling),n.mat4.multiply(this._worldTransform,e,this.localTransform)}Update(e){for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);for(let t=0;t<this.effectChildren.length;++t)this.effectChildren[t].Update(e,this._worldTransform)}GetBatches(e,t){if(this.display)for(let r=0;r<this.effectChildren.length;++r)this.effectChildren[r].GetBatches(e,t,this._perObjectData)}}},"./eve/object/legacy/EveObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveObject",function(){return a});var n=r("./global/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2BaseClass{constructor(){super(...arguments),s(this,"name",""),s(this,"display",!0)}GetResources(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw new i.ErrAbstractClassMethod}Update(e){throw new i.ErrAbstractClassMethod}GetBatches(e,t){throw new i.ErrAbstractClassMethod}}s(a,"global",{vec3_0:n.vec3.create(),vec3_1:n.vec3.create(),vec3_2:n.vec3.create(),vec3_3:n.vec3.create(),vec3_4:n.vec3.create(),vec3_5:n.vec3.create(),vec3_6:n.vec3.create(),vec3_7:n.vec3.create(),mat4_0:n.mat4.create(),mat4_1:n.mat4.create(),mat4_2:n.mat4.create()})},"./eve/object/legacy/EvePlanet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EvePlanet",function(){return u});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/object/EveTransform.js"),a=r("./eve/object/legacy/EveObject.js");r("../node_modules/gl-matrix/lib/gl-matrix.js");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends a.EveObject{constructor(){super(...arguments),o(this,"highDetail",new s.EveTransform),o(this,"effectHeight",new i.Tw2Effect),o(this,"heightMap",new i.Tw2RenderTarget),o(this,"zOnlyModel",null),o(this,"itemID",0),o(this,"heightMapResPath1",""),o(this,"heightMapResPath2",""),o(this,"heightDirty",!1),o(this,"lockedResources",[]),o(this,"watchedResources",[]),o(this,"_atmosphere",null),o(this,"_planet",null)}SetLocalTransform(e){this.highDetail.SetLocalTransform(e)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.highDetail&&this.highDetail.GetResources(e),this.effectHeight&&this.effectHeight.GetResources(e),e}Create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const r=e.itemID,i=void 0===r?0:r,s=e.planetPath,a=e.atmospherePath,o=e.heightMap1,c=e.heightMap2;this.itemID=i,this.heightMapResPath1=o,this.heightMapResPath2=c,this.highDetail.children=[],this.heightDirty=!0;let l=1;function d(){--l<1&&t&&t()}s&&l++,a&&l++,s&&n.resMan.GetObject(s,e=>{this._planet=e,u.MeshLoaded(this,e),d()}),a&&n.resMan.GetObject(a,e=>{this._atmosphere=e,this.highDetail.children.push(e),d()}),n.resMan.GetObject("res:/dx9/model/worldobject/planet/planetzonly.red",e=>{this.zOnlyModel=e,d()})}GetPlanetResources(e,t,r){if(!t.includes(e))if(t.push(e),!e||n.util.isUndefined(e.doNotPurge))for(let i in e)e.hasOwnProperty(i)&&n.util.isObjectLike(e[i])&&this.GetPlanetResources(e[i],t,r);else r.push(e)}UpdateViewDependentData(e){this.highDetail.UpdateViewDependentData(e),this.zOnlyModel&&(this.zOnlyModel.translation=this.highDetail.translation,this.zOnlyModel.scaling=this.highDetail.scaling,this.zOnlyModel.UpdateViewDependentData(e))}Update(e){this.highDetail.Update(e)}GetBatches(e,t){if(this.display&&this.heightDirty&&this.watchedResources.length&&""!==this.heightMapResPath1){for(let e=0;e<this.watchedResources.length;++e)if(this.watchedResources[e]&&!this.watchedResources[e].IsGood())return;this.watchedResources=[],this.heightMap.Set(),n.device.SetStandardStates(n.device.RM_FULLSCREEN),n.device.gl.clearColor(0,0,0,0),n.device.gl.clear(n.device.gl.COLOR_BUFFER_BIT),n.device.RenderFullScreenQuad(this.effectHeight),this.heightMap.Unset(),this.heightDirty=!1;for(let e=0;e<this.lockedResources.length;++e)this.lockedResources[e].doNotPurge--;const e=this.highDetail.children[0].mesh;let t=null;e.transparentAreas.length?t=e.transparentAreas[0].effect:e.opaqueAreas.length&&(t=e.opaqueAreas[0].effect),t&&(t.parameters.HeightMap.textureRes=this.heightMap.texture)}this.display&&this.highDetail.GetBatches(e,t)}GetZOnlyBatches(e,t){this.display&&this.zOnlyModel&&this.zOnlyModel.GetBatches(e,t)}static MeshLoaded(e,t){e.highDetail.children.unshift(t),e.lockedResources=[],e.GetPlanetResources(e.highDetail,[],e.lockedResources);let r,n=e.highDetail.children[0].mesh,s=null;r=(r=n.transparentAreas.length?(s=n.transparentAreas[0].effect).effectFilePath:n.opaqueAreas.length?(s=n.opaqueAreas[0].effect).effectFilePath:"res:/Graphics/Effect/Managed/Space/Planet/EarthlikePlanet.fx").replace(".fx","BlitHeight.fx"),e.watchedResources=[];for(let t in s.parameters)s.parameters.hasOwnProperty(t)&&(e.effectHeight.parameters[t]=s.parameters[t],"textureRes"in s.parameters[t]&&e.watchedResources.push(s.parameters[t].textureRes));for(let t=0;t<e.highDetail.children[0].children.length;++t)if(n=e.highDetail.children[0].children[t].mesh){if(s=null,n.transparentAreas.length)s=n.transparentAreas[0].effect;else{if(!n.opaqueAreas.length)continue;s=n.opaqueAreas[0].effect}for(let t in s.parameters)s.parameters.hasOwnProperty(t)&&(e.effectHeight.parameters[t]=s.parameters[t],"textureRes"in s.parameters[t]&&e.watchedResources.push(s.parameters[t].textureRes))}const a=new i.Tw2TextureParameter("NormalHeight1",e.heightMapResPath1);a.Initialize(),e.watchedResources.push(a.textureRes),e.lockedResources.push(a.textureRes),e.effectHeight.parameters.NormalHeight1=a;const o=new i.Tw2TextureParameter("NormalHeight2",e.heightMapResPath2);o.Initialize(),e.watchedResources.push(o.textureRes),e.lockedResources.push(o.textureRes),e.effectHeight.parameters.NormalHeight2=o,e.effectHeight.parameters.Random=new i.Tw2FloatParameter("Random",e.itemID%100),e.effectHeight.parameters.TargetTextureHeight=new i.Tw2FloatParameter("TargetTextureHeight",1024),e.effectHeight.effectFilePath=r,e.effectHeight.Initialize(),e.heightDirty=!0,e.heightMap.Create(2048,1024,!1),e.watchedResources.push(e.effectHeight.effectRes);for(let t=0;t<e.lockedResources.length;++t)e.lockedResources[t].doNotPurge++,e.lockedResources[t].IsPurged()&&e.lockedResources[t].Reload()}}},"./eve/object/legacy/EveShip.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveShip",function(){return s});var n=r("./eve/object/legacy/EveSpaceObject.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.EveSpaceObject{constructor(){super(...arguments),i(this,"boosters",null),i(this,"turretSets",[]),i(this,"boosterGain",1)}Initialize(){super.Initialize(),this.boosters&&this.RebuildBoosterSet()}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super.GetResources(e);for(let t=0;t<this.turretSets.length;t++)this.turretSets[t].GetResources(e);return this.boosters&&this.boosters.GetResources(e),e}RebuildBoosterSet(){this.boosters&&this.boosters.UpdateItemsFromLocators(this.FindLocatorsByPrefix("locator_booster"))}RebuildTurretPositions(){for(let e=0;e<this.turretSets.length;e++)this.RebuildTurretSet(e)}RebuildTurretSet(e){if(void 0===this.turretSets[e])return;const t=this.turretSets[e],r=t.locatorName,n=this.GetLocatorCount(r),i=[];for(let e=0;e<n;++e){const t=r+String.fromCharCode("a".charCodeAt(0)+e),n=this.FindLocatorByName(t);n&&(n.FindBone(this.animation),i.push(n))}t.UpdateItemsFromLocators(i)}UpdateViewDependentData(e,t,r){super.UpdateViewDependentData(e,t,r);for(let t=0;t<this.turretSets.length;++t)this.turretSets[t].UpdateViewDependentData(e)}Update(e){super.Update(e),this.boosters&&(this.boosters._locatorDirty&&this.RebuildBoosterSet(),this.boosters.Update(e,this._worldTransform,this._worldSpriteScale));for(let t=0;t<this.turretSets.length;++t)this.turretSets[t]._locatorDirty&&this.RebuildTurretSet(t),this.turretSets[t].Update(e)}GetBatches(e,t){if(this.display&&(super.GetBatches(e,t),this._perObjectData.vs.Get("Shipdata")[0]=this.boosterGain,this._perObjectData.ps.Get("Shipdata")[0]=this.boosterGain,this.boosters&&this.visible.boosters&&this.boosters.GetBatches(e,t,this._perObjectData),this.visible.turretSets))if(this.lod>1)for(let r=0;r<this.turretSets.length;++r)this.turretSets[r].GetBatches(e,t,this._perObjectData,this.visible.firingEffects);else if(this.visible.firingEffects)for(let r=0;r<this.turretSets.length;++r)this.turretSets[r].firingEffect&&this.turretSets[r].firingEffect.GetBatches(e,t,this._perObjectData)}}},"./eve/object/legacy/EveSpaceObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpaceObject",function(){return o}),r.d(t,"EveStation",function(){return o});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./eve/object/legacy/EveObject.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.EveObject{constructor(){super(...arguments),a(this,"visible",{mesh:!0,children:!0,effectChildren:!0,planeSets:!0,spotlightSets:!0,decals:!0,spriteSets:!0,overlayEffects:!0,lineSets:!0,killmarks:!0,customMasks:!0,turretSets:!0,boosters:!0}),a(this,"mesh",null),a(this,"animation",new i.Tw2AnimationController),a(this,"locators",[]),a(this,"spriteSets",[]),a(this,"turretSets",[]),a(this,"decals",[]),a(this,"spotlightSets",[]),a(this,"planeSets",[]),a(this,"curveSets",[]),a(this,"lineSets",[]),a(this,"overlayEffects",[]),a(this,"children",[]),a(this,"effectChildren",[]),a(this,"customMasks",[]),a(this,"lod",3),a(this,"killCount",0),a(this,"transform",n.mat4.create()),a(this,"boundingSphereCenter",n.vec3.create()),a(this,"boundingSphereRadius",0),a(this,"shapeEllipsoidRadius",n.vec3.create()),a(this,"shapeEllipsoidCenter",n.vec3.create()),a(this,"_worldSpriteScale",1),a(this,"_worldTransform",n.mat4.create()),a(this,"_perObjectData",i.Tw2PerObjectData.from(o.perObjectData))}Initialize(){if(this.mesh){this.animation.SetGeometryResource(this.mesh.geometryResource);for(let e=0;e<this.decals.length;++e)this.decals[e].SetParentGeometry(this.mesh.geometryResource)}}SetLocalTransform(e,t){t?n.mat4.multiply(this.transform,e,t):n.mat4.copy(this.transform,e)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.mesh&&this.mesh.GetResources(e),this.animation&&this.animation.GetResources(e),n.util.perArrayChild(this.spriteSets,"GetResources",e),n.util.perArrayChild(this.turretSets,"GetResources",e),n.util.perArrayChild(this.decals,"GetResources",e),n.util.perArrayChild(this.spotlightSets,"GetResources",e),n.util.perArrayChild(this.planeSets,"GetResources",e),n.util.perArrayChild(this.lineSets,"GetResources",e),n.util.perArrayChild(this.overlayEffects,"GetResources",e),n.util.perArrayChild(this.effectChildren,"GetResources",e),n.util.perArrayChild(this.children,"GetResources",e),e}ResetLod(){this.lod=3}UpdateLod(e){const t=n.vec3.transformMat4(o.global.vec3_0,this.boundingSphereCenter,this._worldTransform);if(e.IsSphereVisible(t,this.boundingSphereRadius)){const r=e.GetPixelSizeAcross(t,this.boundingSphereRadius);r<=o.LOD_THRESHOLD_NONE?this.lod=0:r<=o.LOD_THRESHOLD_LOW?this.lod=1:r<=o.LOD_THRESHOLD_MEDIUM?this.lod=2:this.lod=3,this._pixels=r}else this.lod=0,this._pixels=0;this.mesh&&"SetQuality"in this.mesh&&this.mesh.SetQuality(3-this.lod)}AddCustomMask(e,t,r,i,s,a){const o=n.mat4.fromRotationTranslationScale(n.mat4.create(),r,e,t);n.mat4.invert(o,o),n.mat4.transpose(o,o),this.customMasks.push({transform:o,maskData:n.vec4.fromValues(1,i?1:0,0,0),materialID:n.vec4.fromValues(s,0,0,0),targets:a})}GetLocatorCount(e){return this.FindLocatorsByPrefix(e).length}FindLocatorJointByName(e){const t=this.FindLocatorBoneByName(e);return t?t.worldTransform:null}FindLocatorTransformByName(e){const t=this.FindLocatorByName(e);return t?t.transform:null}HasLocatorPrefix(e){for(let t=0;t<this.locators.length;t++)if(this.locators[t].name.substring(0,e.length)===e)return!0;return!1}FindLocatorBoneByName(e){const t=this.animation.FindModelForMesh(0);if(t)for(let r=0;r<t.bones.length;++r)if(t.bones[r].boneRes.name===e)return t.bones[r];return null}FindLocatorByName(e){for(let t=0;t<this.locators.length;t++)if(this.locators[t].name===e)return this.locators[t];return null}FindLocatorsByPrefix(e){const t=[];for(let r=0;r<this.locators.length;r++)0===this.locators[r].name.indexOf(e)&&t.push(this.locators[r]);return t}UpdateViewDependentData(e,t,r){n.mat4.multiply(this._worldTransform,e,this.transform),this._worldSpriteScale=r;for(let e=0;e<this.children.length;++e)this.children[e].UpdateViewDependentData(this._worldTransform);n.mat4.transpose(this._perObjectData.vs.Get("WorldMat"),this._worldTransform),n.mat4.transpose(this._perObjectData.vs.Get("WorldMatLast"),this._worldTransform);const i=this._perObjectData.vs.Get("EllipsoidCenter"),s=this._perObjectData.vs.Get("EllipsoidRadii");this.shapeEllipsoidRadius[0]>0?(i[0]=this.shapeEllipsoidCenter[0],i[1]=this.shapeEllipsoidCenter[1],i[2]=this.shapeEllipsoidCenter[2],s[0]=this.shapeEllipsoidRadius[0],s[1]=this.shapeEllipsoidRadius[1],s[2]=this.shapeEllipsoidRadius[2]):this.mesh&&this.mesh.IsGood()&&(n.vec3.subtract(i,this.mesh.geometryResource.maxBounds,this.mesh.geometryResource.minBounds),n.vec3.scale(i,i,.8660254035),n.vec3.add(s,this.mesh.geometryResource.maxBounds,this.mesh.geometryResource.minBounds),n.vec3.scale(s,s,.5));for(let e=0;e<this.customMasks.length;++e){const t=this.visible.customMasks?this.customMasks[e].targets:[0,0,0,0];this._perObjectData.vs.Set(e?"CustomMaskMatrix1":"CustomMaskMatrix0",this.customMasks[e].transform),this._perObjectData.vs.Set(e?"CustomMaskData1":"CustomMaskData0",this.customMasks[e].maskData),this._perObjectData.ps.Set(e?"CustomMaskMaterialID1":"CustomMaskMaterialID0",this.customMasks[e].materialID),this._perObjectData.ps.Set(e?"CustomMaskTarget1":"CustomMaskTarget0",t)}this.animation.animations.length&&this._perObjectData.vs.Set("JointMat",this.animation.GetBoneMatrices(0));for(let e=0;e<this.lineSets.length;++e)this.lineSets[e].UpdateViewDependentData(this._worldTransform)}Update(e){if(this.lod>0){for(let t=0;t<this.spriteSets.length;++t)this.spriteSets[t].Update(e,this._worldSpriteScale);for(let t=0;t<this.planeSets.length;t++)this.planeSets[t].Update(e);for(let t=0;t<this.spotlightSets.length;t++)this.spotlightSets[t].Update(e);for(let t=0;t<this.children.length;++t)this.children[t].Update(e);for(let t=0;t<this.effectChildren.length;++t)this.effectChildren[t].Update(e,this._worldTransform,this.lod);for(let t=0;t<this.curveSets.length;++t)this.curveSets[t].Update(e);for(let t=0;t<this.overlayEffects.length;++t)this.overlayEffects[t].Update(e);for(let t=0;t<this.lineSets.length;t++)this.lineSets[t].Update(e);this.animation.Update(e)}}GetBatches(e,t){if(this.display){const r=this.visible;if(r.mesh&&this.mesh&&this.lod>0&&this.mesh.GetBatches(e,t,this._perObjectData),this.lod>1){if(r.spriteSets)for(let r=0;r<this.spriteSets.length;r++)this.spriteSets[r].GetBatches(e,t,this._perObjectData,this._worldTransform);if(r.spotlightSets)for(let r=0;r<this.spotlightSets.length;r++)this.spotlightSets[r].GetBatches(e,t,this._perObjectData);if(r.planeSets)for(let r=0;r<this.planeSets.length;r++)this.planeSets[r].GetBatches(e,t,this._perObjectData);if(r.decals)for(let n=0;n<this.decals.length;n++)this.decals[n].GetBatches(e,t,this._perObjectData,r.killmarks?this.killCount:0);if(r.lineSets)for(let r=0;r<this.lineSets.length;r++)this.lineSets[r].GetBatches(e,t);if(r.overlayEffects&&this.mesh&&this.mesh.IsGood())for(let r=0;r<this.overlayEffects.length;r++)this.overlayEffects[r].GetBatches(e,t,this._perObjectData,this.mesh)}if(r.children)for(let r=0;r<this.children.length;r++)this.children[r].GetBatches(e,t,this._perObjectData);if(r.effectChildren)for(let r=0;r<this.effectChildren.length;r++)this.effectChildren[r]._parentLod=this.lod,this.effectChildren[r].GetBatches(e,t,this._perObjectData)}}RenderDebugInfo(e){this.animation.RenderDebugInfo(e)}}a(o,"LOD_THRESHOLD_NONE",100),a(o,"LOD_THRESHOLD_LOW",200),a(o,"LOD_THRESHOLD_MEDIUM",500),a(o,"perObjectData",{vs:[["WorldMat",16],["WorldMatLast",16],["Shipdata",[0,1,0,-10]],["Clipdata1",4],["EllipsoidRadii",4],["EllipsoidCenter",4],["CustomMaskMatrix0",n.mat4.identity([])],["CustomMaskMatrix1",n.mat4.identity([])],["CustomMaskData0",4],["CustomMaskData1",4],["JointMat",696]],ps:[["Shipdata",[0,1,0,1]],["Clipdata1",4],["Clipdata2",4],["ShLighting",28],["CustomMaskMaterialID0",4],["CustomMaskMaterialID1",4],["CustomMaskTarget0",4],["CustomMaskTarget1",4]]})},"./eve/object/legacy/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/object/legacy/EveEffectRoot.js");r.d(t,"EveEffectRoot",function(){return n.EveEffectRoot});var i=r("./eve/object/legacy/EvePlanet.js");r.d(t,"EvePlanet",function(){return i.EvePlanet});var s=r("./eve/object/legacy/EveShip.js");r.d(t,"EveShip",function(){return s.EveShip});var a=r("./eve/object/legacy/EveSpaceObject.js");r.d(t,"EveSpaceObject",function(){return a.EveSpaceObject}),r.d(t,"EveStation",function(){return a.EveStation})},"./eve/particle/EveParticleDirectForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveParticleDirectForce",function(){return a});var n=r("./global/index.js"),i=r("./particle/force/Tw2ParticleForce.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2ParticleForce{constructor(){super(...arguments),s(this,"force",n.vec3.create())}static black(e){return[["force",e.vector3]]}}s(a,"__isStaging",4)},"./eve/particle/EveParticleDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveParticleDragForce",function(){return s});var n=r("./particle/force/Tw2ParticleForce.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2ParticleForce{constructor(){super(...arguments),i(this,"drag",0)}static black(e){return[["drag",e.float]]}}i(s,"__isStaging",4)},"./eve/particle/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/particle/EveParticleDirectForce.js");r.d(t,"EveParticleDirectForce",function(){return n.EveParticleDirectForce});var i=r("./eve/particle/EveParticleDragForce.js");r.d(t,"EveParticleDragForce",function(){return i.EveParticleDragForce})},"./eve/pi/EveConnector.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveConnector",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"animationColor",n.vec4.create()),i(this,"animationScale",0),i(this,"animationSpeed",0),i(this,"color",n.vec4.create()),i(this,"destObject",null),i(this,"destPosition",n.vec3.create()),i(this,"isAnimated",!1),i(this,"lineWidth",0),i(this,"sourceObject",null),i(this,"type",0)}static black(e){return[["animationColor",e.color],["animationScale",e.float],["animationSpeed",e.float],["color",e.color],["destObject",e.object],["destPosition",e.vector3],["isAnimated",e.boolean],["lineWidth",e.float],["sourceObject",e.object],["sourcePosition",e.vector3],["type",e.uint]]}}i(s,"__isStaging",4)},"./eve/pi/EveLocalPositionCurve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveLocalPositionCurve",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"value",n.vec3.create())}static black(e){return[["value",e.vector3]]}}i(s,"__isStaging",3)},"./eve/pi/EveSpherePin.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSpherePin",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"centerNormal",n.vec3.create()),i(this,"color",n.vec4.create()),i(this,"curveSets",[]),i(this,"enablePicking",!1),i(this,"geometryResPath",""),i(this,"pinColor",n.vec4.create()),i(this,"pinEffect",null),i(this,"pinMaxRadius",0),i(this,"pinRadius",0),i(this,"pinRotation",0),i(this,"sortValueMultiplier",0)}static black(e){return[["centerNormal",e.vector3],["color",e.color],["curveSets",e.array],["enablePicking",e.boolean],["geometryResPath",e.string],["name",e.string],["pinColor",e.color],["pinEffect",e.object],["pinMaxRadius",e.float],["pinRadius",e.float],["pinRotation",e.float],["sortValueMultiplier",e.float]]}}i(s,"__isStaging",4)},"./eve/pi/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/pi/EveConnector.js");r.d(t,"EveConnector",function(){return n.EveConnector});var i=r("./eve/pi/EveLocalPositionCurve.js");r.d(t,"EveLocalPositionCurve",function(){return i.EveLocalPositionCurve});var s=r("./eve/pi/EveSpherePin.js");r.d(t,"EveSpherePin",function(){return s.EveSpherePin})},"./eve/ui/EveTacticalOverlay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveTacticalOverlay",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"anchorEffect",null),i(this,"arcSegmentMultiplier",0),i(this,"connectorEffect",null),i(this,"segmentsHigh",0),i(this,"segmentsLow",0),i(this,"segmentsMedium",0),i(this,"targetMaxSegments",0),i(this,"velocityEffect",null)}static black(e){return[["anchorEffect",e.object],["arcSegmentMultiplier",e.float],["connectorEffect",e.object],["segmentsLow",e.float],["segmentsMedium",e.float],["segmentsHigh",e.float],["targetMaxSegments",e.float],["velocityEffect",e.object]]}}i(s,"__isStaging",4)},"./eve/ui/EveUiObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveUiObject",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"boundingSphereRadius",0),i(this,"mesh",null),i(this,"modelScale",0)}static black(e){return[["boundingSphereRadius",e.float],["name",e.string],["mesh",e.object],["modelScale",e.float]]}}i(s,"__isStaging",4)},"./eve/ui/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./eve/ui/EveTacticalOverlay.js");r.d(t,"EveTacticalOverlay",function(){return n.EveTacticalOverlay});var i=r("./eve/ui/EveUiObject.js");r.d(t,"EveUiObject",function(){return i.EveUiObject})},"./global/Tw2Library.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tw2",function(){return l}),r.d(t,"store",function(){return d}),r.d(t,"resMan",function(){return h}),r.d(t,"device",function(){return f}),r.d(t,"logger",function(){return m});var n=r("./global/engine/index.js"),i=r("./global/math/index.js"),s=r("./global/util/index.js");r.d(t,"util",function(){return s});var a=r("./global/engine/Tw2Constant.js"),o=r("./global/class/Tw2EventEmitter.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends o.Tw2EventEmitter{constructor(){let e;super(),u(this,"consts",a),u(this,"client",new n.Tw2Client(this)),u(this,"store",new n.Tw2Store(this)),u(this,"logger",new n.Tw2Logger(this)),u(this,"device",new n.Tw2Device(this)),u(this,"resMan",new n.Tw2ResMan(this)),u(this,"eveSof",null),u(this,"render",null),this.store.classes.on("registered",e=>{c.prototype[e.key]=e.value}),o.Tw2EventEmitter.defaultLogger=this.logger;Object.defineProperty(this,"eveSof",{get:()=>{if(!e){const t=this.GetClass("EveSOF");t&&(e=new t(this))}return e}})}Log(e){return this.logger.log(e)}Tick(){const e=this.device;e.Tick(),this.client.Tick(e),this.emit("tick",{dt:e.dt,previous:e.previousTime,current:e.currentTime,frame:e.frame}),this.resMan.Tick(e),this.render&&this.render(e.dt)}Initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.Register(e);const t=e.canvas,r=void 0===t?null:t,n=e.render,i=void 0===n?null:n,s=e.autoTick,a=void 0===s||s,o=e.glParams,u=void 0===o?{}:o;if(this.device.CreateDevice(r,u)&&(this.render=i,a)){const e=()=>{this.client.RequestAnimationFrame(e),this.Tick()};this.client.RequestAnimationFrame(e)}return this.device.glVersion}GetResource(e){return this.resMan.GetResource(e)}GetObject(e,t,r){e.match(/(\w|\d|[-_])+:(\w|\d|[-_])+:(\w|\d|[-_])+/)?this.eveSof.GetObject(e).then(t).catch(r):this.resMan.GetObject(e,t,r)}GetObjectAsync(e){return e.match(/(\w|\d|[-_])+:(\w|\d|[-_])+:(\w|\d|[-_])+/)?this.eveSof.GetObject(e):this.resMan.GetObjectAsync(e)}GetClass(e){return this.store.classes.Get(e)}GetVariable(e){return this.store.variables.Get(e)}GetVariableValue(e,t){return this.store.variables.GetValue(e,t)}SetVariableValue(e,t){return this.store.variables.SetValue(e,t)}Register(e){e&&(e.uuid&&Object(s.enableUUID)(e.uuid),this.logger.Register(e.logger),e.debug&&this.Debug(e.debug),this.client.Register(e.client),this.device.Register(e.device),this.resMan.Register(e.resMan),this.store.Register(e.store))}Debug(e){this.store.classes.Debug(e),this.Log({type:"warn",name:"Tw2Library",message:"Debugging ".concat(e?"enabled":"disabled")})}SetLibrary(e){"tw2"in e&&Reflect.defineProperty(e,"tw2",{value:this,writable:!1,configurable:!1})}}c.prototype.math=i,c.prototype.util=s;const l=new c,d=l.store,h=l.resMan,f=l.device,m=l.logger},"./global/class/Tw2BaseClass.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2BaseClass",function(){return o});var n=r("./core/Tw2Error.js"),i=r("./global/util/index.js"),s=r("./global/class/Tw2EventEmitter.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.Tw2EventEmitter{constructor(){super(),o.defineID(this)}Copy(e,t){return this.constructor.copy(this,e,t)}Clone(e){this.constructor.clone(this,e)}Set(e,t){return this.constructor.set(this,e,t)}Get(e,t){return this.constructor.get(this,e,t)}OnValueChanged(e){}UpdateValues(e){this.OnValueChanged(e),e&&e.skipEvents||this.emit("modified",e)}OnDestroy(e){}Destroy(e){this.OnDestroy(e),e&&e.skipEvents||this.emit("destroy",e),this.kill()}Traverse(e,t,r){const n=e(this,t,r);if(n)return n;return this.constructor.perChild(this,function(t,r,n){if(Object(i.isFunction)(t.Traverse)){const i=t.Traverse(e,r,n);if(i)return i}},r)}static copy(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.verb="copy";const n=this.get(t,{},{skipIDs:!0});return this.set(e,n,r)}static clone(e,t){const r=this.get(e,{},{skipIDs:!0});return this.from(r,t)}static from(e,t){if(e&&e instanceof this)return e;const r=new this;return e&&this.set(r,e,{skipUpdate:!0,verb:"create"}),t&&t.skipUpdate||!("Initialize"in r)||r.Initialize(),r}static set(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];throw new n.ErrAbstractClassMethod}static get(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];throw new n.ErrAbstractClassMethod}static perChild(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"root";e.constructor.keys||function(e){if(e.constructor.hasOwnProperty("keys"))return;const t={};function r(e,r){t[e]||(t[e]=[]),t[e].includes(r)||t[e].push(r)}for(const t in e)if(e.hasOwnProperty(t)){if("_"===t.charAt(0))continue;const n=e[t];Object(i.isPrimary)(n)?r("primary",t):Object(i.isArray)(n)?n.length&&Object(i.isPrimary)(n[0])?r("array",t):r("list",t):Object(i.isTyped)(n)?r("typed",t):Object(i.isPlain)(n)?r("plain",t):(null===n||Object(i.isObjectObject)(n))&&r("type",t)}e.constructor.keys=t}(e);const n=e.constructor.keys,s=n.list,a=n.type;if(s)for(let n=0;n<s.length;n++){const a=s[n],o=e[a];for(let n=0;n<o.length;n++){const s=o[n];if(Object(i.isObjectObject)(s)){const i=t(s,e,"".concat(r,"/").concat(a,"/").concat(n));if(i)return i}}}if(a)for(let n=0;n<a.length;n++){const s=a[n],o=e[s];if(Object(i.isObjectObject)(o)){const n=t(o,e,"".concat(r,"/").concat(s));if(n)return n}}}static defineID(e){Reflect.defineProperty(e,"_id",{value:Object(i.generateID)(),writable:!1,configurable:!0})}}a(o,"keys",null),a(o,"black",null),a(o,"category",null)},"./global/class/Tw2EventEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2EventEmitter",function(){return i});const n=new WeakMap;class i{emit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.log&&!t.log._logged&&(t.log=this.log(t.log));const r=n.get(this);return r?((e=e.toLowerCase())in r&&r[e].forEach(function(n,i){i.call(n.context,t),n.once&&r[e].delete(i)}),this):this}on(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=n.get(this);return s||(s={},n.set(this,s)),s[e=e.toLowerCase()]||(s[e]=new Set),s[e].add(t,{context:r,once:i}),this}once(e,t,r){return this.on(e,t,r,!0)}off(e,t){const r=n.get(this);if(!r)return this;if("*"===(e=e.toLowerCase()))for(const e in r)r.hasOwnProperty(e)&&r[e].delete(t);else e in r&&r[e].delete(t);return this}del(e){const t=n.get(this);return t?((e=e.toLowerCase())in t&&delete t[e],this):this}clr(e){const t=n.get(this);if(!t)return this;for(let r in t)t.hasOwnProperty(r)&&t[r].has(e)&&t[r].delete(e);return this}kill(){return n.has(this)&&(this.emit("kill"),n.delete(this)),this}log(e){return e.name||(e.name=this.constructor.category||this.constructor.name),this.constructor.defaultLogger?this.constructor.defaultLogger.log(e,this):e}}var s,a,o;o=null,(a="defaultLogger")in(s=i)?Object.defineProperty(s,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[a]=o},"./global/class/Tw2Schema.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Schema",function(){return n});class n{}},"./global/class/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/class/Tw2BaseClass.js");r.d(t,"Tw2BaseClass",function(){return n.Tw2BaseClass});var i=r("./global/class/Tw2EventEmitter.js");r.d(t,"Tw2EventEmitter",function(){return i.Tw2EventEmitter});var s=r("./global/class/Tw2Schema.js");r.d(t,"Tw2Schema",function(){return s.Tw2Schema})},"./global/engine/Tw2Client.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Client",function(){return o});var n=r("./global/engine/Tw2Constant.js"),i=r("./global/util/index.js"),s=r("./global/class/Tw2EventEmitter.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.Tw2EventEmitter{get vrDisplay(){return this.tw2.device.vrDisplay}constructor(e){super(),a(this,"tw2",null),e.SetLibrary(this)}Register(e){}Tick(e){}RequestAnimationFrame(e){return this.vrDisplay?this.vrDisplay.requestAnimationFrame(e):this.constructor.RequestAnimationFrame(e)}CancelAnimationFrame(e){return this.vrDisplay?this.vrDisplay.cancelAnimationFrame(e):this.constructor.CancelAnimationFrame(e)}CreateContext(e,t,r){let i;function s(e,t,r){r=Array.isArray(r)?r:[r];for(let n=0;n<r.length;n++)try{return e.getContext(r[n],t)}catch(e){i=e}return null}let a=null,o=n.WebglVersion.NONE;return r&&(a=s(e,t,n.Webgl2ContextNames))&&(o=n.WebglVersion.WEBGL2),a||(a=s(e,t,n.WebglContextNames))&&(o=n.WebglVersion.WEBGL),{gl:a,version:o}}}a(o,"RequestAnimationFrame",function(){const e=Object(i.get)(window,n.VendorRequestAnimationFrame);return t=>e(t)}()),a(o,"CancelAnimationFrame",function(){const e=Object(i.get)(window,n.VendorCancelAnimationFrame);return t=>e(t)}())},"./global/engine/Tw2Constant.js":function(e,t,r){"use strict";r.r(t),r.d(t,"GL_COLOR_BUFFER_BIT",function(){return n}),r.d(t,"GL_DEPTH_BUFFER_BIT",function(){return i}),r.d(t,"GL_STENCIL_BUFFER_BIT",function(){return s}),r.d(t,"GL_TEXTURE_2D",function(){return a}),r.d(t,"GL_TEXTURE_CUBE_MAP",function(){return o}),r.d(t,"GL_TEXTURE_3D",function(){return u}),r.d(t,"GL_TEXTURE_MAG_FILTER",function(){return c}),r.d(t,"GL_TEXTURE_MIN_FILTER",function(){return l}),r.d(t,"GL_TEXTURE_WRAP_S",function(){return d}),r.d(t,"GL_TEXTURE_WRAP_T",function(){return h}),r.d(t,"GL_BYTE",function(){return f}),r.d(t,"GL_UNSIGNED_BYTE",function(){return m}),r.d(t,"GL_SHORT",function(){return v}),r.d(t,"GL_UNSIGNED_SHORT",function(){return p}),r.d(t,"GL_INT",function(){return E}),r.d(t,"GL_UNSIGNED_INT",function(){return _}),r.d(t,"GL_FLOAT",function(){return g}),r.d(t,"GL_HALF_FLOAT_OES",function(){return S}),r.d(t,"GL_HALF_FLOAT",function(){return T}),r.d(t,"GL_DEPTH_COMPONENT16",function(){return b}),r.d(t,"GL_DEPTH_COMPONENT24",function(){return R}),r.d(t,"GL_DEPTH_COMPONENT32F",function(){return j}),r.d(t,"GL_FLOAT_VEC2",function(){return y}),r.d(t,"GL_FLOAT_VEC3",function(){return A}),r.d(t,"GL_FLOAT_VEC4",function(){return w}),r.d(t,"GL_INT_VEC2",function(){return P}),r.d(t,"GL_INT_VEC3",function(){return O}),r.d(t,"GL_INT_VEC4",function(){return C}),r.d(t,"GL_BOOL",function(){return D}),r.d(t,"GL_BOOL_VEC2",function(){return L}),r.d(t,"GL_BOOL_VEC3",function(){return x}),r.d(t,"GL_BOOL_VEC4",function(){return I}),r.d(t,"GL_FLOAT_MAT2",function(){return M}),r.d(t,"GL_FLOAT_MAT3",function(){return G}),r.d(t,"GL_FLOAT_MAT4",function(){return F}),r.d(t,"GL_TYPE_LENGTH",function(){return N}),r.d(t,"GL_SAMPLER_2D",function(){return B}),r.d(t,"GL_SAMPLER_3D",function(){return U}),r.d(t,"GL_SAMPLER_CUBE",function(){return V}),r.d(t,"GL_DEPTH_COMPONENT",function(){return k}),r.d(t,"GL_ALPHA",function(){return H}),r.d(t,"GL_RGB",function(){return q}),r.d(t,"GL_RGBA",function(){return z}),r.d(t,"GL_LUMINANCE",function(){return W}),r.d(t,"GL_LUMINANCE_ALPHA",function(){return Y}),r.d(t,"GL_DEPTH_STENCIL",function(){return X}),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",function(){return K}),r.d(t,"GL_R8",function(){return Q}),r.d(t,"GL_R16F",function(){return Z}),r.d(t,"GL_R32F",function(){return $}),r.d(t,"GL_R8UI",function(){return J}),r.d(t,"GL_RG8",function(){return ee}),r.d(t,"GL_RG16F",function(){return te}),r.d(t,"GL_RG32F",function(){return re}),r.d(t,"GL_RGB8",function(){return ne}),r.d(t,"GL_SRGB8",function(){return ie}),r.d(t,"GL_RGB565",function(){return se}),r.d(t,"GL_R11F_G11F_B10F",function(){return ae}),r.d(t,"GL_RGB9_E5",function(){return oe}),r.d(t,"GL_RGB16F",function(){return ue}),r.d(t,"GL_RGB32F",function(){return ce}),r.d(t,"GL_RGB8UI",function(){return le}),r.d(t,"GL_RGBA8",function(){return de}),r.d(t,"GL_RGB5_A1",function(){return he}),r.d(t,"GL_RGBA16F",function(){return fe}),r.d(t,"GL_RGBA32F",function(){return me}),r.d(t,"GL_RGBA8UI",function(){return ve}),r.d(t,"GL_RGBA16I",function(){return pe}),r.d(t,"GL_RGBA16UI",function(){return Ee}),r.d(t,"GL_RGBA32I",function(){return _e}),r.d(t,"GL_RGBA32UI",function(){return ge}),r.d(t,"GL_NEAREST",function(){return Se}),r.d(t,"GL_LINEAR",function(){return Te}),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",function(){return be}),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",function(){return Re}),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",function(){return je}),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",function(){return ye}),r.d(t,"GL_REPEAT",function(){return Ae}),r.d(t,"GL_CLAMP_TO_EDGE",function(){return we}),r.d(t,"GL_MIRRORED_REPEAT",function(){return Pe}),r.d(t,"GL_ZERO",function(){return Oe}),r.d(t,"GL_ONE",function(){return Ce}),r.d(t,"GL_SRC_COLOR",function(){return De}),r.d(t,"GL_ONE_MINUS_SRC_COLOR",function(){return Le}),r.d(t,"GL_SRC_ALPHA",function(){return xe}),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",function(){return Ie}),r.d(t,"GL_DST_ALPHA",function(){return Me}),r.d(t,"GL_ONE_MINUS_DST_ALPHA",function(){return Ge}),r.d(t,"GL_DST_COLOR",function(){return Fe}),r.d(t,"GL_ONE_MINUS_DST_COLOR",function(){return Ne}),r.d(t,"GL_SRC_ALPHA_SATURATE",function(){return Be}),r.d(t,"GL_CONSTANT_COLOR",function(){return Ue}),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",function(){return Ve}),r.d(t,"GL_CONSTANT_ALPHA",function(){return ke}),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",function(){return He}),r.d(t,"GL_VERTEX_SHADER",function(){return qe}),r.d(t,"GL_FRAGMENT_SHADER",function(){return ze}),r.d(t,"GL_FRONT",function(){return We}),r.d(t,"GL_BACK",function(){return Ye}),r.d(t,"GL_FRONT_AND_BACK",function(){return Xe}),r.d(t,"GL_NEVER",function(){return Ke}),r.d(t,"GL_LESS",function(){return Qe}),r.d(t,"GL_EQUAL",function(){return Ze}),r.d(t,"GL_LEQUAL",function(){return $e}),r.d(t,"GL_GREATER",function(){return Je}),r.d(t,"GL_NOTEQUAL",function(){return et}),r.d(t,"GL_GEQUAL",function(){return tt}),r.d(t,"GL_ALWAYS",function(){return rt}),r.d(t,"GL_KEEP",function(){return nt}),r.d(t,"GL_REPLACE",function(){return it}),r.d(t,"GL_INCR",function(){return st}),r.d(t,"GL_DECR",function(){return at}),r.d(t,"GL_INCR_WRAP",function(){return ot}),r.d(t,"GL_DECR_WRAP",function(){return ut}),r.d(t,"GL_INVERT",function(){return ct}),r.d(t,"GL_STREAM_DRAW",function(){return lt}),r.d(t,"GL_STATIC_DRAW",function(){return dt}),r.d(t,"GL_DYNAMIC_DRAW",function(){return ht}),r.d(t,"GL_ARRAY_BUFFER",function(){return ft}),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",function(){return mt}),r.d(t,"GL_POINTS",function(){return vt}),r.d(t,"GL_LINES",function(){return pt}),r.d(t,"GL_LINE_LOOP",function(){return Et}),r.d(t,"GL_LINE_STRIP",function(){return _t}),r.d(t,"GL_TRIANGLES",function(){return gt}),r.d(t,"GL_TRIANGLE_STRIP",function(){return St}),r.d(t,"GL_TRIANGLE_FAN",function(){return Tt}),r.d(t,"GL_CW",function(){return bt}),r.d(t,"GL_CCW",function(){return Rt}),r.d(t,"GL_CULL_FACE",function(){return jt}),r.d(t,"GL_DEPTH_TEST",function(){return yt}),r.d(t,"GL_BLEND",function(){return At}),r.d(t,"RM_ANY",function(){return wt}),r.d(t,"RM_OPAQUE",function(){return Pt}),r.d(t,"RM_DECAL",function(){return Ot}),r.d(t,"RM_TRANSPARENT",function(){return Ct}),r.d(t,"RM_ADDITIVE",function(){return Dt}),r.d(t,"RM_DEPTH",function(){return Lt}),r.d(t,"RM_FULLSCREEN",function(){return xt}),r.d(t,"RM_PICKABLE",function(){return It}),r.d(t,"RM_DISTORTION",function(){return Mt}),r.d(t,"RS_ZENABLE",function(){return Gt}),r.d(t,"RS_FILLMODE",function(){return Ft}),r.d(t,"RS_SHADEMODE",function(){return Nt}),r.d(t,"RS_ZWRITEENABLE",function(){return Bt}),r.d(t,"RS_ALPHATESTENABLE",function(){return Ut}),r.d(t,"RS_LASTPIXEL",function(){return Vt}),r.d(t,"RS_SRCBLEND",function(){return kt}),r.d(t,"RS_DESTBLEND",function(){return Ht}),r.d(t,"RS_CULLMODE",function(){return qt}),r.d(t,"RS_ZFUNC",function(){return zt}),r.d(t,"RS_ALPHAREF",function(){return Wt}),r.d(t,"RS_ALPHAFUNC",function(){return Yt}),r.d(t,"RS_DITHERENABLE",function(){return Xt}),r.d(t,"RS_ALPHABLENDENABLE",function(){return Kt}),r.d(t,"RS_FOGENABLE",function(){return Qt}),r.d(t,"RS_SPECULARENABLE",function(){return Zt}),r.d(t,"RS_FOGCOLOR",function(){return $t}),r.d(t,"RS_FOGTABLEMODE",function(){return Jt}),r.d(t,"RS_FOGSTART",function(){return er}),r.d(t,"RS_FOGEND",function(){return tr}),r.d(t,"RS_FOGDENSITY",function(){return rr}),r.d(t,"RS_RANGEFOGENABLE",function(){return nr}),r.d(t,"RS_STENCILENABLE",function(){return ir}),r.d(t,"RS_STENCILFAIL",function(){return sr}),r.d(t,"RS_STENCILZFAIL",function(){return ar}),r.d(t,"RS_STENCILPASS",function(){return or}),r.d(t,"RS_STENCILFUNC",function(){return ur}),r.d(t,"RS_STENCILREF",function(){return cr}),r.d(t,"RS_STENCILMASK",function(){return lr}),r.d(t,"RS_STENCILWRITEMASK",function(){return dr}),r.d(t,"RS_TEXTUREFACTOR",function(){return hr}),r.d(t,"RS_WRAP0",function(){return fr}),r.d(t,"RS_WRAP1",function(){return mr}),r.d(t,"RS_WRAP2",function(){return vr}),r.d(t,"RS_WRAP3",function(){return pr}),r.d(t,"RS_WRAP4",function(){return Er}),r.d(t,"RS_WRAP5",function(){return _r}),r.d(t,"RS_WRAP6",function(){return gr}),r.d(t,"RS_WRAP7",function(){return Sr}),r.d(t,"RS_CLIPPING",function(){return Tr}),r.d(t,"RS_LIGHTING",function(){return br}),r.d(t,"RS_AMBIENT",function(){return Rr}),r.d(t,"RS_FOGVERTEXMODE",function(){return jr}),r.d(t,"RS_COLORVERTEX",function(){return yr}),r.d(t,"RS_LOCALVIEWER",function(){return Ar}),r.d(t,"RS_NORMALIZENORMALS",function(){return wr}),r.d(t,"RS_DIFFUSEMATERIALSOURCE",function(){return Pr}),r.d(t,"RS_SPECULARMATERIALSOURCE",function(){return Or}),r.d(t,"RS_AMBIENTMATERIALSOURCE",function(){return Cr}),r.d(t,"RS_EMISSIVEMATERIALSOURCE",function(){return Dr}),r.d(t,"RS_VERTEXBLEND",function(){return Lr}),r.d(t,"RS_CLIPPLANEENABLE",function(){return xr}),r.d(t,"RS_POINTSIZE",function(){return Ir}),r.d(t,"RS_POINTSIZE_MIN",function(){return Mr}),r.d(t,"RS_POINTSPRITEENABLE",function(){return Gr}),r.d(t,"RS_POINTSCALEENABLE",function(){return Fr}),r.d(t,"RS_POINTSCALE_A",function(){return Nr}),r.d(t,"RS_POINTSCALE_B",function(){return Br}),r.d(t,"RS_POINTSCALE_C",function(){return Ur}),r.d(t,"RS_MULTISAMPLEANTIALIAS",function(){return Vr}),r.d(t,"RS_MULTISAMPLEMASK",function(){return kr}),r.d(t,"RS_PATCHEDGESTYLE",function(){return Hr}),r.d(t,"RS_DEBUGMONITORTOKEN",function(){return qr}),r.d(t,"RS_POINTSIZE_MAX",function(){return zr}),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",function(){return Wr}),r.d(t,"RS_COLORWRITEENABLE",function(){return Yr}),r.d(t,"RS_TWEENFACTOR",function(){return Xr}),r.d(t,"RS_BLENDOP",function(){return Kr}),r.d(t,"RS_POSITIONDEGREE",function(){return Qr}),r.d(t,"RS_NORMALDEGREE",function(){return Zr}),r.d(t,"RS_SCISSORTESTENABLE",function(){return $r}),r.d(t,"RS_SLOPESCALEDEPTHBIAS",function(){return Jr}),r.d(t,"RS_ANTIALIASEDLINEENABLE",function(){return en}),r.d(t,"RS_TWOSIDEDSTENCILMODE",function(){return tn}),r.d(t,"RS_CCW_STENCILFAIL",function(){return rn}),r.d(t,"RS_CCW_STENCILZFAIL",function(){return nn}),r.d(t,"RS_CCW_STENCILPASS",function(){return sn}),r.d(t,"RS_CCW_STENCILFUNC",function(){return an}),r.d(t,"RS_COLORWRITEENABLE1",function(){return on}),r.d(t,"RS_COLORWRITEENABLE2",function(){return un}),r.d(t,"RS_COLORWRITEENABLE3",function(){return cn}),r.d(t,"RS_BLENDFACTOR",function(){return ln}),r.d(t,"RS_SRGBWRITEENABLE",function(){return dn}),r.d(t,"RS_DEPTHBIAS",function(){return hn}),r.d(t,"RS_SEPARATEALPHABLENDENABLE",function(){return fn}),r.d(t,"RS_SRCBLENDALPHA",function(){return mn}),r.d(t,"RS_DESTBLENDALPHA",function(){return vn}),r.d(t,"RS_BLENDOPALPHA",function(){return pn}),r.d(t,"CULL_NONE",function(){return En}),r.d(t,"CULL_CW",function(){return _n}),r.d(t,"CULL_CCW",function(){return gn}),r.d(t,"CMP_NEVER",function(){return Sn}),r.d(t,"CMP_LESS",function(){return Tn}),r.d(t,"CMP_EQUAL",function(){return bn}),r.d(t,"CMP_LEQUAL",function(){return Rn}),r.d(t,"CMP_GREATER",function(){return jn}),r.d(t,"CMP_NOTEQUAL",function(){return yn}),r.d(t,"CMP_GREATEREQUAL",function(){return An}),r.d(t,"CMP_ALWAYS",function(){return wn}),r.d(t,"BLEND_ZERO",function(){return Pn}),r.d(t,"BLEND_ONE",function(){return On}),r.d(t,"BLEND_SRCCOLOR",function(){return Cn}),r.d(t,"BLEND_INVSRCCOLOR",function(){return Dn}),r.d(t,"BLEND_SRCALPHA",function(){return Ln}),r.d(t,"BLEND_INVSRCALPHA",function(){return xn}),r.d(t,"BLEND_DESTALPHA",function(){return In}),r.d(t,"BLEND_INVDESTALPHA",function(){return Mn}),r.d(t,"BLEND_DESTCOLOR",function(){return Gn}),r.d(t,"BLEND_INVDESTCOLOR",function(){return Fn}),r.d(t,"BLEND_SRCALPHASAT",function(){return Nn}),r.d(t,"BLEND_BOTHSRCALPHA",function(){return Bn}),r.d(t,"BLEND_BOTHINVSRCALPHA",function(){return Un}),r.d(t,"BLEND_BLENDFACTOR",function(){return Vn}),r.d(t,"BLEND_INVBLENDFACTOR",function(){return kn}),r.d(t,"BLENDOP_ADD",function(){return Hn}),r.d(t,"BLENDOP_SUBTRACT",function(){return qn}),r.d(t,"BLENDOP_REVSUBTRACT",function(){return zn}),r.d(t,"BLENDOP_MIN",function(){return Wn}),r.d(t,"BLENDOP_MAX",function(){return Yn}),r.d(t,"TF_ALPHA",function(){return Xn}),r.d(t,"TF_LUMINANCE",function(){return Kn}),r.d(t,"TF_LUMINANCE_ALPHA",function(){return Qn}),r.d(t,"TF_RGB",function(){return Zn}),r.d(t,"TF_RGBA",function(){return $n}),r.d(t,"TF_RED",function(){return Jn}),r.d(t,"TF_R",function(){return ei}),r.d(t,"TF_RG",function(){return ti}),r.d(t,"TF_RED_INTEGER",function(){return ri}),r.d(t,"TF_R_INTEGER",function(){return ni}),r.d(t,"TF_RG_INTEGER",function(){return ii}),r.d(t,"TF_RGB_INTEGER",function(){return si}),r.d(t,"TF_RGBA_INTEGER",function(){return ai}),r.d(t,"TT_UNSIGNED_BYTE",function(){return oi}),r.d(t,"TT_UNSIGNED_INT",function(){return ui}),r.d(t,"TT_FLOAT",function(){return ci}),r.d(t,"TT_HALF_FLOAT",function(){return li}),r.d(t,"TT_BYTE",function(){return di}),r.d(t,"TT_SHORT",function(){return hi}),r.d(t,"TT_UNSIGNED_SHORT",function(){return fi}),r.d(t,"TT_INT",function(){return mi}),r.d(t,"TT_UNSIGNED_INTEGER",function(){return vi}),r.d(t,"TT_UNSIGNED_SHORT_4_4_4_4",function(){return pi}),r.d(t,"TT_UNSIGNED_SHORT_5_5_5_1",function(){return Ei}),r.d(t,"TT_UNSIGNED_SHORT_5_6_5",function(){return _i}),r.d(t,"TT_UNSIGNED_INT_2_10_10_10_REV",function(){return gi}),r.d(t,"TT_UNSIGNED_INT_24_8",function(){return Si}),r.d(t,"TT_UNSIGNED_INT_10F_11F_11F_REV",function(){return Ti}),r.d(t,"TT_UNSIGNED_INT_5_9_9_9_REV",function(){return bi}),r.d(t,"TT_FLOAT_32_UNSIGNED_INT_24_8_REV",function(){return Ri}),r.d(t,"WrapModes",function(){return ji}),r.d(t,"BlendTable",function(){return yi}),r.d(t,"FilterMode",function(){return Ai}),r.d(t,"MipFilterMode",function(){return wi}),r.d(t,"DDS_MAGIC",function(){return Pi}),r.d(t,"DDSD_CAPS",function(){return Oi}),r.d(t,"DDSD_HEIGHT",function(){return Ci}),r.d(t,"DDSD_WIDTH",function(){return Di}),r.d(t,"DDSD_PITCH",function(){return Li}),r.d(t,"DDSD_PIXELFORMAT",function(){return xi}),r.d(t,"DDSD_MIPMAPCOUNT",function(){return Ii}),r.d(t,"DDSD_LINEARSIZE",function(){return Mi}),r.d(t,"DDSD_DEPTH",function(){return Gi}),r.d(t,"DDSCAPS_COMPLEX",function(){return Fi}),r.d(t,"DDSCAPS_MIPMAP",function(){return Ni}),r.d(t,"DDSCAPS_TEXTURE",function(){return Bi}),r.d(t,"DDSCAPS2_CUBEMAP",function(){return Ui}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",function(){return Vi}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",function(){return ki}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",function(){return Hi}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",function(){return qi}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",function(){return zi}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",function(){return Wi}),r.d(t,"DDSCAPS2_VOLUME",function(){return Yi}),r.d(t,"DDPF_ALPHAPIXELS",function(){return Xi}),r.d(t,"DDPF_ALPHA",function(){return Ki}),r.d(t,"DDPF_FOURCC",function(){return Qi}),r.d(t,"DDPF_RGB",function(){return Zi}),r.d(t,"DDPF_YUV",function(){return $i}),r.d(t,"DDPF_LUMINANCE",function(){return Ji}),r.d(t,"DDS_HEADER_LENGTH_INT",function(){return es}),r.d(t,"DDS_HEADER_OFFSET_MAGIC",function(){return ts}),r.d(t,"DDS_HEADER_OFFSET_SIZE",function(){return rs}),r.d(t,"DDS_HEADER_OFFSET_FLAGS",function(){return ns}),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",function(){return is}),r.d(t,"DDS_HEADER_OFFSET_WIDTH",function(){return ss}),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",function(){return as}),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",function(){return os}),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",function(){return us}),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",function(){return cs}),r.d(t,"DDS_HEADER_OFFSET_R_MASK",function(){return ls}),r.d(t,"DDS_HEADER_OFFSET_G_MASK",function(){return ds}),r.d(t,"DDS_HEADER_OFFSET_B_MASK",function(){return hs}),r.d(t,"DDS_HEADER_OFFSET_A_MASK",function(){return fs}),r.d(t,"DDS_HEADER_OFFSET_CAPS1",function(){return ms}),r.d(t,"DDS_HEADER_OFFSET_CAPS2",function(){return vs}),r.d(t,"DDS_HEADER_OFFSET_CAPS3",function(){return ps}),r.d(t,"DDS_HEADER_OFFSET_CAPS4",function(){return Es}),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",function(){return _s}),r.d(t,"FOURCC_DXT1",function(){return gs}),r.d(t,"FOURCC_DXT5",function(){return Ss}),r.d(t,"FOURCC_DXT3",function(){return Ts}),r.d(t,"FOURCC_DXT10",function(){return bs}),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",function(){return Rs}),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",function(){return js}),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",function(){return ys}),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",function(){return As}),r.d(t,"VendorRequestAnimationFrame",function(){return ws}),r.d(t,"VendorCancelAnimationFrame",function(){return Ps}),r.d(t,"VendorRequestFullScreen",function(){return Os}),r.d(t,"VendorExitFullScreen",function(){return Cs}),r.d(t,"VendorGetFullScreenElement",function(){return Ds}),r.d(t,"VendorWebglPrefixes",function(){return Ls}),r.d(t,"WebglContextNames",function(){return xs}),r.d(t,"Webgl2ContextNames",function(){return Is}),r.d(t,"WebglVersion",function(){return Ms});const n=16384,i=256,s=1024,a=3553,o=34067,u=32879,c=10240,l=10241,d=10242,h=10243,f=5120,m=5121,v=5122,p=5123,E=5124,_=5125,g=5126,S=36193,T=5131,b=33189,R=33190,j=36012,y=35664,A=35665,w=35666,P=35667,O=35668,C=35669,D=35670,L=35671,x=35672,I=35673,M=35674,G=35675,F=35676,N={[g]:1,[E]:1,[f]:1,[D]:1,[y]:2,[P]:2,[L]:2,[A]:3,[O]:3,[x]:3,[w]:4,[C]:4,[I]:4,[G]:9,[F]:16},B=35678,U=35679,V=35680,k=6402,H=6406,q=6407,z=6408,W=6409,Y=6410,X=34041,K=34042,Q=33321,Z=33325,$=33326,J=33330,ee=33323,te=33327,re=33328,ne=32849,ie=35905,se=36194,ae=35898,oe=35901,ue=34843,ce=34837,le=36221,de=32856,he=32855,fe=34842,me=34836,ve=36220,pe=36232,Ee=36214,_e=36226,ge=36208,Se=9728,Te=9729,be=9984,Re=9985,je=9986,ye=9987,Ae=10497,we=33071,Pe=33648,Oe=0,Ce=1,De=768,Le=769,xe=770,Ie=771,Me=772,Ge=773,Fe=774,Ne=775,Be=776,Ue=32769,Ve=32770,ke=32771,He=32772,qe=35633,ze=35632,We=1028,Ye=1029,Xe=1032,Ke=512,Qe=513,Ze=514,$e=515,Je=516,et=517,tt=518,rt=519,nt=7680,it=7681,st=7682,at=7683,ot=34055,ut=34056,ct=5386,lt=35040,dt=35044,ht=35048,ft=34962,mt=34963,vt=0,pt=1,Et=2,_t=3,gt=4,St=5,Tt=6,bt=2304,Rt=2305,jt=2884,yt=2929,At=3042,wt=-1,Pt=0,Ot=1,Ct=2,Dt=3,Lt=4,xt=5,It=6,Mt=7,Gt=7,Ft=8,Nt=9,Bt=14,Ut=15,Vt=16,kt=19,Ht=20,qt=22,zt=23,Wt=24,Yt=25,Xt=26,Kt=27,Qt=28,Zt=29,$t=34,Jt=35,er=36,tr=37,rr=38,nr=48,ir=52,sr=53,ar=54,or=55,ur=56,cr=57,lr=58,dr=59,hr=60,fr=128,mr=129,vr=130,pr=131,Er=132,_r=133,gr=134,Sr=135,Tr=136,br=137,Rr=139,jr=140,yr=141,Ar=142,wr=143,Pr=145,Or=146,Cr=147,Dr=148,Lr=151,xr=152,Ir=154,Mr=155,Gr=156,Fr=157,Nr=158,Br=159,Ur=160,Vr=161,kr=162,Hr=163,qr=165,zr=166,Wr=167,Yr=168,Xr=170,Kr=171,Qr=172,Zr=173,$r=174,Jr=175,en=176,tn=185,rn=186,nn=187,sn=188,an=189,on=190,un=191,cn=192,ln=193,dn=194,hn=195,fn=206,mn=207,vn=208,pn=209,En=1,_n=2,gn=3,Sn=1,Tn=2,bn=3,Rn=4,jn=5,yn=6,An=7,wn=8,Pn=1,On=2,Cn=3,Dn=4,Ln=5,xn=6,In=7,Mn=8,Gn=9,Fn=10,Nn=11,Bn=12,Un=13,Vn=14,kn=15,Hn=1,qn=2,zn=3,Wn=4,Yn=5,Xn=0,Kn=1,Qn=2,Zn=4,$n=5,Jn=6,ei=6,ti=7,ri=8,ni=8,ii=9,si=10,ai=11,oi=0,ui=0,ci=1,li=2,di=3,hi=4,fi=5,mi=6,vi=7,pi=8,Ei=9,_i=10,gi=11,Si=12,Ti=13,bi=14,Ri=15,ji=[0,Ae,Pe,we,we,we],yi=[-1,Oe,Ce,De,Le,xe,Ie,Me,Ge,Fe,Ne,Be,-1,-1,Ue,Ve],Ai={[Se]:1,[Te]:2},wi={[Se]:0,[Te]:0,[be]:1,[Re]:1,[je]:2,[ye]:2},Pi=542327876,Oi=1,Ci=2,Di=4,Li=8,xi=4096,Ii=131072,Mi=524288,Gi=8388608,Fi=8,Ni=4194304,Bi=4096,Ui=512,Vi=1024,ki=2048,Hi=4096,qi=8192,zi=16384,Wi=32768,Yi=2097152,Xi=1,Ki=2,Qi=4,Zi=64,$i=512,Ji=131072,es=31,ts=0,rs=1,ns=2,is=3,ss=4,as=7,os=20,us=21,cs=22,ls=23,ds=24,hs=25,fs=26,ms=27,vs=28,ps=29,Es=30,_s=32,gs=827611204,Ss=894720068,Ts=861165636,bs=827611204,Rs=113,js=116,ys=10,As=88,ws=["requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame"],Ps=["cancelAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame"],Os=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Cs=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Ds=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],Ls=["","MOZ_","WEBKIT_","WEBGL_"],xs=["webgl","experimental-webgl"],Is=["webgl2","experimental-webgl2"],Ms={NONE:0,WEBGL:1,WEBGL2:2}},"./global/engine/Tw2Device.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Device",function(){return l});var n=r("./global/math/index.js"),i=r("./global/util/index.js"),s=r("./core/mesh/Tw2Effect.js"),a=r("./core/vertex/Tw2VertexDeclaration.js"),o=r("./global/class/Tw2EventEmitter.js"),u=r("./global/engine/Tw2Constant.js");function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l extends o.Tw2EventEmitter{constructor(e){super(),c(this,"name","Device"),c(this,"gl",null),c(this,"glVersion",u.WebglVersion.NONE),c(this,"vrDisplay",null),c(this,"ext",null),c(this,"dt",0),c(this,"frameCounter",0),c(this,"startTime",null),c(this,"currentTime",null),c(this,"previousTime",null),c(this,"eyePosition",n.vec3.create()),c(this,"targetResolution",n.vec4.create()),c(this,"world",n.mat4.create()),c(this,"view",n.mat4.create()),c(this,"viewInverse",n.mat4.create()),c(this,"viewTranspose",n.mat4.create()),c(this,"projection",n.mat4.create()),c(this,"projectionInverse",n.mat4.create()),c(this,"projectionTranspose",n.mat4.create()),c(this,"viewProjection",n.mat4.create()),c(this,"viewProjectionTranspose",n.mat4.create()),c(this,"canvas",null),c(this,"viewportWidth",0),c(this,"viewportHeight",0),c(this,"viewportAspect",0),c(this,"viewportPixelRatio","devicePixelRatio"in window?window.devicePixelRatio:1),c(this,"effectDir","/effect.gles2/"),c(this,"mipLevelSkipCount",0),c(this,"shaderModel","hi"),c(this,"enableAnisotropicFiltering",!0),c(this,"enableWebgl2",!0),c(this,"enableWebvr",!0),c(this,"alphaBlendBackBuffer",!0),c(this,"antialiasing",!0),c(this,"msaaSamples",0),c(this,"wrapModes",[]),c(this,"shadowHandles",null),c(this,"perObjectData",null),c(this,"_alphaBlendState",null),c(this,"_alphaTestState",null),c(this,"_depthOffsetState",null),c(this,"_shadowStateBuffer",null),c(this,"_quadBuffer",null),c(this,"_quadDecl",null),c(this,"_cameraQuadBuffer",null),c(this,"_currentRenderMode",u.RM_ANY),c(this,"_fallbackCube",null),c(this,"_fallbackTexture",null),c(this,"_blitEffect",null),c(this,"_Date",Date),c(this,"tw2",null),e.SetLibrary(this),this.startTime=this.now,this.currentTime=this.startTime}Register(e){if(e){if(this.gl)throw new Error("Setting device options after gl creation is not yet supported");"performanceClock"in e&&(e.performance&&"performance"in window?this._Date=performance:this._Date=Date),"textureQuality"in e&&(this.mipLevelSkipCount=e.textureQuality),"shaderQuality"in e&&(this.shaderModel=e.shaderQuality),"anisotropicFilter"in e&&(this.enableAnisotropicFiltering=e.anisotropicFilter),"antialiasing"in e&&(this.antialiasing=e.antialiasing),"webgl2"in e&&(this.enableWebgl2=e.webgl2),"webvr"in e&&(this.enableWebvr=e.webvr)}}CreateDevice(e,t){this.gl=null,this.glVersion=u.WebglVersion.NONE,this.effectDir="/effect.gles2/",this.canvas=null,this.ext={},t||(t={}),Object(i.isString)(e)&&(e=document.getElementById(e));let r=this.tw2.client.CreateContext(e,t,this.enableWebgl2),n=r.gl,s=r.version;if(!n)return this.glVersion;this.gl=n,this.glVersion=s,this.canvas=e,this.emit("device_created",{device:this,gl:n,params:t,canvas:e,log:{type:"debug",message:"Webgl".concat(s," context created")}});const o=()=>!1,c=()=>!0;switch(this.glVersion){case u.WebglVersion.WEBGL2:n.hasInstancedArrays=c;break;default:this.GetExtension("OES_standard_derivatives"),this.GetExtension("OES_element_index_uint"),this.GetExtension("OES_texture_float"),this.GetExtension("EXT_shader_texture_lod");const e=this.GetExtension("ANGLE_instanced_arrays");n.drawElementsInstanced=e?e.drawElementsInstancedANGLE.bind(e):o,n.drawArraysInstanced=e?e.drawArraysInstancedANGLE.bind(e):o,n.vertexAttribDivisor=e?e.vertexAttribDivisorANGLE.bind(e):o,n.hasInstancedArrays=e?c:o}this.ext.CompressedTextureS3TC=this.GetExtension("compressed_texture_s3tc"),this.ext.AnisotropicFilter=this.GetExtension("EXT_texture_filter_anisotropic"),this.ext.AnisotropicFilter&&(this.ext.AnisotropicFilter.maxAnisotropy=n.getParameter(this.ext.AnisotropicFilter.MAX_TEXTURE_MAX_ANISOTROPY_EXT));const l=this.GetExtension("CCP_shader_binary");if(l){const e=n.getParameter(this.gl.RENDERER).match(/Mali-(\w+).*/);e&&(this.effectDir="/effect.gles2.mali"+e[1]+"/",this.ext.ShaderBinary=l)}this.alphaBlendBackBuffer=!t||void 0===t.alpha||t.alpha,this.msaaSamples=this.gl.getParameter(this.gl.SAMPLES),this.antialiasing=this.msaaSamples>1,this.Resize();return this._quadBuffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,this._quadBuffer),n.bufferData(n.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,1,-1,1,0,1,0,1,1,-1,0,1,1,0,-1,-1,0,1,0,0]),n.STATIC_DRAW),this._cameraQuadBuffer=n.createBuffer(),this._quadDecl=a.Tw2VertexDeclaration.from([{usage:"POSITION",usageIndex:0,elements:4},{usage:"TEXCOORD",usageIndex:0,elements:2}]),this.wrapModes=Array.from(u.WrapModes),this._alphaBlendState={dirty:!1,states:{[u.RS_SRCBLEND]:u.BLEND_SRCALPHA,[u.RS_DESTBLEND]:u.BLEND_INVSRCALPHA,[u.RS_BLENDOP]:u.BLENDOP_ADD,[u.RS_SEPARATEALPHABLENDENABLE]:0,[u.RS_BLENDOPALPHA]:u.BLENDOP_ADD,[u.RS_SRCBLENDALPHA]:u.BLEND_SRCALPHA,[u.RS_DESTBLENDALPHA]:u.BLEND_INVSRCALPHA}},this._alphaTestState={dirty:!1,states:{[u.RS_ALPHATESTENABLE]:0,[u.RS_ALPHAREF]:-1,[u.RS_ALPHAFUNC]:u.CMP_GREATER,[u.RS_CLIPPING]:0,[u.RS_CLIPPLANEENABLE]:0}},this._depthOffsetState={dirty:!1,states:{[u.RS_SLOPESCALEDEPTHBIAS]:0,[u.RS_DEPTHBIAS]:0}},this._shadowStateBuffer=new Float32Array(24),this.glVersion}Resize(){const e=this.vrDisplay&&this.vrDisplay.isPresenting;if(e){const e=this.vrDisplay.getEyeParameters("left"),t=this.vrDisplay.getEyeParameters("right");this.canvas.width=2*Math.max(e.renderWidth,t.renderWidth),this.canvas.height=Math.max(t.renderHeight,t.renderHeight)}else this.canvas.width=this.canvas.offsetWidth*this.viewportPixelRatio,this.canvas.height=this.canvas.offsetHeight*this.viewportPixelRatio;this.viewportWidth=this.canvas.clientWidth,this.viewportHeight=this.canvas.clientHeight,this.viewportAspect=this.viewportWidth/this.viewportHeight,this.tw2.store.variables.SetValue("ViewportSize",[this.viewportWidth,this.viewportHeight,this.viewportWidth,this.viewportHeight]),this.emit("resized",{width:this.viewportWidth,height:this.viewportHeight,aspect:this.viewportAspect,source:e?this.vrDisplay:this.canvas})}get now(){return this._Date.now()}Tick(){this.canvas.clientWidth===this.viewportWidth&&this.canvas.clientHeight===this.viewportHeight||this.Resize();const e=null===this.previousTime?0:this.previousTime,t=this.now;this.currentTime=.001*(t-this.startTime),this.dt=null===this.previousTime?0:.001*(t-this.previousTime),this.previousTime=t,this.tw2.store.variables.SetValue("Time",[this.currentTime,this.currentTime-Math.floor(this.currentTime),this.frameCounter,e]),this.frameCounter++}SetWorld(e){n.mat4.copy(this.world,e)}SetView(e){n.mat4.copy(this.view,e),n.mat4.invert(this.viewInverse,this.view),n.mat4.transpose(this.viewTranspose,this.view),n.mat4.getTranslation(this.eyePosition,this.viewInverse),this.UpdateViewProjection()}SetProjection(e,t){n.mat4.copy(this.projection,e),n.mat4.transpose(this.projectionTranspose,this.projection),n.mat4.invert(this.projectionInverse,this.projection),this.GetTargetResolution(this.targetResolution),t&&this.UpdateViewProjection()}UpdateViewProjection(){n.mat4.multiply(this.viewProjection,this.projection,this.view),n.mat4.transpose(this.viewProjectionTranspose,this.viewProjection),this.tw2.store.variables.SetValue("ViewProjectionMat",this.viewProjection)}GetTargetResolution(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.vec4.create();const t=this.projection[0]?this.projection[5]/this.projection[0]:0;let r=1;t>1.6&&(r=t/1.6);const i=2*Math.atan(r/this.projection[5]);return e[0]=this.viewportWidth,e[1]=this.viewportHeight,e[2]=i,e[3]=i*t,e}GetEyePosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.vec3.create();return n.vec3.copy(e,this.eyePosition)}IsAlphaTestEnabled(){return this._alphaTestState.states[u.RS_ALPHATESTENABLE]}IsFrameBufferComplete(e){return this.gl.checkFramebufferStatus(e)===this.gl.FRAMEBUFFER_COMPLETE}GetExtension(e){for(let t=0;t<u.VendorWebglPrefixes.length;t++){const r=this.gl.getExtension(u.VendorWebglPrefixes[t]+e);if(r)return r}return null}GetFallbackTexture(){return this._fallbackTexture||(this._fallbackTexture=this.CreateSolidTexture()),this._fallbackTexture}GetFallbackCubeMap(){return this._fallbackCube||(this._fallbackCube=this.CreateSolidCube()),this._fallbackCube}CreateSolidTexture(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0];const t=this.gl,r=this.gl.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,null),r}CreateSolidCube(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0];const t=this.gl,r=this.gl.createTexture();t.bindTexture(t.TEXTURE_CUBE_MAP,r);for(let r=0;r<6;++r)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e));return t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_CUBE_MAP,null),r}RenderFullScreenQuad(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Main";if(!e||!e.IsGood())return!1;const r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,this._quadBuffer);for(let n=0;n<e.GetPassCount(t);++n){if(e.ApplyPass(t,n),!this._quadDecl.SetDeclaration(this,e.GetPassInput(t,n),24))return!1;this.ApplyShadowState(),r.drawArrays(r.TRIANGLE_STRIP,0,4)}return!0}RenderTexture(e){return null===this._blitEffect&&(this._blitEffect=s.Tw2Effect.from({effectFilePath:"res:/graphics/effect/managed/space/system/blit.fx",textures:{BlitSource:""}})),this._blitEffect.parameters.BlitSource.SetTextureRes(e),this.RenderFullScreenQuad(this._blitEffect)}RenderCameraSpaceQuad(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Main";if(!e||!e.IsGood())return!1;const r=new Float32Array([1,1,0,1,1,1,-1,1,0,1,0,1,1,-1,0,1,1,0,-1,-1,0,1,0,0]),i=this.projectionInverse;for(let e=0;e<4;++e){const t=r.subarray(6*e,6*e+4);n.vec4.transformMat4(t,t,i),n.vec3.scale(t,t,1/t[3]),t[3]=1}const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,this._cameraQuadBuffer),s.bufferData(s.ARRAY_BUFFER,r,s.STATIC_DRAW);for(let r=0;r<e.GetPassCount(t);++r){if(e.ApplyPass(t,r),!this._quadDecl.SetDeclaration(this,e.GetPassInput(t,r),24))return!1;this.ApplyShadowState(),s.drawArrays(s.TRIANGLE_STRIP,0,4)}return!0}SetRenderState(e,t){const r=this.gl;switch(this._currentRenderMode=u.RM_ANY,e){case u.RS_ZENABLE:return void(t?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST));case u.RS_ZWRITEENABLE:return void r.depthMask(!!t);case u.RS_ALPHATESTENABLE:case u.RS_ALPHAREF:case u.RS_ALPHAFUNC:case u.RS_CLIPPING:case u.RS_CLIPPLANEENABLE:return void(this._alphaTestState[e]!==t&&(this._alphaTestState.states[e]=t,this._alphaTestState.dirty=!0));case u.RS_SRCBLEND:case u.RS_DESTBLEND:case u.RS_BLENDOP:case u.RS_SEPARATEALPHABLENDENABLE:case u.RS_BLENDOPALPHA:case u.RS_SRCBLENDALPHA:case u.RS_DESTBLENDALPHA:return void(this._alphaBlendState[e]!==t&&(this._alphaBlendState.states[e]=t,this._alphaBlendState.dirty=!0));case u.RS_CULLMODE:switch(t){case u.CULL_NONE:return void r.disable(r.CULL_FACE);case u.CULL_CW:return r.enable(r.CULL_FACE),void r.cullFace(r.FRONT);case u.CULL_CCW:return r.enable(r.CULL_FACE),void r.cullFace(r.BACK)}return;case u.RS_ZFUNC:return void r.depthFunc(512+t-1);case u.RS_ALPHABLENDENABLE:return void(t?r.enable(r.BLEND):r.disable(r.BLEND));case u.RS_COLORWRITEENABLE:return void r.colorMask(0!=(1&t),0!=(2&t),0!=(4&t),0!=(8&t));case u.RS_SCISSORTESTENABLE:return void(t?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST));case u.RS_SLOPESCALEDEPTHBIAS:case u.RS_DEPTHBIAS:return t=n.num.dwordToFloat(t),void(this._depthOffsetState[e]!==t&&(this._depthOffsetState.states[e]=t,this._depthOffsetState.dirty=!0))}}ApplyShadowState(){const e=this.gl;if(this._alphaBlendState.dirty){let t=e.FUNC_ADD;this._alphaBlendState.states[u.RS_BLENDOP]===u.BLENDOP_SUBTRACT?t=e.FUNC_SUBTRACT:this._alphaBlendState.states[u.RS_BLENDOP]===u.BLENDOP_REVSUBTRACT&&(t=e.FUNC_REVERSE_SUBTRACT);const r=u.BlendTable[this._alphaBlendState.states[u.RS_SRCBLEND]],n=u.BlendTable[this._alphaBlendState.states[u.RS_DESTBLEND]];if(this._alphaBlendState.states[u.RS_SEPARATEALPHABLENDENABLE]){let i=e.FUNC_ADD;this._alphaBlendState.states[u.RS_BLENDOP]===u.BLENDOP_SUBTRACT?i=e.FUNC_SUBTRACT:this._alphaBlendState.states[u.RS_BLENDOP]===u.BLENDOP_REVSUBTRACT&&(i=e.FUNC_REVERSE_SUBTRACT);const s=u.BlendTable[this._alphaBlendState.states[u.RS_SRCBLENDALPHA]],a=u.BlendTable[this._alphaBlendState.states[u.RS_DESTBLENDALPHA]];e.blendEquationSeparate(t,i),e.blendFuncSeparate(r,n,s,a)}else e.blendEquation(t),e.blendFunc(r,n);this._alphaBlendState.dirty=!1}let t,r,n;if(this._depthOffsetState.dirty&&(e.polygonOffset(this._depthOffsetState.states[u.RS_SLOPESCALEDEPTHBIAS],this._depthOffsetState.states[u.RS_DEPTHBIAS]),this._depthOffsetState.dirty=!1),this.shadowHandles&&this._alphaTestState.states[u.RS_ALPHATESTENABLE]){switch(this._alphaTestState.states[u.RS_ALPHAFUNC]){case u.CMP_NEVER:t=0,r=1,n=-256;break;case u.CMP_LESS:t=0,r=-1,n=this._alphaTestState.states[u.RS_ALPHAREF]-1;break;case u.CMP_EQUAL:t=1,r=0,n=this._alphaTestState.states[u.RS_ALPHAREF];break;case u.CMP_LEQUAL:t=0,r=-1,n=this._alphaTestState.states[u.RS_ALPHAREF];break;case u.CMP_GREATER:t=0,r=1,n=-this._alphaTestState.states[u.RS_ALPHAREF]-1;break;case u.CMP_GREATEREQUAL:t=0,r=1,n=-this._alphaTestState.states[u.RS_ALPHAREF];break;default:t=0,r=0,n=1}const i=0;e.uniform4f(this.shadowHandles.shadowStateInt,r,n,t,i)}}SetStandardStates(e){if(this._currentRenderMode!==e){switch(this.gl.frontFace(this.gl.CW),e){case u.RM_OPAQUE:case u.RM_PICKABLE:this.SetRenderState(u.RS_ZENABLE,!0),this.SetRenderState(u.RS_ZWRITEENABLE,!0),this.SetRenderState(u.RS_ZFUNC,u.CMP_LEQUAL),this.SetRenderState(u.RS_CULLMODE,u.CULL_CW),this.SetRenderState(u.RS_ALPHABLENDENABLE,!1),this.SetRenderState(u.RS_ALPHATESTENABLE,!1),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_DECAL:this.SetRenderState(u.RS_ALPHABLENDENABLE,!1),this.SetRenderState(u.RS_ALPHATESTENABLE,!0),this.SetRenderState(u.RS_ALPHAFUNC,u.CMP_GREATER),this.SetRenderState(u.RS_ALPHAREF,127),this.SetRenderState(u.RS_ZENABLE,!0),this.SetRenderState(u.RS_ZWRITEENABLE,!0),this.SetRenderState(u.RS_ZFUNC,u.CMP_LEQUAL),this.SetRenderState(u.RS_CULLMODE,u.CULL_CW),this.SetRenderState(u.RS_BLENDOP,u.BLENDOP_ADD),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_TRANSPARENT:this.SetRenderState(u.RS_CULLMODE,u.CULL_CW),this.SetRenderState(u.RS_ALPHABLENDENABLE,!0),this.SetRenderState(u.RS_SRCBLEND,u.BLEND_SRCALPHA),this.SetRenderState(u.RS_DESTBLEND,u.BLEND_INVSRCALPHA),this.SetRenderState(u.RS_BLENDOP,u.BLENDOP_ADD),this.SetRenderState(u.RS_ZENABLE,!0),this.SetRenderState(u.RS_ZWRITEENABLE,!1),this.SetRenderState(u.RS_ZFUNC,u.CMP_LEQUAL),this.SetRenderState(u.RS_ALPHATESTENABLE,!1),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_ADDITIVE:this.SetRenderState(u.RS_CULLMODE,u.CULL_NONE),this.SetRenderState(u.RS_ALPHABLENDENABLE,!0),this.SetRenderState(u.RS_SRCBLEND,u.BLEND_ONE),this.SetRenderState(u.RS_DESTBLEND,u.BLEND_ONE),this.SetRenderState(u.RS_BLENDOP,u.BLENDOP_ADD),this.SetRenderState(u.RS_ZENABLE,!0),this.SetRenderState(u.RS_ZWRITEENABLE,!1),this.SetRenderState(u.RS_ZFUNC,u.CMP_LEQUAL),this.SetRenderState(u.RS_ALPHATESTENABLE,!1),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_FULLSCREEN:this.SetRenderState(u.RS_ALPHABLENDENABLE,!1),this.SetRenderState(u.RS_ALPHATESTENABLE,!1),this.SetRenderState(u.RS_CULLMODE,u.CULL_NONE),this.SetRenderState(u.RS_ZENABLE,!1),this.SetRenderState(u.RS_ZWRITEENABLE,!1),this.SetRenderState(u.RS_ZFUNC,u.CMP_ALWAYS),this.SetRenderState(u.RS_SLOPESCALEDEPTHBIAS,0),this.SetRenderState(u.RS_DEPTHBIAS,0),this.SetRenderState(u.RS_SEPARATEALPHABLENDENABLE,!1),this.SetRenderState(u.RS_COLORWRITEENABLE,15);break;case u.RM_DISTORTION:case u.RM_DEPTH:default:return}this._currentRenderMode=e}}}c(l,"category","device"),l.prototype.RM_ANY=u.RM_ANY,l.prototype.RM_OPAQUE=u.RM_OPAQUE,l.prototype.RM_DECAL=u.RM_DECAL,l.prototype.RM_TRANSPARENT=u.RM_TRANSPARENT,l.prototype.RM_ADDITIVE=u.RM_ADDITIVE,l.prototype.RM_DEPTH=u.RM_DEPTH,l.prototype.RM_DISTORTION=u.RM_DISTORTION,l.prototype.RM_FULLSCREEN=u.RM_FULLSCREEN,l.prototype.RM_PICKABLE=u.RM_PICKABLE},"./global/engine/Tw2Logger.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Logger",function(){return a});var n=r("./global/class/Tw2EventEmitter.js"),i=r("./global/util/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2EventEmitter{constructor(e){super(),s(this,"name",""),s(this,"display",!0),s(this,"visible",{log:!0,info:!1,debug:!1,warn:!1,error:!0}),s(this,"history",100),s(this,"throttle",20),s(this,"tw2",null),s(this,"_logs",[]),s(this,"_throttled",null),e.SetLibrary(this)}Register(e){e&&(Object(i.assignIfExists)(this,e,["name","display","history","throttle"]),Object(i.assignIfExists)(this.visible,e.visible,["log","info","debug","warn","error"]))}log(e){if(e._logged)return e;Object(i.isError)(e)&&(e={err:e}),e.err?(e.type="error",e.name||(e.name=e.err.name),e.message||(e.message=e.err.message)):(e.type=a.LogType[e.type?e.type.toUpperCase():"LOG"]||"log",e.message=e.message||"");let t=e.name||this.constructor.category;if(t=(t=t.replace(/_/g," ")).charAt(0).toUpperCase()+t.slice(1),e.name=t,this.display&&this.visible[e.type]||(e.hide=!0),this.throttle){if(!e.hide){this._throttled||(this._throttled={}),this._throttled[e.type]||(this._throttled[e.type]=[]);const t=this._throttled[e.type];t.includes(e.message)?e.hide=!0:(t.unshift(e.message),t.splice(this.throttle))}}else this._throttled=null;if(!e.hide){let t="".concat(this.name," ").concat(e.name,":");e.err||e.data?(console.group(t,e.message),e.err&&console.debug(e.err.stack||e.err.toString()),e.stack&&console.debug(e.stack),e.data&&console.debug(JSON.stringify(e.data,null,4)),console.groupEnd()):console[e.type](t,e.message)}return this.history?(this._logs.unshift(e),this._logs.splice(this.history)):this._logs=[],e._logged=!0,this.emit(e.type,e),e}}s(a,"LogType",{ERROR:"error",WARNING:"warn",INFO:"info",LOG:"log",DEBUG:"debug"}),s(a,"category","logger")},"./global/engine/Tw2MotherLode.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2MotherLode",function(){return n});class n{constructor(){this._loadedObjects={},this._errors={}}AddError(e,t){return this._errors[e]=this._errors[e]||[],this._errors[e].includes(t)||(t.data=t.data||{},t.data.path=t.data.path||e,this._errors[e].push(t)),t}GetErrors(e){return e&&e in this._errors?Object.assign([],this._errors[e]):[]}GetLastError(e){return e&&e in this._errors?this._errors[e].slice(-1)[0]:void 0}HasErrors(e){return e&&e in this._errors}Find(e){return e in this._loadedObjects?this._loadedObjects[e]:null}Add(e,t){this._loadedObjects[e]=t}Remove(e){delete this._loadedObjects[e]}Clear(){this._loadedObjects={}}UnloadAndClear(){for(const e in this._loadedObjects)this._loadedObjects.hasOwnProperty(e)&&this._loadedObjects[e].Unload();this._loadedObjects={}}PurgeInactive(e,t,r){for(const n in this._loadedObjects)if(this._loadedObjects.hasOwnProperty(n)){const i=this._loadedObjects[n];if(i.doNotPurge)continue;if(i.IsPurged()){this.Remove(n);continue}let s;i.HasErrors()?s="error":i.IsUnloaded()?s="unloaded":i.IsGood()&&(e-i.activeFrame)%t>=r&&i.Unload()&&(s="inactivity"),s&&(i.OnPurged({message:"Purged (".concat(s,")")}),this.Remove(n))}}}},"./global/engine/Tw2ResMan.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ResMan",function(){return c});var n=r("./global/engine/Tw2MotherLode.js"),i=r("./core/resource/Tw2LoadingObject.js"),s=r("./global/class/Tw2EventEmitter.js"),a=r("./core/index.js"),o=r("./global/util/index.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends s.Tw2EventEmitter{constructor(e){super(),u(this,"motherLode",new n.Tw2MotherLode),u(this,"systemMirror",!1),u(this,"maxPrepareTime",.05),u(this,"autoPurgeResources",!0),u(this,"activeFrame",0),u(this,"purgeTime",30),u(this,"_prepareBudget",0),u(this,"_prepareQueue",[]),u(this,"_purgeTime",0),u(this,"_purgeFrame",0),u(this,"_purgeFrameLimit",1e3),u(this,"_pendingLoads",0),u(this,"_noLoadFrames",0),u(this,"tw2",null),e.SetLibrary(this)}Register(e){e&&Object(o.assignIfExists)(this,e,["systemMirror","maxPrepareTime","autoPurgeResources","purgeTime"])}OnResError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a.Tw2Error({path:e});e=c.NormalizePath(e);const r=this.motherLode.Find(e);return r?r.OnError(t):this.OnResEvent("error",e,t),t}OnResEvent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=c.DefaultLog[e.toUpperCase()];if(n){const i={res:this.motherLode.Find(t),path:t};if(Object(o.isError)(r)){const e=i.err=r;this.motherLode.AddError(t,e),r=Object.assign({},n,{message:e.message,err:e})}else r=Object.assign({},n,r);i.log=r,r.message=r.message.includes(t)?r.message:r.message+=' "'.concat(t,'"'),this.emit(e.toLowerCase(),i)}}IsLoading(){return this._noLoadFrames<2}Clear(){this.motherLode.Clear()}UnloadAndClear(){this.motherLode.UnloadAndClear()}Tick(e){0===this._prepareQueue.length&&0===this._pendingLoads?this._noLoadFrames<2&&this._noLoadFrames++:this._noLoadFrames=0,this._prepareBudget=this.maxPrepareTime;const t=e.now;for(;this._prepareQueue.length;){const r=this._prepareQueue[0][0],n=this._prepareQueue[0][1],i=this._prepareQueue[0][2];this._prepareQueue.shift();try{r.Prepare(n,i)}catch(e){r.OnError(e),console.error(e)}if(this._prepareBudget-=.001*(e.now-t),this._prepareBudget<0)break}return this._purgeTime+=e.dt,this._purgeTime>1&&(this.activeFrame+=1,this._purgeTime-=Math.floor(this._purgeTime),this._purgeFrame+=1,this._purgeFrame>=5&&this.autoPurgeResources&&this.motherLode.PurgeInactive(this._purgeFrame,this._purgeFrameLimit,this.purgeTime)),!0}Queue(e,t,r){this._prepareQueue.push([e,t,r])}GetResource(e){let t;if(e=c.NormalizePath(e),t=this.motherLode.Find(e))return t.IsPurged()&&t.Reload(),t;if(this.motherLode.HasErrors(e))return this.OnResError(e,this.motherLode.GetLastError(e)),null;if(0===e.indexOf("dynamic:/"))return this.OnResError(e,new a.ErrFeatureNotImplemented({feature:"Dynamic resources"})),null;const r=c.GetPathExt(e);if(null===r)return this.OnResError(e,new a.ErrResourceExtensionUndefined({path:e})),null;const n=this.tw2.store.extensions.Get(r);return n?((t=new n).path=e,this.LoadResource(t)):(this.OnResError(e,new a.ErrResourceExtensionUnregistered({path:e,extension:r})),null)}GetObject(e,t,r){e=c.NormalizePath(e);let n=this.motherLode.Find(e);if(n)n.AddObject(t,r);else{if(this.motherLode.HasErrors(e)){const t=this.motherLode.GetLastError(e);return this.OnResError(e,t),void(r&&r(t))}(n=new i.Tw2LoadingObject).path=e,n.AddObject(t,r),this.LoadResource(n)}}GetObjectAsync(e){return new Promise((t,r)=>{this.GetObject(e,t,r)})}ReloadResource(e){return(e.IsPurged()||e.HasErrors())&&this.LoadResource(e),e}LoadResource(e){let t;this.motherLode.Add(e.path,e),e.OnRequested();try{if(t=this.BuildUrl(e.path),e.DoCustomLoad&&e.DoCustomLoad(t,c.GetPathExt(t)))return e}catch(t){return e.OnError(t),e}return this._pendingLoads++,this.Fetch(t,e.requestResponseType).then(t=>{this._pendingLoads--,e.OnLoaded(),this.Queue(e,t)}).catch(t=>{this._pendingLoads--,e.OnError(t)}),e}Fetch(e,t){return this._pendingLoads++,fetch(e).then(r=>{if(!r.ok)throw new a.ErrHTTPStatus({status:r.status,url:e});if(Object(o.isFunction)(t))return t(r);switch(t){case"arraybuffer":return r.arrayBuffer();case"body":return r.body();case"text":return r.text();case"json":return r.json();case"blob":return r.blob();default:throw new Error("Invalid fetch type: "+t)}}).then(e=>(this._pendingLoads--,e)).catch(e=>{throw this._pendingLoads++,e})}BuildUrl(e){const t=e.indexOf(":/");if(-1===t)throw new a.ErrResourcePrefixUndefined({path:e});const r=e.substr(0,t);if("http"===r||"https"===r)return e;const n=this.tw2.store.paths.Get(r);if(!n)throw new a.ErrResourcePrefixUnregistered({path:e,prefix:r});return n+e.substr(t+2)}static NormalizePath(e){return e=(e=e.toLowerCase()).replace("\\","/")}static GetPathExt(e){const t=e.lastIndexOf(".");return-1===t?null:e.substr(t+1)}}u(c,"DefaultLog",{ERROR:{type:"error",message:"Uncaught error"},WARNING:{type:"warn",message:"Undefined warning"},REQUESTED:{type:"info",message:"Requested"},RELOADING:{type:"info",message:"Reloading"},LOADED:{type:"info",message:"Loaded"},PREPARED:{type:"log",message:"Prepared"},PURGED:{type:"info",message:"Purged"},UNLOADED:{type:"info",message:"Unloaded"},DEBUG:{type:"debug",message:"Debug"}}),u(c,"category","resource_manager")},"./global/engine/Tw2Store.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2Store",function(){return l});var n=r("./global/class/index.js"),i=r("./core/Tw2Error.js"),s=r("./global/util/index.js"),a=r("./core/reader/Tw2BlackPropertyReaders.js"),o=r("./core/index.js");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class l{constructor(e){c(this,"types",new p),c(this,"paths",new v),c(this,"blacks",new f),c(this,"classes",new _(this)),c(this,"schemas",new E),c(this,"variables",new g(this)),c(this,"extensions",new h),c(this,"dynamicPaths",new m),c(this,"tw2",null),e.SetLibrary(this)}Register(e){e&&(this.paths.Register(e.paths),this.dynamicPaths.Register(e.dynamicPaths),this.types.Register(e.types),this.classes.Register(e.classes),this.extensions.Register(e.extensions),this.variables.Register(e.variables),this.schemas.Register(e.schemas),this.blacks.Register(e.blacks))}}class d extends n.Tw2EventEmitter{constructor(e){super(),c(this,"_values",new Map),c(this,"_missing",[]),e&&Reflect.defineProperty(this,"_store",{get:()=>e})}get name(){return this.constructor.__storeType}IsValidValue(e){return!this.constructor.isValue||this.constructor.isValue}IsValidKey(e){const t=this.constructor.__storeRestrictions;return!Object(s.isArray)(t)||!t.includes(e)}Has(e){return this._values.has(e)}Get(e){return this._values.has(e)?this._values.get(e):(this._missing.includes(e)||(this._missing.push(e),this._missing.sort()),null)}Set(e,t,r){if(this.Has(e)&&!r)throw new o.ErrStoreKeyProtected({store:this.name,key:e}).emitOn(this);if(!this.IsValidKey(e))throw new i.ErrStoreKeyReserved({store:this.name,key:e}).emitOn(this);if(!this.IsValidValue(t))throw new i.ErrStoreValueInvalid({store:this.name,key:e}).emitOn(this);return this._values.set(e,t),this.emit("registered",{key:e,value:t,log:{type:"debug",message:"Registered ".concat(this.name,": ").concat(e)}}),t}Register(e){if(e){e=Object(s.toArray)(e);for(let t=0;t<e.length;t++)for(const r in e[t])e[t].hasOwnProperty(r)&&this.Set(r,e[t][r])}}static isValue(e){return null!=e}}c(d,"__storeRestrictions",null),c(d,"__storeType","generic"),c(d,"__category","Variable store");class h extends d{}c(h,"isValue",s.isFunction),c(h,"__storeType","extension");class f extends d{Set(e,t,r){const n=t(a);return super.Set(e,new Map(n))}Has(e){return!!super.Has(e)||(0!==e.indexOf("Tri")&&0!==e.indexOf("Tr2")||(e="Tw2"+e.substring(3)),super.Has(e))}Get(e){let t=super.Get(e);if(!t&&(0===e.indexOf("Tri")||0===e.indexOf("Tr2"))){const r=e;e="Tw2"+e.substring(3),(t=super.Get(e))&&this.emit("substitute",{key:e,value:t,originalKey:r,type:this.name,log:{type:"warning",message:'"'.concat(r,'" class not found, substituting with "').concat(e,'"')}})}return t}}c(f,"isValue",s.isFunction),c(f,"__storeType","black");class m extends d{static isValue(e){if(!Object(s.isArray)(e))return!1;for(let t=0;t<e.length;t++)if(!Object(s.isNumber)(e[t]))return!1;return!0}}c(m,"__storeType","dynamicPath");class v extends d{Set(e,t,r){return Object(s.isString)(t)&&"/"!==t.charAt(t.length-1)&&(t+="/"),super.Set(e,t,r)}}c(v,"isValue",s.isString),c(v,"__storeType","path"),c(v,"__storeRestrictions",["rgba","dynamic"]);class p extends d{GetByValue(e){var t=!0,r=!1,n=void 0;try{for(var i,s=this._values[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){let t=u(i.value,2),r=(t[0],t[1]);if("isValue"in r&&r.isValue(e))return r}}catch(e){r=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw n}}return null}}c(p,"isValue",s.isFunction),c(p,"__storeType","type");class E extends d{static isValue(e){return e instanceof n.Tw2Schema}}c(E,"__storeType","schema");class _ extends d{Debug(e){e=!!e,_.DEBUG_ENABLED=!!e,this._values.forEach(t=>{"DEBUG_ENABLED"in t&&(t.DEBUG_ENABLED=e)})}Set(e,t,r){const n=super.Set(e,t,r);return"DEBUG_ENABLED"in t&&(t.DEBUG_ENABLED=_.DEBUG_ENABLED),!t.black||!r&&this._store.blacks.Has(e)||this._store.blacks.Set(e,t.black,r),!t.schema||!r&&this._store.schemas.Has(e)||this._store.schemas.Set(e,t.schema,r),n}Get(e){let t;if(!(t=super.Get(e))&&(0===e.indexOf("Tri")||0===e.indexOf("Tr2"))){const r=e;e="Tw2"+e.substring(3),(t=super.Get(e))&&this.emit("substitute",{key:e,value:t,originalKey:r,type:this.name,log:{type:"warning",message:'"'.concat(r,'" class not found, substituting with "').concat(e,'"')}})}return t&&t.__isStaging&&this.emit("partial",{key:e,value:t,log:{type:"warning",message:"Class partially implemented: ".concat(e)}}),t}}c(_,"isValue",s.isFunction),c(_,"__storeType","class"),c(_,"DEBUG_ENABLED",!1);class g extends d{SetValue(e,t){if(!this.Has(e))throw new i.ErrStoreValueMissing({store:this.name,key:e}).emitOn(this);return this.Get(e).SetValue(t)}GetValue(e,t){if(!this.Has(e))throw new i.ErrStoreValueMissing({store:this.name,key:e}).emitOn(this);return this.Get(e).GetValue(t)}Create(e,t,r){if(Object(s.isPlain)(t)&&(r=t.Type||t.type,t=t.value),Object(s.isFunction)(r))return new r(e,t);if(Object(s.isString)(r)&&(r=this._store.types.Get(r)),r||(r=this._store.types.GetByValue(t)),Object(s.isFunction)(r))return new r(e,t);throw new i.ErrStoreTypeInvalid({store:this.name,type:r}).emitOn(this)}Register(e){e=Object(s.toArray)(e);for(let t=0;t<e.length;t++)for(const r in e[t])if(e[t].hasOwnProperty(r)){const n=this.Create(r,e[t][r]);this.Set(r,n)}}}c(g,"__storeType","variable")},"./global/engine/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/engine/Tw2Client.js");r.d(t,"Tw2Client",function(){return n.Tw2Client});var i=r("./global/engine/Tw2Device.js");r.d(t,"Tw2Device",function(){return i.Tw2Device});var s=r("./global/engine/Tw2ResMan.js");r.d(t,"Tw2ResMan",function(){return s.Tw2ResMan});var a=r("./global/engine/Tw2Store.js");r.d(t,"Tw2Store",function(){return a.Tw2Store});var o=r("./global/engine/Tw2Logger.js");r.d(t,"Tw2Logger",function(){return o.Tw2Logger});var u=r("./global/engine/Tw2Constant.js");r.d(t,"GL_COLOR_BUFFER_BIT",function(){return u.GL_COLOR_BUFFER_BIT}),r.d(t,"GL_DEPTH_BUFFER_BIT",function(){return u.GL_DEPTH_BUFFER_BIT}),r.d(t,"GL_STENCIL_BUFFER_BIT",function(){return u.GL_STENCIL_BUFFER_BIT}),r.d(t,"GL_TEXTURE_2D",function(){return u.GL_TEXTURE_2D}),r.d(t,"GL_TEXTURE_CUBE_MAP",function(){return u.GL_TEXTURE_CUBE_MAP}),r.d(t,"GL_TEXTURE_3D",function(){return u.GL_TEXTURE_3D}),r.d(t,"GL_TEXTURE_MAG_FILTER",function(){return u.GL_TEXTURE_MAG_FILTER}),r.d(t,"GL_TEXTURE_MIN_FILTER",function(){return u.GL_TEXTURE_MIN_FILTER}),r.d(t,"GL_TEXTURE_WRAP_S",function(){return u.GL_TEXTURE_WRAP_S}),r.d(t,"GL_TEXTURE_WRAP_T",function(){return u.GL_TEXTURE_WRAP_T}),r.d(t,"GL_BYTE",function(){return u.GL_BYTE}),r.d(t,"GL_UNSIGNED_BYTE",function(){return u.GL_UNSIGNED_BYTE}),r.d(t,"GL_SHORT",function(){return u.GL_SHORT}),r.d(t,"GL_UNSIGNED_SHORT",function(){return u.GL_UNSIGNED_SHORT}),r.d(t,"GL_INT",function(){return u.GL_INT}),r.d(t,"GL_UNSIGNED_INT",function(){return u.GL_UNSIGNED_INT}),r.d(t,"GL_FLOAT",function(){return u.GL_FLOAT}),r.d(t,"GL_HALF_FLOAT_OES",function(){return u.GL_HALF_FLOAT_OES}),r.d(t,"GL_HALF_FLOAT",function(){return u.GL_HALF_FLOAT}),r.d(t,"GL_DEPTH_COMPONENT16",function(){return u.GL_DEPTH_COMPONENT16}),r.d(t,"GL_DEPTH_COMPONENT24",function(){return u.GL_DEPTH_COMPONENT24}),r.d(t,"GL_DEPTH_COMPONENT32F",function(){return u.GL_DEPTH_COMPONENT32F}),r.d(t,"GL_FLOAT_VEC2",function(){return u.GL_FLOAT_VEC2}),r.d(t,"GL_FLOAT_VEC3",function(){return u.GL_FLOAT_VEC3}),r.d(t,"GL_FLOAT_VEC4",function(){return u.GL_FLOAT_VEC4}),r.d(t,"GL_INT_VEC2",function(){return u.GL_INT_VEC2}),r.d(t,"GL_INT_VEC3",function(){return u.GL_INT_VEC3}),r.d(t,"GL_INT_VEC4",function(){return u.GL_INT_VEC4}),r.d(t,"GL_BOOL",function(){return u.GL_BOOL}),r.d(t,"GL_BOOL_VEC2",function(){return u.GL_BOOL_VEC2}),r.d(t,"GL_BOOL_VEC3",function(){return u.GL_BOOL_VEC3}),r.d(t,"GL_BOOL_VEC4",function(){return u.GL_BOOL_VEC4}),r.d(t,"GL_FLOAT_MAT2",function(){return u.GL_FLOAT_MAT2}),r.d(t,"GL_FLOAT_MAT3",function(){return u.GL_FLOAT_MAT3}),r.d(t,"GL_FLOAT_MAT4",function(){return u.GL_FLOAT_MAT4}),r.d(t,"GL_TYPE_LENGTH",function(){return u.GL_TYPE_LENGTH}),r.d(t,"GL_SAMPLER_2D",function(){return u.GL_SAMPLER_2D}),r.d(t,"GL_SAMPLER_3D",function(){return u.GL_SAMPLER_3D}),r.d(t,"GL_SAMPLER_CUBE",function(){return u.GL_SAMPLER_CUBE}),r.d(t,"GL_DEPTH_COMPONENT",function(){return u.GL_DEPTH_COMPONENT}),r.d(t,"GL_ALPHA",function(){return u.GL_ALPHA}),r.d(t,"GL_RGB",function(){return u.GL_RGB}),r.d(t,"GL_RGBA",function(){return u.GL_RGBA}),r.d(t,"GL_LUMINANCE",function(){return u.GL_LUMINANCE}),r.d(t,"GL_LUMINANCE_ALPHA",function(){return u.GL_LUMINANCE_ALPHA}),r.d(t,"GL_DEPTH_STENCIL",function(){return u.GL_DEPTH_STENCIL}),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",function(){return u.GL_UNSIGNED_INT_24_8_WEBGL}),r.d(t,"GL_R8",function(){return u.GL_R8}),r.d(t,"GL_R16F",function(){return u.GL_R16F}),r.d(t,"GL_R32F",function(){return u.GL_R32F}),r.d(t,"GL_R8UI",function(){return u.GL_R8UI}),r.d(t,"GL_RG8",function(){return u.GL_RG8}),r.d(t,"GL_RG16F",function(){return u.GL_RG16F}),r.d(t,"GL_RG32F",function(){return u.GL_RG32F}),r.d(t,"GL_RGB8",function(){return u.GL_RGB8}),r.d(t,"GL_SRGB8",function(){return u.GL_SRGB8}),r.d(t,"GL_RGB565",function(){return u.GL_RGB565}),r.d(t,"GL_R11F_G11F_B10F",function(){return u.GL_R11F_G11F_B10F}),r.d(t,"GL_RGB9_E5",function(){return u.GL_RGB9_E5}),r.d(t,"GL_RGB16F",function(){return u.GL_RGB16F}),r.d(t,"GL_RGB32F",function(){return u.GL_RGB32F}),r.d(t,"GL_RGB8UI",function(){return u.GL_RGB8UI}),r.d(t,"GL_RGBA8",function(){return u.GL_RGBA8}),r.d(t,"GL_RGB5_A1",function(){return u.GL_RGB5_A1}),r.d(t,"GL_RGBA16F",function(){return u.GL_RGBA16F}),r.d(t,"GL_RGBA32F",function(){return u.GL_RGBA32F}),r.d(t,"GL_RGBA8UI",function(){return u.GL_RGBA8UI}),r.d(t,"GL_RGBA16I",function(){return u.GL_RGBA16I}),r.d(t,"GL_RGBA16UI",function(){return u.GL_RGBA16UI}),r.d(t,"GL_RGBA32I",function(){return u.GL_RGBA32I}),r.d(t,"GL_RGBA32UI",function(){return u.GL_RGBA32UI}),r.d(t,"GL_NEAREST",function(){return u.GL_NEAREST}),r.d(t,"GL_LINEAR",function(){return u.GL_LINEAR}),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",function(){return u.GL_NEAREST_MIPMAP_NEAREST}),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",function(){return u.GL_LINEAR_MIPMAP_NEAREST}),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",function(){return u.GL_NEAREST_MIPMAP_LINEAR}),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",function(){return u.GL_LINEAR_MIPMAP_LINEAR}),r.d(t,"GL_REPEAT",function(){return u.GL_REPEAT}),r.d(t,"GL_CLAMP_TO_EDGE",function(){return u.GL_CLAMP_TO_EDGE}),r.d(t,"GL_MIRRORED_REPEAT",function(){return u.GL_MIRRORED_REPEAT}),r.d(t,"GL_ZERO",function(){return u.GL_ZERO}),r.d(t,"GL_ONE",function(){return u.GL_ONE}),r.d(t,"GL_SRC_COLOR",function(){return u.GL_SRC_COLOR}),r.d(t,"GL_ONE_MINUS_SRC_COLOR",function(){return u.GL_ONE_MINUS_SRC_COLOR}),r.d(t,"GL_SRC_ALPHA",function(){return u.GL_SRC_ALPHA}),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",function(){return u.GL_ONE_MINUS_SRC_ALPHA}),r.d(t,"GL_DST_ALPHA",function(){return u.GL_DST_ALPHA}),r.d(t,"GL_ONE_MINUS_DST_ALPHA",function(){return u.GL_ONE_MINUS_DST_ALPHA}),r.d(t,"GL_DST_COLOR",function(){return u.GL_DST_COLOR}),r.d(t,"GL_ONE_MINUS_DST_COLOR",function(){return u.GL_ONE_MINUS_DST_COLOR}),r.d(t,"GL_SRC_ALPHA_SATURATE",function(){return u.GL_SRC_ALPHA_SATURATE}),r.d(t,"GL_CONSTANT_COLOR",function(){return u.GL_CONSTANT_COLOR}),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",function(){return u.GL_ONE_MINUS_CONSTANT_COLOR}),r.d(t,"GL_CONSTANT_ALPHA",function(){return u.GL_CONSTANT_ALPHA}),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",function(){return u.GL_ONE_MINUS_CONSTANT_ALPHA}),r.d(t,"GL_VERTEX_SHADER",function(){return u.GL_VERTEX_SHADER}),r.d(t,"GL_FRAGMENT_SHADER",function(){return u.GL_FRAGMENT_SHADER}),r.d(t,"GL_FRONT",function(){return u.GL_FRONT}),r.d(t,"GL_BACK",function(){return u.GL_BACK}),r.d(t,"GL_FRONT_AND_BACK",function(){return u.GL_FRONT_AND_BACK}),r.d(t,"GL_NEVER",function(){return u.GL_NEVER}),r.d(t,"GL_LESS",function(){return u.GL_LESS}),r.d(t,"GL_EQUAL",function(){return u.GL_EQUAL}),r.d(t,"GL_LEQUAL",function(){return u.GL_LEQUAL}),r.d(t,"GL_GREATER",function(){return u.GL_GREATER}),r.d(t,"GL_NOTEQUAL",function(){return u.GL_NOTEQUAL}),r.d(t,"GL_GEQUAL",function(){return u.GL_GEQUAL}),r.d(t,"GL_ALWAYS",function(){return u.GL_ALWAYS}),r.d(t,"GL_KEEP",function(){return u.GL_KEEP}),r.d(t,"GL_REPLACE",function(){return u.GL_REPLACE}),r.d(t,"GL_INCR",function(){return u.GL_INCR}),r.d(t,"GL_DECR",function(){return u.GL_DECR}),r.d(t,"GL_INCR_WRAP",function(){return u.GL_INCR_WRAP}),r.d(t,"GL_DECR_WRAP",function(){return u.GL_DECR_WRAP}),r.d(t,"GL_INVERT",function(){return u.GL_INVERT}),r.d(t,"GL_STREAM_DRAW",function(){return u.GL_STREAM_DRAW}),r.d(t,"GL_STATIC_DRAW",function(){return u.GL_STATIC_DRAW}),r.d(t,"GL_DYNAMIC_DRAW",function(){return u.GL_DYNAMIC_DRAW}),r.d(t,"GL_ARRAY_BUFFER",function(){return u.GL_ARRAY_BUFFER}),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",function(){return u.GL_ELEMENT_ARRAY_BUFFER}),r.d(t,"GL_POINTS",function(){return u.GL_POINTS}),r.d(t,"GL_LINES",function(){return u.GL_LINES}),r.d(t,"GL_LINE_LOOP",function(){return u.GL_LINE_LOOP}),r.d(t,"GL_LINE_STRIP",function(){return u.GL_LINE_STRIP}),r.d(t,"GL_TRIANGLES",function(){return u.GL_TRIANGLES}),r.d(t,"GL_TRIANGLE_STRIP",function(){return u.GL_TRIANGLE_STRIP}),r.d(t,"GL_TRIANGLE_FAN",function(){return u.GL_TRIANGLE_FAN}),r.d(t,"GL_CW",function(){return u.GL_CW}),r.d(t,"GL_CCW",function(){return u.GL_CCW}),r.d(t,"GL_CULL_FACE",function(){return u.GL_CULL_FACE}),r.d(t,"GL_DEPTH_TEST",function(){return u.GL_DEPTH_TEST}),r.d(t,"GL_BLEND",function(){return u.GL_BLEND}),r.d(t,"RM_ANY",function(){return u.RM_ANY}),r.d(t,"RM_OPAQUE",function(){return u.RM_OPAQUE}),r.d(t,"RM_DECAL",function(){return u.RM_DECAL}),r.d(t,"RM_TRANSPARENT",function(){return u.RM_TRANSPARENT}),r.d(t,"RM_ADDITIVE",function(){return u.RM_ADDITIVE}),r.d(t,"RM_DEPTH",function(){return u.RM_DEPTH}),r.d(t,"RM_FULLSCREEN",function(){return u.RM_FULLSCREEN}),r.d(t,"RM_PICKABLE",function(){return u.RM_PICKABLE}),r.d(t,"RM_DISTORTION",function(){return u.RM_DISTORTION}),r.d(t,"RS_ZENABLE",function(){return u.RS_ZENABLE}),r.d(t,"RS_FILLMODE",function(){return u.RS_FILLMODE}),r.d(t,"RS_SHADEMODE",function(){return u.RS_SHADEMODE}),r.d(t,"RS_ZWRITEENABLE",function(){return u.RS_ZWRITEENABLE}),r.d(t,"RS_ALPHATESTENABLE",function(){return u.RS_ALPHATESTENABLE}),r.d(t,"RS_LASTPIXEL",function(){return u.RS_LASTPIXEL}),r.d(t,"RS_SRCBLEND",function(){return u.RS_SRCBLEND}),r.d(t,"RS_DESTBLEND",function(){return u.RS_DESTBLEND}),r.d(t,"RS_CULLMODE",function(){return u.RS_CULLMODE}),r.d(t,"RS_ZFUNC",function(){return u.RS_ZFUNC}),r.d(t,"RS_ALPHAREF",function(){return u.RS_ALPHAREF}),r.d(t,"RS_ALPHAFUNC",function(){return u.RS_ALPHAFUNC}),r.d(t,"RS_DITHERENABLE",function(){return u.RS_DITHERENABLE}),r.d(t,"RS_ALPHABLENDENABLE",function(){return u.RS_ALPHABLENDENABLE}),r.d(t,"RS_FOGENABLE",function(){return u.RS_FOGENABLE}),r.d(t,"RS_SPECULARENABLE",function(){return u.RS_SPECULARENABLE}),r.d(t,"RS_FOGCOLOR",function(){return u.RS_FOGCOLOR}),r.d(t,"RS_FOGTABLEMODE",function(){return u.RS_FOGTABLEMODE}),r.d(t,"RS_FOGSTART",function(){return u.RS_FOGSTART}),r.d(t,"RS_FOGEND",function(){return u.RS_FOGEND}),r.d(t,"RS_FOGDENSITY",function(){return u.RS_FOGDENSITY}),r.d(t,"RS_RANGEFOGENABLE",function(){return u.RS_RANGEFOGENABLE}),r.d(t,"RS_STENCILENABLE",function(){return u.RS_STENCILENABLE}),r.d(t,"RS_STENCILFAIL",function(){return u.RS_STENCILFAIL}),r.d(t,"RS_STENCILZFAIL",function(){return u.RS_STENCILZFAIL}),r.d(t,"RS_STENCILPASS",function(){return u.RS_STENCILPASS}),r.d(t,"RS_STENCILFUNC",function(){return u.RS_STENCILFUNC}),r.d(t,"RS_STENCILREF",function(){return u.RS_STENCILREF}),r.d(t,"RS_STENCILMASK",function(){return u.RS_STENCILMASK}),r.d(t,"RS_STENCILWRITEMASK",function(){return u.RS_STENCILWRITEMASK}),r.d(t,"RS_TEXTUREFACTOR",function(){return u.RS_TEXTUREFACTOR}),r.d(t,"RS_WRAP0",function(){return u.RS_WRAP0}),r.d(t,"RS_WRAP1",function(){return u.RS_WRAP1}),r.d(t,"RS_WRAP2",function(){return u.RS_WRAP2}),r.d(t,"RS_WRAP3",function(){return u.RS_WRAP3}),r.d(t,"RS_WRAP4",function(){return u.RS_WRAP4}),r.d(t,"RS_WRAP5",function(){return u.RS_WRAP5}),r.d(t,"RS_WRAP6",function(){return u.RS_WRAP6}),r.d(t,"RS_WRAP7",function(){return u.RS_WRAP7}),r.d(t,"RS_CLIPPING",function(){return u.RS_CLIPPING}),r.d(t,"RS_LIGHTING",function(){return u.RS_LIGHTING}),r.d(t,"RS_AMBIENT",function(){return u.RS_AMBIENT}),r.d(t,"RS_FOGVERTEXMODE",function(){return u.RS_FOGVERTEXMODE}),r.d(t,"RS_COLORVERTEX",function(){return u.RS_COLORVERTEX}),r.d(t,"RS_LOCALVIEWER",function(){return u.RS_LOCALVIEWER}),r.d(t,"RS_NORMALIZENORMALS",function(){return u.RS_NORMALIZENORMALS}),r.d(t,"RS_DIFFUSEMATERIALSOURCE",function(){return u.RS_DIFFUSEMATERIALSOURCE}),r.d(t,"RS_SPECULARMATERIALSOURCE",function(){return u.RS_SPECULARMATERIALSOURCE}),r.d(t,"RS_AMBIENTMATERIALSOURCE",function(){return u.RS_AMBIENTMATERIALSOURCE}),r.d(t,"RS_EMISSIVEMATERIALSOURCE",function(){return u.RS_EMISSIVEMATERIALSOURCE}),r.d(t,"RS_VERTEXBLEND",function(){return u.RS_VERTEXBLEND}),r.d(t,"RS_CLIPPLANEENABLE",function(){return u.RS_CLIPPLANEENABLE}),r.d(t,"RS_POINTSIZE",function(){return u.RS_POINTSIZE}),r.d(t,"RS_POINTSIZE_MIN",function(){return u.RS_POINTSIZE_MIN}),r.d(t,"RS_POINTSPRITEENABLE",function(){return u.RS_POINTSPRITEENABLE}),r.d(t,"RS_POINTSCALEENABLE",function(){return u.RS_POINTSCALEENABLE}),r.d(t,"RS_POINTSCALE_A",function(){return u.RS_POINTSCALE_A}),r.d(t,"RS_POINTSCALE_B",function(){return u.RS_POINTSCALE_B}),r.d(t,"RS_POINTSCALE_C",function(){return u.RS_POINTSCALE_C}),r.d(t,"RS_MULTISAMPLEANTIALIAS",function(){return u.RS_MULTISAMPLEANTIALIAS}),r.d(t,"RS_MULTISAMPLEMASK",function(){return u.RS_MULTISAMPLEMASK}),r.d(t,"RS_PATCHEDGESTYLE",function(){return u.RS_PATCHEDGESTYLE}),r.d(t,"RS_DEBUGMONITORTOKEN",function(){return u.RS_DEBUGMONITORTOKEN}),r.d(t,"RS_POINTSIZE_MAX",function(){return u.RS_POINTSIZE_MAX}),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",function(){return u.RS_INDEXEDVERTEXBLENDENABLE}),r.d(t,"RS_COLORWRITEENABLE",function(){return u.RS_COLORWRITEENABLE}),r.d(t,"RS_TWEENFACTOR",function(){return u.RS_TWEENFACTOR}),r.d(t,"RS_BLENDOP",function(){return u.RS_BLENDOP}),r.d(t,"RS_POSITIONDEGREE",function(){return u.RS_POSITIONDEGREE}),r.d(t,"RS_NORMALDEGREE",function(){return u.RS_NORMALDEGREE}),r.d(t,"RS_SCISSORTESTENABLE",function(){return u.RS_SCISSORTESTENABLE}),r.d(t,"RS_SLOPESCALEDEPTHBIAS",function(){return u.RS_SLOPESCALEDEPTHBIAS}),r.d(t,"RS_ANTIALIASEDLINEENABLE",function(){return u.RS_ANTIALIASEDLINEENABLE}),r.d(t,"RS_TWOSIDEDSTENCILMODE",function(){return u.RS_TWOSIDEDSTENCILMODE}),r.d(t,"RS_CCW_STENCILFAIL",function(){return u.RS_CCW_STENCILFAIL}),r.d(t,"RS_CCW_STENCILZFAIL",function(){return u.RS_CCW_STENCILZFAIL}),r.d(t,"RS_CCW_STENCILPASS",function(){return u.RS_CCW_STENCILPASS}),r.d(t,"RS_CCW_STENCILFUNC",function(){return u.RS_CCW_STENCILFUNC}),r.d(t,"RS_COLORWRITEENABLE1",function(){return u.RS_COLORWRITEENABLE1}),r.d(t,"RS_COLORWRITEENABLE2",function(){return u.RS_COLORWRITEENABLE2}),r.d(t,"RS_COLORWRITEENABLE3",function(){return u.RS_COLORWRITEENABLE3}),r.d(t,"RS_BLENDFACTOR",function(){return u.RS_BLENDFACTOR}),r.d(t,"RS_SRGBWRITEENABLE",function(){return u.RS_SRGBWRITEENABLE}),r.d(t,"RS_DEPTHBIAS",function(){return u.RS_DEPTHBIAS}),r.d(t,"RS_SEPARATEALPHABLENDENABLE",function(){return u.RS_SEPARATEALPHABLENDENABLE}),r.d(t,"RS_SRCBLENDALPHA",function(){return u.RS_SRCBLENDALPHA}),r.d(t,"RS_DESTBLENDALPHA",function(){return u.RS_DESTBLENDALPHA}),r.d(t,"RS_BLENDOPALPHA",function(){return u.RS_BLENDOPALPHA}),r.d(t,"CULL_NONE",function(){return u.CULL_NONE}),r.d(t,"CULL_CW",function(){return u.CULL_CW}),r.d(t,"CULL_CCW",function(){return u.CULL_CCW}),r.d(t,"CMP_NEVER",function(){return u.CMP_NEVER}),r.d(t,"CMP_LESS",function(){return u.CMP_LESS}),r.d(t,"CMP_EQUAL",function(){return u.CMP_EQUAL}),r.d(t,"CMP_LEQUAL",function(){return u.CMP_LEQUAL}),r.d(t,"CMP_GREATER",function(){return u.CMP_GREATER}),r.d(t,"CMP_NOTEQUAL",function(){return u.CMP_NOTEQUAL}),r.d(t,"CMP_GREATEREQUAL",function(){return u.CMP_GREATEREQUAL}),r.d(t,"CMP_ALWAYS",function(){return u.CMP_ALWAYS}),r.d(t,"BLEND_ZERO",function(){return u.BLEND_ZERO}),r.d(t,"BLEND_ONE",function(){return u.BLEND_ONE}),r.d(t,"BLEND_SRCCOLOR",function(){return u.BLEND_SRCCOLOR}),r.d(t,"BLEND_INVSRCCOLOR",function(){return u.BLEND_INVSRCCOLOR}),r.d(t,"BLEND_SRCALPHA",function(){return u.BLEND_SRCALPHA}),r.d(t,"BLEND_INVSRCALPHA",function(){return u.BLEND_INVSRCALPHA}),r.d(t,"BLEND_DESTALPHA",function(){return u.BLEND_DESTALPHA}),r.d(t,"BLEND_INVDESTALPHA",function(){return u.BLEND_INVDESTALPHA}),r.d(t,"BLEND_DESTCOLOR",function(){return u.BLEND_DESTCOLOR}),r.d(t,"BLEND_INVDESTCOLOR",function(){return u.BLEND_INVDESTCOLOR}),r.d(t,"BLEND_SRCALPHASAT",function(){return u.BLEND_SRCALPHASAT}),r.d(t,"BLEND_BOTHSRCALPHA",function(){return u.BLEND_BOTHSRCALPHA}),r.d(t,"BLEND_BOTHINVSRCALPHA",function(){return u.BLEND_BOTHINVSRCALPHA}),r.d(t,"BLEND_BLENDFACTOR",function(){return u.BLEND_BLENDFACTOR}),r.d(t,"BLEND_INVBLENDFACTOR",function(){return u.BLEND_INVBLENDFACTOR}),r.d(t,"BLENDOP_ADD",function(){return u.BLENDOP_ADD}),r.d(t,"BLENDOP_SUBTRACT",function(){return u.BLENDOP_SUBTRACT}),r.d(t,"BLENDOP_REVSUBTRACT",function(){return u.BLENDOP_REVSUBTRACT}),r.d(t,"BLENDOP_MIN",function(){return u.BLENDOP_MIN}),r.d(t,"BLENDOP_MAX",function(){return u.BLENDOP_MAX}),r.d(t,"TF_ALPHA",function(){return u.TF_ALPHA}),r.d(t,"TF_LUMINANCE",function(){return u.TF_LUMINANCE}),r.d(t,"TF_LUMINANCE_ALPHA",function(){return u.TF_LUMINANCE_ALPHA}),r.d(t,"TF_RGB",function(){return u.TF_RGB}),r.d(t,"TF_RGBA",function(){return u.TF_RGBA}),r.d(t,"TF_RED",function(){return u.TF_RED}),r.d(t,"TF_R",function(){return u.TF_R}),r.d(t,"TF_RG",function(){return u.TF_RG}),r.d(t,"TF_RED_INTEGER",function(){return u.TF_RED_INTEGER}),r.d(t,"TF_R_INTEGER",function(){return u.TF_R_INTEGER}),r.d(t,"TF_RG_INTEGER",function(){return u.TF_RG_INTEGER}),r.d(t,"TF_RGB_INTEGER",function(){return u.TF_RGB_INTEGER}),r.d(t,"TF_RGBA_INTEGER",function(){return u.TF_RGBA_INTEGER}),r.d(t,"TT_UNSIGNED_BYTE",function(){return u.TT_UNSIGNED_BYTE}),r.d(t,"TT_UNSIGNED_INT",function(){return u.TT_UNSIGNED_INT}),r.d(t,"TT_FLOAT",function(){return u.TT_FLOAT}),r.d(t,"TT_HALF_FLOAT",function(){return u.TT_HALF_FLOAT}),r.d(t,"TT_BYTE",function(){return u.TT_BYTE}),r.d(t,"TT_SHORT",function(){return u.TT_SHORT}),r.d(t,"TT_UNSIGNED_SHORT",function(){return u.TT_UNSIGNED_SHORT}),r.d(t,"TT_INT",function(){return u.TT_INT}),r.d(t,"TT_UNSIGNED_INTEGER",function(){return u.TT_UNSIGNED_INTEGER}),r.d(t,"TT_UNSIGNED_SHORT_4_4_4_4",function(){return u.TT_UNSIGNED_SHORT_4_4_4_4}),r.d(t,"TT_UNSIGNED_SHORT_5_5_5_1",function(){return u.TT_UNSIGNED_SHORT_5_5_5_1}),r.d(t,"TT_UNSIGNED_SHORT_5_6_5",function(){return u.TT_UNSIGNED_SHORT_5_6_5}),r.d(t,"TT_UNSIGNED_INT_2_10_10_10_REV",function(){return u.TT_UNSIGNED_INT_2_10_10_10_REV}),r.d(t,"TT_UNSIGNED_INT_24_8",function(){return u.TT_UNSIGNED_INT_24_8}),r.d(t,"TT_UNSIGNED_INT_10F_11F_11F_REV",function(){return u.TT_UNSIGNED_INT_10F_11F_11F_REV}),r.d(t,"TT_UNSIGNED_INT_5_9_9_9_REV",function(){return u.TT_UNSIGNED_INT_5_9_9_9_REV}),r.d(t,"TT_FLOAT_32_UNSIGNED_INT_24_8_REV",function(){return u.TT_FLOAT_32_UNSIGNED_INT_24_8_REV}),r.d(t,"WrapModes",function(){return u.WrapModes}),r.d(t,"BlendTable",function(){return u.BlendTable}),r.d(t,"FilterMode",function(){return u.FilterMode}),r.d(t,"MipFilterMode",function(){return u.MipFilterMode}),r.d(t,"DDS_MAGIC",function(){return u.DDS_MAGIC}),r.d(t,"DDSD_CAPS",function(){return u.DDSD_CAPS}),r.d(t,"DDSD_HEIGHT",function(){return u.DDSD_HEIGHT}),r.d(t,"DDSD_WIDTH",function(){return u.DDSD_WIDTH}),r.d(t,"DDSD_PITCH",function(){return u.DDSD_PITCH}),r.d(t,"DDSD_PIXELFORMAT",function(){return u.DDSD_PIXELFORMAT}),r.d(t,"DDSD_MIPMAPCOUNT",function(){return u.DDSD_MIPMAPCOUNT}),r.d(t,"DDSD_LINEARSIZE",function(){return u.DDSD_LINEARSIZE}),r.d(t,"DDSD_DEPTH",function(){return u.DDSD_DEPTH}),r.d(t,"DDSCAPS_COMPLEX",function(){return u.DDSCAPS_COMPLEX}),r.d(t,"DDSCAPS_MIPMAP",function(){return u.DDSCAPS_MIPMAP}),r.d(t,"DDSCAPS_TEXTURE",function(){return u.DDSCAPS_TEXTURE}),r.d(t,"DDSCAPS2_CUBEMAP",function(){return u.DDSCAPS2_CUBEMAP}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",function(){return u.DDSCAPS2_CUBEMAP_POSITIVEX}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",function(){return u.DDSCAPS2_CUBEMAP_NEGATIVEX}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",function(){return u.DDSCAPS2_CUBEMAP_POSITIVEY}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",function(){return u.DDSCAPS2_CUBEMAP_NEGATIVEY}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",function(){return u.DDSCAPS2_CUBEMAP_POSITIVEZ}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",function(){return u.DDSCAPS2_CUBEMAP_NEGATIVEZ}),r.d(t,"DDSCAPS2_VOLUME",function(){return u.DDSCAPS2_VOLUME}),r.d(t,"DDPF_ALPHAPIXELS",function(){return u.DDPF_ALPHAPIXELS}),r.d(t,"DDPF_ALPHA",function(){return u.DDPF_ALPHA}),r.d(t,"DDPF_FOURCC",function(){return u.DDPF_FOURCC}),r.d(t,"DDPF_RGB",function(){return u.DDPF_RGB}),r.d(t,"DDPF_YUV",function(){return u.DDPF_YUV}),r.d(t,"DDPF_LUMINANCE",function(){return u.DDPF_LUMINANCE}),r.d(t,"DDS_HEADER_LENGTH_INT",function(){return u.DDS_HEADER_LENGTH_INT}),r.d(t,"DDS_HEADER_OFFSET_MAGIC",function(){return u.DDS_HEADER_OFFSET_MAGIC}),r.d(t,"DDS_HEADER_OFFSET_SIZE",function(){return u.DDS_HEADER_OFFSET_SIZE}),r.d(t,"DDS_HEADER_OFFSET_FLAGS",function(){return u.DDS_HEADER_OFFSET_FLAGS}),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",function(){return u.DDS_HEADER_OFFSET_HEIGHT}),r.d(t,"DDS_HEADER_OFFSET_WIDTH",function(){return u.DDS_HEADER_OFFSET_WIDTH}),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",function(){return u.DDS_HEADER_OFFSET_MIPMAP_COUNT}),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",function(){return u.DDS_HEADER_OFFSET_PF_FLAGS}),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",function(){return u.DDS_HEADER_OFFSET_PF_FOURCC}),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",function(){return u.DDS_HEADER_OFFSET_RGB_BPP}),r.d(t,"DDS_HEADER_OFFSET_R_MASK",function(){return u.DDS_HEADER_OFFSET_R_MASK}),r.d(t,"DDS_HEADER_OFFSET_G_MASK",function(){return u.DDS_HEADER_OFFSET_G_MASK}),r.d(t,"DDS_HEADER_OFFSET_B_MASK",function(){return u.DDS_HEADER_OFFSET_B_MASK}),r.d(t,"DDS_HEADER_OFFSET_A_MASK",function(){return u.DDS_HEADER_OFFSET_A_MASK}),r.d(t,"DDS_HEADER_OFFSET_CAPS1",function(){return u.DDS_HEADER_OFFSET_CAPS1}),r.d(t,"DDS_HEADER_OFFSET_CAPS2",function(){return u.DDS_HEADER_OFFSET_CAPS2}),r.d(t,"DDS_HEADER_OFFSET_CAPS3",function(){return u.DDS_HEADER_OFFSET_CAPS3}),r.d(t,"DDS_HEADER_OFFSET_CAPS4",function(){return u.DDS_HEADER_OFFSET_CAPS4}),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",function(){return u.DDS_HEADER_OFFSET_DXGI_FORMAT}),r.d(t,"FOURCC_DXT1",function(){return u.FOURCC_DXT1}),r.d(t,"FOURCC_DXT5",function(){return u.FOURCC_DXT5}),r.d(t,"FOURCC_DXT3",function(){return u.FOURCC_DXT3}),r.d(t,"FOURCC_DXT10",function(){return u.FOURCC_DXT10}),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",function(){return u.FOURCC_D3DFMT_R16G16B16A16F}),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",function(){return u.FOURCC_D3DFMT_R32G32B32A32F}),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",function(){return u.DXGI_FORMAT_R16G16B16A16_FLOAT}),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",function(){return u.DXGI_FORMAT_B8G8R8X8_UNORM}),r.d(t,"VendorRequestAnimationFrame",function(){return u.VendorRequestAnimationFrame}),r.d(t,"VendorCancelAnimationFrame",function(){return u.VendorCancelAnimationFrame}),r.d(t,"VendorRequestFullScreen",function(){return u.VendorRequestFullScreen}),r.d(t,"VendorExitFullScreen",function(){return u.VendorExitFullScreen}),r.d(t,"VendorGetFullScreenElement",function(){return u.VendorGetFullScreenElement}),r.d(t,"VendorWebglPrefixes",function(){return u.VendorWebglPrefixes}),r.d(t,"WebglContextNames",function(){return u.WebglContextNames}),r.d(t,"Webgl2ContextNames",function(){return u.Webgl2ContextNames}),r.d(t,"WebglVersion",function(){return u.WebglVersion})},"./global/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/class/index.js");r.d(t,"Tw2BaseClass",function(){return n.Tw2BaseClass}),r.d(t,"Tw2EventEmitter",function(){return n.Tw2EventEmitter}),r.d(t,"Tw2Schema",function(){return n.Tw2Schema});var i=r("./global/math/index.js");r.d(t,"num",function(){return i.num}),r.d(t,"vec2",function(){return i.vec2}),r.d(t,"vec3",function(){return i.vec3}),r.d(t,"vec4",function(){return i.vec4}),r.d(t,"quat",function(){return i.quat}),r.d(t,"mat3",function(){return i.mat3}),r.d(t,"mat4",function(){return i.mat4}),r.d(t,"noise",function(){return i.noise}),r.d(t,"curve",function(){return i.curve}),r.d(t,"box3",function(){return i.box3}),r.d(t,"tri3",function(){return i.tri3}),r.d(t,"lne3",function(){return i.lne3}),r.d(t,"pln",function(){return i.pln}),r.d(t,"ray3",function(){return i.ray3}),r.d(t,"sph3",function(){return i.sph3});var s=r("./global/engine/Tw2Constant.js");r.d(t,"GL_COLOR_BUFFER_BIT",function(){return s.GL_COLOR_BUFFER_BIT}),r.d(t,"GL_DEPTH_BUFFER_BIT",function(){return s.GL_DEPTH_BUFFER_BIT}),r.d(t,"GL_STENCIL_BUFFER_BIT",function(){return s.GL_STENCIL_BUFFER_BIT}),r.d(t,"GL_TEXTURE_2D",function(){return s.GL_TEXTURE_2D}),r.d(t,"GL_TEXTURE_CUBE_MAP",function(){return s.GL_TEXTURE_CUBE_MAP}),r.d(t,"GL_TEXTURE_3D",function(){return s.GL_TEXTURE_3D}),r.d(t,"GL_TEXTURE_MAG_FILTER",function(){return s.GL_TEXTURE_MAG_FILTER}),r.d(t,"GL_TEXTURE_MIN_FILTER",function(){return s.GL_TEXTURE_MIN_FILTER}),r.d(t,"GL_TEXTURE_WRAP_S",function(){return s.GL_TEXTURE_WRAP_S}),r.d(t,"GL_TEXTURE_WRAP_T",function(){return s.GL_TEXTURE_WRAP_T}),r.d(t,"GL_BYTE",function(){return s.GL_BYTE}),r.d(t,"GL_UNSIGNED_BYTE",function(){return s.GL_UNSIGNED_BYTE}),r.d(t,"GL_SHORT",function(){return s.GL_SHORT}),r.d(t,"GL_UNSIGNED_SHORT",function(){return s.GL_UNSIGNED_SHORT}),r.d(t,"GL_INT",function(){return s.GL_INT}),r.d(t,"GL_UNSIGNED_INT",function(){return s.GL_UNSIGNED_INT}),r.d(t,"GL_FLOAT",function(){return s.GL_FLOAT}),r.d(t,"GL_HALF_FLOAT_OES",function(){return s.GL_HALF_FLOAT_OES}),r.d(t,"GL_HALF_FLOAT",function(){return s.GL_HALF_FLOAT}),r.d(t,"GL_DEPTH_COMPONENT16",function(){return s.GL_DEPTH_COMPONENT16}),r.d(t,"GL_DEPTH_COMPONENT24",function(){return s.GL_DEPTH_COMPONENT24}),r.d(t,"GL_DEPTH_COMPONENT32F",function(){return s.GL_DEPTH_COMPONENT32F}),r.d(t,"GL_FLOAT_VEC2",function(){return s.GL_FLOAT_VEC2}),r.d(t,"GL_FLOAT_VEC3",function(){return s.GL_FLOAT_VEC3}),r.d(t,"GL_FLOAT_VEC4",function(){return s.GL_FLOAT_VEC4}),r.d(t,"GL_INT_VEC2",function(){return s.GL_INT_VEC2}),r.d(t,"GL_INT_VEC3",function(){return s.GL_INT_VEC3}),r.d(t,"GL_INT_VEC4",function(){return s.GL_INT_VEC4}),r.d(t,"GL_BOOL",function(){return s.GL_BOOL}),r.d(t,"GL_BOOL_VEC2",function(){return s.GL_BOOL_VEC2}),r.d(t,"GL_BOOL_VEC3",function(){return s.GL_BOOL_VEC3}),r.d(t,"GL_BOOL_VEC4",function(){return s.GL_BOOL_VEC4}),r.d(t,"GL_FLOAT_MAT2",function(){return s.GL_FLOAT_MAT2}),r.d(t,"GL_FLOAT_MAT3",function(){return s.GL_FLOAT_MAT3}),r.d(t,"GL_FLOAT_MAT4",function(){return s.GL_FLOAT_MAT4}),r.d(t,"GL_TYPE_LENGTH",function(){return s.GL_TYPE_LENGTH}),r.d(t,"GL_SAMPLER_2D",function(){return s.GL_SAMPLER_2D}),r.d(t,"GL_SAMPLER_3D",function(){return s.GL_SAMPLER_3D}),r.d(t,"GL_SAMPLER_CUBE",function(){return s.GL_SAMPLER_CUBE}),r.d(t,"GL_DEPTH_COMPONENT",function(){return s.GL_DEPTH_COMPONENT}),r.d(t,"GL_ALPHA",function(){return s.GL_ALPHA}),r.d(t,"GL_RGB",function(){return s.GL_RGB}),r.d(t,"GL_RGBA",function(){return s.GL_RGBA}),r.d(t,"GL_LUMINANCE",function(){return s.GL_LUMINANCE}),r.d(t,"GL_LUMINANCE_ALPHA",function(){return s.GL_LUMINANCE_ALPHA}),r.d(t,"GL_DEPTH_STENCIL",function(){return s.GL_DEPTH_STENCIL}),r.d(t,"GL_UNSIGNED_INT_24_8_WEBGL",function(){return s.GL_UNSIGNED_INT_24_8_WEBGL}),r.d(t,"GL_R8",function(){return s.GL_R8}),r.d(t,"GL_R16F",function(){return s.GL_R16F}),r.d(t,"GL_R32F",function(){return s.GL_R32F}),r.d(t,"GL_R8UI",function(){return s.GL_R8UI}),r.d(t,"GL_RG8",function(){return s.GL_RG8}),r.d(t,"GL_RG16F",function(){return s.GL_RG16F}),r.d(t,"GL_RG32F",function(){return s.GL_RG32F}),r.d(t,"GL_RGB8",function(){return s.GL_RGB8}),r.d(t,"GL_SRGB8",function(){return s.GL_SRGB8}),r.d(t,"GL_RGB565",function(){return s.GL_RGB565}),r.d(t,"GL_R11F_G11F_B10F",function(){return s.GL_R11F_G11F_B10F}),r.d(t,"GL_RGB9_E5",function(){return s.GL_RGB9_E5}),r.d(t,"GL_RGB16F",function(){return s.GL_RGB16F}),r.d(t,"GL_RGB32F",function(){return s.GL_RGB32F}),r.d(t,"GL_RGB8UI",function(){return s.GL_RGB8UI}),r.d(t,"GL_RGBA8",function(){return s.GL_RGBA8}),r.d(t,"GL_RGB5_A1",function(){return s.GL_RGB5_A1}),r.d(t,"GL_RGBA16F",function(){return s.GL_RGBA16F}),r.d(t,"GL_RGBA32F",function(){return s.GL_RGBA32F}),r.d(t,"GL_RGBA8UI",function(){return s.GL_RGBA8UI}),r.d(t,"GL_RGBA16I",function(){return s.GL_RGBA16I}),r.d(t,"GL_RGBA16UI",function(){return s.GL_RGBA16UI}),r.d(t,"GL_RGBA32I",function(){return s.GL_RGBA32I}),r.d(t,"GL_RGBA32UI",function(){return s.GL_RGBA32UI}),r.d(t,"GL_NEAREST",function(){return s.GL_NEAREST}),r.d(t,"GL_LINEAR",function(){return s.GL_LINEAR}),r.d(t,"GL_NEAREST_MIPMAP_NEAREST",function(){return s.GL_NEAREST_MIPMAP_NEAREST}),r.d(t,"GL_LINEAR_MIPMAP_NEAREST",function(){return s.GL_LINEAR_MIPMAP_NEAREST}),r.d(t,"GL_NEAREST_MIPMAP_LINEAR",function(){return s.GL_NEAREST_MIPMAP_LINEAR}),r.d(t,"GL_LINEAR_MIPMAP_LINEAR",function(){return s.GL_LINEAR_MIPMAP_LINEAR}),r.d(t,"GL_REPEAT",function(){return s.GL_REPEAT}),r.d(t,"GL_CLAMP_TO_EDGE",function(){return s.GL_CLAMP_TO_EDGE}),r.d(t,"GL_MIRRORED_REPEAT",function(){return s.GL_MIRRORED_REPEAT}),r.d(t,"GL_ZERO",function(){return s.GL_ZERO}),r.d(t,"GL_ONE",function(){return s.GL_ONE}),r.d(t,"GL_SRC_COLOR",function(){return s.GL_SRC_COLOR}),r.d(t,"GL_ONE_MINUS_SRC_COLOR",function(){return s.GL_ONE_MINUS_SRC_COLOR}),r.d(t,"GL_SRC_ALPHA",function(){return s.GL_SRC_ALPHA}),r.d(t,"GL_ONE_MINUS_SRC_ALPHA",function(){return s.GL_ONE_MINUS_SRC_ALPHA}),r.d(t,"GL_DST_ALPHA",function(){return s.GL_DST_ALPHA}),r.d(t,"GL_ONE_MINUS_DST_ALPHA",function(){return s.GL_ONE_MINUS_DST_ALPHA}),r.d(t,"GL_DST_COLOR",function(){return s.GL_DST_COLOR}),r.d(t,"GL_ONE_MINUS_DST_COLOR",function(){return s.GL_ONE_MINUS_DST_COLOR}),r.d(t,"GL_SRC_ALPHA_SATURATE",function(){return s.GL_SRC_ALPHA_SATURATE}),r.d(t,"GL_CONSTANT_COLOR",function(){return s.GL_CONSTANT_COLOR}),r.d(t,"GL_ONE_MINUS_CONSTANT_COLOR",function(){return s.GL_ONE_MINUS_CONSTANT_COLOR}),r.d(t,"GL_CONSTANT_ALPHA",function(){return s.GL_CONSTANT_ALPHA}),r.d(t,"GL_ONE_MINUS_CONSTANT_ALPHA",function(){return s.GL_ONE_MINUS_CONSTANT_ALPHA}),r.d(t,"GL_VERTEX_SHADER",function(){return s.GL_VERTEX_SHADER}),r.d(t,"GL_FRAGMENT_SHADER",function(){return s.GL_FRAGMENT_SHADER}),r.d(t,"GL_FRONT",function(){return s.GL_FRONT}),r.d(t,"GL_BACK",function(){return s.GL_BACK}),r.d(t,"GL_FRONT_AND_BACK",function(){return s.GL_FRONT_AND_BACK}),r.d(t,"GL_NEVER",function(){return s.GL_NEVER}),r.d(t,"GL_LESS",function(){return s.GL_LESS}),r.d(t,"GL_EQUAL",function(){return s.GL_EQUAL}),r.d(t,"GL_LEQUAL",function(){return s.GL_LEQUAL}),r.d(t,"GL_GREATER",function(){return s.GL_GREATER}),r.d(t,"GL_NOTEQUAL",function(){return s.GL_NOTEQUAL}),r.d(t,"GL_GEQUAL",function(){return s.GL_GEQUAL}),r.d(t,"GL_ALWAYS",function(){return s.GL_ALWAYS}),r.d(t,"GL_KEEP",function(){return s.GL_KEEP}),r.d(t,"GL_REPLACE",function(){return s.GL_REPLACE}),r.d(t,"GL_INCR",function(){return s.GL_INCR}),r.d(t,"GL_DECR",function(){return s.GL_DECR}),r.d(t,"GL_INCR_WRAP",function(){return s.GL_INCR_WRAP}),r.d(t,"GL_DECR_WRAP",function(){return s.GL_DECR_WRAP}),r.d(t,"GL_INVERT",function(){return s.GL_INVERT}),r.d(t,"GL_STREAM_DRAW",function(){return s.GL_STREAM_DRAW}),r.d(t,"GL_STATIC_DRAW",function(){return s.GL_STATIC_DRAW}),r.d(t,"GL_DYNAMIC_DRAW",function(){return s.GL_DYNAMIC_DRAW}),r.d(t,"GL_ARRAY_BUFFER",function(){return s.GL_ARRAY_BUFFER}),r.d(t,"GL_ELEMENT_ARRAY_BUFFER",function(){return s.GL_ELEMENT_ARRAY_BUFFER}),r.d(t,"GL_POINTS",function(){return s.GL_POINTS}),r.d(t,"GL_LINES",function(){return s.GL_LINES}),r.d(t,"GL_LINE_LOOP",function(){return s.GL_LINE_LOOP}),r.d(t,"GL_LINE_STRIP",function(){return s.GL_LINE_STRIP}),r.d(t,"GL_TRIANGLES",function(){return s.GL_TRIANGLES}),r.d(t,"GL_TRIANGLE_STRIP",function(){return s.GL_TRIANGLE_STRIP}),r.d(t,"GL_TRIANGLE_FAN",function(){return s.GL_TRIANGLE_FAN}),r.d(t,"GL_CW",function(){return s.GL_CW}),r.d(t,"GL_CCW",function(){return s.GL_CCW}),r.d(t,"GL_CULL_FACE",function(){return s.GL_CULL_FACE}),r.d(t,"GL_DEPTH_TEST",function(){return s.GL_DEPTH_TEST}),r.d(t,"GL_BLEND",function(){return s.GL_BLEND}),r.d(t,"RM_ANY",function(){return s.RM_ANY}),r.d(t,"RM_OPAQUE",function(){return s.RM_OPAQUE}),r.d(t,"RM_DECAL",function(){return s.RM_DECAL}),r.d(t,"RM_TRANSPARENT",function(){return s.RM_TRANSPARENT}),r.d(t,"RM_ADDITIVE",function(){return s.RM_ADDITIVE}),r.d(t,"RM_DEPTH",function(){return s.RM_DEPTH}),r.d(t,"RM_FULLSCREEN",function(){return s.RM_FULLSCREEN}),r.d(t,"RM_PICKABLE",function(){return s.RM_PICKABLE}),r.d(t,"RM_DISTORTION",function(){return s.RM_DISTORTION}),r.d(t,"RS_ZENABLE",function(){return s.RS_ZENABLE}),r.d(t,"RS_FILLMODE",function(){return s.RS_FILLMODE}),r.d(t,"RS_SHADEMODE",function(){return s.RS_SHADEMODE}),r.d(t,"RS_ZWRITEENABLE",function(){return s.RS_ZWRITEENABLE}),r.d(t,"RS_ALPHATESTENABLE",function(){return s.RS_ALPHATESTENABLE}),r.d(t,"RS_LASTPIXEL",function(){return s.RS_LASTPIXEL}),r.d(t,"RS_SRCBLEND",function(){return s.RS_SRCBLEND}),r.d(t,"RS_DESTBLEND",function(){return s.RS_DESTBLEND}),r.d(t,"RS_CULLMODE",function(){return s.RS_CULLMODE}),r.d(t,"RS_ZFUNC",function(){return s.RS_ZFUNC}),r.d(t,"RS_ALPHAREF",function(){return s.RS_ALPHAREF}),r.d(t,"RS_ALPHAFUNC",function(){return s.RS_ALPHAFUNC}),r.d(t,"RS_DITHERENABLE",function(){return s.RS_DITHERENABLE}),r.d(t,"RS_ALPHABLENDENABLE",function(){return s.RS_ALPHABLENDENABLE}),r.d(t,"RS_FOGENABLE",function(){return s.RS_FOGENABLE}),r.d(t,"RS_SPECULARENABLE",function(){return s.RS_SPECULARENABLE}),r.d(t,"RS_FOGCOLOR",function(){return s.RS_FOGCOLOR}),r.d(t,"RS_FOGTABLEMODE",function(){return s.RS_FOGTABLEMODE}),r.d(t,"RS_FOGSTART",function(){return s.RS_FOGSTART}),r.d(t,"RS_FOGEND",function(){return s.RS_FOGEND}),r.d(t,"RS_FOGDENSITY",function(){return s.RS_FOGDENSITY}),r.d(t,"RS_RANGEFOGENABLE",function(){return s.RS_RANGEFOGENABLE}),r.d(t,"RS_STENCILENABLE",function(){return s.RS_STENCILENABLE}),r.d(t,"RS_STENCILFAIL",function(){return s.RS_STENCILFAIL}),r.d(t,"RS_STENCILZFAIL",function(){return s.RS_STENCILZFAIL}),r.d(t,"RS_STENCILPASS",function(){return s.RS_STENCILPASS}),r.d(t,"RS_STENCILFUNC",function(){return s.RS_STENCILFUNC}),r.d(t,"RS_STENCILREF",function(){return s.RS_STENCILREF}),r.d(t,"RS_STENCILMASK",function(){return s.RS_STENCILMASK}),r.d(t,"RS_STENCILWRITEMASK",function(){return s.RS_STENCILWRITEMASK}),r.d(t,"RS_TEXTUREFACTOR",function(){return s.RS_TEXTUREFACTOR}),r.d(t,"RS_WRAP0",function(){return s.RS_WRAP0}),r.d(t,"RS_WRAP1",function(){return s.RS_WRAP1}),r.d(t,"RS_WRAP2",function(){return s.RS_WRAP2}),r.d(t,"RS_WRAP3",function(){return s.RS_WRAP3}),r.d(t,"RS_WRAP4",function(){return s.RS_WRAP4}),r.d(t,"RS_WRAP5",function(){return s.RS_WRAP5}),r.d(t,"RS_WRAP6",function(){return s.RS_WRAP6}),r.d(t,"RS_WRAP7",function(){return s.RS_WRAP7}),r.d(t,"RS_CLIPPING",function(){return s.RS_CLIPPING}),r.d(t,"RS_LIGHTING",function(){return s.RS_LIGHTING}),r.d(t,"RS_AMBIENT",function(){return s.RS_AMBIENT}),r.d(t,"RS_FOGVERTEXMODE",function(){return s.RS_FOGVERTEXMODE}),r.d(t,"RS_COLORVERTEX",function(){return s.RS_COLORVERTEX}),r.d(t,"RS_LOCALVIEWER",function(){return s.RS_LOCALVIEWER}),r.d(t,"RS_NORMALIZENORMALS",function(){return s.RS_NORMALIZENORMALS}),r.d(t,"RS_DIFFUSEMATERIALSOURCE",function(){return s.RS_DIFFUSEMATERIALSOURCE}),r.d(t,"RS_SPECULARMATERIALSOURCE",function(){return s.RS_SPECULARMATERIALSOURCE}),r.d(t,"RS_AMBIENTMATERIALSOURCE",function(){return s.RS_AMBIENTMATERIALSOURCE}),r.d(t,"RS_EMISSIVEMATERIALSOURCE",function(){return s.RS_EMISSIVEMATERIALSOURCE}),r.d(t,"RS_VERTEXBLEND",function(){return s.RS_VERTEXBLEND}),r.d(t,"RS_CLIPPLANEENABLE",function(){return s.RS_CLIPPLANEENABLE}),r.d(t,"RS_POINTSIZE",function(){return s.RS_POINTSIZE}),r.d(t,"RS_POINTSIZE_MIN",function(){return s.RS_POINTSIZE_MIN}),r.d(t,"RS_POINTSPRITEENABLE",function(){return s.RS_POINTSPRITEENABLE}),r.d(t,"RS_POINTSCALEENABLE",function(){return s.RS_POINTSCALEENABLE}),r.d(t,"RS_POINTSCALE_A",function(){return s.RS_POINTSCALE_A}),r.d(t,"RS_POINTSCALE_B",function(){return s.RS_POINTSCALE_B}),r.d(t,"RS_POINTSCALE_C",function(){return s.RS_POINTSCALE_C}),r.d(t,"RS_MULTISAMPLEANTIALIAS",function(){return s.RS_MULTISAMPLEANTIALIAS}),r.d(t,"RS_MULTISAMPLEMASK",function(){return s.RS_MULTISAMPLEMASK}),r.d(t,"RS_PATCHEDGESTYLE",function(){return s.RS_PATCHEDGESTYLE}),r.d(t,"RS_DEBUGMONITORTOKEN",function(){return s.RS_DEBUGMONITORTOKEN}),r.d(t,"RS_POINTSIZE_MAX",function(){return s.RS_POINTSIZE_MAX}),r.d(t,"RS_INDEXEDVERTEXBLENDENABLE",function(){return s.RS_INDEXEDVERTEXBLENDENABLE}),r.d(t,"RS_COLORWRITEENABLE",function(){return s.RS_COLORWRITEENABLE}),r.d(t,"RS_TWEENFACTOR",function(){return s.RS_TWEENFACTOR}),r.d(t,"RS_BLENDOP",function(){return s.RS_BLENDOP}),r.d(t,"RS_POSITIONDEGREE",function(){return s.RS_POSITIONDEGREE}),r.d(t,"RS_NORMALDEGREE",function(){return s.RS_NORMALDEGREE}),r.d(t,"RS_SCISSORTESTENABLE",function(){return s.RS_SCISSORTESTENABLE}),r.d(t,"RS_SLOPESCALEDEPTHBIAS",function(){return s.RS_SLOPESCALEDEPTHBIAS}),r.d(t,"RS_ANTIALIASEDLINEENABLE",function(){return s.RS_ANTIALIASEDLINEENABLE}),r.d(t,"RS_TWOSIDEDSTENCILMODE",function(){return s.RS_TWOSIDEDSTENCILMODE}),r.d(t,"RS_CCW_STENCILFAIL",function(){return s.RS_CCW_STENCILFAIL}),r.d(t,"RS_CCW_STENCILZFAIL",function(){return s.RS_CCW_STENCILZFAIL}),r.d(t,"RS_CCW_STENCILPASS",function(){return s.RS_CCW_STENCILPASS}),r.d(t,"RS_CCW_STENCILFUNC",function(){return s.RS_CCW_STENCILFUNC}),r.d(t,"RS_COLORWRITEENABLE1",function(){return s.RS_COLORWRITEENABLE1}),r.d(t,"RS_COLORWRITEENABLE2",function(){return s.RS_COLORWRITEENABLE2}),r.d(t,"RS_COLORWRITEENABLE3",function(){return s.RS_COLORWRITEENABLE3}),r.d(t,"RS_BLENDFACTOR",function(){return s.RS_BLENDFACTOR}),r.d(t,"RS_SRGBWRITEENABLE",function(){return s.RS_SRGBWRITEENABLE}),r.d(t,"RS_DEPTHBIAS",function(){return s.RS_DEPTHBIAS}),r.d(t,"RS_SEPARATEALPHABLENDENABLE",function(){return s.RS_SEPARATEALPHABLENDENABLE}),r.d(t,"RS_SRCBLENDALPHA",function(){return s.RS_SRCBLENDALPHA}),r.d(t,"RS_DESTBLENDALPHA",function(){return s.RS_DESTBLENDALPHA}),r.d(t,"RS_BLENDOPALPHA",function(){return s.RS_BLENDOPALPHA}),r.d(t,"CULL_NONE",function(){return s.CULL_NONE}),r.d(t,"CULL_CW",function(){return s.CULL_CW}),r.d(t,"CULL_CCW",function(){return s.CULL_CCW}),r.d(t,"CMP_NEVER",function(){return s.CMP_NEVER}),r.d(t,"CMP_LESS",function(){return s.CMP_LESS}),r.d(t,"CMP_EQUAL",function(){return s.CMP_EQUAL}),r.d(t,"CMP_LEQUAL",function(){return s.CMP_LEQUAL}),r.d(t,"CMP_GREATER",function(){return s.CMP_GREATER}),r.d(t,"CMP_NOTEQUAL",function(){return s.CMP_NOTEQUAL}),r.d(t,"CMP_GREATEREQUAL",function(){return s.CMP_GREATEREQUAL}),r.d(t,"CMP_ALWAYS",function(){return s.CMP_ALWAYS}),r.d(t,"BLEND_ZERO",function(){return s.BLEND_ZERO}),r.d(t,"BLEND_ONE",function(){return s.BLEND_ONE}),r.d(t,"BLEND_SRCCOLOR",function(){return s.BLEND_SRCCOLOR}),r.d(t,"BLEND_INVSRCCOLOR",function(){return s.BLEND_INVSRCCOLOR}),r.d(t,"BLEND_SRCALPHA",function(){return s.BLEND_SRCALPHA}),r.d(t,"BLEND_INVSRCALPHA",function(){return s.BLEND_INVSRCALPHA}),r.d(t,"BLEND_DESTALPHA",function(){return s.BLEND_DESTALPHA}),r.d(t,"BLEND_INVDESTALPHA",function(){return s.BLEND_INVDESTALPHA}),r.d(t,"BLEND_DESTCOLOR",function(){return s.BLEND_DESTCOLOR}),r.d(t,"BLEND_INVDESTCOLOR",function(){return s.BLEND_INVDESTCOLOR}),r.d(t,"BLEND_SRCALPHASAT",function(){return s.BLEND_SRCALPHASAT}),r.d(t,"BLEND_BOTHSRCALPHA",function(){return s.BLEND_BOTHSRCALPHA}),r.d(t,"BLEND_BOTHINVSRCALPHA",function(){return s.BLEND_BOTHINVSRCALPHA}),r.d(t,"BLEND_BLENDFACTOR",function(){return s.BLEND_BLENDFACTOR}),r.d(t,"BLEND_INVBLENDFACTOR",function(){return s.BLEND_INVBLENDFACTOR}),r.d(t,"BLENDOP_ADD",function(){return s.BLENDOP_ADD}),r.d(t,"BLENDOP_SUBTRACT",function(){return s.BLENDOP_SUBTRACT}),r.d(t,"BLENDOP_REVSUBTRACT",function(){return s.BLENDOP_REVSUBTRACT}),r.d(t,"BLENDOP_MIN",function(){return s.BLENDOP_MIN}),r.d(t,"BLENDOP_MAX",function(){return s.BLENDOP_MAX}),r.d(t,"TF_ALPHA",function(){return s.TF_ALPHA}),r.d(t,"TF_LUMINANCE",function(){return s.TF_LUMINANCE}),r.d(t,"TF_LUMINANCE_ALPHA",function(){return s.TF_LUMINANCE_ALPHA}),r.d(t,"TF_RGB",function(){return s.TF_RGB}),r.d(t,"TF_RGBA",function(){return s.TF_RGBA}),r.d(t,"TF_RED",function(){return s.TF_RED}),r.d(t,"TF_R",function(){return s.TF_R}),r.d(t,"TF_RG",function(){return s.TF_RG}),r.d(t,"TF_RED_INTEGER",function(){return s.TF_RED_INTEGER}),r.d(t,"TF_R_INTEGER",function(){return s.TF_R_INTEGER}),r.d(t,"TF_RG_INTEGER",function(){return s.TF_RG_INTEGER}),r.d(t,"TF_RGB_INTEGER",function(){return s.TF_RGB_INTEGER}),r.d(t,"TF_RGBA_INTEGER",function(){return s.TF_RGBA_INTEGER}),r.d(t,"TT_UNSIGNED_BYTE",function(){return s.TT_UNSIGNED_BYTE}),r.d(t,"TT_UNSIGNED_INT",function(){return s.TT_UNSIGNED_INT}),r.d(t,"TT_FLOAT",function(){return s.TT_FLOAT}),r.d(t,"TT_HALF_FLOAT",function(){return s.TT_HALF_FLOAT}),r.d(t,"TT_BYTE",function(){return s.TT_BYTE}),r.d(t,"TT_SHORT",function(){return s.TT_SHORT}),r.d(t,"TT_UNSIGNED_SHORT",function(){return s.TT_UNSIGNED_SHORT}),r.d(t,"TT_INT",function(){return s.TT_INT}),r.d(t,"TT_UNSIGNED_INTEGER",function(){return s.TT_UNSIGNED_INTEGER}),r.d(t,"TT_UNSIGNED_SHORT_4_4_4_4",function(){return s.TT_UNSIGNED_SHORT_4_4_4_4}),r.d(t,"TT_UNSIGNED_SHORT_5_5_5_1",function(){return s.TT_UNSIGNED_SHORT_5_5_5_1}),r.d(t,"TT_UNSIGNED_SHORT_5_6_5",function(){return s.TT_UNSIGNED_SHORT_5_6_5}),r.d(t,"TT_UNSIGNED_INT_2_10_10_10_REV",function(){return s.TT_UNSIGNED_INT_2_10_10_10_REV}),r.d(t,"TT_UNSIGNED_INT_24_8",function(){return s.TT_UNSIGNED_INT_24_8}),r.d(t,"TT_UNSIGNED_INT_10F_11F_11F_REV",function(){return s.TT_UNSIGNED_INT_10F_11F_11F_REV}),r.d(t,"TT_UNSIGNED_INT_5_9_9_9_REV",function(){return s.TT_UNSIGNED_INT_5_9_9_9_REV}),r.d(t,"TT_FLOAT_32_UNSIGNED_INT_24_8_REV",function(){return s.TT_FLOAT_32_UNSIGNED_INT_24_8_REV}),r.d(t,"WrapModes",function(){return s.WrapModes}),r.d(t,"BlendTable",function(){return s.BlendTable}),r.d(t,"FilterMode",function(){return s.FilterMode}),r.d(t,"MipFilterMode",function(){return s.MipFilterMode}),r.d(t,"DDS_MAGIC",function(){return s.DDS_MAGIC}),r.d(t,"DDSD_CAPS",function(){return s.DDSD_CAPS}),r.d(t,"DDSD_HEIGHT",function(){return s.DDSD_HEIGHT}),r.d(t,"DDSD_WIDTH",function(){return s.DDSD_WIDTH}),r.d(t,"DDSD_PITCH",function(){return s.DDSD_PITCH}),r.d(t,"DDSD_PIXELFORMAT",function(){return s.DDSD_PIXELFORMAT}),r.d(t,"DDSD_MIPMAPCOUNT",function(){return s.DDSD_MIPMAPCOUNT}),r.d(t,"DDSD_LINEARSIZE",function(){return s.DDSD_LINEARSIZE}),r.d(t,"DDSD_DEPTH",function(){return s.DDSD_DEPTH}),r.d(t,"DDSCAPS_COMPLEX",function(){return s.DDSCAPS_COMPLEX}),r.d(t,"DDSCAPS_MIPMAP",function(){return s.DDSCAPS_MIPMAP}),r.d(t,"DDSCAPS_TEXTURE",function(){return s.DDSCAPS_TEXTURE}),r.d(t,"DDSCAPS2_CUBEMAP",function(){return s.DDSCAPS2_CUBEMAP}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEX",function(){return s.DDSCAPS2_CUBEMAP_POSITIVEX}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEX",function(){return s.DDSCAPS2_CUBEMAP_NEGATIVEX}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEY",function(){return s.DDSCAPS2_CUBEMAP_POSITIVEY}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEY",function(){return s.DDSCAPS2_CUBEMAP_NEGATIVEY}),r.d(t,"DDSCAPS2_CUBEMAP_POSITIVEZ",function(){return s.DDSCAPS2_CUBEMAP_POSITIVEZ}),r.d(t,"DDSCAPS2_CUBEMAP_NEGATIVEZ",function(){return s.DDSCAPS2_CUBEMAP_NEGATIVEZ}),r.d(t,"DDSCAPS2_VOLUME",function(){return s.DDSCAPS2_VOLUME}),r.d(t,"DDPF_ALPHAPIXELS",function(){return s.DDPF_ALPHAPIXELS}),r.d(t,"DDPF_ALPHA",function(){return s.DDPF_ALPHA}),r.d(t,"DDPF_FOURCC",function(){return s.DDPF_FOURCC}),r.d(t,"DDPF_RGB",function(){return s.DDPF_RGB}),r.d(t,"DDPF_YUV",function(){return s.DDPF_YUV}),r.d(t,"DDPF_LUMINANCE",function(){return s.DDPF_LUMINANCE}),r.d(t,"DDS_HEADER_LENGTH_INT",function(){return s.DDS_HEADER_LENGTH_INT}),r.d(t,"DDS_HEADER_OFFSET_MAGIC",function(){return s.DDS_HEADER_OFFSET_MAGIC}),r.d(t,"DDS_HEADER_OFFSET_SIZE",function(){return s.DDS_HEADER_OFFSET_SIZE}),r.d(t,"DDS_HEADER_OFFSET_FLAGS",function(){return s.DDS_HEADER_OFFSET_FLAGS}),r.d(t,"DDS_HEADER_OFFSET_HEIGHT",function(){return s.DDS_HEADER_OFFSET_HEIGHT}),r.d(t,"DDS_HEADER_OFFSET_WIDTH",function(){return s.DDS_HEADER_OFFSET_WIDTH}),r.d(t,"DDS_HEADER_OFFSET_MIPMAP_COUNT",function(){return s.DDS_HEADER_OFFSET_MIPMAP_COUNT}),r.d(t,"DDS_HEADER_OFFSET_PF_FLAGS",function(){return s.DDS_HEADER_OFFSET_PF_FLAGS}),r.d(t,"DDS_HEADER_OFFSET_PF_FOURCC",function(){return s.DDS_HEADER_OFFSET_PF_FOURCC}),r.d(t,"DDS_HEADER_OFFSET_RGB_BPP",function(){return s.DDS_HEADER_OFFSET_RGB_BPP}),r.d(t,"DDS_HEADER_OFFSET_R_MASK",function(){return s.DDS_HEADER_OFFSET_R_MASK}),r.d(t,"DDS_HEADER_OFFSET_G_MASK",function(){return s.DDS_HEADER_OFFSET_G_MASK}),r.d(t,"DDS_HEADER_OFFSET_B_MASK",function(){return s.DDS_HEADER_OFFSET_B_MASK}),r.d(t,"DDS_HEADER_OFFSET_A_MASK",function(){return s.DDS_HEADER_OFFSET_A_MASK}),r.d(t,"DDS_HEADER_OFFSET_CAPS1",function(){return s.DDS_HEADER_OFFSET_CAPS1}),r.d(t,"DDS_HEADER_OFFSET_CAPS2",function(){return s.DDS_HEADER_OFFSET_CAPS2}),r.d(t,"DDS_HEADER_OFFSET_CAPS3",function(){return s.DDS_HEADER_OFFSET_CAPS3}),r.d(t,"DDS_HEADER_OFFSET_CAPS4",function(){return s.DDS_HEADER_OFFSET_CAPS4}),r.d(t,"DDS_HEADER_OFFSET_DXGI_FORMAT",function(){return s.DDS_HEADER_OFFSET_DXGI_FORMAT}),r.d(t,"FOURCC_DXT1",function(){return s.FOURCC_DXT1}),r.d(t,"FOURCC_DXT5",function(){return s.FOURCC_DXT5}),r.d(t,"FOURCC_DXT3",function(){return s.FOURCC_DXT3}),r.d(t,"FOURCC_DXT10",function(){return s.FOURCC_DXT10}),r.d(t,"FOURCC_D3DFMT_R16G16B16A16F",function(){return s.FOURCC_D3DFMT_R16G16B16A16F}),r.d(t,"FOURCC_D3DFMT_R32G32B32A32F",function(){return s.FOURCC_D3DFMT_R32G32B32A32F}),r.d(t,"DXGI_FORMAT_R16G16B16A16_FLOAT",function(){return s.DXGI_FORMAT_R16G16B16A16_FLOAT}),r.d(t,"DXGI_FORMAT_B8G8R8X8_UNORM",function(){return s.DXGI_FORMAT_B8G8R8X8_UNORM}),r.d(t,"VendorRequestAnimationFrame",function(){return s.VendorRequestAnimationFrame}),r.d(t,"VendorCancelAnimationFrame",function(){return s.VendorCancelAnimationFrame}),r.d(t,"VendorRequestFullScreen",function(){return s.VendorRequestFullScreen}),r.d(t,"VendorExitFullScreen",function(){return s.VendorExitFullScreen}),r.d(t,"VendorGetFullScreenElement",function(){return s.VendorGetFullScreenElement}),r.d(t,"VendorWebglPrefixes",function(){return s.VendorWebglPrefixes}),r.d(t,"WebglContextNames",function(){return s.WebglContextNames}),r.d(t,"Webgl2ContextNames",function(){return s.Webgl2ContextNames}),r.d(t,"WebglVersion",function(){return s.WebglVersion});var a=r("./global/Tw2Library.js");r.d(t,"tw2",function(){return a.tw2}),r.d(t,"store",function(){return a.store}),r.d(t,"resMan",function(){return a.resMan}),r.d(t,"device",function(){return a.device}),r.d(t,"logger",function(){return a.logger}),r.d(t,"util",function(){return a.util})},"./global/math/box3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"box3",function(){return s});var n=r("./global/math/num.js"),i=r("./global/math/vec3.js");r("./global/math/sph3.js"),r("./global/math/mat4.js");const s={bounds:{}};let a=null,o=null;s.$min=function(e){return e.subarray(0,3)},s.$max=function(e){return e.subarray(3,6)},s.addPoint=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[0]),e[4]=Math.max(t[4],r[1]),e[5]=Math.max(t[5],r[2]),e},s.addPoints=function(e,t,r){let n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5];for(let e=0;e<r.length;e++)n=Math.min(n,r[e][0]),i=Math.min(i,r[e][1]),s=Math.min(s,r[e][2]),a=Math.max(a,r[e][0]),o=Math.max(o,r[e][1]),u=Math.max(u,r[e][2]);return e[0]=n,e[1]=i,e[2]=s,e[3]=a,e[4]=o,e[5]=u,e},s.clone=function(e){let t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t},s.contains=function(e,t){return e[0]<=t[0]&&t[3]<=e[3]&&e[1]<=t[1]&&t[4]<=e[4]&&e[2]<=t[2]&&t[5]<=e[5]},s.containsBounds=function(e,t,r){return e[0]<=t[0]&&r[0]<=e[3]&&e[1]<=t[1]&&r[1]<=e[4]&&e[2]<=t[2]&&r[2]<=e[5]},s.containsPoint=function(e,t){return!(t[0]<e[0]||t[0]>e[3]||t[1]<e[1]||t[1]>e[4]||t[2]<e[2]||t[2]>e[5])},s.containsValue=function(e,t,r,n){return!(t<e[0]||t>e[3]||r<e[1]||r>e[4]||n<e[2]||n>e[5])},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e},s.copyMin=i.vec3.copy,s.copyMax=function(e,t){return e[3]=t[3],e[4]=t[4],e[5]=t[5],e},s.create=function(){return s.empty(new Float32Array(6))},s.distanceToPoint=function(e,t){let r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],i=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return Math.sqrt(r*r+n*n+i*i)},s.distanceToValues=function(e,t,r,n){let i=Math.max(e[0],Math.min(e[3],t))-t,s=Math.max(e[1],Math.min(e[4],r))-r,a=Math.max(e[2],Math.min(e[5],n))-n;return Math.sqrt(i*i+s*s+a*a)},s.empty=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e},s.bounds.empty=function(e,t){e[0]=0,e[1]=0,e[2]=0,t[0]=0,t[1]=0,t[2]=0},s.equals=function(e,t){let r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],c=t[0],l=t[1],d=t[2],h=t[3],f=t[4],m=t[5];return Math.abs(r-c)<=n.num.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=n.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-d)<=n.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-h)<=n.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-f)<=n.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-m)<=n.num.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))},s.equalsBounds=function(e,t,r){let i=e[0],s=e[1],a=e[2],o=e[3],u=e[4],c=e[5],l=t[0],d=t[1],h=t[2],f=r[0],m=r[1],v=r[2];return Math.abs(i-l)<=n.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-d)<=n.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(a-h)<=n.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-f)<=n.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-m)<=n.num.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-v)<=n.num.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))},s.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},s.exactEqualsBounds=function(e,t,r){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===r[0]&&e[4]===r[1]&&e[5]===r[2]},s.expandScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[3]+r,e[4]=t[4]+r,e[5]=t[5]+r,e},s.expandValues=function(e,t,r,n,i){return e[0]=t[0]-r,e[1]=t[1]-n,e[2]=t[2]-i,e[3]=t[3]+r,e[4]=t[4]+n,e[5]=t[5]+i,e},s.expandVec3=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e},s.fromArray=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e},s.fromBounds=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2],e},s.fromObjectBounds=function(e,t,r){if(t.minBounds)s.fromBounds(e,t.minBounds,t.maxBounds);else{if(!t._boundingBox)throw new Error("Invalid object bounds");s.copy(e,t._boundingBox)}return r&&s.transformMat4(e,e,r),e},s.fromObjectPositionRadius=function(e,t,r){if(t.boundsSpherePosition)s.fromPositionRadius(e,t.boundsSpherePosition,t.boundsSphereRadius);else{if(!t.boundingSphereCenter)throw new Error("Invalid object bounds");s.fromPositionRadius(e,t.boundingSphereCenter,t.boundingSphereRadius)}return r&&s.transformMat4(e,e,r),e},s.fromPositionSize=function(e,t,r){return e[0]=t[0]-.5*r[0],e[1]=t[1]-.5*r[1],e[2]=t[2]-.5*r[2],e[3]=t[0]+.5*r[0],e[4]=t[1]+.5*r[1],e[5]=t[2]+.5*r[2],e},s.fromPoints=function(e,t){s.empty(e);for(let r=0;r<t.length;r++)e[0]=Math.min(e[0],t[r][0]),e[1]=Math.min(e[1],t[r][1]),e[2]=Math.min(e[2],t[r][2]),e[3]=Math.max(e[3],t[r][0]),e[4]=Math.max(e[4],t[r][1]),e[5]=Math.max(e[5],t[r][2]);return e},s.fromPositionRadius=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[0]+r,e[4]=t[1]+r,e[5]=t[2]+r,e},s.fromSph3=function(e,t){return e[0]=t[0]-t[3],e[1]=t[1]-t[3],e[2]=t[2]-t[3],e[3]=t[0]+t[3],e[4]=t[1]+t[3],e[5]=t[2]+t[3],e},s.fromValues=function(e,t,r,n,i,a){const o=s.create();return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o[4]=i,o[5]=a,o},s.getClampedPoint=function(e,t,r){return e[0]=Math.max(t[0],Math.min(t[3],r[0])),e[1]=Math.max(t[1],Math.min(t[4],r[1])),e[2]=Math.max(t[2],Math.min(t[5],r[2])),e},s.getMax=function(e,t){return e[0]=t[3],e[1]=t[4],e[2]=t[5],e},s.getMin=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},s.getSize=function(e,t){return e[0]=t[3]-t[0],e[1]=t[4]-t[1],e[2]=t[5]-t[2],e},s.getPosition=function(e,t){return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e},s.radius=function(e){let t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return.5*Math.sqrt(t*t+r*r+n*n)},s.intersect=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e[4]=Math.min(t[4],r[4]),e[5]=Math.min(t[5],r[5]),e},s.intersectBounds=function(e,t,r,n){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.min(t[3],n[0]),e[4]=Math.min(t[4],n[1]),e[5]=Math.min(t[5],n[2]),e},s.intersects=function(e,t){return!(t[3]<e[0]||t[0]>e[3]||t[4]<e[1]||t[1]>e[4]||t[5]<e[2]||t[2]>e[5])},s.intersectsBounds=function(e,t,r){return!(r[0]<e[0]||t[0]>e[3]||r[1]<e[1]||t[1]>e[4]||r[2]<e[2]||t[2]>e[5])},s.intersectsNormalConstant=function(e,t,r){let n,i;return t[0]>0?(n=t[0]*e[0],i=t[0]*e[3]):(n=t[0]*e[3],i=t[0]*e[0]),t[1]>0?(n=t[1]*e[1],i=t[1]*e[4]):(n=t[1]*e[4],i=t[1]*e[1]),t[2]>0?(n+=t[2]*e[2],i+=t[2]*e[5]):(n+=t[2]*e[5],i+=t[2]*e[2]),n<=r&&i>=r},s.intersectsPln=function(e,t){return s.intersectsNormalConstant(e,t,t[3])},s.intersectsPoint=function(e,t){return t[0]>=e[0]&&t[0]<=e[3]&&t[1]>=e[1]&&t[1]<=e[4]&&t[2]>=e[2]&&t[2]<=e[5]},s.intersectsValues=function(e,t,r,n){return t>=e[0]&&t<=e[3]&&r>=e[1]&&r<=e[4]&&n>=e[2]&&n<=e[5]},s.intersectsPositionRadius=function(e,t,r){let n=Math.max(e[0],Math.min(e[3],t[0]))-t[0],i=Math.max(e[1],Math.min(e[4],t[1]))-t[1],s=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return n*n+i*i+s*s<=r*r},s.intersectsSph3=function(e,t){let r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],i=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return r*r+n*n+i*i<=t[3]*t[3]},s.isEmpty=function(e){return e[0]+e[1]+e[2]+e[0]+e[1]+e[2]===0||(e[3]<e[0]||e[4]<e[1]||e[5]<e[2])},s.bounds.isEmpty=function(e,t){return e[0]+e[1]+e[2]+t[0]+t[1]+t[2]===0||(t[0]<e[0]||t[1]<e[1]||t[2]<e[2])},s.set=function(e,t,r,n,i,s,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=a,e},s.squaredDistanceToPoint=function(e,t){let r=Math.max(e[0],Math.min(e[3],t[0]))-t[0],n=Math.max(e[1],Math.min(e[4],t[1]))-t[1],i=Math.max(e[2],Math.min(e[5],t[2]))-t[2];return r*r+n*n+i*i},s.surfaceArea=function(e){let t=e[3]-e[0],r=e[4]-e[1],n=e[5]-e[2];return 2*(t*(r+n)+r*n)},s.toArray=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],e},s.toBounds=function(e,t,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[3],r[1]=e[4],r[2]=e[5],e},s.toObjectBounds=function(e,t,r){if(!(t.minBounds||t._boundingBox))throw console.dir(t),new Error("Invalid object bounds");r&&(a||(a=s.create()),e=s.transformMat4(a,e,r)),t.minBounds?s.toBounds(e,t.minBounds,t.maxBounds):s.copy(t._boundingBox,e)},s.toObjectPositionRadius=function(e,t,r){if(r&&(a||(a=s.create()),e=s.transformMat4(a,e,r)),t.boundsSpherePosition)t.boundsSphereRadius=s.toPositionRadius(e,t.boundsSpherePosition);else{if(!t.boundingSphereCenter)throw new Error("Invalid object bounds");t.boundingSphereRadius=s.toPositionRadius(e,t.boundingSphereCenter)}},s.toPoints=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=s+Math.abs(r),c=a+Math.abs(n),l=o+Math.abs(i);return t.push([s+0,a+0,o+0]),t.push([s-u,a+0,o+0]),t.push([s+0,a+0,o-l]),t.push([s-u,a+0,o-l]),t.push([s+0,a-c,o+0]),t.push([s-u,a-c,o+0]),t.push([s+0,a-c,o-l]),t.push([s-u,a-c,o-l]),t},s.toPositionRadius=function(e,t){let r=e[3]-e[0],n=e[4]-e[1],i=e[5]-e[2];return t[0]=.5*(e[0]+e[3]),t[1]=.5*(e[1]+e[4]),t[2]=.5*(e[2]+e[5]),.5*Math.sqrt(r*r+n*n+i*i)},s.bounds.toPositionRadius=function(e,t,r){let n=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return r[0]=.5*(e[0]+t[0]),r[1]=.5*(e[1]+t[1]),r[2]=.5*(e[2]+t[2]),.5*Math.sqrt(n*n+i*i+s*s)},s.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e},s.transformMat4=function(e,t,r){return o||(o=[i.vec3.create(),i.vec3.create(),i.vec3.create(),i.vec3.create(),i.vec3.create(),i.vec3.create(),i.vec3.create(),i.vec3.create()]),s.isEmpty(t)?s.empty(e):(i.vec3.transformMat4(o[0],[t[0],t[1],t[2]],r),i.vec3.transformMat4(o[1],[t[0],t[1],t[5]],r),i.vec3.transformMat4(o[2],[t[0],t[4],t[2]],r),i.vec3.transformMat4(o[3],[t[0],t[4],t[5]],r),i.vec3.transformMat4(o[4],[t[3],t[1],t[2]],r),i.vec3.transformMat4(o[5],[t[3],t[1],t[5]],r),i.vec3.transformMat4(o[6],[t[3],t[4],t[2]],r),i.vec3.transformMat4(o[7],[t[3],t[4],t[5]],r),s.fromPoints(e,o))},s.union=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e[4]=Math.max(t[4],r[4]),e[5]=Math.max(t[5],r[5]),e},s.unionBounds=function(e,t,r,n){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.max(t[3],n[0]),e[4]=Math.max(t[4],n[1]),e[5]=Math.max(t[5],n[2]),e},s.bounds.union=function(e,t,r,n,i,s){e[0]=Math.min(r[0],i[0]),e[1]=Math.min(r[1],i[1]),e[2]=Math.min(r[2],i[2]),t[0]=Math.max(n[0],s[0]),t[1]=Math.max(n[1],s[1]),t[2]=Math.max(n[2],s[2])}},"./global/math/curve.js":function(e,t,r){"use strict";r.r(t),r.d(t,"curve",function(){return n});const n={evaluate:function(e,t,r,n,i){let s=e.knots.length,a=s-1,o=0;for(let r=0;r<e.knots.length;++r)if(e.knots[r]>t){a=r;break}if(0===e.degree)for(let t=0;t<e.dimension;++t)r[t]=e.controls[a*e.dimension+t];else if(1===e.degree){let u=n?(a+s-1)%s:0===a?0:a-1,c=e.knots[a]-e.knots[u];c<0&&(c+=i),c>0&&(o=(t-e.knots[e.knots.length-1])/c);for(let t=0;t<e.dimension;++t)r[t]=e.controls[u*e.dimension+t]*(1-o)+e.controls[a*e.dimension+t]*o}else{let o=n?(a+s-2)%s:0===a?0:a-2,u=n?(a+s-1)%s:0===a?0:a-1,c=o*e.dimension,l=u*e.dimension,d=a*e.dimension,h=e.knots[o],f=e.knots[u],m=e.knots[a],v=e.knots[(a+1)%s];h>m&&(m+=i,v+=i,t+=i),f>m&&(m+=i,v+=i,t+=i),v<m&&(v+=i);let p=t-f,E=p/(m-f),_=(t-h)/(m-h),g=_+E-E*_,S=E*(p/(v-f)),T=g-S;g=1-g;for(let t=0;t<e.dimension;++t)r[t]=g*e.controls[c+t]+T*e.controls[l+t]+S*e.controls[d+t]}},ag_horner1:function(e,t,r){let n=e[t];for(;--t>=0;)n=r*n+e[t];return n},ag_zeroin2:function(e,t,r,i,s,a){let o,u,c,l,d,h,f,m,v,p,E,_;m=1.192092896e-7;let g=!0;for(;g&&(u=e,d=r,l=c=t-e),Math.abs(d)<Math.abs(i)&&(e=t,t=u,u=e,r=i,i=d,d=r),g=!1,h=2.384185792e-7*Math.abs(t)+.5*s,f=.5*(u-t),o=Math.abs(f)>h&&0!==i;)Math.abs(l)<h||Math.abs(r)<=Math.abs(i)?l=c=f:(_=i/r,e===u?(v=2*f*_,p=1-_):(v=_*(2*f*(p=r/d)*(p-(E=i/d))-(t-e)*(E-1)),p=(p-1)*(E-1)*(_-1)),v>0?p=-p:v=-v,_=l,l=c,2*v<3*f*p-Math.abs(h*p)&&v<Math.abs(.5*_*p)?c=v/p:l=c=f),e=t,r=i,Math.abs(c)>h?t+=c:f>0?t+=h:t-=h,(i=n.ag_horner1(a.p,a.deg,t))*(d/Math.abs(d))>0&&(g=!0);return t},ag_zeroin:function(e,t,r,i){let s,a;return s=n.ag_horner1(i.p,i.deg,e),Math.abs(s)<1.192092896e-7?e:(a=n.ag_horner1(i.p,i.deg,t),Math.abs(a)<1.192092896e-7?t:n.ag_zeroin2(e,t,s,a,r,i))},polyZeroes:function(e,t,r,i,s,a,o){let u,c,l,d,h,f,m,v,p,E,_,g,S,T,b,R=new Array(22),j=new Array(22),y=new Array(22),A={p:[],deg:0};for(m=E=0,v=0,u=0;u<t+1;++u)v+=Math.abs(e[u]);if(v<=(g=(Math.abs(r)+Math.abs(s))*(t+1)*1.192092896e-7))return-1;for(S=R,T=j,b=y,u=0;u<t+1;++u)S[u]=1/v*e[u];for(;Math.abs(S[t])<g;)t--;if(d=0,0===t)return d;if(1===t)return o[0]=-S[0]/S[1],c=i?r<o[0]+g:r<o[0]-g,l=a?s>o[0]-g:s>o[0]+g,(d=c&&l?1:0)&&(i&&o[0]<r?o[0]=r:a&&o[0]>s&&(o[0]=s)),d;for(A.p=S,A.deg=t,u=1;u<=t;u++)T[u-1]=u*S[u];if(0===(h=n.polyZeroes(T,t-1,r,0,s,0,b)).length)return 0;for(u=f=0;u<=h;u++){if(d>t)return d;0===u?(p=r,_=n.ag_horner1(S,t,p),Math.abs(_)<=g&&i&&(o[d++]=r)):(p=m,_=E),u===h?(m=s,f=0):m=b[u],E=n.ag_horner1(S,t,m),f?f=0:Math.abs(E)<g?(u!==h||a)&&(o[d++]=m,f=1):(_<0&&E>0||_>0&&E<0)&&(o[d++]=n.ag_zeroin(p,m,0,A),d>1&&o[d-2]>=o[d-1]-g&&(o[d-2]=.5*(o[d-2]+o[d-1]),d--))}return d}}},"./global/math/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/math/num.js");r.d(t,"num",function(){return n.num});var i=r("./global/math/vec2.js");r.d(t,"vec2",function(){return i.vec2});var s=r("./global/math/vec3.js");r.d(t,"vec3",function(){return s.vec3});var a=r("./global/math/vec4.js");r.d(t,"vec4",function(){return a.vec4});var o=r("./global/math/quat.js");r.d(t,"quat",function(){return o.quat});var u=r("./global/math/mat3.js");r.d(t,"mat3",function(){return u.mat3});var c=r("./global/math/mat4.js");r.d(t,"mat4",function(){return c.mat4});var l=r("./global/math/noise.js");r.d(t,"noise",function(){return l.noise});var d=r("./global/math/curve.js");r.d(t,"curve",function(){return d.curve});var h=r("./global/math/box3.js");r.d(t,"box3",function(){return h.box3});var f=r("./global/math/tri3.js");r.d(t,"tri3",function(){return f.tri3});var m=r("./global/math/lne3.js");r.d(t,"lne3",function(){return m.lne3});var v=r("./global/math/pln.js");r.d(t,"pln",function(){return v.pln});var p=r("./global/math/ray3.js");r.d(t,"ray3",function(){return p.ray3});var E=r("./global/math/sph3.js");r.d(t,"sph3",function(){return E.sph3})},"./global/math/lne3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"lne3",function(){return s});var n=r("./global/math/vec3.js"),i=r("./global/math/box3.js");const s={};s.$end=i.box3.$max,s.$start=i.box3.$min,s.clone=i.box3.clone,s.closestPointToPointParameter=function(){let e,t;return function(r,i,s){e||(e=n.vec3.create(),t=n.vec3.create());let a=e,o=t;a[0]=i[0]-r[0],a[1]=i[1]-r[1],a[2]=i[2]-r[2],o[0]=r[3]-r[0],o[1]=r[4]-r[1],o[2]=r[5]-r[2];let u=o[0]*o[0]+o[1]*o[1]+o[2]*o[2],c=(o[0]*a[0]+o[1]*a[1]+o[2]*a[2])/u;return s&&(c=Math.max(0,Math.min(1,c))),c}},s.copy=i.box3.copy,s.copyStart=n.vec3.copy,s.copyEnd=i.box3.copyMax,s.create=i.box3.create,s.equals=i.box3.equals,s.equalsStartEnd=i.box3.equalsBounds,s.exactEquals=i.box3.equals,s.exactEqualsStartEnd=i.box3.exactEqualsBounds,s.fromArray=i.box3.fromArray,s.fromStartEnd=i.box3.fromBounds,s.get=function(e,t,r){if(r<0||r>1)throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return e[0]=(t[3]-t[0])*r+t[0],e[1]=(t[4]-t[1])*r+t[1],e[2]=(t[5]-t[2])*r+t[2],e},s.getCenter=function(e,t){return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e},s.getClosestPointToPoint=function(e,t,r,n){return s.get(e,t,s.closestPointToPointParameter(t,r,n))},s.getEnd=i.box3.getMax,s.getDelta=function(e,t){return e[0]=t[3]-t[0],e[1]=t[4]-t[1],e[2]=t[5]-t[2],e},s.getStart=i.box3.getMin,s.intersectsNormalConstant=function(e,t,r){let n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+r,i=t[0]*e[3]+t[1]*e[4]+t[2]*e[5]+r;return n<0&&i>0||i<0&&n>0},s.length=function(e){let t=e[0]-e[3],r=e[1]-e[4],n=e[2]-e[5];return Math.sqrt(t*t+r*r+n*n)},s.set=i.box3.set,s.squaredLength=function(e){let t=e[0]-e[3],r=e[1]-e[4],n=e[2]-e[5];return t*t+r*r+n*n},s.toArray=i.box3.toArray,s.toStartEnd=i.box3.toBounds,s.transformMat4=function(e,t,r){let n=t[0],i=t[1],s=t[2],a=t[3],o=t[4],u=t[5];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12],e[1]=r[1]*n+r[5]*i+r[9]*s+r[13],e[2]=r[2]*n+r[6]*i+r[10]*s+r[14],e[3]=r[0]*a+r[4]*o+r[8]*u+r[12],e[4]=r[1]*a+r[5]*o+r[9]*u+r[13],e[5]=r[2]*a+r[6]*o+r[10]*u+r[14],e},s.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[0],e[4]=t[4]+r[1],e[5]=t[5]+r[2],e}},"./global/math/mat3.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"mat3",function(){return n.mat3}),n.mat3.fromArray=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e},n.mat3.setArray=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=t[r],e[1]=t[r+1],e[2]=t[r+2],e[3]=t[r+3],e[4]=t[r+4],e[5]=t[r+5],e[6]=t[r+6],e[7]=t[r+7],e[8]=t[r+8],e},n.mat3.toArray=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],t[r+4]=e[4],t[r+5]=e[5],t[r+6]=e[6],t[r+7]=e[7],t[r+8]=e[8],e}},"./global/math/mat4.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"mat4",function(){return n.mat4}),n.mat4.arcFromForward=function(){let e;return function(t,r){e||(e=n.vec3.create());const i=n.vec3.normalize(e,r);if(n.mat4.identity(t),i[2]<-.99999)return t;if(i[2]>.99999)return t[5]=-1,t[10]=-1,t;const s=(1+i[2])/(i[0]*i[0]+i[1]*i[1]);return t[0]=s*i[1]*i[1]-i[2],t[1]=-s*i[0]*i[1],t[2]=i[0],t[4]=t[1],t[5]=s*i[0]*i[0]-i[2],t[6]=i[1],t[8]=-i[0],t[9]=-i[1],t[10]=-i[2],t}}(),n.mat4.copyTranslation=function(e,t){return e[12]=t[12],e[13]=t[13],e[14]=t[14],e},n.mat4.fromMat3=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[4]=t[3],e[5]=t[4],e[6]=t[5],e[8]=t[6],e[9]=t[7],e[10]=t[8],e[3]=e[7]=e[11]=e[12]=e[13]=e[14]=0,e[15]=1,e},n.mat4.lookAtGL=function(){let e,t,r;return function(i,s,a,o){return e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create()),n.vec3.subtract(r,s,a),0===n.vec3.squaredLength(r)&&(r[2]=1),n.vec3.normalize(r,r),n.vec3.cross(e,o,r),0===n.vec3.squaredLength(e)&&(r[2]+=1e-4,n.vec3.cross(e,o,r)),n.vec3.normalize(e,e),n.vec3.cross(t,r,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[4]=t[0],i[5]=t[1],i[6]=t[2],i[8]=r[0],i[9]=r[1],i[10]=r[2],i}}(),n.mat4.maxScaleOnAxis=function(e){let t=e[0],r=e[4],n=e[8],i=e[1],s=e[5],a=e[9],o=e[2],u=e[6],c=e[10],l=t*t+r*r+n*n,d=i*i+s*s+a*a,h=o*o+u*u+c*c;return Math.sqrt(Math.max(l,d,h))},n.mat4.perspectiveGL=function(e,t,r,i,s){let a=Math.tan(t/360*Math.PI)*i,o=a*r;return n.mat4.frustum(e,-o,o,-a,a,i,s),e},n.mat4.setTranslation=function(e,t){return e[12]=t[0],e[13]=t[1],e[14]=t[2],e},n.mat4.setTranslationFromValues=function(e,t,r,n){return e[12]=t,e[13]=r,e[14]=n,e}},"./global/math/noise.js":function(e,t,r){"use strict";r.r(t),r.d(t,"noise",function(){return s});var n=r("./global/math/vec3.js"),i=r("./global/math/vec4.js");const s={};s.turbulence=function(){const e=[],t=[],r=[];let s=!1;return function(a,o,u,c,l,d){s||function(){for(let r=0;r<256;r++)e[r]=i.vec4.fromValues(Math.random()-.5,Math.random()-.5,Math.random()-.5,Math.random()-.5),t[r]=r;let a=256;for(;--a;){const e=t[a],r=Math.floor(256*Math.random());t[a]=t[r],t[r]=e}for(let r=0;r<256;r++)t[256+r]=t[r],e[256+r]=e[r],e[512+r]=e[r];for(let e=0;e<15;++e)r[e]=n.vec3.create();s=!0}(),o+=4096,u+=4096,c+=4096,l+=4096;let h=Math.floor(o),f=Math.floor(u),m=Math.floor(c),v=Math.floor(l);const p=o-h,E=u-f,_=c-m,g=l-v,S=(h&=255)+1,T=(f&=255)+1,b=(m&=255)+1,R=(v&=255)+1,j=t[h],y=t[S],A=t[j+f],w=t[y+f],P=t[j+T],O=t[y+T];let C=n.vec3.lerp(r[0],e[A+m+v],e[w+m+v],p),D=n.vec3.lerp(r[1],e[P+m+v],e[O+m+v],p),L=n.vec3.lerp(r[2],e[A+b+v],e[w+b+v],p),x=n.vec3.lerp(r[3],e[A+b+v],e[w+b+v],p),I=n.vec3.lerp(r[4],C,D,E),M=n.vec3.lerp(r[5],L,x,E);const G=n.vec3.lerp(r[6],I,M,_);C=n.vec3.lerp(r[7],e[A+m+R],e[w+m+R],p),D=n.vec3.lerp(r[8],e[P+m+R],e[O+m+R],p),L=n.vec3.lerp(r[9],e[A+b+R],e[w+b+R],p),x=n.vec3.lerp(r[10],e[A+b+R],e[w+b+R],p),I=n.vec3.lerp(r[11],C,D,E),M=n.vec3.lerp(r[12],L,x,E);const F=n.vec3.lerp(r[13],I,M,_),N=n.vec3.lerp(r[14],G,F,g);return a[0]+=N[0]*d,a[1]+=N[1]*d,a[2]+=N[2]*d,a}},s.perlin1=function(){let e=!1,t=256,r=null,n=null;return function(i){e||function(){r=new Array(t+t+2),n=new Array(t+t+2);let i=0,s=0,a=0;for(i=0;i<t;i++)r[i]=i,n[i]=2*Math.random()-1;for(;--i;)a=r[i],r[i]=r[s=Math.floor(Math.random()*t)],r[s]=a;for(i=0;i<t+2;i++)r[t+i]=r[i],n[t+i]=n[i];e=!0}();let s=i+4096,a=255&Math.floor(s),o=a+1&255,u=s-Math.floor(s),c=u-1,l=u*u*(3-2*u),d=u*n[r[a]];return d+l*(c*n[r[o]]-d)}},s.perlin1D=function(e,t,r,n){let i=0,a=e,o=1;for(let e=0;e<n;++e)i+=s.perlin1(a)/o,o*=t,a*=r;return i}},"./global/math/num.js":function(e,t,r){"use strict";r.r(t),r.d(t,"num",function(){return n});const n={EPSILON:1e-6};n.RAD2DEG=180/Math.PI,n.DEG2RAD=Math.PI/180,n.TWO_PI=2*Math.PI,n.PI=Math.PI,n.biCumulative=function(e,t){if(1===t){const t=1-e;return 1-t*t*t}return 2===t?3*e*e-2*e*e*e:e*e*e},n.ceil=Math.ceil,n.clamp=function(e,t,r){return Math.max(t,Math.min(r,e))},n.decimalPlaces=function(e){let t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},n.degrees=function(e){return e*n.RAD2DEG},n.degreesUnwrapped=function(e){return n.unwrapDegrees(e*n.RAD2DEG)},n.dwordToFloat=function(e){const t=(16711680&e)>>16,r=(4278190080&e)>>24,n=(r<<1&255|t>>7)-127,i=(127&t)<<16|(65280&e)>>8<<8|255&e;return 0===i&&-127===n?0:(1-2*(r>>7))*(1+i*Math.pow(2,-23))*Math.pow(2,n)},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},n.exactEquals=function(e,t){return e===t},n.exponentialDecay=function(e,t,r,n,i){return t*i/n+r*(e*n-t)/(n*n)*(1-Math.pow(Math.E,-n*i/r))},n.fract=function(e){return e-Math.floor(e)},n.fromHalfFloat=function(e){const t=(32768&e)>>15,r=(31744&e)>>10,n=1023&e;return 0===r?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):31===r?n?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))},n.floor=Math.floor,n.getLongWordOrder=function(e){return 0===e||255===e||-16777216===e?0:1+n.getLongWordOrder(e>>8)},n.greaterThan=function(e,t){return e>t?1:0},n.greaterThanEqual=function(e,t){return n.isEqual(e,t)||e>t?1:0},n.greaterThanExactEqual=function(e,t){return e>=t?1:0},n.isEven=function(e){return Math.abs(e)%2==0},n.isFloat=function(e){return e%1!=0},n.isFinite=Number.isFinite,n.isInt=function(e){return e%1==0},n.isNaN=Number.isNaN,n.isOdd=function(e){return Math.abs(e)%2==1},n.isPowerOfTwo=function(e){return 0==(e&e-1)&&0!==e},n.lessThan=function(e,t){return e<t?1:0},n.lessThanEqual=function(e,t){return n.isEqual(e,t)||e<t?1:0},n.lessThanExactEqual=function(e,t){return e<=t?1:0},n.log2=function(e){return Math.log(e)*Math.LOG2E},n.max=Math.max,n.min=Math.min,n.nearestPowerOfTwo=function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},n.normalizeInt=function(e,t,r,n){let i=r-t,s=e-t,a=s-s/i*i+t;return void 0===n?a:Number(a.toFixed(n))},n.normalizeFloat=function(e,t,r,n){let i=r-t,s=e-t,a=s-Math.floor(s/i)*i+t;return void 0===n?a:Number(a.toFixed(n))},n.radians=function(e){return e*n.DEG2RAD},n.radiansUnwrapped=function(e){return n.unwrapRadians(e*=n.DEG2RAD)},n.randomInt=function(e,t){return e+Math.floor(Math.random()*(t-e+1))},n.randomFloat=function(e,t){return e+Math.random()*(t-e)},n.round=Math.round,n.roundToZero=function(e){return e<0?Math.ceil(e):Math.floor(e)},n.step=n.greaterThan,n.smoothStep=function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},n.smootherStep=function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},n.toHalfFloat=function(){let e,t;return function(r){e||(e=new Float32Array(1),t=new Int32Array(e.buffer)),e[0]=r;const n=t[0];let i=n>>16&32768,s=n>>12&2047,a=n>>23&255;return a<103?i:a>142?(i|=31744,i|=(255===a?0:1)&&8388607&n):a<113?i|=((s|=2048)>>114-a)+(s>>113-a&1):(i|=a-112<<10|s>>1,i+=1&s)}}(),n.unwrapDegrees=function(e){return(e%=360)>180&&(e-=360),e<-180&&(e+=360),e},n.unwrapRadians=function(e){return(e%=n.TWO_PI)>n.PI&&(e-=n.TWO_PI),e<-n.PI&&(e+=n.TWO_PI),e}},"./global/math/pln.js":function(e,t,r){"use strict";r.r(t),r.d(t,"pln",function(){return u});var n=r("./global/math/num.js"),i=r("./global/math/vec3.js"),s=r("./global/math/vec4.js"),a=r("./global/math/mat3.js"),o=r("./global/math/box3.js");const u={$normal:function(e){return e.subarray(0,3)}};u.clone=s.vec4.clone,u.constant=function(e){return e[3]},u.copy=s.vec4.copy,u.create=s.vec4.create,u.distanceToPoint=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]},u.distanceToPositionRadius=function(e,t,r){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-r},u.distanceToSph3=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-t[3]},u.distanceToValues=function(e,t,r,n){return e[0]*t+e[1]*r+e[2]*n+e[3]},u.equals=s.vec4.equals,u.equalsNormalConstant=function(e,t,r){let i=e[0],s=e[1],a=e[2],o=e[3],u=t[0],c=t[1],l=t[2],d=r;return Math.abs(i-u)<=n.num.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-c)<=n.num.EPSILON*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(a-l)<=n.num.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-d)<=n.num.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},u.exactEquals=s.vec4.exactEquals,u.exactEqualsNormalConstant=function(e,t,r){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===r},u.extract=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],e[3]},u.fromNormalConstant=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r,e},u.fromCoplanarPoints=function(e,t,r,n){let i=n[0]-r[0],s=n[1]-r[1],a=n[2]-r[2],o=t[0]-r[0],u=t[1]-r[1],c=t[2]-r[2],l=s*c-a*u,d=a*o-i*c,h=i*u-s*o,f=l*l+d*d+h*h;if(!(f>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return f=1/Math.sqrt(f),e[0]=l*f,e[1]=d*f,e[2]=h*f,e[3]=-(t[0]*e[0]+t[1]*e[1]+t[2]*e[2]),e},u.fromNormalAndCoplanarPoint=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),e},u.getCoplanarPoint=function(e,t){return e[0]=t[0]*-t[3],e[1]=t[1]*-t[3],e[2]=t[2]*-t[3],e},u.getIntersectLne3=function(e,t,r){let n=r[0],i=r[1],s=r[2],a=r[3],o=r[4],u=r[5];e[0]=0,e[1]=0,e[2]=0;let c=a-n,l=o-i,d=u-s,h=t[0]*c+t[1]*l+t[2]*d;if(0===h){if(t[0]*n+t[1]*i+t[2]*s+t[3]===0)return e[0]=n,e[1]=i,e[2]=s,e;throw new Error("Denominator error")}let f=(n*t[0]+i*t[1]+s*t[2]+t[3])/h;if(f<0||f>1)throw new Error("Normalization error");return e[0]=c*f+n,e[1]=l*f+i,e[2]=d*f+s,e},u.getIntersectStartEnd=function(){let e;return function(t,r,n,i){return e||(e=o.box3.create()),o.box3.from(e,n,i),u.getIntersectLne3(t,r,e)}},u.getNormal=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},u.getOrthoPoint=function(e,t,r){let n=t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3];return i.vec3.multiplyScalar(e,t,n),e},u.getProjectedPoint=function(e,t,r){return u.getOrthoPoint(e,t,r),e[0]=-(e[0]-r[0]),e[1]=-(e[1]-r[1]),e[2]=-(e[2]-r[2]),e},u.intersectsBounds=function(){let e;return function(t,r,n){return e||(e=o.box3.create()),o.box3.from(e,r,n),o.box3.intersectsPln(e,t)}},u.intersectsBox3=function(e,t){return o.box3.intersectsPln(t,e)},u.intersectsLne3=function(e,t){let r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3],n=e[0]*t[3]+e[1]*t[4]+e[2]*t[5]+e[3];return r<0&&n>0||n<0&&r>0},u.intersectsPositionRadius=function(e,t,r){let n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return Math.abs(n-e[3])<=r},u.intersectsSph3=function(e,t){let r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2];return Math.abs(r-e[3])<=t[3]},u.intersectsStartEnd=function(e,t,r){let n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3],i=e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3];return n<0&&i>0||i<0&&n>0},u.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-1*t[3],e},u.normalize=function(e,t){let r=t[0],n=t[1],i=t[2],s=r*r+n*n+i*i;if(!(s>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e},u.set=s.vec4.set,u.setArray=s.vec4.setArray,u.toArray=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[r]=e[0],t[r+1]=e[1],t[r+2]=e[2],t[r+3]=e[3],e},u.transformMat4=function(){let e;return function(t,r,n,i){i||e||(e=a.mat3.create()),i=i||a.mat3.normalFromMat4(e,n);let s=r[0]*-r[3],o=r[1]*-r[3],u=r[2]*-r[3],c=n[0]*s+n[4]*o+n[8]*u+n[12],l=n[1]*s+n[5]*o+n[9]*u+n[13],d=n[2]*s+n[6]*o+n[10]*u+n[14],h=r[0],f=r[1],m=r[2],v=h*i[0]+f*i[3]+m*i[6],p=h*i[1]+f*i[4]+m*i[7],E=h*i[2]+f*i[5]+m*i[8],_=v*v+p*p+E*E;if(!(_>0))throw t[0]=0,t[1]=0,t[2]=0,new Error("Normalization error");return _=1/Math.sqrt(_),t[0]=v*_,t[1]=p*_,t[2]=E*_,t[3]=-(c*t[0]+l*t[1]+d*t[2]),t}},u.translate=function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),e}},"./global/math/quat.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"quat",function(){return n.quat}),n.quat.exp=function(e,t){let r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return r?(e[0]=Math.sin(r)*t[0]/r,e[1]=Math.sin(r)*t[1]/r,e[2]=Math.sin(r)*t[2]/r,e[3]=Math.cos(r)):(e[0]=0,e[1]=0,e[2]=0,e[3]=1),e},n.quat.ln=function(e,t){let r=n.quat.length(t);if(r>1.0001||r<.99999)e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=0;else if(r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])){let n=Math.atan2(r,t[3])/r;e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=0}else e[0]=0,e[1]=0,e[2]=0,e[3]=0;return e},n.quat.pow=function(e,t,r){return 1===r?n.quat.copy(e,t):(n.quat.ln(e,t),e[0]*=r,e[1]*=r,e[2]*=r,e[3]*=r,n.quat.exp(e,e),e)}},"./global/math/ray3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"ray3",function(){return o});var n=r("./global/math/vec3.js"),i=(r("./global/math/mat4.js"),r("./global/math/pln.js"),r("./global/math/sph3.js")),s=r("./global/math/box3.js"),a=r("./global/math/tri3.js");const o={};o.$origin=s.box3.$min,o.$direction=s.box3.$max,o.clone=s.box3.clone,o.copy=s.box3.copy,o.copyOrigin=s.box3.copyMin,o.copyDirection=s.box3.copyMax,o.create=s.box3.create,o.distance=function(e,t){return Math.sqrt(o.squaredDistance(e,t))},o.distanceNormalConstant=function(e,t,r){let n=t[0]*e[3]+t[1]*e[4]+t[2]*e[5],i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+r;if(0===n){if(0===i)return 0;throw new Error("Determinant error")}let s=-i/n;return s>=0?s:null},o.distancePln=function(e,t){let r=t[0]*e[3]+t[1]*e[4]+t[2]*e[5],n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+t[3];if(0===r){if(0===n)return 0;throw new Error("Determinant error")}let i=-n/r;return i>=0?i:null},o.equals=s.box3.equals,o.equalsOriginDestination=s.box3.equalsBounds,o.exactEquals=s.box3.exactEquals,o.exactEqualsOriginDestination=s.box3.exactEqualsBounds,o.from=s.box3.from,o.fromArray=s.box3.fromArray,o.fromPerspective=function(e,t,r,n){let i=2*(t[0]-n[0])/n[2]-1,s=2*(t[1]-n[1])/n[3]-1,a=r[3]*i+r[7]*s+-1*r[11]+r[15],u=r[3]*i+r[7]*s+1*r[11]+r[15];if(0===a||0===u)throw new Error("Perspective Divide Error");return e[0]=(r[0]*i+r[4]*s+-1*r[8]+r[12])/a,e[1]=(r[1]*i+r[5]*s+-1*r[9]+r[13])/a,e[2]=(r[2]*i+r[6]*s+-1*r[10]+r[14])/a,e[3]=(r[0]*i+r[4]*s+1*r[8]+r[12])/u-e[0],e[4]=(r[1]*i+r[5]*s+1*r[9]+r[13])/u-e[1],e[5]=(r[2]*i+r[6]*s+1*r[10]+r[14])/u-e[2],o.normalize(e,e)},o.get=function(e,t,r){return e[0]=t[0]+t[3]*r,e[1]=t[1]+t[4]*r,e[2]=t[2]+t[5]*r,e},o.getDirection=s.box3.getMax,o.getClosestPointToPoint=function(e,t,r){let n=r[0]-t[0],i=r[1]-t[1],s=r[2]-t[2],a=n*t[3]+i*t[4]+s*t[5];return a<0?(e[0]=t[0],e[1]=t[1],e[2]=t[2]):o.get(e,t,a),e},o.getIntersectBounds=function(e,t,r,n){let i,s,a,u,c,l,d=1/t[3],h=1/t[4],f=1/t[5];return d>=0?(i=(r[0]-t[0])*d,s=(n[0]-t[0])*d):(i=(n[0]-t[0])*d,s=(r[0]-t[0])*d),h>=0?(a=(r[1]-t[1])*h,u=(n[1]-t[1])*h):(a=(n[1]-t[1])*h,u=(r[1]-t[1])*h),i>u||a>s?null:((a>i||i!=i)&&(i=a),(u<s||s!=s)&&(s=u),f>=0?(c=(r[2]-t[2])*f,l=(n[2]-t[2])*f):(c=(n[2]-t[2])*f,l=(r[2]-t[2])*f),i>l||c>s?null:((c>i||i!=i)&&(i=c),(l<s||s!=s)&&(s=l),s<0?null:o.get(e,t,i>=0?i:s)))},o.getIntersectBox3=function(){let e,t;return function(r,i,a){return e||(e=n.vec3.create(),t=n.vec3.create()),s.box3.getMin(e,a),s.box3.getMax(t,a),s.box3.getIntersectBounds(r,i,e,t)}},o.getIntersectTri3=function(){let e,t,r;return function(i,s,u,c){return e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create()),a.tri3.getV1(e,u),a.tri3.getV2(t,u),a.tri3.getV3(r,u),o.getIntersectVertices(i,s,e,t,r,c)}},o.getIntersectVertices=function(){let e,t,r,i,s,a;return function(u,c,l,d,h,f){e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create(),i=n.vec3.create(),s=n.vec3.create(),a=n.vec3.create());let m,v=o.getOrigin(s,c),p=o.getDirection(a,c),E=n.vec3.subtract(e,v,l),_=n.vec3.subtract(t,d,l),g=n.vec3.subtract(r,h,l),S=n.vec3.cross(i,_,g),T=n.vec3.dot(p,S);if(T>0){if(f)return null;m=1}else{if(!(T<0))return null;m=-1,T=-T}n.vec3.cross(g,E,g);let b=m*n.vec3.dot(p,g);if(b<0)return null;n.vec3.cross(_,_,E);let R=m*n.vec3.dot(p,_);if(R<0)return null;if(b+R>T)return null;let j=-m*n.vec3.dot(E,S);return j<0?null:o.get(u,c,j/T)}},o.getIntersectNormalConstant=function(e,t,r,n){let i=o.distanceNormalConstant(t,r,n);return null!==i?o.get(e,t,i):null},o.getIntersectPln=function(e,t,r){let n=o.distancePln(t,r);return null!==n?o.get(e,t,n):null},o.getIntersectPositionRadius=function(){let e;return function(t,r,n,s){return e||(e=i.sph3.create()),i.sph3.from(e,n,s),o.getIntersectSph3(t,r,e)}},o.getIntersectSph3=function(e,t,r){let n=r[0]-t[0],i=r[1]-t[1],s=r[2]-t[2],a=r[3]*r[3],u=n*t[3]+i*t[4]+s*t[5],c=n*n+i*i+s*s-u*u;if(c>a)return null;let l=Math.sqrt(a-c),d=u-l,h=u+l;return d<0&&h<0?null:d<0?o.get(e,t,h):o.get(e,t,d)},o.getOrigin=s.box3.getMin,o.intersectsBox3=function(){let e;return function(t,r){return e||(e=n.vec3.create()),o.vec3_0=null!==o.getIntersectBox3(e,t,r)}},o.intersectsBounds=function(){let e;return function(t,r,i){return e||(e=n.vec3.create()),null!==o.getIntersectBounds(e,t,r,i)}},o.intersectsNormalConstant=function(e,t,r){let n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+r;return 0===n||(t[0]*e[3]+t[1]*e[4]+t[2]*e[5])*n<0},o.intersectsPln=function(e,t){let r=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+t[3];return 0===r||(t[0]*e[3]+t[1]*e[4]+t[2]*e[5])*r<0},o.intersectsPositionRadius=function(e,t,r){return o.distance(e,t)<=r},o.intersectsSph3=function(e,t){return o.distance(e,t)<=t[3]},o.lookAt=function(e,t,r){e[0]=t[0],e[1]=t[1],e[2]=t[2];let n=r[0]-t[0],i=r[1]-t[1],s=r[2]-t[2],a=n*n+i*i+s*s;if(!(a>0))throw e[3]=0,e[4]=0,e[5]=0,new Error("Normalization error");return a=1/Math.sqrt(a),e[3]=t[0]*a,e[4]=t[1]*a,e[5]=t[2]*a,e},o.normalize=function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2];let r=t[3],n=t[4],i=t[5],s=r*r+n*n+i*i;if(!(s>0))throw e[1]=0,e[2]=0,e[3]=0,new Error("Normalization error");return s=1/Math.sqrt(s),e[3]=r*s,e[4]=n*s,e[5]=i*s,e},o.recast=function(e,t,r){return e[0]=t[0]+t[3]*r,e[1]=t[1]+t[4]*r,e[2]=t[2]+t[5]*r,e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.set=s.box3.set,o.SORT=function(e,t){return e.distance-t.distance},o.squaredDistance=function(){let e,t;return function(r,i){e||(e=n.vec3.create(),t=n.vec3.create()),e[0]=i[0]-r[0],e[1]=i[1]-r[1],e[2]=i[2]-r[2];let s=e[0]*r[3]+e[1]*r[4]+e[2]*r[5];return s<0?(o.getOrigin(t,r),n.vec3.squaredDistance(t,i)):(o.get(e,r,s),n.vec3.squaredDistance(e,i))}},o.toArray=s.box3.toArray,o.toOriginDirection=function(e,t,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[3],r[1]=e[4],r[2]=e[5],e},o.transformMat4=function(e,t,r){let n=t[0],i=t[1],s=t[2],a=t[3]+t[0],u=t[4]+t[1],c=t[5]+t[2],l=r[3]*n+r[7]*i+r[11]*s+r[15]||1,d=r[3]*a+r[7]*u+r[11]*c+r[15]||1;return e[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/l,e[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/l,e[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/l,e[3]=(r[0]*a+r[4]*u+r[8]*c+r[12])/d-e[0],e[4]=(r[1]*a+r[5]*u+r[9]*c+r[13])/d-e[1],e[5]=(r[2]*a+r[6]*u+r[10]*c+r[14])/d-e[2],o.normalize(e,e)},o.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},"./global/math/sph3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"sph3",function(){return u});var n=r("./global/math/vec3.js"),i=r("./global/math/vec4.js"),s=r("./global/math/mat4.js"),a=r("./global/math/pln.js"),o=r("./global/math/box3.js");const u={};let c=null;u.$position=a.pln.$normal,u.clone=i.vec4.clone,u.containsPoint=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i<=e[3]*e[3]},u.copy=i.vec4.copy,u.create=i.vec4.create,u.distance=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]+e[3];return Math.sqrt(r*r+n*n+i*i)-s},u.distanceToPoint=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)-e[3]},u.empty=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},u.equals=i.vec4.equals,u.equalsPositionRadius=a.pln.equalsNormalConstant,u.exactEquals=i.vec4.exactEquals,u.exactEqualsPositionRadius=a.pln.exactEqualsNormalConstant,u.extract=a.pln.extract,u.fromBox3=function(e,t){let r=t[3]-t[0],n=t[4]-t[1],i=t[5]-t[2];return e[0]=.5*(t[0]+t[3]),e[1]=.5*(t[1]+t[4]),e[2]=.5*(t[2]+t[5]),e[3]=.5*Math.sqrt(r*r+n*n+i*i),e},u.fromBounds=function(e,t,r){let n=r[0]-t[0],i=r[1]-t[1],s=r[2]-t[2];return e[0]=.5*(t[0]+r[0]),e[1]=.5*(t[1]+r[1]),e[2]=.5*(t[2]+r[2]),e[3]=.5*Math.sqrt(n*n+i*i+s*s),e},u.fromObjectBounds=function(e,t,r){if(t.minBounds)u.fromBounds(e,t.minBounds,t.maxBounds);else{if(!t._boundingBox)throw new Error("Invalid object bounds");u.fromBox3(e,t._boundingBox)}return r&&u.transformMat4(e,e,r),e},u.fromObjectPositionRadius=function(e,t,r){if(t.boundsSpherePosition)u.fromPositionRadius(e,t.boundsSpherePosition,t.boundsSphereRadius);else{if(!t.boundingSphereCenter)throw new Error("Invalid object bounds");u.fromPositionRadius(e,t.boundingSphereCenter,t.boundingSphereRadius)}return r&&u.transformMat4(e,e,r),e},u.fromPositionRadius=a.pln.fromNormalConstant,u.fromTranslationRadius=function(e,t,r){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e[3]=r,e},u.fromMat4=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e[4]=s.mat4.maxScaleOnAxis(t),e},u.getClampedPoint=function(e,t,r){e[0]=r[0],e[1]=r[1],e[2]=r[2];let i=t[0]-r[0],s=t[1]-r[1],a=t[2]-r[2];return i*i+s*s+a*a>t[3]*t[3]&&(e[0]=e[0]-t[0],e[1]=e[1]-t[1],e[2]=e[2]-t[2],n.vec3.normalize(e,e),e[0]=e[0]*t[3]+t[0],e[1]=e[1]*t[3]+t[1],e[2]=e[2]*t[3]+t[2]),e},u.getPointFromLongLat=function(e,t,r,n){return e[0]=t[0]+t[3]*Math.sin(n)*Math.cos(r),e[1]=t[1]+t[3]*Math.sin(n)*Math.sin(r),e[2]=t[2]+t[3]*Math.cos(n),e},u.getPosition=a.pln.getNormal,u.intersectsSph3=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=e[3]+t[3];return r*r+n*n+i*i<=s*s},u.intersectsBox3=function(e,t){return o.box3.intersectsSph3(t,e)},u.intersectsBounds=function(e,t,r){let n=Math.max(t[0],Math.min(r[0],e[0]))-e[0],i=Math.max(t[1],Math.min(r[1],e[1]))-e[1],s=Math.max(t[2],Math.min(r[2],e[2]))-e[2];return n*n+i*i+s*s<=e[3]*e[3]},u.intersectsPositionRadius=function(e,t,r){let n=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],a=e[3]+r;return n*n+i*i+s*s<=a*a},u.intersectsPln=function(e,t){return a.pln.intersectsSph3(t,e)},u.intersectsNormalConstant=function(e,t,r){let n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2];return Math.abs(n-r)<=e[3]},u.isEmpty=function(e){return e[3]<=0},u.radius=a.pln.constant,u.set=i.vec4.set,u.setArray=i.vec4.setArray,u.setPoints=function(){let e;return function(t,r,n){e||(e=o.box3.create()),n?(t[0]=n[0],t[1]=n[1],t[2]=n[2]):(o.box3.setPoints(e,r),t[0]=.5*(e[0]+e[3]),t[1]=.5*(e[1]+e[4]),t[2]=.5*(e[2]+e[5]));let i=0;for(let e=0;e<r.length;e++){let n=t[0]-r[e][0],s=t[1]-r[e][1],a=t[2]-r[e][2];i=Math.max(i,n*n+s*s+a*a)}return t[3]=Math.sqrt(i),t}},u.squaredDistance=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]+e[3];return r*r+n*n+i*i-s*s},u.squaredDistanceToPoint=function(e,t){let r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i-e[3]},u.toArray=i.vec4.toArray,u.toObjectBounds=function(e,t,r){if(!(t.minBounds||t._boundingBox))throw new Error("Invalid object bounds");r&&(c||(c=u.create()),e=u.transformMat4(c,e,r)),t.minBounds?u.toBounds(e,t.minBounds,t.maxBounds):o.box3.fromSph3(t._boundingBox,e)},u.toObjectPositionRadius=function(e,t,r){if(r&&(c||(c=u.create()),e=u.transformMat4(c,e,r)),t.boundsSpherePosition)t.boundsSphereRadius=u.toPositionRadius(e,t.boundsSpherePosition);else{if(!t.boundingSphereCenter)throw new Error("Invalid object bounds");t.boundingSphereRadius=u.toPositionRadius(e,t.boundingSphereCenter)}},u.transformMat4=function(e,t,r){let n=t[0],i=t[1],s=t[2],a=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],o=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],u=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12],e[1]=r[1]*n+r[5]*i+r[9]*s+r[13],e[2]=r[2]*n+r[6]*i+r[10]*s+r[14],e[3]=t[3]*Math.sqrt(Math.max(a,o,u)),e},u.translate=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}},"./global/math/tri3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"tri3",function(){return o});var n=r("./global/math/vec3.js"),i=r("./global/math/mat3.js"),s=r("./global/math/pln.js"),a=r("./global/math/lne3.js");const o={};o.$v1=a.lne3.$start,o.$v2=a.lne3.$end,o.$v3=function(e){return e.subarray(6,9)},o.area=function(e){let t=e[7]-e[3],r=e[8]-e[4],n=e[9]-e[5],i=e[0]-e[3],s=e[1]-e[4],a=e[2]-e[5],o=t*a-n*s,u=n*i-t*a,c=t*s-r*i;return.5*Math.sqrt(o*o+u*u+c*c)},o.create=function(){let e=new Float32Array(9);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0,e},o.clone=i.mat3.clone,o.contains=function(){let e;return function(t,r){return e||(e=n.vec3.create()),o.getBaryCentricCoordinates(e,t,r),e[0]>=0&&e[1]>=0&&e[0]+e[1]<=1}},o.copy=i.mat3.copy,o.fromVertices=function(e,t,r,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=r[0],e[4]=r[1],e[5]=r[2],e[6]=n[0],e[7]=n[1],e[8]=n[2],e},o.fromArray=i.mat3.fromArray,o.getBaryCentricCoordinates=function(e,t,r){let n=t[7]-t[0],i=t[8]-t[1],s=t[9]-t[2],a=t[3]-t[0],o=t[4]-t[1],u=t[5]-t[2],c=r[0]-t[0],l=r[1]-t[1],d=r[2]-t[2],h=n[0]*n[0]+i[1]*i[1]+s[2]*s[2],f=n[0]*a[0]+i[1]*o[1]+s[2]*u[2],m=n[0]*c[0]+i[1]*l[1]+s[2]*d[2],v=a[0]*a[0]+o[1]*o[1]+u[2]*u[2],p=a[0]*c[0]+o[1]*l[1]+u[2]*d[2],E=h*v-f*f;if(0===E)throw e[0]=-2,e[1]=-1,e[2]=-1,new Error("Denominator error");{let t=1/E,r=(v*m-f*p)*t,n=(h*p-f*m)*t;e[0]=1-r-n,e[1]=n,e[2]=r}return e},o.getClosestEdgeToPoint=function(){let e,t,r;return function(i,s,u){e||(e=n.vec3.create(),t=n.vec3.create(),r=[a.lne3.create(),a.lne3.create(),a.lne3.create()]);let c=o.getClosestPointToPoint(e,s,u);a.lne3.set(r[0],s[0],s[1],s[2],s[3],s[4],s[5]),a.lne3.set(r[1],s[3],s[4],s[5],s[6],s[7],s[8]),a.lne3.set(r[2],s[6],s[7],s[8],s[0],s[1],s[2]);let l=1/0;for(let e=0;e<r.length;e++){let s=a.lne3.getClosestPointToPoint(t,r[e],c,!0),o=n.vec3.squaredDistance(s,c);o<l&&(l=o,i[0]=r[e][0],i[1]=r[e][1],i[2]=r[e][2],i[3]=r[e][3],i[4]=r[e][4],i[5]=r[e][5])}return i}},o.getClosestPointToPoint=function(){let e,t,r,i,u,c,l;return function(d,h,f){if(e||(e=s.pln.create(),t=[a.lne3.create(),a.lne3.create(),a.lne3.create()],r=n.vec3.create(),i=n.vec3.create(),u=n.vec3.create(),c=n.vec3.create(),l=n.vec3.create()),o.getV1(u,h),o.getV2(c,h),o.getV3(l,h),s.pln.fromCoplanarPoints(e,u,c,l),s.pln.getProjectedPoint(r,e,f),!0===o.contains(h,r))d[0]=r[0],d[1]=r[1],d[2]=r[2];else{a.lne3.set(t[0],h[0],h[1],h[2],h[3],h[4],h[5]),a.lne3.set(t[1],h[3],h[4],h[5],h[6],h[7],h[8]),a.lne3.set(t[2],h[6],h[7],h[8],h[0],h[1],h[2]);let e=1/0;for(let s=0;s<t.length;s++){a.lne3.getClosestPointToPoint(i,t[s],r,!0);let o=n.vec3.squaredDistance(r,i);o<e&&(e=o,d[0]=i[0],d[1]=i[1],d[2]=i[2])}}return d}},o.getClosestVertexToPoint=function(){let e,t,r;return function(i,s,a){e||(e=n.vec3.create(),t=n.vec3.create(),r=n.vec3.create()),o.getClosestPointToPoint(i,s,a);let u,c,l,d,h=1/0,f=[o.getV1(e,s),o.getV2(t,s),o.getV3(r,s)];for(let e=0;e<f.length;e++)(u=n.vec3.squaredDistance(f[e],i))<h&&(h=u,c=f[e][0],l=f[e][1],d=f[e][2]);return i[0]=c,i[1]=l,i[2]=d,i}},o.getMidpoint=function(e,t){return e[0]=(t[0]+t[3]+t[6])*(1/3),e[1]=(t[1]+t[4]+t[7])*(1/3),e[2]=(t[2]+t[5]+t[8])*(1/3),e},o.getNormal=function(e,t){let r=t[7]-t[3],n=t[8]-t[4],i=t[9]-t[5],s=t[0]-t[3],a=t[1]-t[4],o=t[2]-t[5],u=n*o-i*a,c=i*s-r*o,l=r*a-n*s,d=u*u+c*c+l*l;if(!(d>0))throw e[0]=0,e[1]=0,e[2]=0,new Error("Normalization error");return d=1/Math.sqrt(d),e[0]=u*d,e[1]=c*d,e[2]=l*d,e},o.getV1=a.lne3.getStart,o.getV2=a.lne3.getEnd,o.getV3=function(e,t){return e[0]=t[6],e[1]=t[7],e[2]=t[8],e},o.toArray=i.mat3.toArray,o.toVertices=function(e,t,r,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],r[0]=e[0],r[1]=e[1],r[2]=e[2],n[0]=e[0],n[1]=e[1],n[2]=e[2],e}},"./global/math/vec2.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec2",function(){return n.vec2}),n.vec2.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e},n.vec2.isEmpty=function(e){return 0===e[0]&&0===e[1]},n.vec2.divideScalar=function(e,t,r){return n.vec2.multiplyScalar(e,t,1/r)},n.vec2.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},n.vec2.setScalar=function(e,t){return e[0]=t,e[1]=t,e},n.vec2.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e}},"./global/math/vec3.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec3",function(){return n.vec3});var i=r("./global/math/num.js");n.vec3.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e[2]=t[2]+r,e},n.vec3.degrees=function(e,t){return e[0]=t[0]*i.num.RAD2DEG,e[1]=t[1]*i.num.RAD2DEG,e[2]=t[2]*i.num.RAD2DEG,e},n.vec3.degreesUnwrapped=function(e,t){return e[0]=i.num.unwrapDegrees(t[0]*i.num.RAD2DEG),e[1]=i.num.unwrapDegrees(t[1]*i.num.RAD2DEG),e[2]=i.num.unwrapDegrees(t[2]*i.num.RAD2DEG),e},n.vec3.directionFromQuat=function(e,t,r){return n.vec3.transformQuat(e,t,r)},n.vec3.directionFromMat4=function(){let e;return function(t,r,i){return e||(e=n.quat.create()),n.mat4.getRotation(e,i),n.vec3.transformQuat(t,r,e)}}(),n.vec3.divideScalar=function(e,t,r){return n.vec3.multiplyScalar(e,t,1/r)},n.vec3.euler={},n.vec3.euler.DEFAULT_ORDER="XYZ",n.vec3.euler.fromQuat=function(){let e;return function(t,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.vec3.euler.DEFAULT_ORDER;return e||(e=n.mat4.create()),n.mat4.fromQuat(e,r),n.vec3.euler.fromMat4(t,e,i)}}(),n.vec3.euler.fromMat4=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.vec3.euler.DEFAULT_ORDER;const s=t[0],a=t[4],o=t[8],u=t[1],c=t[5],l=t[9],d=t[2],h=t[6],f=t[10],m=i.num.clamp;if("XYZ"===r)e[1]=Math.asin(m(o,-1,1)),Math.abs(o)<.99999?(e[0]=Math.atan2(-l,f),e[2]=Math.atan2(-a,s)):(e[0]=Math.atan2(h,c),e[2]=0);else if("YXZ"===r)e[0]=Math.asin(-m(l,-1,1)),Math.abs(l)<.99999?(e[1]=Math.atan2(o,f),e[2]=Math.atan2(u,c)):(e[1]=Math.atan2(-d,s),e[2]=0);else if("ZXY"===r)e[0]=Math.asin(m(h,-1,1)),Math.abs(h)<.99999?(e[1]=Math.atan2(-d,f),e[2]=Math.atan2(-a,c)):(e[1]=0,e[2]=Math.atan2(u,s));else if("ZYX"===r)e[1]=Math.asin(-m(d,-1,1)),Math.abs(d)<.99999?(e[0]=Math.atan2(h,f),e[2]=Math.atan2(u,s)):(e[0]=0,e[2]=Math.atan2(-a,c));else if("YZX"===r)e[2]=Math.asin(m(u,-1,1)),Math.abs(u)<.99999?(e[0]=Math.atan2(-l,c),e[1]=Math.atan2(-d,s)):(e[0]=0,e[1]=Math.atan2(o,f));else{if("XZY"!==r)throw e[0]=0,e[1]=0,e[2]=0,new Error("Unrecognised euler order: "+r);e[2]=Math.asin(-m(a,-1,1)),Math.abs(a)<.99999?(e[0]=Math.atan2(h,c),e[1]=Math.atan2(o,s)):(e[0]=Math.atan2(-l,f),e[1]=0)}return n.vec3.unwrapRadians(e,e)},n.vec3.euler.getQuat=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.vec3.euler.DEFAULT_ORDER;const s=i.num.unwrapRadians(t[0]),a=i.num.unwrapRadians(t[1]),o=i.num.unwrapRadians(t[2]),u=Math.cos(s/2),c=Math.cos(a/2),l=Math.cos(o/2),d=Math.sin(s/2),h=Math.sin(a/2),f=Math.sin(o/2);if("XYZ"===r)e[0]=d*c*l+u*h*f,e[1]=u*h*l-d*c*f,e[2]=u*c*f+d*h*l,e[3]=u*c*l-d*h*f;else if("YXZ"===r)e[0]=d*c*l+u*h*f,e[1]=u*h*l-d*c*f,e[2]=u*c*f-d*h*l,e[3]=u*c*l+d*h*f;else if("ZXY"===r)e[0]=d*c*l-u*h*f,e[1]=u*h*l+d*c*f,e[2]=u*c*f+d*h*l,e[3]=u*c*l-d*h*f;else if("ZYX"===r)e[0]=d*c*l-u*h*f,e[1]=u*h*l+d*c*f,e[2]=u*c*f-d*h*l,e[3]=u*c*l+d*h*f;else if("YZX"===r)e[0]=d*c*l+u*h*f,e[1]=u*h*l+d*c*f,e[2]=u*c*f-d*h*l,e[3]=u*c*l-d*h*f;else{if("XZY"!==r)throw e[0]=0,e[1]=0,e[2]=0,e[3]=1,new Error("Unrecognised euler order: "+r);e[0]=d*c*l-u*h*f,e[1]=u*h*l-d*c*f,e[2]=u*c*f+d*h*l,e[3]=u*c*l+d*h*f}return e},n.vec3.exponentialDecay=function(e,t,r,n,s,a){return e[0]=i.num.exponentialDecay(t[0],r[0],n,s,a),e[1]=i.num.exponentialDecay(t[1],r[1],n,s,a),e[2]=i.num.exponentialDecay(t[2],r[2],n,s,a),e},n.vec3.fromSpherical=function(e,t,r){const n=t[0],i=t[1],s=t[2];return e[0]=s*Math.sin(n)*Math.sin(i),e[1]=s*Math.cos(i),e[2]=s*Math.cos(n)*Math.sin(i),r&&(e[0]+=r[0],e[1]+=r[1],e[2]+=r[2]),e},n.vec3.getSpherical=function(e,t){let r=0,i=0,s=n.vec3.length(t);return 0!==s&&(r=Math.acos(Math.max(t[1]/s,Math.min(-1,1))),i=Math.atan2(t[0],t[2])),e[0]=r,e[1]=i,e[2]=s,e},n.vec3.isEmpty=function(e){return 0===e[0]&&0===e[1]&&0===e[2]},n.vec3.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},n.vec3.project=function(e,t,r,n){let i=t[0],s=t[1],a=t[2],o=r[0]*i+r[4]*s+r[8]*a+r[12],u=r[1]*i+r[5]*s+r[9]*a+r[13],c=r[3]*i+r[7]*s+r[11]*a+r[15],l=(o/c+1)/2,d=1-(u/c+1)/2;return e[0]=l*n[2]+n[0],e[1]=d*n[3]+n[1],e[2]=c,e},n.vec3.radians=function(e,t){return e[0]=t[0]*i.num.DEG2RAD,e[1]=t[1]*i.num.DEG2RAD,e[2]=t[2]*i.num.DEG2RAD,e},n.vec3.radiansUnwrapped=function(e,t){return e[0]=i.num.unwrapRadians(t[0]*i.num.DEG2RAD),e[1]=i.num.unwrapRadians(t[1]*i.num.DEG2RAD),e[2]=i.num.unwrapRadians(t[2]*i.num.DEG2RAD),e},n.vec3.setScalar=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e},n.vec3.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e},n.vec3.unproject=function(){let e;return function(t,r,i,s){e||(e=n.vec4.create());let a=r[0],o=r[1],u=r[2];if(e[0]=2*(a-s[0])/s[2]-1,e[1]=2*(o-s[1])/s[3]-1,e[2]=2*u-1,e[3]=1,n.vec4.transformMat4(e,e,i),0===e[3])throw t[0]=0,t[1]=0,t[2]=0,new Error("Perspective divide error");return t[0]=e[0]/e[3],t[1]=e[1]/e[3],t[2]=e[2]/e[3],t}},n.vec3.unwrapDegrees=function(e,t){return e[0]=i.num.unwrapDegrees(t[0]),e[1]=i.num.unwrapDegrees(t[1]),e[2]=i.num.unwrapDegrees(t[2]),e},n.vec3.unwrapRadians=function(e,t){return e[0]=i.num.unwrapRadians(t[0]),e[1]=i.num.unwrapRadians(t[1]),e[2]=i.num.unwrapRadians(t[2]),e}},"./global/math/vec4.js":function(e,t,r){"use strict";r.r(t);var n=r("../node_modules/gl-matrix/lib/gl-matrix.js");r.d(t,"vec4",function(){return n.vec4}),n.vec4.addScalar=function(e,t,r){return e[0]=t[0]+r,e[1]=t[1]+r,e[2]=t[2]+r,e[3]=t[3]+r,e},n.vec4.isEmpty=function(e){return 0===e[0]&&0===e[1]&&0===e[2]&&0===e[3]},n.vec4.divideScalar=function(e,t,r){return n.vec4.multiplyScalar(e,t,1/r)},n.vec4.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},n.vec4.setScalar=function(e,t){return e[0]=t,e[1]=t,e[2]=t,e[3]=t,e},n.vec4.subtractScalar=function(e,t,r){return e[0]=t[0]-r,e[1]=t[1]-r,e[2]=t[2]-r,e[3]=t[3]-r,e}},"./global/util/arr.js":function(e,t,r){"use strict";r.r(t),r.d(t,"addToArray",function(){return i}),r.d(t,"findElementByProperty",function(){return s}),r.d(t,"perArrayChild",function(){return a}),r.d(t,"removeFromArray",function(){return o}),r.d(t,"toArray",function(){return u}),r.d(t,"toUniqueArray",function(){return c});var n=r("./global/util/type.js");function i(e){let t=!1;for(let r=0;r<(arguments.length<=1?0:arguments.length-1);r++)-1===e.indexOf(r+1<1||arguments.length<=r+1?void 0:arguments[r+1])&&(e.push(r+1<1||arguments.length<=r+1?void 0:arguments[r+1]),t=!0);return t}function s(e,t,r,n){for(let n=0;n<e.length;n++)if(t in e[n]&&e[n][t]===r)return e[n];if(n)throw new n({[t]:r});return null}function a(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];for(let r=0;r<e.length;r++)t in e[r]&&e[r][t](...n)}function o(e){let t=!1;for(let r=0;r<(arguments.length<=1?0:arguments.length-1);r++){const n=e.indexOf(r+1<1||arguments.length<=r+1?void 0:arguments[r+1]);-1!==n&&(e.splice(n,1),t=!0)}return t}function u(e){return Object(n.isArray)(e)?e:[e]}function c(e){return Array.from(new Set(u(e)))}},"./global/util/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./global/util/arr.js");r.d(t,"addToArray",function(){return n.addToArray}),r.d(t,"findElementByProperty",function(){return n.findElementByProperty}),r.d(t,"perArrayChild",function(){return n.perArrayChild}),r.d(t,"removeFromArray",function(){return n.removeFromArray}),r.d(t,"toArray",function(){return n.toArray}),r.d(t,"toUniqueArray",function(){return n.toUniqueArray});var i=r("./global/util/obj.js");r.d(t,"assignIfExists",function(){return i.assignIfExists}),r.d(t,"get",function(){return i.get}),r.d(t,"template",function(){return i.template});var s=r("./global/util/type.js");r.d(t,"isArray",function(){return s.isArray}),r.d(t,"isArrayLike",function(){return s.isArrayLike}),r.d(t,"isBoolean",function(){return s.isBoolean}),r.d(t,"isCanvas",function(){return s.isCanvas}),r.d(t,"isDescriptor",function(){return s.isDescriptor}),r.d(t,"isDNA",function(){return s.isDNA}),r.d(t,"isError",function(){return s.isError}),r.d(t,"isNumber",function(){return s.isNumber}),r.d(t,"isFunction",function(){return s.isFunction}),r.d(t,"isNoU",function(){return s.isNoU}),r.d(t,"isNull",function(){return s.isNull}),r.d(t,"isObject",function(){return s.isObject}),r.d(t,"isObjectLike",function(){return s.isObjectLike}),r.d(t,"isObjectObject",function(){return s.isObjectObject}),r.d(t,"isPlain",function(){return s.isPlain}),r.d(t,"isPrimary",function(){return s.isPrimary}),r.d(t,"isPromise",function(){return s.isPromise}),r.d(t,"isString",function(){return s.isString}),r.d(t,"isSymbol",function(){return s.isSymbol}),r.d(t,"isSubclassOf",function(){return s.isSubclassOf}),r.d(t,"isTag",function(){return s.isTag}),r.d(t,"isTyped",function(){return s.isTyped}),r.d(t,"isUndefined",function(){return s.isUndefined}),r.d(t,"isVector",function(){return s.isVector}),r.d(t,"isVector2",function(){return s.isVector2}),r.d(t,"isVector3",function(){return s.isVector3}),r.d(t,"isVector4",function(){return s.isVector4}),r.d(t,"isMatrix3",function(){return s.isMatrix3}),r.d(t,"isMatrix4",function(){return s.isMatrix4});var a=r("./global/util/uuid.js");r.d(t,"enableUUID",function(){return a.enableUUID}),r.d(t,"generateID",function(){return a.generateID});var o=r("./global/util/url.js");r.d(t,"getURL",function(){return o.getURL}),r.d(t,"getURLString",function(){return o.getURLString}),r.d(t,"getURLInteger",function(){return o.getURLInteger}),r.d(t,"getURLFloat",function(){return o.getURLFloat}),r.d(t,"getURLBoolean",function(){return o.getURLBoolean})},"./global/util/obj.js":function(e,t,r){"use strict";r.r(t),r.d(t,"assignIfExists",function(){return s}),r.d(t,"get",function(){return a}),r.d(t,"template",function(){return o});var n=r("./global/util/type.js"),i=r("./global/util/arr.js");function s(e,t,r){if(!t)return!1;r=Object(i.toArray)(r);let s=!1;for(let i=0;i<r.length;i++){const a=r[i];if(void 0!==t[a])if(s=!0,Object(n.isArrayLike)(e[a]))if(Object(n.isTyped)(e[a]))if(e[a].length!==t[a].length){const r=e[a].constructor;e[a]=new r(t[a])}else e[a].set(t[a]);else{e[a]=e[a].splice(e[a].length,0);for(let r=0;r<t[a].length;r++)e[a].push(t[a][r])}else if(Object(n.isTyped)(t[a])){const r=t[a].constructor;e[a]=new r(t[a])}else e[a]=t[a]}return s}function a(e,t,r){if(!Object(n.isArray)(t))return void 0!==e[t]?e[t]:r;for(let r=0;r<t.length;r++)if(void 0!==e[t[r]])return e[t[r]];return r}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.match(/%([^%]+)?%/g)||[];for(let n=0;n<r.length;n++){const i=r[n],s=i.substring(1,i.length-1).split("="),a=s[0]in t?t[s[0]]:s[1];e=e.replace(i,a)}return e}},"./global/util/type.js":function(e,t,r){"use strict";r.r(t),r.d(t,"isArray",function(){return i}),r.d(t,"isArrayLike",function(){return s}),r.d(t,"isBoolean",function(){return a}),r.d(t,"isCanvas",function(){return o}),r.d(t,"isDescriptor",function(){return u}),r.d(t,"isDNA",function(){return c}),r.d(t,"isError",function(){return l}),r.d(t,"isNumber",function(){return d}),r.d(t,"isFunction",function(){return h}),r.d(t,"isNoU",function(){return f}),r.d(t,"isNull",function(){return m}),r.d(t,"isObject",function(){return v}),r.d(t,"isObjectLike",function(){return p}),r.d(t,"isObjectObject",function(){return E}),r.d(t,"isPlain",function(){return _}),r.d(t,"isPrimary",function(){return g}),r.d(t,"isPromise",function(){return S}),r.d(t,"isString",function(){return T}),r.d(t,"isSymbol",function(){return b}),r.d(t,"isSubclassOf",function(){return R}),r.d(t,"isTag",function(){return j}),r.d(t,"isTyped",function(){return y}),r.d(t,"isUndefined",function(){return A}),r.d(t,"isVector",function(){return w}),r.d(t,"isVector2",function(){return P}),r.d(t,"isVector3",function(){return O}),r.d(t,"isVector4",function(){return C}),r.d(t,"isMatrix3",function(){return D}),r.d(t,"isMatrix4",function(){return L});const n=Object.prototype.toString,i=Array.isArray;function s(e){return!!e&&(i(e)||y(e))}function a(e){return j(e,"[object Boolean]")}function o(e){return!!(e&&e instanceof HTMLCanvasElement)}function u(e){if(!e||!e.hasOwnProperty)return!1;const t=["value","initializer","get","set"];for(let r=0,n=t.length;r<n;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}function c(e){return T(e)&&e.match(/(\w|\d|[-_])+:(\w|\d|[-_])+:(\w|\d|[-_])+/)}function l(e){return!!(e&&e instanceof Error||"error"===e.constructor.category)}function d(e){return j(e,"[object Number]")}function h(e){return"function"==typeof e}function f(e){return null==e}function m(e){return null===e}function v(e){const t=typeof e;return null!==e&&("object"===t||"function"===t)}function p(e){return null!==e&&"object"==typeof e}function E(e){return null!==e&&j(e,"[object Object]")}function _(e){if(!v(e)||!E)return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function g(e){return a(e)||d(e)||T(e)}function S(e){return v(e)&&h(e.then)}function T(e){return j(e,"[object String]")}function b(e){return"symbol"==typeof e||j(e,"[object Symbol]")}function R(e,t){if(!h(e))return!1;for(;h(e);){if(e===t)return!0;e=Reflect.getPrototypeOf(e)}return!1}function j(e,t){return n.call(e)===t}function y(e){return!!e&&!!(e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT)}function A(e){return void 0===e}function w(e){if(e){if(y(e))return!0;if(i(e)){for(let t=0;t<e.length;t++)if(!d(e[t]))return!1;return!0}}return!1}function P(e){return!!w(e)&&2===e.length}function O(e){return!!w(e)&&3===e.length}function C(e){return!!w(e)&&4===e.length}function D(e){return!!w(e)&&9===e.length}function L(e){return!!w(e)&&16===e.length}},"./global/util/url.js":function(e,t,r){"use strict";r.r(t),r.d(t,"getURL",function(){return s}),r.d(t,"getURLString",function(){return a}),r.d(t,"getURLInteger",function(){return o}),r.d(t,"getURLFloat",function(){return u}),r.d(t,"getURLBoolean",function(){return c});const n={},i=window.location.search.substring(1).split("&");for(let e=0;e<i.length;e++){const t=i[e].split("="),r=t[0].toLowerCase(),s=unescape(t[1]);if(r){let e=s.toLowerCase();n[r]="true"===e||"false"!==e&&s}}function s(){return Object.assign({},n)}function a(e,t){return(e=e.toLowerCase())in n?n[e]:t}function o(e,t){return(e=e.toLowerCase())in n?parseInt(n[e],10):t}function u(e,t){return(e=e.toLowerCase())in n?parseFloat(n[e]):t}function c(e,t){return(e=e.toLowerCase())in n?n[e]:t}},"./global/util/uuid.js":function(e,t,r){"use strict";r.r(t),r.d(t,"enableUUID",function(){return a}),r.d(t,"generateID",function(){return o});let n=null,i=0,s=null;function a(e){if(e!==n){if(null!==n)throw new Error("Cannot change id generation type once set");if(e){s=[];for(let e=0;e<256;e++)s[e]=(e<16?"0":"")+e.toString(16).toUpperCase()}n=e}}function o(){return null===n&&(n=!1),n?function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return s[255&e]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]+"-"+s[255&t]+s[t>>8&255]+"-"+s[t>>16&15|64]+s[t>>24&255]+"-"+s[63&r|128]+s[r>>8&255]+"-"+s[r>>16&255]+s[r>>24&255]+s[255&n]+s[n>>8&255]+s[n>>16&255]+s[n>>24&255]}():i++}},"./index.js":function(e,t,r){"use strict";r.r(t);r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/core-js/modules/es.symbol.async-iterator.js"),r("../node_modules/core-js/modules/es.array.flat.js"),r("../node_modules/core-js/modules/es.array.flat-map.js"),r("../node_modules/core-js/modules/es.array.from.js"),r("../node_modules/core-js/modules/es.array.iterator.js"),r("../node_modules/core-js/modules/es.array.reverse.js"),r("../node_modules/core-js/modules/es.array.sort.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat.js"),r("../node_modules/core-js/modules/es.array.unscopables.flat-map.js"),r("../node_modules/core-js/modules/es.array-buffer.constructor.js"),r("../node_modules/core-js/modules/es.array-buffer.slice.js"),r("../node_modules/core-js/modules/es.map.js"),r("../node_modules/core-js/modules/es.number.parse-float.js"),r("../node_modules/core-js/modules/es.object.define-getter.js"),r("../node_modules/core-js/modules/es.object.define-setter.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/es.object.lookup-getter.js"),r("../node_modules/core-js/modules/es.object.lookup-setter.js"),r("../node_modules/core-js/modules/es.promise.js"),r("../node_modules/core-js/modules/es.promise.finally.js"),r("../node_modules/core-js/modules/es.set.js"),r("../node_modules/core-js/modules/es.string.pad-end.js"),r("../node_modules/core-js/modules/es.string.pad-start.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/core-js/modules/es.string.trim-end.js"),r("../node_modules/core-js/modules/es.string.trim-start.js"),r("../node_modules/core-js/modules/es.typed-array.float32-array.js"),r("../node_modules/core-js/modules/es.typed-array.float64-array.js"),r("../node_modules/core-js/modules/es.typed-array.int8-array.js"),r("../node_modules/core-js/modules/es.typed-array.int16-array.js"),r("../node_modules/core-js/modules/es.typed-array.int32-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint8-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint16-array.js"),r("../node_modules/core-js/modules/es.typed-array.uint32-array.js"),r("../node_modules/core-js/modules/es.typed-array.from.js"),r("../node_modules/core-js/modules/es.typed-array.of.js"),r("../node_modules/core-js/modules/es.weak-map.js"),r("../node_modules/core-js/modules/es.weak-set.js"),r("../node_modules/core-js/modules/web.dom-collections.for-each.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/web.immediate.js"),r("../node_modules/core-js/modules/web.queue-microtask.js"),r("../node_modules/core-js/modules/web.url.js"),r("../node_modules/core-js/modules/web.url.to-json.js"),r("../node_modules/core-js/modules/web.url-search-params.js"),r("../node_modules/regenerator-runtime/runtime.js");var n=r("./config.js"),i=r("./global/index.js");r.d(t,"ccpwgl_int",function(){return i.tw2}),i.tw2.Register(n.config)},"./interior/Tr2Model.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Model",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"meshes",[])}static black(e){return[["meshes",e.array]]}}i(s,"__isStaging",4)},"./interior/character/Tr2IntSkinnedObject.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2IntSkinnedObject",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"curveSets",[]),i(this,"transform",null),i(this,"visualModel",null)}static black(e){return[["curveSets",e.array],["transform",e.object],["visualModel",e.object]]}}i(s,"__isStaging",4)},"./interior/character/Tr2SkinnedModel.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SkinnedModel",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"geometryResPath",""),i(this,"meshes",[]),i(this,"skeletonName","")}static black(e){return[["geometryResPath",e.string],["meshes",e.array],["name",e.string],["skeletonName",e.string]]}}i(s,"__isStaging",4)},"./interior/character/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./interior/character/Tr2IntSkinnedObject.js");r.d(t,"Tr2IntSkinnedObject",function(){return n.Tr2IntSkinnedObject});var i=r("./interior/character/Tr2SkinnedModel.js");r.d(t,"Tr2SkinnedModel",function(){return i.Tr2SkinnedModel})},"./interior/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./interior/character/index.js");r.d(t,"Tr2IntSkinnedObject",function(){return n.Tr2IntSkinnedObject}),r.d(t,"Tr2SkinnedModel",function(){return n.Tr2SkinnedModel});var i=r("./interior/lighting/index.js");r.d(t,"Tr2InteriorLightSource",function(){return i.Tr2InteriorLightSource}),r.d(t,"Tr2KelvinColor",function(){return i.Tr2KelvinColor});var s=r("./interior/scene/index.js");r.d(t,"Tr2InteriorPlaceable",function(){return s.Tr2InteriorPlaceable}),r.d(t,"Tr2InteriorScene",function(){return s.Tr2InteriorScene}),r.d(t,"WodPlaceableRes",function(){return s.WodPlaceableRes});var a=r("./interior/Tr2Model.js");r.d(t,"Tr2Model",function(){return a.Tr2Model})},"./interior/lighting/Tr2InteriorLightSource.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorLightSource",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"color",n.vec4.create()),i(this,"coneAlphaInner",0),i(this,"coneAlphaOuter",0),i(this,"coneDirection",n.vec3.create()),i(this,"falloff",0),i(this,"importanceBias",0),i(this,"importanceScale",0),i(this,"kelvinColor",null),i(this,"position",n.vec3.create()),i(this,"radius",0),i(this,"useKelvinColor",!1)}static black(e){return[["color",e.vector4],["coneAlphaInner",e.float],["coneAlphaOuter",e.float],["coneDirection",e.vector3],["falloff",e.float],["importanceBias",e.float],["importanceScale",e.float],["kelvinColor",e.object],["name",e.string],["position",e.vector3],["radius",e.float],["useKelvinColor",e.boolean]]}}i(s,"__isStaging",4)},"./interior/lighting/Tr2KelvinColor.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2KelvinColor",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"temperature",0),i(this,"tint",0)}static black(e){return[["temperature",e.float],["tint",e.float]]}}i(s,"__isStaging",4)},"./interior/lighting/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./interior/lighting/Tr2InteriorLightSource.js");r.d(t,"Tr2InteriorLightSource",function(){return n.Tr2InteriorLightSource});var i=r("./interior/lighting/Tr2KelvinColor.js");r.d(t,"Tr2KelvinColor",function(){return i.Tr2KelvinColor})},"./interior/scene/Tr2InteriorPlaceable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorPlaceable",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"placeableResPath",""),i(this,"transform",null)}static black(e){return[["placeableResPath",e.string],["transform",e.object]]}}i(s,"__isStaging",4)},"./interior/scene/Tr2InteriorScene.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2InteriorScene",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"dynamics",[]),i(this,"lights",[])}static black(e){return[["dynamics",e.array],["lights",e.array]]}}i(s,"__isStaging",4)},"./interior/scene/WodPlaceableRes.js":function(e,t,r){"use strict";r.r(t),r.d(t,"WodPlaceableRes",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"farFadeDistance",0),i(this,"nearFadeDistance",0),i(this,"visualModel",null)}}},"./interior/scene/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./interior/scene/Tr2InteriorPlaceable.js");r.d(t,"Tr2InteriorPlaceable",function(){return n.Tr2InteriorPlaceable});var i=r("./interior/scene/Tr2InteriorScene.js");r.d(t,"Tr2InteriorScene",function(){return i.Tr2InteriorScene});var s=r("./interior/scene/WodPlaceableRes.js");r.d(t,"WodPlaceableRes",function(){return s.WodPlaceableRes})},"./particle/Tw2GpuParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuParticleSystem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"clear",null),i(this,"emit",null),i(this,"render",null),i(this,"setDrawParameters",null),i(this,"setSortParameters",null),i(this,"sort",null),i(this,"sortInner",null),i(this,"sortStep",null),i(this,"update",null)}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.clear&&this.clear.GetResources(e),this.emit&&this.emit.GetResources(e),this.render&&this.render.GetResources(e),this.setDrawParameters&&this.setDrawParameters.GetResources(e),this.setSortParameters&&this.setSortParameters.GetResources(e),this.sort&&this.sort.GetResources(e),this.sortInner&&this.sortInner.GetResources(e),this.sortStep&&this.sortStep.GetResources(e),this.update&&this.update.GetResources(e),e}static black(e){return[["clear",e.object],["emit",e.object],["render",e.object],["setDrawParameters",e.object],["setSortParameters",e.object],["sort",e.object],["sortInner",e.object],["sortStep",e.object],["update",e.object]]}}i(s,"__isStaging",4)},"./particle/Tw2ParticleSystem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleSystem",function(){return o});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./particle/element/index.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends n.Tw2BaseClass{constructor(){super(),a(this,"name",""),a(this,"applyAging",!0),a(this,"applyForce",!0),a(this,"constraints",[]),a(this,"elements",[]),a(this,"emitParticleDuringLifeEmitter",null),a(this,"emitParticleOnDeathEmitter",null),a(this,"forces",[]),a(this,"maxParticleCount",0),a(this,"requiresSorting",!1),a(this,"updateBoundingBox",!1),a(this,"updateSimulation",!0),a(this,"useSimTimeRebase",!1),a(this,"isGlobal",!1),a(this,"peakAliveCount",0),a(this,"_aabbMin",n.vec3.create()),a(this,"_aabbMax",n.vec3.create()),a(this,"_aliveCount",0),a(this,"_bufferDirty",!1),a(this,"_buffers",[null,null]),a(this,"_declaration",null),a(this,"_elements",[]),a(this,"_instanceStride",[null,null]),a(this,"_isValid",!1),a(this,"_distancesBuffer",null),a(this,"_sortedBuffer",null),a(this,"_sortedIndexes",null),a(this,"_stdElements",[null,null,null,null]),a(this,"_vb",null),a(this,"_vertexStride",[null,null]),o.init()}Initialize(){this.UpdateElementDeclaration()}GetResources(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}UpdateElementDeclaration(){this._isValid=!1;const e=n.device.gl;if(this._vb&&(e.deleteBuffer(this._vb),this._vb=null),this._declaration=null,this._aliveCount=0,0!==this.elements.length){this._stdElements=[null,null,null,null],this._elements=[],this._instanceStride=[0,0],this._vertexStride=[0,0],this._declaration=new i.Tw2VertexDeclaration,this._buffers=[null,null];for(let e=0;e<this.elements.length;++e){const t=this.elements[e].usedByGPU?0:1,r=this.elements[e],n=s.Tw2ParticleElement.from({elementType:r.elementType,customName:r.customName,dimension:r.GetDimension(),usageIndex:r.usageIndex,usedByGPU:r.usedByGPU});if(n.startOffset=this._vertexStride[t],n.offset=n.startOffset,this.elements[e].elementType!==s.Tw2ParticleElement.Type.CUSTOM&&(this._stdElements[this.elements[e].elementType]=n),this._vertexStride[t]+=n.dimension,this._elements.push(n),0===t){const t=this.elements[e].GetDeclaration();t.offset=4*n.startOffset,this._declaration.elements.push(t)}}this._declaration.RebuildHash();for(let e=0;e<this._elements.length;++e){const t=this._elements[e].usedByGPU?0:1;this._elements[e].vertexStride=this._vertexStride[t]}this._instanceStride[0]=4*this._vertexStride[0],this._instanceStride[1]=4*this._vertexStride[1];for(let e=0;e<this._elements.length;++e){const t=this._elements[e].usedByGPU?0:1;this._elements[e].instanceStride=this._instanceStride[t]}this._buffers=[null,null],this._instanceStride[0]&&this.maxParticleCount&&(this._buffers[0]=new Float32Array(this._instanceStride[0]*this.maxParticleCount),this._vb=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferData(e.ARRAY_BUFFER,this._buffers[0].length,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null)),this._instanceStride[1]&&(this._buffers[1]=new Float32Array(this._instanceStride[1]*this.maxParticleCount));for(let e=0;e<this._elements.length;++e){const t=this._elements[e].usedByGPU?0:1;this._elements[e].buffer=this._buffers[t]}this.requiresSorting&&(this._sortedIndexes=new Array(this.maxParticleCount),this._sortedBuffer=new Float32Array(this._instanceStride[0]*this.maxParticleCount),this._distancesBuffer=new Float32Array(this.maxParticleCount)),this._isValid=!0,this._bufferDirty=!0}}HasElement(e){return null!==this._stdElements[e]}GetElement(e){return this._stdElements[e]&&(this._stdElements[e].offset=this._stdElements[e].startOffset),this._stdElements[e]}BeginSpawnParticle(){return!this._isValid||this._aliveCount>=this.maxParticleCount?null:this._aliveCount++}EndSpawnParticle(){this._bufferDirty=!0}Update(e){if(e=Math.min(e,.1),this.applyAging&&this.HasElement(s.Tw2ParticleElement.Type.LIFETIME)){const t=this.GetElement(s.Tw2ParticleElement.Type.LIFETIME),r=this.emitParticleOnDeathEmitter?this.GetElement(s.Tw2ParticleElement.Type.POSITION):null,n=this.emitParticleOnDeathEmitter?this.GetElement(s.Tw2ParticleElement.Type.VELOCITY):null;for(let i=0;i<this._aliveCount;++i)if(t.buffer[t.offset]+=e/t.buffer[t.offset+1],t.buffer[t.offset]>1){if(this.emitParticleOnDeathEmitter&&this.emitParticleOnDeathEmitter.SpawnParticles(r,n,1),this._aliveCount--,i<this._aliveCount){for(let e=0;e<2;++e)this._buffers[e]&&this._buffers[e].set(this._buffers[e].subarray(this._instanceStride[e]*this._aliveCount,this._instanceStride[e]*this._aliveCount+this._instanceStride[e]),i*this._instanceStride[e]);--i,this._bufferDirty=!0}}else t.offset+=t.instanceStride,r&&(r.offset+=r.instanceStride),n&&(n.offset+=n.instanceStride);t.dirty=!0}const t=o.global.vec3_0;if(this.updateSimulation&&this.HasElement(s.Tw2ParticleElement.Type.POSITION)&&this.HasElement(s.Tw2ParticleElement.Type.VELOCITY)){const r=this.applyForce&&this.forces.length;for(let t=0;t<this.forces.length;++t)this.forces[t].Update(e);const i=this.GetElement(s.Tw2ParticleElement.Type.POSITION),a=this.GetElement(s.Tw2ParticleElement.Type.VELOCITY),o=r?this.GetElement(s.Tw2ParticleElement.Type.MASS):null;for(let s=0;s<this._aliveCount;++s){if(r){const r=o?o.buffer[o.offset]:1,s=n.vec3.set(t,0,0,0);for(let t=0;t<this.forces.length;++t)this.forces[t].ApplyForce(i,a,s,e,r);o&&n.vec3.scale(s,s,1/o.buffer[o.offset]),a.buffer[a.offset]+=s[0]*e,a.buffer[a.offset+1]+=s[1]*e,a.buffer[a.offset+2]+=s[2]*e}i.buffer[i.offset]+=a.buffer[a.offset]*e,i.buffer[i.offset+1]+=a.buffer[a.offset+1]*e,i.buffer[i.offset+2]+=a.buffer[a.offset+2]*e,this.emitParticleDuringLifeEmitter&&this.emitParticleDuringLifeEmitter.SpawnParticles(i,a,e),i.offset+=i.instanceStride,a.offset+=a.instanceStride,o&&(o.offset+=o.instanceStride)}i.dirty=!0,a.dirty=!0}if(this.updateSimulation&&this.constraints.length)for(let t=0;t<this.constraints.length;++t)this.constraints[t].ApplyConstraint(this._buffers,this._instanceStride,this._aliveCount,e);if(this.updateBoundingBox&&this.GetBoundingBox(this._aabbMin,this._aabbMax),this.emitParticleDuringLifeEmitter&&(!this.HasElement(s.Tw2ParticleElement.Type.POSITION)||!this.HasElement(s.Tw2ParticleElement.Type.VELOCITY))&&this.updateSimulation){const e=this.GetElement(s.Tw2ParticleElement.Type.POSITION),t=this.GetElement(s.Tw2ParticleElement.Type.VELOCITY);for(let r=0;r<this._aliveCount;++r)this.emitParticleDuringLifeEmitter.SpawnParticles(e,t,1),e&&(e.offset+=e.instanceStride),t&&(t.offset+=t.instanceStride)}for(let e=0;e<this._elements.length;++e){const t=this._elements[e];t.offset=t.startOffset,t.dirty&&(this._bufferDirty=!0,t.dirty=!1)}}GetBoundingBox(e,t){if(this._aliveCount&&this.HasElement(s.Tw2ParticleElement.Type.POSITION)){const r=this.GetElement(s.Tw2ParticleElement.Type.POSITION);e[0]=r.buffer[r.offset],e[1]=r.buffer[r.offset+1],e[2]=r.buffer[r.offset+2],t[0]=r.buffer[r.offset],t[1]=r.buffer[r.offset+1],t[2]=r.buffer[r.offset+2];for(let n=0;n<this._aliveCount;++n)e[0]=Math.min(e[0],r.buffer[r.offset]),e[1]=Math.min(e[1],r.buffer[r.offset+1]),e[2]=Math.min(e[2],r.buffer[r.offset+2]),t[0]=Math.max(t[0],r.buffer[r.offset]),t[1]=Math.max(t[1],r.buffer[r.offset+1]),t[2]=Math.max(t[2],r.buffer[r.offset+2]),r.offset+=r.instanceStride;return!0}return!1}_Sort(){const e=n.mat4.multiply(o.global.mat4_0,n.device.projection,n.device.view),t=this.GetElement(s.Tw2ParticleElement.Type.POSITION),r=this._aliveCount,i=this._distancesBuffer;for(let n=0;n<r;++n){const r=t.offset+t.instanceStride*n;let s=t.buffer[r]-e[12],a=s*s;a+=(s=t.buffer[r+1]-e[13])*s,a+=(s=t.buffer[r+2]-e[14])*s,i[n]=a}for(let e=0;e<this.maxParticleCount;++e)this._sortedIndexes[e]=e;this._sortedIndexes.sort(function(e,t){if(e>=r&&t>=r)return e<t?-1:e>t?1:0;if(e>=r)return 1;if(t>=r)return-1;const n=i[e],s=i[t];return n<s?1:n>s?-1:0})}GetInstanceBuffer(){if(0===this._aliveCount)return;const e=n.device.gl;if(this.requiresSorting&&this.HasElement(s.Tw2ParticleElement.Type.POSITION)&&this._buffers){this._Sort();const t=this._instanceStride[0],r=this._buffers[0];for(let e=0;e<this._aliveCount;++e){const n=e*t,i=this._sortedIndexes[e]*t;for(let e=0;e<t;++e)this._sortedBuffer[n+e]=r[e+i]}e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferSubData(e.ARRAY_BUFFER,0,this._sortedBuffer.subarray(0,this._vertexStride[0]*this._aliveCount)),this._bufferDirty=!1}else this._bufferDirty&&(e.bindBuffer(e.ARRAY_BUFFER,this._vb),e.bufferSubData(e.ARRAY_BUFFER,0,this._buffers[0].subarray(0,this._vertexStride[0]*this._aliveCount)),this._bufferDirty=!1);return this._vb}GetInstanceDeclaration(){return this._declaration}GetInstanceStride(){return this._instanceStride[0]}GetInstanceCount(){return this._aliveCount}static init(){o.global||(o.global={vec3_0:n.vec3.create(),mat4_0:n.mat4.create()})}static black(e){return[["constraints",e.array],["name",e.string],["applyAging",e.boolean],["applyForce",e.boolean],["elements",e.array],["emitParticleDuringLifeEmitter",e.object],["emitParticleOnDeathEmitter",e.object],["forces",e.array],["maxParticleCount",e.uint],["requiresSorting",e.boolean],["updateBoundingBox",e.boolean],["updateSimulation",e.boolean],["useSimTimeRebase",e.boolean]]}}a(o,"global",null)},"./particle/constraint/Tr2PlaneConstraint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2PlaneConstraint",function(){return s});var n=r("./particle/constraint/Tw2ParticleConstraint.js");r("./core/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2ParticleConstraint{constructor(){super(...arguments),i(this,"generators",[]),i(this,"reflectionNoise",0)}ApplyConstraint(e,t,r,n){}static black(e){return[["reflectionNoise",e.float],["generators",e.array]]}}i(s,"__isStaging",4)},"./particle/constraint/Tw2ParticleConstraint.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleConstraint",function(){return s});var n=r("./global/index.js"),i=r("./core/index.js");class s extends n.Tw2BaseClass{ApplyConstraint(e,t,r,n){throw new i.ErrAbstractClassMethod}}},"./particle/constraint/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/constraint/Tr2PlaneConstraint.js");r.d(t,"Tr2PlaneConstraint",function(){return n.Tr2PlaneConstraint})},"./particle/element/Tw2ParticleElement.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tw2ParticleElement",function(){return i});class i{constructor(){n(this,"elementType",null),n(this,"customName",null),n(this,"dimension",null),n(this,"usageIndex",null),n(this,"usedByGPU",null),n(this,"buffer",null),n(this,"startOffset",0),n(this,"offset",0),n(this,"instanceStride",0),n(this,"vertexStride",0),n(this,"dirty",!1)}get string(){return i.TypeMap[this.elementType]||"UNKNOWN"}static from(e){const t=new i;if(e){const r=e.elementType;t.elementType="string"==typeof r?this.Type[r.toUpperCase()]:r,t.customName=e.customName,t.dimension=e.dimension,t.usageIndex=e.usageIndex,t.usedByGPU=e.usedByGPU?1:0}return t}}n(i,"Type",{LIFETIME:0,POSITION:1,VELOCITY:2,MASS:3,CUSTOM:4}),n(i,"TypeMap",["LIFETIME","POSITION","VELOCITY","MASS","CUSTOM"])},"./particle/element/Tw2ParticleElementDeclaration.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleElementDeclaration",function(){return o});var n=r("./core/index.js"),i=r("./particle/element/Tw2ParticleElement.js"),s=r("./global/index.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.Tw2BaseClass{constructor(){super(...arguments),a(this,"customName",""),a(this,"dimension",1),a(this,"elementType",4),a(this,"usageIndex",0),a(this,"usedByGPU",!0)}GetDimension(){switch(this.elementType){case i.Tw2ParticleElement.Type.LIFETIME:return 2;case i.Tw2ParticleElement.Type.POSITION:case i.Tw2ParticleElement.Type.VELOCITY:return 3;case i.Tw2ParticleElement.Type.MASS:return 1}return this.dimension}GetDeclaration(){let e;switch(this.elementType){case i.Tw2ParticleElement.Type.LIFETIME:e=n.Tw2VertexElement.Type.TANGENT;break;case i.Tw2ParticleElement.Type.POSITION:e=n.Tw2VertexElement.Type.POSITION;break;case i.Tw2ParticleElement.Type.VELOCITY:e=n.Tw2VertexElement.Type.NORMAL;break;case i.Tw2ParticleElement.Type.MASS:e=n.Tw2VertexElement.Type.BINORMAL;break;default:e=n.Tw2VertexElement.Type.TEXCOORD}return n.Tw2VertexElement.from({usage:e,usageIndex:this.usageIndex,elements:this.GetDimension()})}static black(e){return[["customName",e.string],["dimension",e.uint],["elementType",e.uint],["usageIndex",e.uint],["usedByGPU",e.boolean]]}}},"./particle/element/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/element/Tw2ParticleElement.js");r.d(t,"Tw2ParticleElement",function(){return n.Tw2ParticleElement});var i=r("./particle/element/Tw2ParticleElementDeclaration.js");r.d(t,"Tw2ParticleElementDeclaration",function(){return i.Tw2ParticleElementDeclaration})},"./particle/emitter/Tr2GpuSharedEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuSharedEmitter",function(){return a});var n=r("./global/index.js"),i=r("./particle/emitter/Tw2ParticleEmitter.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2ParticleEmitter{constructor(){super(...arguments),s(this,"name",""),s(this,"angle",0),s(this,"attractorPosition",n.vec3.create()),s(this,"attractorStrength",0),s(this,"color0",n.vec4.create()),s(this,"color1",n.vec4.create()),s(this,"color2",n.vec4.create()),s(this,"color3",n.vec4.create()),s(this,"colorMidpoint",0),s(this,"continuousEmitter",!1),s(this,"direction",n.vec3.create()),s(this,"drag",0),s(this,"emissionDensity",0),s(this,"gravity",0),s(this,"inheritVelocity",0),s(this,"innerAngle",0),s(this,"maxDisplacement",0),s(this,"maxEmissionDensity",0),s(this,"maxLifeTime",0),s(this,"maxSpeed",0),s(this,"minLifeTime",0),s(this,"minSpeed",0),s(this,"particleSystem",null),s(this,"position",n.vec3.create()),s(this,"radius",0),s(this,"rate",0),s(this,"scaledByParent",!1),s(this,"sizeVariance",0),s(this,"sizes",n.vec3.create()),s(this,"textureIndex",0),s(this,"turbulenceAmplitude",0),s(this,"turbulenceFrequency",0),s(this,"velocityStretchRotation",0)}static black(e){return[["name",e.string],["particleSystem",e.object],["angle",e.float],["attractorPosition",e.vector3],["attractorStrength",e.float],["color0",e.vector4],["color1",e.vector4],["color2",e.vector4],["color3",e.vector4],["colorMidpoint",e.float],["continuousEmitter",e.boolean],["direction",e.vector3],["drag",e.float],["emissionDensity",e.float],["gravity",e.float],["maxDisplacement",e.float],["maxEmissionDensity",e.float],["maxLifeTime",e.float],["maxSpeed",e.float],["minLifeTime",e.float],["minSpeed",e.float],["position",e.vector3],["inheritVelocity",e.float],["innerAngle",e.float],["radius",e.float],["rate",e.float],["sizeVariance",e.float],["sizes",e.vector3],["scaledByParent",e.boolean],["textureIndex",e.uint],["turbulenceAmplitude",e.float],["turbulenceFrequency",e.float],["velocityStretchRotation",e.float]]}}s(a,"__isStaging",4)},"./particle/emitter/Tr2GpuUniqueEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2GpuUniqueEmitter",function(){return a});var n=r("./global/index.js"),i=r("./particle/emitter/Tw2ParticleEmitter.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2ParticleEmitter{constructor(){super(...arguments),s(this,"name",""),s(this,"angle",0),s(this,"attractorPosition",n.vec3.create()),s(this,"attractorStrength",0),s(this,"color0",n.vec4.create()),s(this,"color1",n.vec4.create()),s(this,"color2",n.vec4.create()),s(this,"color3",n.vec4.create()),s(this,"colorMidpoint",0),s(this,"continuousEmitter",!1),s(this,"direction",n.vec3.create()),s(this,"drag",0),s(this,"emissionDensity",0),s(this,"gravity",0),s(this,"inheritVelocity",0),s(this,"innerAngle",0),s(this,"maxDisplacement",0),s(this,"maxEmissionDensity",0),s(this,"maxLifeTime",0),s(this,"maxSpeed",0),s(this,"minLifeTime",0),s(this,"minSpeed",0),s(this,"particleSystem",null),s(this,"position",n.vec3.create()),s(this,"radius",0),s(this,"rate",0),s(this,"scaledByParent",!1),s(this,"sizeVariance",0),s(this,"sizes",n.vec3.create()),s(this,"textureIndex",0),s(this,"turbulenceAmplitude",0),s(this,"turbulenceFrequency",0),s(this,"velocityStretchRotation",0)}static black(e){return[["name",e.string],["particleSystem",e.object],["angle",e.float],["attractorPosition",e.vector3],["attractorStrength",e.float],["color0",e.vector4],["color1",e.vector4],["color2",e.vector4],["color3",e.vector4],["colorMidpoint",e.float],["continuousEmitter",e.boolean],["direction",e.vector3],["drag",e.float],["emissionDensity",e.float],["gravity",e.float],["maxDisplacement",e.float],["maxEmissionDensity",e.float],["maxLifeTime",e.float],["maxSpeed",e.float],["minLifeTime",e.float],["minSpeed",e.float],["position",e.vector3],["inheritVelocity",e.float],["innerAngle",e.float],["radius",e.float],["rate",e.float],["sizeVariance",e.float],["sizes",e.vector3],["scaledByParent",e.boolean],["textureIndex",e.uint],["turbulenceAmplitude",e.float],["turbulenceFrequency",e.float],["velocityStretchRotation",e.float]]}}s(a,"__isStaging",4)},"./particle/emitter/Tw2DynamicEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2DynamicEmitter",function(){return s});var n=r("./particle/emitter/Tw2ParticleEmitter.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2ParticleEmitter{constructor(){super(...arguments),i(this,"name",""),i(this,"generators",[]),i(this,"maxParticles",0),i(this,"particleSystem",null),i(this,"rate",0),i(this,"_accumulatedRate",0),i(this,"_isValid",!1)}Initialize(){this.Rebind()}Update(e){this.SpawnParticles(null,null,Math.min(e,.1))}Rebind(){if(this._isValid=!1,this.particleSystem){for(let e=0;e<this.generators.length;++e)if(!this.generators[e].Bind(this.particleSystem))return;this._isValid=!0}}SpawnParticles(e,t,r){if(!this._isValid)return;this._accumulatedRate+=this.rate*r;const n=Math.floor(this._accumulatedRate);this._accumulatedRate-=n;for(let r=0;r<n;++r){const r=this.particleSystem.BeginSpawnParticle();if(null===r)break;for(let n=0;n<this.generators.length;++n)this.generators[n].Generate(e,t,r);this.particleSystem.EndSpawnParticle()}}static black(e){return[["name",e.string],["particleSystem",e.object],["generators",e.array],["maxParticles",e.uint],["rate",e.float]]}}},"./particle/emitter/Tw2ParticleEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleEmitter",function(){return i});var n=r("./global/index.js");r("./core/index.js");class i extends n.Tw2BaseClass{constructor(){var e,t,r;super(...arguments),r=null,(t="particleSystem")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}Initialize(){}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.particleSystem&&this.particleSystem.GetResources(e),e}Update(e){}}},"./particle/emitter/Tw2StaticEmitter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2StaticEmitter",function(){return o});var n=r("./global/index.js"),i=r("./core/index.js"),s=r("./particle/emitter/Tw2ParticleEmitter.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.Tw2ParticleEmitter{constructor(){super(...arguments),a(this,"name",""),a(this,"geometryResourcePath",""),a(this,"meshIndex",0),a(this,"geometryResource",null),a(this,"_spawned",!1)}get geometryIndex(){return this.meshIndex}set geometryIndex(e){this.meshIndex=e}Initialize(){""!==this.geometryResourcePath&&(this.geometryResource=n.resMan.GetResource(this.geometryResourcePath),this.geometryResource.systemMirror=!0,this.geometryResource.RegisterNotification(this)),this._spawned=!1}GetResources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.particleSystem&&this.particleSystem.GetResources(e),this.geometryResource&&!e.includes(this.geometryResource)&&e.push(this.geometryResource),e}OnResPrepared(){this.geometryResource&&this.geometryResource.meshes.length&&(this.geometryResource.meshes[0].bufferData||(this.geometryResource.systemMirror=!0,this.geometryResource.Reload()))}Update(){const e=this.geometryResource;if(!this._spawned&&this.particleSystem&&e&&e.IsGood()&&e.meshes.length>this.meshIndex&&e.meshes[this.meshIndex].bufferData){this._spawned=!0;const t=e.meshes[this.meshIndex],r=this.particleSystem.elements,n=new Array(r.length);for(let s=0;s<r.length;++s){const a=r[s].GetDeclaration(),o=t.declaration.FindUsage(a.usage,a.usageIndex-8);if(null===o)return void e.OnError(new i.ErrGeometryMeshMissingParticleElement({path:e.path,elementUsage:a.usage,elementUsageIndex:a.usageIndex}));if(o.elements<a.elements)return void e.OnError(new i.ErrGeometryMeshElementComponentsMissing({path:e.path,inputCount:o.elements,elementCount:a.elements,elementUsage:a.usage,elementUsageIndex:a.usageIndex}));n[s]=o.offset/4}const s=t.bufferData.length/t.declaration.stride*4;for(let e=0;e<s;++e){const r=this.particleSystem.BeginSpawnParticle();if(null===r)break;for(let i=0;i<this.particleSystem._elements.length;++i){const s=this.particleSystem._elements[i];for(let a=0;a<s.dimension;++a)s.buffer[s.instanceStride*r+s.startOffset+a]=t.bufferData[n[i]+a+e*t.declaration.stride/4]}this.particleSystem.EndSpawnParticle()}}}static black(e){return[["name",e.string],["particleSystem",e.object],["geometryResourcePath",e.string],["meshIndex",e.uint]]}}},"./particle/emitter/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/emitter/Tr2GpuSharedEmitter.js");r.d(t,"Tr2GpuSharedEmitter",function(){return n.Tr2GpuSharedEmitter});var i=r("./particle/emitter/Tr2GpuUniqueEmitter.js");r.d(t,"Tr2GpuUniqueEmitter",function(){return i.Tr2GpuUniqueEmitter});var s=r("./particle/emitter/Tw2StaticEmitter.js");r.d(t,"Tw2StaticEmitter",function(){return s.Tw2StaticEmitter});var a=r("./particle/emitter/Tw2DynamicEmitter.js");r.d(t,"Tw2DynamicEmitter",function(){return a.Tw2DynamicEmitter})},"./particle/force/Tr2ForceSphereVolume.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ForceSphereVolume",function(){return a});var n=r("./particle/force/Tw2ParticleForce.js"),i=r("./core/index.js");r("./core/reader/Tw2BlackPropertyReaders.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends n.Tw2ParticleForce{constructor(){super(...arguments),s(this,"forces",[]),s(this,"radius",0)}ApplyForce(e,t,r,n,s){throw new i.ErrFeatureNotImplemented}Update(e){for(let t=0;t<this.forces.length;t++)this.forces[t].Update(e)}static black(e){return[["forces",e.array],["radius",e.float]]}}s(a,"__isStaging",4)},"./particle/force/Tr2ParticleVortexForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ParticleVortexForce",function(){return a});var n=r("./global/index.js"),i=r("./particle/force/Tw2ParticleForce.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2ParticleForce{constructor(){super(...arguments),s(this,"axis",n.vec3.create()),s(this,"magnitude",0),s(this,"position",n.vec3.create())}ApplyForce(e,t,r,n,i){}Update(e){}static black(e){return[["axis",e.vector3],["magnitude",e.float],["position",e.vector3]]}}s(a,"__isStaging",4)},"./particle/force/Tw2ParticleAttractorForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleAttractorForce",function(){return a});var n=r("./global/index.js"),i=r("./particle/force/Tw2ParticleForce.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2ParticleForce{constructor(){super(...arguments),s(this,"magnitude",0),s(this,"position",n.vec3.create())}ApplyForce(e,t,r,s,a){const o=i.Tw2ParticleForce.global.vec3_0;o[0]=this.position[0]-e.buffer[e.offset],o[1]=this.position[1]-e.buffer[e.offset+1],o[2]=this.position[2]-e.buffer[e.offset+2],n.vec3.normalize(o,o),n.vec3.scale(o,o,this.magnitude),n.vec3.add(r,r,o)}static black(e){return[["magnitude",e.float],["position",e.vector3]]}}},"./particle/force/Tw2ParticleDirectForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleDirectForce",function(){return s});var n=r("./global/index.js"),i=r("./particle/force/Tw2ParticleForce.js");class s extends i.Tw2ParticleForce{constructor(){var e,t,r;super(...arguments),e=this,t="force",r=n.vec3.create(),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}ApplyForce(e,t,r,i,s){n.vec3.add(r,r,this.force)}static black(e){return[["force",e.vector3]]}}},"./particle/force/Tw2ParticleDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleDragForce",function(){return i});var n=r("./particle/force/Tw2ParticleForce.js");class i extends n.Tw2ParticleForce{constructor(){var e,t,r;super(...arguments),r=.1,(t="drag")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}ApplyForce(e,t,r,n,i){r[0]+=t.buffer[t.offset]*-this.drag,r[1]+=t.buffer[t.offset+1]*-this.drag,r[2]+=t.buffer[t.offset+2]*-this.drag}static black(e){return[["drag",e.float]]}}},"./particle/force/Tw2ParticleFluidDragForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleFluidDragForce",function(){return s});var n=r("./global/index.js"),i=r("./particle/force/Tw2ParticleForce.js");class s extends i.Tw2ParticleForce{constructor(){var e,t,r;super(...arguments),r=.1,(t="drag")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}ApplyForce(e,t,r,s,a){const o=i.Tw2ParticleForce.global.vec3_0,u=i.Tw2ParticleForce.global.vec3_1,c=Math.sqrt(t.buffer[t.offset]*t.buffer[t.offset]+t.buffer[t.offset+1]*t.buffer[t.offset+1]+t.buffer[t.offset+2]*t.buffer[t.offset+2]);o[0]=t.buffer[t.offset]*-c*this.drag,o[1]=t.buffer[t.offset+1]*-c*this.drag,o[2]=t.buffer[t.offset+2]*-c*this.drag,n.vec3.scale(u,o,s*a),u[0]+=t.buffer[t.offset],u[1]+=t.buffer[t.offset+1],u[2]+=t.buffer[t.offset+2],t.buffer[t.offset]*u[0]+t.buffer[t.offset+1]*u[1]+t.buffer[t.offset+2]*u[2]<0?(r[0]=-t.buffer[t.offset]/s/a,r[1]=-t.buffer[t.offset+1]/s/a,r[2]=-t.buffer[t.offset+2]/s/a):n.vec3.copy(r,o)}static black(e){return[["drag",e.float]]}}},"./particle/force/Tw2ParticleForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleForce",function(){return u});var n,i,s,a=r("./global/index.js"),o=r("./core/index.js");class u extends a.Tw2BaseClass{ApplyForce(e,t,r,n,i){throw new o.ErrAbstractClassMethod}Update(e){}}n=u,i="global",s={vec3_0:a.vec3.create(),vec3_1:a.vec3.create(),vec4_0:a.vec4.create()},i in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./particle/force/Tw2ParticleSpring.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleSpring",function(){return a});var n=r("./global/index.js"),i=r("./particle/force/Tw2ParticleForce.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2ParticleForce{constructor(){super(...arguments),s(this,"springConstant",0),s(this,"position",n.vec3.create())}ApplyForce(e,t,r,n,i){r[0]+=(this.position[0]-e.buffer[e.offset])*this.springConstant,r[1]+=(this.position[1]-e.buffer[e.offset+1])*this.springConstant,r[2]+=(this.position[2]-e.buffer[e.offset+2])*this.springConstant}static black(e){return[["position",e.vector3],["springConstant",e.float]]}}},"./particle/force/Tw2ParticleTurbulenceForce.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleTurbulenceForce",function(){return a});var n=r("./global/index.js"),i=r("./particle/force/Tw2ParticleForce.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a extends i.Tw2ParticleForce{constructor(){super(...arguments),s(this,"amplitude",n.vec3.fromValues(1,1,1)),s(this,"frequency",n.vec4.fromValues(1,1,1,1)),s(this,"noiseLevel",3),s(this,"noiseRatio",.5),s(this,"_time",0)}ApplyForce(e,t,r,s,a){if(0===this.noiseLevel)return;let o=e.buffer[e.offset]*this.frequency[0],u=e.buffer[e.offset+1]*this.frequency[1],c=e.buffer[e.offset+2]*this.frequency[2],l=this._time*this.frequency[3],d=0,h=.5,f=1/this.noiseRatio;const m=n.vec4.set(i.Tw2ParticleForce.global.vec4_0,0,0,0,0);for(let e=0;e<this.noiseLevel;++e)n.noise.turbulence(m,o,u,c,l,h),d+=h,o*=f,u*=f,c*=f,l*=f,h*=this.noiseRatio;r[0]+=m[0]*this.amplitude[0]*d,r[1]+=m[1]*this.amplitude[1]*d,r[2]+=m[2]*this.amplitude[2]*d}Update(e){this._time+=e}static black(e){return[["amplitude",e.vector3],["frequency",e.vector4],["noiseLevel",e.float],["noiseRatio",e.float]]}}},"./particle/force/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/force/Tr2ForceSphereVolume.js");r.d(t,"Tr2ForceSphereVolume",function(){return n.Tr2ForceSphereVolume});var i=r("./particle/force/Tr2ParticleVortexForce.js");r.d(t,"Tr2ParticleVortexForce",function(){return i.Tr2ParticleVortexForce});var s=r("./particle/force/Tw2ParticleAttractorForce.js");r.d(t,"Tw2ParticleAttractorForce",function(){return s.Tw2ParticleAttractorForce});var a=r("./particle/force/Tw2ParticleDirectForce.js");r.d(t,"Tw2ParticleDirectForce",function(){return a.Tw2ParticleDirectForce});var o=r("./particle/force/Tw2ParticleDragForce.js");r.d(t,"Tw2ParticleDragForce",function(){return o.Tw2ParticleDragForce});var u=r("./particle/force/Tw2ParticleFluidDragForce.js");r.d(t,"Tw2ParticleFluidDragForce",function(){return u.Tw2ParticleFluidDragForce});var c=r("./particle/force/Tw2ParticleSpring.js");r.d(t,"Tw2ParticleSpring",function(){return c.Tw2ParticleSpring});var l=r("./particle/force/Tw2ParticleTurbulenceForce.js");r.d(t,"Tw2ParticleTurbulenceForce",function(){return l.Tw2ParticleTurbulenceForce})},"./particle/generators/Tw2ParticleAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2ParticleAttributeGenerator",function(){return u});var n,i,s,a=r("./global/index.js"),o=r("./core/index.js");class u extends a.Tw2BaseClass{Bind(e){throw new o.ErrAbstractClassMethod}Generate(e,t,r){throw new o.ErrAbstractClassMethod}}n=u,i="global",s={vec3_0:a.vec3.create()},i in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./particle/generators/Tw2RandomIntegerAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomIntegerAttributeGenerator",function(){return o});var n=r("./global/index.js"),i=r("./particle/element/Tw2ParticleElement.js"),s=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.Tw2ParticleAttributeGenerator{constructor(){super(...arguments),a(this,"customName",""),a(this,"elementType",i.Tw2ParticleElement.Type.CUSTOM),a(this,"minRange",n.vec4.create()),a(this,"maxRange",n.vec4.create()),a(this,"_element",null)}Bind(e){for(let t=0;t<e._elements.length;++t)if(e._elements[t].elementType===this.elementType&&(this.elementType!==i.Tw2ParticleElement.Type.CUSTOM||e._elements[t].customName===this.customName))return this._element=e._elements[t],!0;return!1}Generate(e,t,r){for(let e=0;e<this._element.dimension;++e)this._element.buffer[this._element.instanceStride*r+this._element.startOffset+e]=Math.floor(this.minRange[e]+Math.random()*(this.maxRange[e]-this.minRange[e])+.5)}static black(e){return[["customName",e.string],["minRange",e.vector4],["maxRange",e.vector4]]}}},"./particle/generators/Tw2RandomUniformAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2RandomUniformAttributeGenerator",function(){return o});var n=r("./global/index.js"),i=r("./particle/element/Tw2ParticleElement.js"),s=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.Tw2ParticleAttributeGenerator{constructor(){super(...arguments),a(this,"customName",""),a(this,"elementType",i.Tw2ParticleElement.Type.CUSTOM),a(this,"minRange",n.vec4.create()),a(this,"maxRange",n.vec4.create()),a(this,"_element",null)}Bind(e){for(let t=0;t<e._elements.length;++t)if(e._elements[t].elementType===this.elementType&&(this.elementType!==i.Tw2ParticleElement.Type.CUSTOM||e._elements[t].customName===this.customName))return this._element=e._elements[t],!0;return!1}Generate(e,t,r){for(let e=0;e<this._element.dimension;++e)this._element.buffer[this._element.instanceStride*r+this._element.startOffset+e]=this.minRange[e]+Math.random()*(this.maxRange[e]-this.minRange[e])}static black(e){return[["customName",e.string],["elementType",e.uint],["minRange",e.vector4],["maxRange",e.vector4]]}}},"./particle/generators/Tw2SphereShapeAttributeGenerator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tw2SphereShapeAttributeGenerator",function(){return o});var n=r("./global/index.js"),i=r("./particle/element/Tw2ParticleElement.js"),s=r("./particle/generators/Tw2ParticleAttributeGenerator.js");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends s.Tw2ParticleAttributeGenerator{constructor(){super(...arguments),a(this,"customName",""),a(this,"distributionExponent",0),a(this,"maxPhi",360),a(this,"maxRadius",0),a(this,"maxSpeed",0),a(this,"maxTheta",360),a(this,"minPhi",0),a(this,"minRadius",0),a(this,"minSpeed",0),a(this,"minTheta",0),a(this,"parentVelocityFactor",1),a(this,"position",n.vec3.create()),a(this,"rotation",n.quat.create()),a(this,"controlPosition",!0),a(this,"controlVelocity",!0),a(this,"_position",null),a(this,"_velocity",null)}Bind(e){this._position=null,this._velocity=null;for(let t=0;t<e._elements.length;++t)e._elements[t].elementType===i.Tw2ParticleElement.Type.POSITION&&this.controlPosition?this._position=e._elements[t]:e._elements[t].elementType===i.Tw2ParticleElement.Type.VELOCITY&&this.controlVelocity&&(this._velocity=e._elements[t]);return!(this.controlPosition&&null===this._position||this.controlVelocity&&null===this._velocity)}Generate(e,t,r){const i=(this.minPhi+Math.random()*(this.maxPhi-this.minPhi))/180*Math.PI,a=(this.minTheta+Math.random()*(this.maxTheta-this.minTheta))/180*Math.PI,o=s.Tw2ParticleAttributeGenerator.global.vec3_0;if(o[0]=Math.sin(i)*Math.cos(a),o[1]=-Math.cos(i),o[2]=Math.sin(i)*Math.sin(a),n.vec3.transformQuat(o,o,this.rotation),this._velocity){const e=this.minSpeed+Math.random()*(this.maxSpeed-this.minSpeed),n=this._velocity.instanceStride*r+this._velocity.startOffset;this._velocity.buffer[n]=o[0]*e,this._velocity.buffer[n+1]=o[1]*e,this._velocity.buffer[n+2]=o[2]*e,t&&(this._velocity.buffer[n]+=t.buffer[t.offset]*this.parentVelocityFactor,this._velocity.buffer[n+1]+=t.buffer[t.offset+1]*this.parentVelocityFactor,this._velocity.buffer[n+2]+=t.buffer[t.offset+2]*this.parentVelocityFactor)}if(this._position){n.vec3.scale(o,o,this.minRadius+Math.random()*(this.maxRadius-this.minRadius)),n.vec3.add(o,o,this.position),e&&(o[0]+=e.buffer[e.offset],o[1]+=e.buffer[e.offset+1],o[2]+=e.buffer[e.offset+2]);const t=this._position.instanceStride*r+this._position.startOffset;this._position.buffer[t]=o[0],this._position.buffer[t+1]=o[1],this._position.buffer[t+2]=o[2]}}static black(e){return[["customName",e.string],["distributionExponent",e.float],["maxPhi",e.float],["maxRadius",e.float],["maxSpeed",e.float],["maxTheta",e.float],["minPhi",e.float],["minRadius",e.float],["minSpeed",e.float],["minTheta",e.float],["parentVelocityFactor",e.float],["position",e.vector3],["rotation",e.vector4]]}}a(o,"__isStaging",1)},"./particle/generators/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/generators/Tw2RandomIntegerAttributeGenerator.js");r.d(t,"Tw2RandomIntegerAttributeGenerator",function(){return n.Tw2RandomIntegerAttributeGenerator});var i=r("./particle/generators/Tw2RandomUniformAttributeGenerator.js");r.d(t,"Tw2RandomUniformAttributeGenerator",function(){return i.Tw2RandomUniformAttributeGenerator});var s=r("./particle/generators/Tw2SphereShapeAttributeGenerator.js");r.d(t,"Tw2SphereShapeAttributeGenerator",function(){return s.Tw2SphereShapeAttributeGenerator})},"./particle/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./particle/constraint/index.js");r.d(t,"Tr2PlaneConstraint",function(){return n.Tr2PlaneConstraint});var i=r("./particle/element/index.js");r.d(t,"Tw2ParticleElement",function(){return i.Tw2ParticleElement}),r.d(t,"Tw2ParticleElementDeclaration",function(){return i.Tw2ParticleElementDeclaration});var s=r("./particle/emitter/index.js");r.d(t,"Tr2GpuSharedEmitter",function(){return s.Tr2GpuSharedEmitter}),r.d(t,"Tr2GpuUniqueEmitter",function(){return s.Tr2GpuUniqueEmitter}),r.d(t,"Tw2StaticEmitter",function(){return s.Tw2StaticEmitter}),r.d(t,"Tw2DynamicEmitter",function(){return s.Tw2DynamicEmitter});var a=r("./particle/force/index.js");r.d(t,"Tr2ForceSphereVolume",function(){return a.Tr2ForceSphereVolume}),r.d(t,"Tr2ParticleVortexForce",function(){return a.Tr2ParticleVortexForce}),r.d(t,"Tw2ParticleAttractorForce",function(){return a.Tw2ParticleAttractorForce}),r.d(t,"Tw2ParticleDirectForce",function(){return a.Tw2ParticleDirectForce}),r.d(t,"Tw2ParticleDragForce",function(){return a.Tw2ParticleDragForce}),r.d(t,"Tw2ParticleFluidDragForce",function(){return a.Tw2ParticleFluidDragForce}),r.d(t,"Tw2ParticleSpring",function(){return a.Tw2ParticleSpring}),r.d(t,"Tw2ParticleTurbulenceForce",function(){return a.Tw2ParticleTurbulenceForce});var o=r("./particle/generators/index.js");r.d(t,"Tw2RandomIntegerAttributeGenerator",function(){return o.Tw2RandomIntegerAttributeGenerator}),r.d(t,"Tw2RandomUniformAttributeGenerator",function(){return o.Tw2RandomUniformAttributeGenerator}),r.d(t,"Tw2SphereShapeAttributeGenerator",function(){return o.Tw2SphereShapeAttributeGenerator});var u=r("./particle/Tw2GpuParticleSystem.js");r.d(t,"Tr2GpuParticleSystem",function(){return u.Tr2GpuParticleSystem});var c=r("./particle/Tw2ParticleSystem.js");r.d(t,"Tw2ParticleSystem",function(){return c.Tw2ParticleSystem})},"./sof/EveSOF.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOF",function(){return u});var n=r("./global/index.js"),i=r("./global/util/index.js"),s=r("./curve/index.js"),a=r("./core/index.js"),o=r("./eve/index.js");function u(e){const t=this;var r=null,u=null;function c(e){return e?Object(i.get)(r.generic,"shaderPrefixAnimated",""):Object(i.get)(r.generic,"shaderPrefix","")}function l(e,t,r,n,s){var a=null;if(Object(i.get)(n,"resPathInsert","").length&&(a=n.resPathInsert),"respathinsert"in s&&1===s.respathinsert.length){if("none"===s.respathinsert[0])return e;a=s.respathinsert[0]}if("MaterialMap"===t||"PaintMaskMap"===t||"PmdgMap"===t){var o=e.lastIndexOf("/"),u=e;if(o>=0&&(u=e.substr(0,o+1)+a+"/"+e.substr(o+1)),(o=u.lastIndexOf("_"))>=0){u=u.substr(0,o)+"_"+a+u.substr(o);var c=Object(i.get)(r,"textureOverrides",{});if(t in c&&n.name in c[t])return u}}return e}function d(e,t){for(var r=0;r<e.length;++r)if(t.substr(0,e[r].length)===e[r])return r;return null}function h(e,t,n,s){var a,o,u,c;return"mesh"in n&&null!==(o=d(a=r.generic.materialPrefixes,e))&&o<n.mesh.length&&0==(Object(i.get)(t,"blockedMaterials",0)&1<<o)&&(u=Object(i.get)(r.material,n.mesh[o],null))?(c=e.substr(a[o].length),Object(i.get)(u.parameters,c,void 0)):(o=d(a=r.generic.patternMaterialPrefixes,e),"pattern"in n&&null!==o&&1+o<n.pattern.length&&(u=Object(i.get)(r.material,n.pattern[1+o],null))?(c=e.substr(a[o].length),Object(i.get)(u.parameters,c,void 0)):null!==o&&(u=Object(i.get)(r.material,s.defaultPatternLayer1MaterialName,null))?(c=e.substr(a[o].length),Object(i.get)(u.parameters,c,void 0)):void 0)}function f(e){switch(e){case 2:return 4;case 1:return 3;default:return 1}}function m(e,t,n,s,o,u,d,m){for(var v,p,E,_,g=Object(i.get)(n,t,[]),S=0;S<g.length;++S){var T=g[S],b=new a.Tw2Effect;b.effectFilePath=r.generic.areaShaderLocation+(v=m||T.shader,p=n.isSkinned,E=void 0,_=void 0,E=c(p),_=(v="/"+v).lastIndexOf("/"),v.substr(0,_+1)+E+v.substr(_+1));for(var R=Object(i.get)(Object(i.get)(r.generic.areaShaders,T.shader,{}),"parameters",[]),j=0;j<R.length;++j){var y=R[j],A=h(y,T,d,o);(A=(A=(A=(A=A||Object(i.get)(Object(i.get)(Object(i.get)(r.generic.hullAreas,T.name,{}),"parameters",{}),y))||Object(i.get)(Object(i.get)(Object(i.get)(o.hullAreas,T.name,{}),"parameters",{}),y))||Object(i.get)(Object(i.get)(Object(i.get)(s.areas,T.name,{}),"parameters",{}),y))||Object(i.get)(Object(i.get)(T,"parameters",{}),y))&&(b.parameters[y]=new a.Tw2Vector4Parameter(y,A))}var w=Object(i.get)(T,"textures",[]);for(j in w)if(w.hasOwnProperty(j)){var P=w[j];P=l(P,j,T,s,d),b.parameters[j]=new a.Tw2TextureParameter(j,P)}for(j=0;j<u.layers.length;++j)if(u.layers[j]&&!(u.layers[j].textureName in b.parameters)){var O=new a.Tw2TextureParameter(u.layers[j].textureName);O.resourcePath=u.layers[j].textureResFilePath,O.useAllOverrides=!0,O.addressUMode=f(Object(i.get)(u.layers[j],"projectionTypeU",0)),O.addressVMode=f(Object(i.get)(u.layers[j],"projectionTypeV",0)),O.Initialize(),b.parameters[u.layers[j].textureName]=O}var C=Object(i.get)(Object(i.get)(r.generic.areaShaders,T.shader,{}),"defaultTextures",{});for(var D in C)C.hasOwnProperty(D)&&(D in b.parameters||(b.parameters[D]=new a.Tw2TextureParameter(D,C[D])));b.Initialize();var L=new a.Tw2MeshArea;L.name=T.name,L.effect=b,L.index=Object(i.get)(T,"index",0),L.count=Object(i.get)(T,"count",1),e.push(L)}}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(!e)return null;const r="group".concat(t);return e[r]?e[r]:null}this.SKIP_EMPTY_ITEMS=!0;const p="res:/graphics/effect/managed/space/spaceobject/fx/spotlightcone.fx",E="res:/graphics/effect/managed/space/spaceobject/fx/skinned_spotlightcone.fx",_="res:/graphics/effect/managed/space/spaceobject/fx/spotlightglow.fx",g="res:/graphics/effect/managed/space/spaceobject/fx/skinned_spotlightglow.fx";const S="res:/graphics/effect/managed/space/spaceobject/fx/planeglow.fx",T="res:/graphics/effect/managed/space/spaceobject/fx/skinned_planeglow.fx";const b="res:/Graphics/Effect/Managed/Space/Booster/BoosterVolumetric.fx",R="res:/Graphics/Effect/Managed/Space/Booster/BoosterGlowAnimated.fx",j="res:/Texture/global/noise.dds.0.png",y="res:/Texture/Global/noise32cube_volume.dds.0.png",A="res:/Texture/Particle/whitesharp.dds.0.png";function w(t,r,a,o){function u(r){return function(u){u.constructor.__isEffectChild?t.effectChildren.push(u):t.children.push(u),n.vec3.copy(u.translation,Object(i.get)(r,"translation",[0,0,0])),n.quat.copy(u.rotation,Object(i.get)(r,"rotation",[0,0,0,1])),n.vec3.copy(u.scaling,Object(i.get)(r,"scaling",[1,1,1]));var c=Object(i.get)(r,"id",-1);-1!==c&&o[c]&&function t(r,n,i){if(Array.isArray(r.particleEmitters)){for(var a=0;a<r.particleEmitters.length;++a)if("rate"in r.particleEmitters[a]){var o=new s.Tw2ValueBinding;o.sourceObject=i,o.sourceAttribute="currentValue",o.destinationObject=r.particleEmitters[a],o.destinationAttribute="rate",o.Initialize(),n.bindings.push(o)}for(a=0;a<r.children.length;++a)t(r.children[a],n,i)}else e.Log({type:"warning",name:"Space object factory",message:"Unable to bind particle emitters: ".concat(r.constructor.name)})}(u,a,o[c])}}const c=Object(i.get)(r,"children",[]);for(let t=0;t<c.length;++t){const n=c[t].redFilePath;n?e.GetObject(n,u(c[t])):e.Log({type:"warning",name:"Space object factory",message:'No resource path found for "'.concat(r.name,'" child at index ').concat(t)})}}function P(e){for(var l=e.split(":"),d={},h=3;h<l.length;++h){var f=l[h].split("?");d[f[0]]=f[1].split(";")}var P=r.hull[l[0]],O=r.faction[l[1]],C=r.race[l[2]],D=new(2===Object(i.get)(P,"buildClass",0)?o.EveSpaceObject:o.EveShip),L=function(e,t,n){var s={patterns:[],layers:[]};if("pattern"in n){for(var a={},o=0;o<r.pattern.length;++o)if(r.pattern[o].name===n.pattern[0]){a=r.pattern[o];break}var u=Object(i.get)(a,"layer1",null);u&&s.layers.push(u),(u=Object(i.get)(a,"layer2",null))&&s.layers.push(u);for(var c=Object(i.get)(a,"projections",[]),l=0;l<c.length;++l)c[l].name===e.name&&(a=c[l],(u=Object(i.get)(a,"transformLayer1",null))&&s.patterns.push(u),(u=Object(i.get)(a,"transformLayer2",null))&&s.patterns.push(u))}else Object(i.get)(e,"defaultPattern")&&(a=Object(i.get)(e,"defaultPattern",{}),(u=Object(i.get)(a,"transformLayer1",null))&&s.patterns.push(u),(u=Object(i.get)(a,"transformLayer2",null))&&s.patterns.push(u),a=Object(i.get)(t,"defaultPattern",{}),(u=Object(i.get)(a,"layer1",null))&&s.layers.push(u),(u=Object(i.get)(a,"layer2",null))&&s.layers.push(u));return s}(P,C,d);!function(e,t,r,n,s,o){var u=new a.Tw2Mesh;u.geometryResPath=t.geometryResFilePath,e.boundingSphereCenter[0]=t.boundingSphere[0],e.boundingSphereCenter[1]=t.boundingSphere[1],e.boundingSphereCenter[2]=t.boundingSphere[2],e.boundingSphereRadius=t.boundingSphere[3],m(Object(i.get)(u,"opaqueAreas",[]),"opaqueAreas",t,r,n,o,s),m(Object(i.get)(u,"transparentAreas",[]),"transparentAreas",t,r,n,o,s),m(Object(i.get)(u,"additiveAreas",[]),"additiveAreas",t,r,n,o,s),m(Object(i.get)(u,"decalAreas",[]),"decalAreas",t,r,n,o,s),m(Object(i.get)(u,"depthAreas",[]),"depthAreas",t,r,n,o,s),u.Initialize(),e.mesh=u,"shapeEllipsoidCenter"in t&&(e.shapeEllipsoidCenter=t.shapeEllipsoidCenter),"shapeEllipsoidRadius"in t&&(e.shapeEllipsoidRadius=t.shapeEllipsoidRadius)}(D,P,O,C,d,L),function(e,t){for(var r=0;r<t.patterns.length;++r)if(t.patterns[r]&&t.layers[r]){var s=t.patterns[r],a=t.layers[r];e.AddCustomMask(Object(i.get)(s,"position",n.vec3.create()),Object(i.get)(s,"scaling",n.vec3.fromValues(1,1,1)),Object(i.get)(s,"rotation",n.quat.create()),Object(i.get)(s,"isMirrored",!1),Object(i.get)(a,"materialSource",0),n.vec4.fromValues(Object(i.get)(a,"isTargetMtl1",!0)?1:0,Object(i.get)(a,"isTargetMtl2",!0)?1:0,Object(i.get)(a,"isTargetMtl3",!0)?1:0,Object(i.get)(a,"isTargetMtl4",!0)?1:0))}}(D,L),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Object(i.get)(t,"hullDecals",[]);for(let t=0;t<s.length;++t){const a=s[t],u=v(n.decals,a.groupIndex);if(u&&!u.isVisible)continue;const l=u&&u.shader||a.shader;if(!l)continue;const d=r.generic.decalShaderLocation+"/"+c(!1)+l,h=Object.assign({},a.parameters),f=Object.assign(Object(i.get)(Object(i.get)(r.generic.decalShaders,a.shader,{}),"defaultTextures",{}));u&&(Object.assign(h,u.parameters),Object.assign(f,u.textures)),Object.assign(f,a.textures),e.decals.push(o.EveSpaceObjectDecal.from({name:a.name,groupIndex:a.groupIndex,parentBoneIndex:a.boneIndex,indexBuffer:a.indexBuffer,position:a.position,rotation:a.rotation,scaling:a.scaling,effect:{effectFilePath:d,parameters:h,textures:f}}))}}(D,P,O),function(e,r,s){const a=Object(i.get)(r,"spriteSets",[]),c=Object(i.get)(s,"spriteSets",{});for(let s=0;s<a.length;++s){const l=a[s],d=Object(i.get)(l,"items",[]),h=[];for(let e=0;e<d.length;e++){const r=Object.assign({blinkRate:.1,maxScale:10,minScale:1},d[e]),s=v(c,r.groupIndex);s&&(r.groupName=s.name,Object(i.assignIfExists)(r,s,"color")),(!t.SKIP_EMPTY_ITEMS||r.color&&!n.vec3.isEmpty(r.color))&&h.push(r)}t.SKIP_EMPTY_ITEMS&&!h.length||e.spriteSets.push(o.EveSpriteSet.from({name:l.name,useQuads:!0,skinned:!(!r.isSkinned||!l.skinned),effect:u,items:h}))}}(D,P,O),function(e,r,n){const s=Object(i.get)(r,"spotlightSets",[]),a=Object(i.get)(n,"spotlightSets",{});for(let r=0;r<s.length;++r){const n=s[r],u=Object(i.get)(n,"items",[]),c=n.skinned,l=[];for(let e=0;e<u.length;++e){const r=Object.assign({},u[e]),n=v(a,r.groupIndex);n&&Object(i.assignIfExists)(r,n,["coneColor","spriteColor","flareColor"]),t.SKIP_EMPTY_ITEMS&&!n||l.push(r)}t.SKIP_EMPTY_ITEMS&&!l.length||e.spotlightSets.push(o.EveSpotlightSet.from({name:n.name,items:l,coneEffect:{effectFilePath:c?E:p,parameters:{TextureMap:n.coneTextureResPath,zOffset:Object(i.get)(n,"zOffset",0)}},glowEffect:{effectFilePath:c?g:_,parameters:{TextureMap:n.glowTextureResPath}}}))}}(D,P,O),function(e,r,s){const a=Object(i.get)(r,"planeSets",[]),u=Object(i.get)(s,"planeSets",{});for(let r=0;r<a.length;++r){const s=a[r],c=Object(i.get)(s,"items",[]),l=[];for(let e=0;e<c.length;++e){const r=Object.assign({boneIndex:-1},c[e]),s=v(u,r.groupIndex);s&&Object(i.assignIfExists)(r,s,"color"),(!t.SKIP_EMPTY_ITEMS||r.color&&!n.vec3.isEmpty(r.color))&&l.push(r)}t.SKIP_EMPTY_ITEMS&&!l.length||e.planeSets.push(o.EvePlaneSet.from({name:s.name,items:l,effect:{effectFilePath:s.skinned?T:S,textures:{Layer1Map:s.layer1MapResPath,Layer2Map:s.layer2MapResPath,MaskMap:s.maskMapResPath,PlaneData:Object(i.get)(s,"planeData",[1,0,0,0])}}}))}}(D,P,O),function(e,t,r){if(!t.booster)return;const n=[0,0,0,0],s=Object(i.get)(r,"booster",{}),a=t.booster,u=Object(i.get)(a,"items",[]);for(let t=0;t<u.length;++t)e.locators.push(o.EveLocator2.from({name:"locator_booster_"+(t+1),transform:u[t].transform,atlasIndex0:Object(i.get)(u[t],"atlasIndex0",0),atlasIndex1:Object(i.get)(u[t],"atlasIndex1",0)}));e.boosters=o.EveBoosterSet.from({glowScale:s.glowScale,symHaloScale:s.symHaloScale,haloScaleX:s.haloScaleX,haloScaleY:s.haloScaleY,haloColor:s.haloColor,glowColor:s.glowColor,warpGlowColor:s.warpGlowColor,warpHaloColor:s.warpHalpColor,trailColor:s.trailColor,trailSize:s.trailSize,effect:{effectFilePath:b,parameters:{NoiseFunction0:Object(i.get)(s.shape0,"noiseFunction",0),NoiseSpeed0:Object(i.get)(s.shape0,"noiseSpeed",0),NoiseAmplitudeStart0:Object(i.get)(s.shape0,"noiseAmplitureStart",n),NoiseAmplitudeEnd0:Object(i.get)(s.shape0,"noiseAmplitureEnd",n),NoiseFrequency0:Object(i.get)(s.shape0,"noiseFrequency",n),Color0:Object(i.get)(s.shape0,"color",n),NoiseFunction1:Object(i.get)(s.shape1,"noiseFunction",0),NoiseSpeed1:Object(i.get)(s.shape1,"noiseSpeed",0),NoiseAmplitudeStart1:Object(i.get)(s.shape1,"noiseAmplitureStart",n),NoiseAmplitudeEnd1:Object(i.get)(s.shape1,"noiseAmplitureEnd",n),NoiseFrequency1:Object(i.get)(s.shape1,"noiseFrequency",n),Color1:Object(i.get)(s.shape1,"color",n),WarpNoiseFunction0:Object(i.get)(s.warpShape0,"noiseFunction",0),WarpNoiseSpeed0:Object(i.get)(s.warpShape0,"noiseSpeed",0),WarpNoiseAmplitudeStart0:Object(i.get)(s.warpShape0,"noiseAmplitureStart",n),WarpNoiseAmplitudeEnd0:Object(i.get)(s.warpShape0,"noiseAmplitureEnd",n),WarpNoiseFrequency0:Object(i.get)(s.warpShape0,"noiseFrequency",n),WarpColor0:Object(i.get)(s.warpShape0,"color",n),WarpNoiseFunction1:Object(i.get)(s.warpShape1,"noiseFunction",0),WarpNoiseSpeed1:Object(i.get)(s.warpShape1,"noiseSpeed",0),WarpNoiseAmplitudeStart1:Object(i.get)(s.warpShape1,"noiseAmplitureStart",n),WarpNoiseAmplitudeEnd1:Object(i.get)(s.warpShape1,"noiseAmplitureEnd",n),WarpNoiseFrequency1:Object(i.get)(s.warpShape1,"noiseFrequency",n),WarpColor1:Object(i.get)(s.warpShape1,"color",n),ShapeAtlasSize:[Object(i.get)(s,"shapeAtlasHeight",0),Object(i.get)(s,"shapeAtlasCount",0),0,0],BoosterScale:Object(i.get)(s,"scale",[1,1,1,1])},textures:{ShapeMap:s.shapeAtlasResPath,GradientMap0:s.gradient0ResPath,GradientMap1:s.gradient1ResPath,NoiseMap:y}},glows:{useQuads:!0,effect:{effectFilePath:R,textures:{DiffuseMap:A,NoiseMap:j}}}})}(D,P,C),function(e,t){const r=Object(i.get)(t,"locatorTurrets",[]);for(let t=0;t<r.length;++t)e.locators.push(o.EveLocator2.from(r[t]))}(D,P);var x=function(e,t){for(var r=[],n=null,a=Object(i.get)(t,"animations",[]),o=0;o<a.length;++o)if(-1!==Object(i.get)(a[o],"id",-1)&&-1!==Object(i.get)(a[o],"startRate",-1)){n||(n=new s.Tw2CurveSet);var u=new s.Tw2ScalarCurve2;u.keys.push(new s.Tw2ScalarKey2),u.keys.push(new s.Tw2ScalarKey2),u.keys[0].value=Object(i.get)(a[o],"startRate",-1),u.keys[1].time=1,u.keys[1].value=Object(i.get)(a[o],"endRate",-1),u.Initialize(),n.curves.push(u),e.curveSets.push(n),r[Object(i.get)(a[o],"id",-1)]=u}return n&&n.Initialize(),[n,r]}(D,P);return w(D,P,x[0],x[1]),function(e,t,r,n,s,u){for(var c=Object(i.get)(t,"instancedMeshes",[]),l=0;l<c.length;++l){var d=c[l],h=new a.Tw2InstancedMesh;h.instanceGeometryResPath=d.instanceGeometryResPath,h.geometryResPath=d.geometryResPath,h.Initialize(),m(Object(i.get)(h,"opaqueAreas",[]),"opaqueAreas",t,r,n,u,s,d.shader);var f=new o.EveChildMesh;f.mesh=h,e.effectChildren.push(f)}}(D,P,O,C,d,L),D.Initialize(),D}function O(e,t,n){for(var s=-1,a=0;a<r.generic.materialPrefixes.length;++a)e.substr(0,r.generic.materialPrefixes[a].length)===r.generic.materialPrefixes[a]&&(s=a,e=e.substr(r.generic.materialPrefixes[a].length));if(-1!==s){var o=Object(i.get)(t,"materialUsageMtl"+(s+1),s);if(o>=0&&o<r.generic.materialPrefixes.length&&(e=r.generic.materialPrefixes[o]+e)in n.parameters)return n.parameters[e]}}var C=[0,0,0,0];function D(e,t,r,n){switch(n){case"overridable":return t||(r||C);case"half_overridable":return e.indexOf("GlowColor")>=0?r||C:t||(r||C);case"not_overridable":case"half_overridable_2":return r||C}return C}this.SetupTurretMaterialAsync=function(e,t,i){return this.GetData().then(()=>(function(e,t,i){var s=r.faction[t],o=r.faction[i],u=null;s&&s.areas&&"hull"in s.areas&&(u=s.areas.hull);var c=null;if(o&&o.areas&&"hull"in o.areas&&(c=o.areas.hull),(u||c)&&e.turretEffect){var l=e.turretEffect.parameters;for(var d in l)if(l.hasOwnProperty(d)){if(l[d].constructor.prototype!==a.Tw2Vector4Parameter.prototype)continue;var h=null,f=null;u&&(h=O(d,s,u)),c&&(f=O(d,s,u)),n.vec4.copy(l[d].value,D(d,h,f,e.turretEffect.name))}e.turretEffect.BindParameters()}}(e,t,i),e))},this.SetupTurretMaterial=function(e,t,r,n,i){return this.SetupTurretMaterialAsync(e,t,r).then(n).catch(i)};let L=null;function x(e,r){return e=e.toLowerCase(),t.GetData().then(t=>{if(!t[e])throw new Error("Invalid sof root: ".concat(e));if("*"===r)return t[e];if(r)if(r=r.toLowerCase(),Array.isArray(t[e])){for(let n=0;n<t[e].length;n++)if(t[e][n].name===r)return t[e][n]}else if(t[e][r])return t[e][r];throw new Error("Invalid sof ".concat(e," child: ").concat(r))})}function I(e){return x(e,"*").then(e=>{const t={};if(Array.isArray(e))for(let r=0;r<e.length;r++)t[e[r].name]=e[r].description||"";else for(const r in e)e.hasOwnProperty(r)&&(t[r]=e[r].description||"");return t})}this.GetData=function(){return L||(u||(u=a.Tw2Effect.from({effectFilePath:"res:/graphics/effect/managed/space/spaceobject/fx/blinkinglightspool.fx",parameters:{MainIntensity:1,GradientMap:"res:/texture/particle/whitesharp_gradient.dds.0.png"}})),L=new Promise((t,n)=>{e.GetObject("res:/dx9/model/spaceobjectfactory/data.red",e=>{t(r=e)},t=>{e.Log({type:"error",name:"Space object factory",message:"Could not load data"}),n(t)})})),L},this.ExtendPatternsFrom=function(t){return t?this.GetData().then(r=>e.GetObjectAsync(t).then(e=>(r.pattern=r.pattern.concat(e.pattern),r))):Promise.reject(new Error("Invalid respath: undefined"))},this.ExtendMaterialsFrom=function(t){return t?this.GetData().then(r=>e.GetObjectAsync(t).then(e=>{const n=e.material;if(t.includes(".black"))n.forEach(e=>{r.material[e.name]=e.Assign()});else for(const e in n)n.hasOwnProperty(e)&&(r[n[e].name]=n[e]);return r})):Promise.reject(new Error("Invalid respath: undefined"))},this.GetObject=function(e){return this.GetData().then(()=>P(e))},this.GetHull=function(e){return x("hull",e)},this.GetHulls=function(){return x("hull","*")},this.GetHullNames=function(){return I("hull")},this.GetFaction=function(e){return x("faction",e)},this.GetFactions=function(){return x("faction","*")},this.GetFactionNames=function(){return I("faction")},this.GetRace=function(e){return x("race",e)},this.GetRaces=function(){return x("race","*")},this.GetRaceNames=function(){return I("race")},this.GetMaterial=function(e){return x("material",e)},this.GetMaterials=function(){return x("material","*")},this.GetMaterialNames=function(){return I("material")},this.GetPattern=function(e){return x("pattern",e)},this.GetPatterns=function(e){return x("pattern","*")},this.GetPatternNames=function(){return I("pattern")},this.GetHullPatternNames=function(e){return this.GetHull(e).then(t=>this.GetPatterns().then(t=>{const r={};for(let n=0;n<t.length;n++){const i=t[n];i.projections.filter(t=>t.name===e).length&&(r[i.name]=i.description||"")}return r}))},this.GetHullBuildClass=function(e){const t=e.indexOf(":");return t>0&&(e=e.substr(0,t)),x("hull",e).then(e=>2===e.buildClass?2:1)}}},"./sof/EveSOFData.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFData",function(){return a}),r.d(t,"ErrSOFHullNotFound",function(){return o}),r.d(t,"ErrSOFFactionNotFound",function(){return u}),r.d(t,"ErrSOFRaceNotFound",function(){return c}),r.d(t,"ErrSOFMaterialNotFound",function(){return l}),r.d(t,"ErrSOFPatternNotFound",function(){return d});var n=r("./global/util/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"faction",[]),s(this,"generic",null),s(this,"hull",[]),s(this,"material",[]),s(this,"pattern",[]),s(this,"race",[])}Initialize(){}GetHull(e){return Object(n.findElementByProperty)(this.hull,"name",e,o)}GetHullNames(e){return a.GetNames(this.hull,e)}HasHull(e){return!!Object(n.findElementByProperty)(this.hull,"name",e)}GetHullBuildClass(e){return 2===this.GetHull(e).buildClass?2:1}GetHullPatternNames(e){this.GetHull(e);let t=[];for(let r=0;r<this.pattern.length;r++)this.pattern[r].HasProjection(e)&&t.push(this.pattern[r].name);return t.sort()}HasHullPattern(e,t){const r=this.GetHull(e);return!!this.HasPattern(t)&&this.GetPattern(t).HasProjection(r.name)}GetHullPattern(e,t){this.GetHull(e);return this.GetPattern(t).GetHullPattern(e)}GetFaction(e){return Object(n.findElementByProperty)(this.faction,"name",e,u)}GetFactionNames(e){return a.GetNames(this.faction,e)}HasFaction(e){return!!Object(n.findElementByProperty)(this.faction,"name",e)}GetRace(e){return Object(n.findElementByProperty)(this.race,"name",e,c)}GetRaceNames(e){return a.GetNames(this.race,e)}HasRace(e){return Object(n.findElementByProperty)(this.race,"name",e)}GetMaterial(e){return Object(n.findElementByProperty)(this.material,"name",e,l)}GetMaterialNames(e){return a.GetNames(this.material,e)}HasMaterial(e){return!!Object(n.findElementByProperty)(this.material,"name",e)}GetPattern(e){return Object(n.findElementByProperty)(this.pattern,"name",e,d)}GetPatternNames(e){return a.GetNames(this.pattern,e)}HasPattern(e){return!!Object(n.findElementByProperty)(this.pattern,"name",e)}static GetNames(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=!Object(n.isArray)(t);for(let n=0;n<e.length;n++)r?t[e[n].name]=e[n].description||"":t.push(r);return r||t.sort(),t}static black(e){return[["faction",e.array],["generic",e.object],["hull",e.array],["material",e.array],["pattern",e.array],["race",e.array]]}}class o extends i.Tw2Error{constructor(e){super(e,"SOF Hull not found: '%name%'")}}class u extends i.Tw2Error{constructor(e){super(e,"SOF Faction not found: '%name%'")}}class c extends i.Tw2Error{constructor(e){super(e,"SOF Race not found: '%name%'")}}class l extends i.Tw2Error{constructor(e){super(e,"SOF Material not found: '%name%'")}}class d extends i.Tw2Error{constructor(e){super(e,"SOF Pattern not found: '%name%'")}}},"./sof/faction/EveSOFDataFaction.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataFaction",function(){return i});class i{constructor(){n(this,"name",""),n(this,"areaTypes",null),n(this,"children",[]),n(this,"colorSet",null),n(this,"defaultPattern",null),n(this,"defaultPatternLayer1MaterialName",""),n(this,"description",""),n(this,"logoSet",null),n(this,"materialUsageMtl1",0),n(this,"materialUsageMtl2",0),n(this,"materialUsageMtl3",0),n(this,"materialUsageMtl4",0),n(this,"planeSets",[]),n(this,"resPathInsert",""),n(this,"spotlightSets",[]),n(this,"visibilityGroupSet",null)}static black(e){return[["areas",e.array],["areaTypes",e.object],["colorSet",e.object],["children",e.array],["defaultPattern",e.object],["defaultPatternLayer1MaterialName",e.string],["description",e.string],["logoSet",e.object],["materialUsageMtl1",e.uint],["materialUsageMtl2",e.uint],["materialUsageMtl3",e.uint],["materialUsageMtl4",e.uint],["name",e.string],["planeSets",e.array],["resPathInsert",e.string],["spotlightSets",e.array],["spriteSets",e.array],["visibilityGroupSet",e.object]]}}},"./sof/faction/EveSOFDataFactionChild.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataFactionChild",function(){return i});class i{constructor(){n(this,"name",""),n(this,"groupIndex",-1),n(this,"isVisible",!1)}static black(e){return[["groupIndex",e.uint],["name",e.string],["isVisible",e.boolean]]}}},"./sof/faction/EveSOFDataFactionColorSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionColorSet",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"Black",n.vec4.create()),i(this,"Blue",n.vec4.create()),i(this,"Booster",n.vec4.create()),i(this,"Cyan",n.vec4.create()),i(this,"Darkhull",n.vec4.create()),i(this,"Fire",n.vec4.create()),i(this,"Glass",n.vec4.create()),i(this,"Green",n.vec4.create()),i(this,"Hull",n.vec4.create()),i(this,"Killmark",n.vec4.create()),i(this,"Orange",n.vec4.create()),i(this,"Primary",n.vec4.create()),i(this,"PrimaryLight",n.vec4.create()),i(this,"Reactor",n.vec4.create()),i(this,"Red",n.vec4.create()),i(this,"Secondary",n.vec4.create()),i(this,"SecondaryLight",n.vec4.create()),i(this,"Tertiary",n.vec4.create()),i(this,"TertiaryLight",n.vec4.create()),i(this,"White",n.vec4.create()),i(this,"WhiteLight",n.vec4.create()),i(this,"Yellow",n.vec4.create())}Get(e){return(e=e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())in this?this[e]:null}static black(e){return[["Black",e.vector4],["Blue",e.vector4],["Booster",e.vector4],["Cyan",e.vector4],["Darkhull",e.vector4],["Fire",e.vector4],["Glass",e.vector4],["Green",e.vector4],["Hull",e.vector4],["Killmark",e.vector4],["Orange",e.vector4],["Primary",e.vector4],["PrimaryLight",e.vector4],["Reactor",e.vector4],["Red",e.vector4],["Secondary",e.vector4],["SecondaryLight",e.vector4],["Tertiary",e.vector4],["TertiaryLight",e.vector4],["White",e.vector4],["WhiteLight",e.vector4],["Yellow",e.vector4]]}}},"./sof/faction/EveSOFDataFactionPlaneSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionPlaneSet",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"color",n.vec4.create()),i(this,"groupIndex",-1)}static black(e){return[["color",e.vector4],["groupIndex",e.uint],["name",e.string]]}}},"./sof/faction/EveSOFDataFactionSpotlightSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionSpotlightSet",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"coneColor",n.vec4.create()),i(this,"flareColor",n.vec4.create()),i(this,"groupIndex",-1),i(this,"spriteColor",n.vec4.create())}static black(e){return[["coneColor",e.vector4],["flareColor",e.vector4],["groupIndex",e.uint],["name",e.string],["spriteColor",e.vector4]]}}},"./sof/faction/EveSOFDataFactionVisibilityGroupSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataFactionVisibilityGroupSet",function(){return n});class n{constructor(){var e,t,r;r=[],(t="visibilityGroups")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}static black(e){return[["visibilityGroups",e.array]]}}},"./sof/faction/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/faction/EveSOFDataFaction.js");r.d(t,"EveSOFDataFaction",function(){return n.EveSOFDataFaction});var i=r("./sof/faction/EveSOFDataFactionChild.js");r.d(t,"EveSOFDataFactionChild",function(){return i.EveSOFDataFactionChild});var s=r("./sof/faction/EveSOFDataFactionColorSet.js");r.d(t,"EveSOFDataFactionColorSet",function(){return s.EveSOFDataFactionColorSet});var a=r("./sof/faction/EveSOFDataFactionPlaneSet.js");r.d(t,"EveSOFDataFactionPlaneSet",function(){return a.EveSOFDataFactionPlaneSet});var o=r("./sof/faction/EveSOFDataFactionSpotlightSet.js");r.d(t,"EveSOFDataFactionSpotlightSet",function(){return o.EveSOFDataFactionSpotlightSet});var u=r("./sof/faction/EveSOFDataFactionVisibilityGroupSet.js");r.d(t,"EveSOFDataFactionVisibilityGroupSet",function(){return u.EveSOFDataFactionVisibilityGroupSet})},"./sof/generic/EveSOFDataGeneric.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGeneric",function(){return a}),r.d(t,"ErrSOFAreaShaderNotFound",function(){return o}),r.d(t,"ErrSOFDecalShaderNotFound",function(){return u}),r.d(t,"ErrSOFMaterialPrefixNotFound",function(){return c}),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",function(){return l});var n=r("./core/index.js"),i=r("./global/util/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"areaShaderLocation",""),s(this,"areaShaders",[]),s(this,"bannerShader",null),s(this,"damage",null),s(this,"decalShaderLocation",""),s(this,"decalShaders",[]),s(this,"genericWreckMaterial",null),s(this,"hullDamage",null),s(this,"materialPrefixes",[]),s(this,"patternMaterialPrefixes",[]),s(this,"resPathDefaultAlliance",""),s(this,"resPathDefaultCeo",""),s(this,"resPathDefaultCorp",""),s(this,"shaderPrefixAnimated",""),s(this,"swarm",null),s(this,"variants",[])}CreateEffect(e,t,r){const s={},a={},o={},u=this.GetShaderPath(e.shader||e.effectFilePath,t);function c(e,t){t&&(Object(i.isArray)(t)?t.forEach(t=>t.Assign(e)):Object(i.isPlain)(t)&&Object.assign(e,t))}return c(s,e.defaultParameters),c(a,e.defaultTextures),r&&(c(s,r.parameters),c(a,r.textures),c(o,r.overrides)),n.Tw2Effect.from({effectFilePath:u,parameters:s,textures:a,overrides:o})}GetShaderPrefix(e){return e?this.shaderPrefixAnimated:""}GetShaderPath(e,t){const r=this.GetShaderPrefix(t);"/"!==e.charAt(0)&&(e+="/");const n=e.lastIndexOf("/");return e.substring(0,n+1)+r+e.substring(n+1)}HasAreaShader(e){return!!Object(i.findElementByProperty)(this.areaShaders,"name",e)}GetAreaShader(e){return Object(i.findElementByProperty)(this.areaShaders,"name",e,o)}HasDecalShader(e){return!!Object(i.findElementByProperty)(this.decalShaders,"name",e)}GetDecalShader(e){return Object(i.findElementByProperty)(this.decalShaders,"name",e,u)}GetMaterialPrefixes(){const e=[];for(let t=0;t<this.materialPrefixes.length;t++)e.push(this.materialPrefixes[t].str);return e}GetPatternMaterialPrefixes(){const e=[];for(let t=0;t<this.patternMaterialPrefixes.length;t++)e.push(this.patternMaterialPrefixes[t].str);return e}GetMaterialPrefix(e){let t=e-1;if(void 0===this.materialPrefixes[t])throw new c({index:e});return this.materialPrefixes[t].str}GetPatternMaterialPrefix(e){let t=e-1;if(void 0===this.patternMaterialPrefixes[t])throw new l({index:e});return this.patternMaterialPrefixes[t].str}static black(e){return[["areaShaderLocation",e.string],["areaShaders",e.array],["bannerShader",e.plain],["decalShaderLocation",e.string],["decalShaders",e.array],["damage",e.object],["genericWreckMaterial",e.object],["hullAreas",e.array],["hullDamage",e.object],["materialPrefixes",e.array],["patternMaterialPrefixes",e.array],["resPathDefaultAlliance",e.path],["resPathDefaultCeo",e.path],["resPathDefaultCorp",e.path],["shaderPrefixAnimated",e.string],["swarm",e.object],["variants",e.array]]}}class o extends n.Tw2Error{constructor(e){super(e,"SOF Area shader not found: %name%")}}class u extends n.Tw2Error{constructor(e){super(e,"SOF Decal area shader not found: %name%")}}class c extends n.Tw2Error{constructor(e){super(e,"SOF Material prefix index not found: %index%")}}class l extends n.Tw2Error{constructor(e){super(e,"SOF Pattern material prefix index not found: %index%")}}},"./sof/generic/EveSOFDataGenericDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericDamage",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"armorParticleAngle",0),i(this,"armorParticleColor0",n.vec4.create()),i(this,"armorParticleColor1",n.vec4.create()),i(this,"armorParticleColor2",n.vec4.create()),i(this,"armorParticleColor3",n.vec4.create()),i(this,"armorParticleDrag",0),i(this,"armorParticleMinMaxLifeTime",n.vec2.create()),i(this,"armorParticleMinMaxSpeed",n.vec2.create()),i(this,"armorParticleRate",0),i(this,"armorParticleSizes",n.vec4.create()),i(this,"armorParticleTextureIndex",0),i(this,"armorParticleTurbulenceAmplitude",0),i(this,"armorParticleTurbulenceFrequency",0),i(this,"armorParticleVelocityStretchRotation",0),i(this,"armorShader",""),i(this,"flickerPerlinAlpha",0),i(this,"flickerPerlinBeta",0),i(this,"flickerPerlinN",0),i(this,"flickerPerlinSpeed",0),i(this,"shieldGeometryResFilePath",""),i(this,"shieldShaderEllipsoid",""),i(this,"shieldShaderHull","")}static black(e){return[["armorParticleAngle",e.float],["armorParticleColor0",e.vector4],["armorParticleColor1",e.vector4],["armorParticleColor2",e.vector4],["armorParticleColor3",e.vector4],["armorParticleDrag",e.float],["armorParticleMinMaxLifeTime",e.vector2],["armorParticleMinMaxSpeed",e.vector2],["armorParticleRate",e.float],["armorParticleSizes",e.vector4],["armorParticleTurbulenceAmplitude",e.float],["armorParticleTurbulenceFrequency",e.float],["armorParticleVelocityStretchRotation",e.float],["armorParticleTextureIndex",e.uint],["armorShader",e.string],["flickerPerlinAlpha",e.float],["flickerPerlinBeta",e.float],["flickerPerlinSpeed",e.float],["flickerPerlinN",e.uint],["shieldGeometryResFilePath",e.path],["shieldShaderEllipsoid",e.string],["shieldShaderHull",e.string]]}}},"./sof/generic/EveSOFDataGenericDecalShader.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataGenericDecalShader",function(){return i});class i{constructor(){n(this,"defaultTextures",[]),n(this,"parameters",[]),n(this,"parentTextures",[]),n(this,"shader","")}static black(e){return[["defaultTextures",e.array],["parameters",e.array],["parentTextures",e.array],["shader",e.string]]}}},"./sof/generic/EveSOFDataGenericHullDamage.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericHullDamage",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"hullParticleAngle",0),i(this,"hullParticleColor0",n.vec4.create()),i(this,"hullParticleColor1",n.vec4.create()),i(this,"hullParticleColor2",n.vec4.create()),i(this,"hullParticleColorMidpoint",0),i(this,"hullParticleDrag",0),i(this,"hullParticleMinMaxLifeTime",n.vec2.create()),i(this,"hullParticleMinMaxSpeed",n.vec2.create()),i(this,"hullParticleRate",0),i(this,"hullParticleSizes",n.vec4.create()),i(this,"hullParticleTextureIndex",0),i(this,"hullParticleTurbulenceAmplitude",0),i(this,"hullParticleTurbulenceFrequency",0)}static black(e){return[["hullParticleAngle",e.float],["hullParticleColor0",e.vector4],["hullParticleColor1",e.vector4],["hullParticleColor2",e.vector4],["hullParticleColorMidpoint",e.float],["hullParticleDrag",e.float],["hullParticleMinMaxLifeTime",e.vector2],["hullParticleMinMaxSpeed",e.vector2],["hullParticleRate",e.float],["hullParticleSizes",e.vector4],["hullParticleTurbulenceAmplitude",e.float],["hullParticleTurbulenceFrequency",e.float],["hullParticleTextureIndex",e.uint]]}}},"./sof/generic/EveSOFDataGenericShader.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataGenericShader",function(){return i});class i{constructor(){n(this,"defaultParameters",[]),n(this,"defaultTextures",[]),n(this,"doGenerateDepthArea",!1),n(this,"parameters",[]),n(this,"shader",""),n(this,"transparencyTextureName","")}static black(e){return[["defaultParameters",e.array],["defaultTextures",e.array],["doGenerateDepthArea",e.boolean],["parameters",e.array],["shader",e.string],["transparencyTextureName",e.string]]}}},"./sof/generic/EveSOFDataGenericString.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataGenericString",function(){return n});class n{constructor(){var e,t,r;r="",(t="str")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}static black(e){return[["str",e.string]]}}},"./sof/generic/EveSOFDataGenericSwarm.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataGenericSwarm",function(){return i});class i{constructor(){n(this,"formationDistance",0),n(this,"maxDeceleration",0),n(this,"maxDistance0",0),n(this,"separationDistance",0),n(this,"wanderDistance",0),n(this,"wanderFluctuation",0),n(this,"wanderRadius",0),n(this,"weightAlign",0),n(this,"weightAnchor",0),n(this,"weightCohesion",0),n(this,"weightDeceleration",0),n(this,"weightFormation",0),n(this,"weightSeparation",0)}static black(e){return[["formationDistance",e.float],["maxDistance0",e.float],["maxDeceleration",e.float],["separationDistance",e.float],["wanderDistance",e.float],["wanderFluctuation",e.float],["wanderRadius",e.float],["weightAlign",e.float],["weightAnchor",e.float],["weightCohesion",e.float],["weightDeceleration",e.float],["weightFormation",e.float],["weightSeparation",e.float]]}}},"./sof/generic/EveSOFDataGenericVariant.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataGenericVariant",function(){return i});class i{constructor(){n(this,"name",""),n(this,"hullArea",null),n(this,"isTransparent",!1)}static black(e){return[["hullArea",e.object],["isTransparent",e.boolean],["name",e.string]]}}},"./sof/generic/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/generic/EveSOFDataGeneric.js");r.d(t,"EveSOFDataGeneric",function(){return n.EveSOFDataGeneric}),r.d(t,"ErrSOFAreaShaderNotFound",function(){return n.ErrSOFAreaShaderNotFound}),r.d(t,"ErrSOFDecalShaderNotFound",function(){return n.ErrSOFDecalShaderNotFound}),r.d(t,"ErrSOFMaterialPrefixNotFound",function(){return n.ErrSOFMaterialPrefixNotFound}),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",function(){return n.ErrSOFPatternMaterialPrefixNotFound});var i=r("./sof/generic/EveSOFDataGenericDamage.js");r.d(t,"EveSOFDataGenericDamage",function(){return i.EveSOFDataGenericDamage});var s=r("./sof/generic/EveSOFDataGenericDecalShader.js");r.d(t,"EveSOFDataGenericDecalShader",function(){return s.EveSOFDataGenericDecalShader});var a=r("./sof/generic/EveSOFDataGenericHullDamage.js");r.d(t,"EveSOFDataGenericHullDamage",function(){return a.EveSOFDataGenericHullDamage});var o=r("./sof/generic/EveSOFDataGenericShader.js");r.d(t,"EveSOFDataGenericShader",function(){return o.EveSOFDataGenericShader});var u=r("./sof/generic/EveSOFDataGenericString.js");r.d(t,"EveSOFDataGenericString",function(){return u.EveSOFDataGenericString});var c=r("./sof/generic/EveSOFDataGenericSwarm.js");r.d(t,"EveSOFDataGenericSwarm",function(){return c.EveSOFDataGenericSwarm});var l=r("./sof/generic/EveSOFDataGenericVariant.js");r.d(t,"EveSOFDataGenericVariant",function(){return l.EveSOFDataGenericVariant})},"./sof/hull/EveSOFDataHull.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHull",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"additiveAreas",[]),i(this,"animations",[]),i(this,"audioPosition",n.vec3.create()),i(this,"banners",[]),i(this,"booster",null),i(this,"boundingSphere",n.vec4.create()),i(this,"buildClass",0),i(this,"castShadow",!1),i(this,"category",""),i(this,"children",[]),i(this,"controllers",[]),i(this,"decalAreas",[]),i(this,"decalSets",[]),i(this,"defaultPattern",null),i(this,"description",""),i(this,"distortionAreas",[]),i(this,"enableDynamicBoundingSphere",!1),i(this,"geometryResFilePath",""),i(this,"hazeSets",[]),i(this,"hullDecals",[]),i(this,"impactEffectType",0),i(this,"instancedMeshes",[]),i(this,"isSkinned",!1),i(this,"lightSets",[]),i(this,"locatorSets",[]),i(this,"locatorTurrets",[]),i(this,"modelRotationCurvePath",""),i(this,"opaqueAreas",[]),i(this,"planeSets",[]),i(this,"shapeEllipsoidCenter",n.vec3.create()),i(this,"shapeEllipsoidRadius",n.vec3.create()),i(this,"soundEmitters",[]),i(this,"spotlightSets",[]),i(this,"spriteLineSets",[]),i(this,"spriteSets",[]),i(this,"transparentAreas",[])}static black(e){return[["additiveAreas",e.array],["animations",e.array],["audioPosition",e.vector3],["banners",e.array],["booster",e.object],["boundingSphere",e.vector4],["buildClass",e.uint],["castShadow",e.boolean],["category",e.string],["children",e.array],["controllers",e.array],["decalAreas",e.array],["decalSets",e.array],["defaultPattern",e.object],["depthAreas",e.array],["description",e.string],["distortionAreas",e.array],["enableDynamicBoundingSphere",e.boolean],["geometryResFilePath",e.path],["hazeSets",e.array],["hullDecals",e.array],["impactEffectType",e.uint],["instancedMeshes",e.array],["isSkinned",e.boolean],["lightSets",e.array],["locatorSets",e.array],["locatorTurrets",e.array],["name",e.string],["opaqueAreas",e.array],["planeSets",e.array],["modelRotationCurvePath",e.string],["shapeEllipsoidCenter",e.vector3],["shapeEllipsoidRadius",e.vector3],["soundEmitters",e.array],["spotlightSets",e.array],["spriteLineSets",e.array],["spriteSets",e.array],["transparentAreas",e.array]]}}},"./sof/hull/EveSOFDataHullAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullAnimation",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"endRate",0),i(this,"endRotationTime",0),i(this,"endRotationValue",n.quat.create()),i(this,"id",0),i(this,"startRate",0),i(this,"startRotationTime",0),i(this,"startRotationValue",n.quat.create())}static black(e){return[["endRate",e.float],["endRotationTime",e.float],["endRotationValue",e.vector4],["id",e.uint],["name",e.string],["startRate",e.float],["startRotationTime",e.float],["startRotationValue",e.vector4]]}}},"./sof/hull/EveSOFDataHullArea.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullArea",function(){return i});class i{constructor(){n(this,"name",""),n(this,"areaType",0),n(this,"blockedMaterials",0),n(this,"count",0),n(this,"index",0),n(this,"parameters",[]),n(this,"shader",""),n(this,"textures",[])}static black(e){return[["areaType",e.uint],["blockedMaterials",e.uint],["count",e.uint],["index",e.uint],["name",e.string],["parameters",e.array],["shader",e.string],["textures",e.array]]}}},"./sof/hull/EveSOFDataHullBanner.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBanner",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"angleX",0),i(this,"angleY",0),i(this,"boneIndex",-1),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1)),i(this,"usage",0)}static black(e){return[["angleX",e.float],["angleY",e.float],["angleZ",e.float],["boneIndex",e.uint],["name",e.string],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["usage",e.uint]]}}},"./sof/hull/EveSOFDataHullBooster.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullBooster",function(){return i});class i{constructor(){n(this,"alwaysOn",!1),n(this,"hasTrails",!1),n(this,"items",[])}static black(e){return[["alwaysOn",e.boolean],["hasTrails",e.boolean],["items",e.array]]}}},"./sof/hull/EveSOFDataHullBoosterItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullBoosterItem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"atlasIndex0",0),i(this,"atlasIndex1",0),i(this,"functionality",n.vec4.create()),i(this,"hasTrail",!1),i(this,"transform",n.mat4.create())}static black(e){return[["atlasIndex0",e.uint],["atlasIndex1",e.uint],["functionality",e.vector4],["hasTrail",e.boolean],["transform",e.matrix]]}}},"./sof/hull/EveSOFDataHullChild.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullChild",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"groupIndex",-1),i(this,"id",0),i(this,"lowestLodVisible",0),i(this,"redFilePath",""),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1)),i(this,"translation",n.vec3.create())}static black(e){return[["groupIndex",e.uint],["id",e.uint],["lowestLodVisible",e.uint],["name",e.string],["redFilePath",e.path],["rotation",e.vector4],["scaling",e.vector3],["translation",e.vector3]]}}},"./sof/hull/EveSOFDataHullController.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullController",function(){return n});class n{constructor(){var e,t,r;r="",(t="path")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}static black(e){return[["path",e.string]]}}},"./sof/hull/EveSOFDataHullDecalSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullDecalSet",function(){return i});class i{constructor(){n(this,"name",""),n(this,"items",[]),n(this,"visibilityGroup","")}static black(e){return[["name",e.string],["items",e.array],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullDecalSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullDecalSetItem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"boneIndex",-1),i(this,"indexBuffer",[]),i(this,"glowColorType",0),i(this,"logoType",0),i(this,"meshIndex",0),i(this,"parameters",[]),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1)),i(this,"textures",[]),i(this,"usage",0),i(this,"visibilityGroup","")}static black(e){return[["name",e.string],["boneIndex",e.uint],["indexBuffer",e.indexBuffer],["glowColorType",e.uint],["logoType",e.uint],["meshIndex",e.uint],["parameters",e.array],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["textures",e.array],["usage",e.uint],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullHazeSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullHazeSet",function(){return i});class i{constructor(){n(this,"name",""),n(this,"items",[]),n(this,"visibilityGroup",0)}static black(e){return[["items",e.array],["name",e.string],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullHazeSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullHazeSetItem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"boosterGainInfluence",!1),i(this,"colorType",0),i(this,"hazeBrightness",0),i(this,"hazeFalloff",0),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1)),i(this,"sourceBrightness",0),i(this,"sourceSize",0)}static black(e){return[["boosterGainInfluence",e.boolean],["colorType",e.uint],["hazeBrightness",e.float],["hazeFalloff",e.float],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["sourceBrightness",e.float],["sourceSize",e.float]]}}},"./sof/hull/EveSOFDataHullLightSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullLightSet",function(){return i});class i{constructor(){n(this,"name",""),n(this,"items",[]),n(this,"visibilityGroup","")}static black(e){return[["name",e.string],["items",e.array],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullLightSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetItem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"brightness",0),i(this,"innerRadius",0),i(this,"lightColor",n.vec4.create()),i(this,"noiseAmplitude",0),i(this,"noiseFrequency",0),i(this,"position",n.vec3.create()),i(this,"radius",0)}static black(e){return[["name",e.string],["brightness",e.float],["innerRadius",e.float],["lightColor",e.vector4],["noiseAmplitude",e.float],["noiseFrequency",e.float],["position",e.vector3],["radius",e.float]]}}},"./sof/hull/EveSOFDataHullLightSetSpotLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetSpotLight",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"brightness",0),i(this,"innerAngle",0),i(this,"innerRadius",0),i(this,"lightColor",n.vec4.create()),i(this,"outerAngle",0),i(this,"position",n.vec3.create()),i(this,"radius",0),i(this,"rotation",n.quat.create())}static black(e){return[["name",e.string],["brightness",e.float],["innerAngle",e.float],["innerRadius",e.float],["lightColor",e.color],["outerAngle",e.float],["position",e.vector3],["radius",e.uint],["rotation",e.vector4]]}}},"./sof/hull/EveSOFDataHullLightSetTexturedPointLight.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLightSetTexturedPointLight",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"brightness",0),i(this,"innerRadius",0),i(this,"position",n.vec3.create()),i(this,"radius",0),i(this,"texturePath","")}static black(e){return[["name",e.string],["brightness",e.float],["innerRadius",e.float],["position",e.vector3],["radius",e.float],["texturePath",e.path]]}}},"./sof/hull/EveSOFDataHullLocator.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullLocator",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"transform",n.mat4.create())}static black(e){return[["name",e.string],["transform",e.matrix]]}}},"./sof/hull/EveSOFDataHullLocatorSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullLocatorSet",function(){return i});class i{constructor(){n(this,"name",""),n(this,"locators",[])}static black(e){return[["name",e.string],["locators",e.array]]}}},"./sof/hull/EveSOFDataHullPlaneSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullPlaneSet",function(){return i});class i{constructor(){n(this,"name",""),n(this,"atlasSize",0),n(this,"items",[]),n(this,"layer1MapResPath",""),n(this,"layer2MapResPath",""),n(this,"maskMapResPath",""),n(this,"skinned",!1),n(this,"usage",0)}static black(e){return[["atlasSize",e.uint],["items",e.array],["layer1MapResPath",e.path],["layer2MapResPath",e.path],["maskMapResPath",e.path],["name",e.string],["planeData",e.vector4],["skinned",e.boolean],["usage",e.uint]]}}},"./sof/hull/EveSOFDataHullPlaneSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullPlaneSetItem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"boneIndex",-1),i(this,"color",n.vec4.create()),i(this,"groupIndex",-1),i(this,"layer1Scroll",n.vec4.create()),i(this,"layer1Transform",n.vec4.create()),i(this,"layer2Scroll",n.vec4.create()),i(this,"layer2Transform",n.vec4.create()),i(this,"maskMapAtlasIndex",0),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1))}static black(e){return[["boneIndex",e.uint],["color",e.vector4],["groupIndex",e.uint],["layer1Scroll",e.vector4],["layer1Transform",e.vector4],["layer2Scroll",e.vector4],["layer2Transform",e.vector4],["maskMapAtlasIndex",e.uint],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3]]}}},"./sof/hull/EveSOFDataHullSoundEmitter.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullSoundEmitter",function(){return i});class i{constructor(){n(this,"name",""),n(this,"prefix","")}static black(e){return[["name",e.string],["prefix",e.string]]}}},"./sof/hull/EveSOFDataHullSpotlightSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullSpotlightSet",function(){return i});class i{constructor(){n(this,"name",""),n(this,"coneTextureResPath",""),n(this,"glowTextureResPath",""),n(this,"items",[]),n(this,"skinned",!1),n(this,"zOffset",0)}static black(e){return[["coneTextureResPath",e.path],["glowTextureResPath",e.path],["items",e.array],["name",e.string],["skinned",e.boolean],["zOffset",e.float]]}}},"./sof/hull/EveSOFDataHullSpotlightSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpotlightSetItem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"boneIndex",-1),i(this,"boosterGainInfluence",!1),i(this,"coneIntensity",0),i(this,"flareIntensity",0),i(this,"groupIndex",-1),i(this,"spriteIntensity",0),i(this,"spriteScale",n.vec3.fromValues(1,1,1)),i(this,"transform",n.mat4.create())}static black(e){return[["boneIndex",e.uint],["boosterGainInfluence",e.boolean],["coneIntensity",e.float],["flareIntensity",e.float],["groupIndex",e.uint],["spriteScale",e.vector3],["spriteIntensity",e.float],["transform",e.matrix]]}}},"./sof/hull/EveSOFDataHullSpriteLineSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullSpriteLineSet",function(){return i});class i{constructor(){n(this,"name",""),n(this,"items",[]),n(this,"skinned",!1),n(this,"visibilityGroup","")}static black(e){return[["items",e.array],["name",e.string],["skinned",e.boolean],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullSpriteLineSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteLineSetItem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"blinkPhase",0),i(this,"blinkPhaseShift",0),i(this,"blinkRate",0),i(this,"boneIndex",-1),i(this,"colorType",0),i(this,"falloff",0),i(this,"intensity",0),i(this,"isCircle",!1),i(this,"maxScale",0),i(this,"minScale",0),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1)),i(this,"spacing",0)}static black(e){return[["blinkRate",e.float],["blinkPhase",e.float],["blinkPhaseShift",e.float],["boneIndex",e.uint],["colorType",e.uint],["falloff",e.float],["groupIndex",e.uint],["intensity",e.float],["isCircle",e.boolean],["maxScale",e.float],["minScale",e.float],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3],["spacing",e.float]]}}},"./sof/hull/EveSOFDataHullSpriteSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataHullSpriteSet",function(){return i});class i{constructor(){n(this,"name",""),n(this,"items",[]),n(this,"skinned",!1),n(this,"visibilityGroup","")}static black(e){return[["name",e.string],["items",e.array],["skinned",e.boolean],["visibilityGroup",e.string]]}}},"./sof/hull/EveSOFDataHullSpriteSetItem.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataHullSpriteSetItem",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"blinkPhase",0),i(this,"blinkRate",0),i(this,"boneIndex",-1),i(this,"colorType",0),i(this,"falloff",0),i(this,"intensity",0),i(this,"maxScale",0),i(this,"minScale",0),i(this,"position",n.vec3.create())}static black(e){return[["blinkRate",e.float],["blinkPhase",e.float],["boneIndex",e.uint],["colorType",e.uint],["falloff",e.float],["groupIndex",e.uint],["intensity",e.float],["maxScale",e.float],["minScale",e.float],["position",e.vector3]]}}},"./sof/hull/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/hull/EveSOFDataHull.js");r.d(t,"EveSOFDataHull",function(){return n.EveSOFDataHull});var i=r("./sof/hull/EveSOFDataHullAnimation.js");r.d(t,"EveSOFDataHullAnimation",function(){return i.EveSOFDataHullAnimation});var s=r("./sof/hull/EveSOFDataHullArea.js");r.d(t,"EveSOFDataHullArea",function(){return s.EveSOFDataHullArea});var a=r("./sof/hull/EveSOFDataHullBanner.js");r.d(t,"EveSOFDataHullBanner",function(){return a.EveSOFDataHullBanner});var o=r("./sof/hull/EveSOFDataHullBooster.js");r.d(t,"EveSOFDataHullBooster",function(){return o.EveSOFDataHullBooster});var u=r("./sof/hull/EveSOFDataHullBoosterItem.js");r.d(t,"EveSOFDataHullBoosterItem",function(){return u.EveSOFDataHullBoosterItem});var c=r("./sof/hull/EveSOFDataHullChild.js");r.d(t,"EveSOFDataHullChild",function(){return c.EveSOFDataHullChild});var l=r("./sof/hull/EveSOFDataHullController.js");r.d(t,"EveSOFDataHullController",function(){return l.EveSOFDataHullController});var d=r("./sof/hull/EveSOFDataHullDecalSet.js");r.d(t,"EveSOFDataHullDecalSet",function(){return d.EveSOFDataHullDecalSet});var h=r("./sof/hull/EveSOFDataHullDecalSetItem.js");r.d(t,"EveSOFDataHullDecalSetItem",function(){return h.EveSOFDataHullDecalSetItem});var f=r("./sof/hull/EveSOFDataHullHazeSet.js");r.d(t,"EveSOFDataHullHazeSet",function(){return f.EveSOFDataHullHazeSet});var m=r("./sof/hull/EveSOFDataHullHazeSetItem.js");r.d(t,"EveSOFDataHullHazeSetItem",function(){return m.EveSOFDataHullHazeSetItem});var v=r("./sof/hull/EveSOFDataHullLightSet.js");r.d(t,"EveSOFDataHullLightSet",function(){return v.EveSOFDataHullLightSet});var p=r("./sof/hull/EveSOFDataHullLightSetItem.js");r.d(t,"EveSOFDataHullLightSetItem",function(){return p.EveSOFDataHullLightSetItem});var E=r("./sof/hull/EveSOFDataHullLightSetSpotLight.js");r.d(t,"EveSOFDataHullLightSetSpotLight",function(){return E.EveSOFDataHullLightSetSpotLight});var _=r("./sof/hull/EveSOFDataHullLightSetTexturedPointLight.js");r.d(t,"EveSOFDataHullLightSetTexturedPointLight",function(){return _.EveSOFDataHullLightSetTexturedPointLight});var g=r("./sof/hull/EveSOFDataHullLocator.js");r.d(t,"EveSOFDataHullLocator",function(){return g.EveSOFDataHullLocator});var S=r("./sof/hull/EveSOFDataHullLocatorSet.js");r.d(t,"EveSOFDataHullLocatorSet",function(){return S.EveSOFDataHullLocatorSet});var T=r("./sof/hull/EveSOFDataHullPlaneSet.js");r.d(t,"EveSOFDataHullPlaneSet",function(){return T.EveSOFDataHullPlaneSet});var b=r("./sof/hull/EveSOFDataHullPlaneSetItem.js");r.d(t,"EveSOFDataHullPlaneSetItem",function(){return b.EveSOFDataHullPlaneSetItem});var R=r("./sof/hull/EveSOFDataHullSoundEmitter.js");r.d(t,"EveSOFDataHullSoundEmitter",function(){return R.EveSOFDataHullSoundEmitter});var j=r("./sof/hull/EveSOFDataHullSpotlightSet.js");r.d(t,"EveSOFDataHullSpotlightSet",function(){return j.EveSOFDataHullSpotlightSet});var y=r("./sof/hull/EveSOFDataHullSpotlightSetItem.js");r.d(t,"EveSOFDataHullSpotlightSetItem",function(){return y.EveSOFDataHullSpotlightSetItem});var A=r("./sof/hull/EveSOFDataHullSpriteLineSet.js");r.d(t,"EveSOFDataHullSpriteLineSet",function(){return A.EveSOFDataHullSpriteLineSet});var w=r("./sof/hull/EveSOFDataHullSpriteLineSetItem.js");r.d(t,"EveSOFDataHullSpriteLineSetItem",function(){return w.EveSOFDataHullSpriteLineSetItem});var P=r("./sof/hull/EveSOFDataHullSpriteSet.js");r.d(t,"EveSOFDataHullSpriteSet",function(){return P.EveSOFDataHullSpriteSet});var O=r("./sof/hull/EveSOFDataHullSpriteSetItem.js");r.d(t,"EveSOFDataHullSpriteSetItem",function(){return O.EveSOFDataHullSpriteSetItem})},"./sof/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/faction/index.js");r.d(t,"EveSOFDataFaction",function(){return n.EveSOFDataFaction}),r.d(t,"EveSOFDataFactionChild",function(){return n.EveSOFDataFactionChild}),r.d(t,"EveSOFDataFactionColorSet",function(){return n.EveSOFDataFactionColorSet}),r.d(t,"EveSOFDataFactionPlaneSet",function(){return n.EveSOFDataFactionPlaneSet}),r.d(t,"EveSOFDataFactionSpotlightSet",function(){return n.EveSOFDataFactionSpotlightSet}),r.d(t,"EveSOFDataFactionVisibilityGroupSet",function(){return n.EveSOFDataFactionVisibilityGroupSet});var i=r("./sof/generic/index.js");r.d(t,"EveSOFDataGeneric",function(){return i.EveSOFDataGeneric}),r.d(t,"ErrSOFAreaShaderNotFound",function(){return i.ErrSOFAreaShaderNotFound}),r.d(t,"ErrSOFDecalShaderNotFound",function(){return i.ErrSOFDecalShaderNotFound}),r.d(t,"ErrSOFMaterialPrefixNotFound",function(){return i.ErrSOFMaterialPrefixNotFound}),r.d(t,"ErrSOFPatternMaterialPrefixNotFound",function(){return i.ErrSOFPatternMaterialPrefixNotFound}),r.d(t,"EveSOFDataGenericDamage",function(){return i.EveSOFDataGenericDamage}),r.d(t,"EveSOFDataGenericDecalShader",function(){return i.EveSOFDataGenericDecalShader}),r.d(t,"EveSOFDataGenericHullDamage",function(){return i.EveSOFDataGenericHullDamage}),r.d(t,"EveSOFDataGenericShader",function(){return i.EveSOFDataGenericShader}),r.d(t,"EveSOFDataGenericString",function(){return i.EveSOFDataGenericString}),r.d(t,"EveSOFDataGenericSwarm",function(){return i.EveSOFDataGenericSwarm}),r.d(t,"EveSOFDataGenericVariant",function(){return i.EveSOFDataGenericVariant});var s=r("./sof/hull/index.js");r.d(t,"EveSOFDataHull",function(){return s.EveSOFDataHull}),r.d(t,"EveSOFDataHullAnimation",function(){return s.EveSOFDataHullAnimation}),r.d(t,"EveSOFDataHullArea",function(){return s.EveSOFDataHullArea}),r.d(t,"EveSOFDataHullBanner",function(){return s.EveSOFDataHullBanner}),r.d(t,"EveSOFDataHullBooster",function(){return s.EveSOFDataHullBooster}),r.d(t,"EveSOFDataHullBoosterItem",function(){return s.EveSOFDataHullBoosterItem}),r.d(t,"EveSOFDataHullChild",function(){return s.EveSOFDataHullChild}),r.d(t,"EveSOFDataHullController",function(){return s.EveSOFDataHullController}),r.d(t,"EveSOFDataHullDecalSet",function(){return s.EveSOFDataHullDecalSet}),r.d(t,"EveSOFDataHullDecalSetItem",function(){return s.EveSOFDataHullDecalSetItem}),r.d(t,"EveSOFDataHullHazeSet",function(){return s.EveSOFDataHullHazeSet}),r.d(t,"EveSOFDataHullHazeSetItem",function(){return s.EveSOFDataHullHazeSetItem}),r.d(t,"EveSOFDataHullLightSet",function(){return s.EveSOFDataHullLightSet}),r.d(t,"EveSOFDataHullLightSetItem",function(){return s.EveSOFDataHullLightSetItem}),r.d(t,"EveSOFDataHullLightSetSpotLight",function(){return s.EveSOFDataHullLightSetSpotLight}),r.d(t,"EveSOFDataHullLightSetTexturedPointLight",function(){return s.EveSOFDataHullLightSetTexturedPointLight}),r.d(t,"EveSOFDataHullLocator",function(){return s.EveSOFDataHullLocator}),r.d(t,"EveSOFDataHullLocatorSet",function(){return s.EveSOFDataHullLocatorSet}),r.d(t,"EveSOFDataHullPlaneSet",function(){return s.EveSOFDataHullPlaneSet}),r.d(t,"EveSOFDataHullPlaneSetItem",function(){return s.EveSOFDataHullPlaneSetItem}),r.d(t,"EveSOFDataHullSoundEmitter",function(){return s.EveSOFDataHullSoundEmitter}),r.d(t,"EveSOFDataHullSpotlightSet",function(){return s.EveSOFDataHullSpotlightSet}),r.d(t,"EveSOFDataHullSpotlightSetItem",function(){return s.EveSOFDataHullSpotlightSetItem}),r.d(t,"EveSOFDataHullSpriteLineSet",function(){return s.EveSOFDataHullSpriteLineSet}),r.d(t,"EveSOFDataHullSpriteLineSetItem",function(){return s.EveSOFDataHullSpriteLineSetItem}),r.d(t,"EveSOFDataHullSpriteSet",function(){return s.EveSOFDataHullSpriteSet}),r.d(t,"EveSOFDataHullSpriteSetItem",function(){return s.EveSOFDataHullSpriteSetItem});var a=r("./sof/pattern/index.js");r.d(t,"EveSOFDataPattern",function(){return a.EveSOFDataPattern}),r.d(t,"ErrSOFProjectionNotFound",function(){return a.ErrSOFProjectionNotFound}),r.d(t,"EveSOFDataPatternLayer",function(){return a.EveSOFDataPatternLayer}),r.d(t,"EveSOFDataPatternPerHull",function(){return a.EveSOFDataPatternPerHull}),r.d(t,"EveSOFDataPatternTransform",function(){return a.EveSOFDataPatternTransform});var o=r("./sof/race/index.js");r.d(t,"EveSOFDataRace",function(){return o.EveSOFDataRace}),r.d(t,"EveSOFDataRaceDamage",function(){return o.EveSOFDataRaceDamage});var u=r("./sof/shared/index.js");r.d(t,"EveSOFDataArea",function(){return u.EveSOFDataArea}),r.d(t,"EveSOFDataAreaMaterial",function(){return u.EveSOFDataAreaMaterial}),r.d(t,"EveSOFDataBooster",function(){return u.EveSOFDataBooster}),r.d(t,"EveSOFDataBoosterShape",function(){return u.EveSOFDataBoosterShape}),r.d(t,"EveSOFDataInstancedMesh",function(){return u.EveSOFDataInstancedMesh}),r.d(t,"EveSOFDataLogo",function(){return u.EveSOFDataLogo}),r.d(t,"EveSOFDataLogoSet",function(){return u.EveSOFDataLogoSet}),r.d(t,"EveSOFDataMaterial",function(){return u.EveSOFDataMaterial}),r.d(t,"EveSOFDataParameter",function(){return u.EveSOFDataParameter}),r.d(t,"EveSOFDataTexture",function(){return u.EveSOFDataTexture}),r.d(t,"EveSOFDataTransform",function(){return u.EveSOFDataTransform});var c=r("./sof/EveSOFData.js");r.d(t,"EveSOFData",function(){return c.EveSOFData}),r.d(t,"ErrSOFHullNotFound",function(){return c.ErrSOFHullNotFound}),r.d(t,"ErrSOFFactionNotFound",function(){return c.ErrSOFFactionNotFound}),r.d(t,"ErrSOFRaceNotFound",function(){return c.ErrSOFRaceNotFound}),r.d(t,"ErrSOFMaterialNotFound",function(){return c.ErrSOFMaterialNotFound}),r.d(t,"ErrSOFPatternNotFound",function(){return c.ErrSOFPatternNotFound});var l=r("./sof/EveSOF.js");r.d(t,"EveSOF",function(){return l.EveSOF})},"./sof/pattern/EveSOFDataPattern.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPattern",function(){return a}),r.d(t,"ErrSOFProjectionNotFound",function(){return o});var n=r("./global/util/index.js"),i=r("./core/index.js");function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class a{constructor(){s(this,"name",""),s(this,"layer1",null),s(this,"layer2",null),s(this,"projections",[])}GetHullPattern(e){const t=this.GetProjection(e);return{name:this.name,layer1:this.layer1,layer2:this.layer2,transformLayer1:t.transformLayer1,transformLayer2:t.transformLayer2}}HasProjection(e){return!!Object(n.findElementByProperty)(this.projections,"name",e)}GetProjection(e){for(let t=0;t<this.projections.length;t++)if(this.projections[t].name===e)return this.projections[t];throw new o({pattern:this.name,projection:e})}static black(e){return[["name",e.string],["layer1",e.object],["layer2",e.object],["projections",e.array]]}}class o extends i.Tw2Error{constructor(e){super(e,"SOF Pattern projection '%projection%' not found for pattern '%pattern%'")}}},"./sof/pattern/EveSOFDataPatternLayer.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataPatternLayer",function(){return i});class i{constructor(){n(this,"isTargetMtl1",!0),n(this,"isTargetMtl2",!0),n(this,"isTargetMtl3",!0),n(this,"isTargetMtl4",!0),n(this,"materialSource",0),n(this,"projectionTypeU",0),n(this,"projectionTypeV",0),n(this,"textureName",""),n(this,"textureResFilePath","")}static ToAddress(e){switch(e){case 2:return 4;case 1:return 3;default:return 1}}static FromProjection(e){switch(e){case 4:return 2;case 3:return 1;default:return 0}}static black(e){return[["isTargetMtl1",e.boolean],["isTargetMtl2",e.boolean],["isTargetMtl3",e.boolean],["isTargetMtl4",e.boolean],["materialSource",e.uint],["projectionTypeU",e.uint],["projectionTypeV",e.uint],["textureName",e.string],["textureResFilePath",e.path]]}}},"./sof/pattern/EveSOFDataPatternPerHull.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataPatternPerHull",function(){return i});class i{constructor(){n(this,"name",""),n(this,"transformLayer1",null),n(this,"transformLayer2",null)}AssignTransforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.transformLayer1&&(e[0]=this.transformLayer1.Reduce()),this.transformLayer2&&(e[1]=this.transformLayer2.Reduce()),e}static black(e){return[["name",e.string],["transformLayer1",e.object],["transformLayer2",e.object]]}}},"./sof/pattern/EveSOFDataPatternTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataPatternTransform",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"isMirrored",!1),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1))}static black(e){return[["isMirrored",e.boolean],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3]]}}},"./sof/pattern/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/pattern/EveSOFDataPattern.js");r.d(t,"EveSOFDataPattern",function(){return n.EveSOFDataPattern}),r.d(t,"ErrSOFProjectionNotFound",function(){return n.ErrSOFProjectionNotFound});var i=r("./sof/pattern/EveSOFDataPatternLayer.js");r.d(t,"EveSOFDataPatternLayer",function(){return i.EveSOFDataPatternLayer});var s=r("./sof/pattern/EveSOFDataPatternPerHull.js");r.d(t,"EveSOFDataPatternPerHull",function(){return s.EveSOFDataPatternPerHull});var a=r("./sof/pattern/EveSOFDataPatternTransform.js");r.d(t,"EveSOFDataPatternTransform",function(){return a.EveSOFDataPatternTransform})},"./sof/race/EveSOFDataRace.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataRace",function(){return i});class i{constructor(){n(this,"name",""),n(this,"booster",null),n(this,"damage",null)}static black(e){return[["booster",e.object],["damage",e.object],["name",e.string]]}}},"./sof/race/EveSOFDataRaceDamage.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataRaceDamage",function(){return i});class i{constructor(){n(this,"armorImpactParameters",[]),n(this,"armorImpactTextures",[]),n(this,"shieldImpactParameters",[]),n(this,"shieldImpactTextures",[])}static black(e){return[["armorImpactParameters",e.array],["armorImpactTextures",e.array],["shieldImpactParameters",e.array],["shieldImpactTextures",e.array]]}}},"./sof/race/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/race/EveSOFDataRace.js");r.d(t,"EveSOFDataRace",function(){return n.EveSOFDataRace});var i=r("./sof/race/EveSOFDataRaceDamage.js");r.d(t,"EveSOFDataRaceDamage",function(){return i.EveSOFDataRaceDamage})},"./sof/shared/EveSOFDataArea.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataArea",function(){return i});class i{constructor(){n(this,"Black",null),n(this,"Blue",null),n(this,"Booster",null),n(this,"Cyan",null),n(this,"Darkhull",null),n(this,"Fire",null),n(this,"Glass",null),n(this,"Green",null),n(this,"Hull",null),n(this,"Killmark",null),n(this,"Monument",null),n(this,"Orange",null),n(this,"Primary",null),n(this,"Reactor",null),n(this,"Red",null),n(this,"Rock",null),n(this,"Sails",null),n(this,"Secondary",null),n(this,"Tertiary",null),n(this,"White",null),n(this,"Yellow",null)}Get(e){return 0===e.indexOf("area_")&&(e=e.substring(5)),(e=e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())in this?this[e]:null}static black(e){return[["Black",e.object],["Blue",e.object],["Booster",e.object],["Cyan",e.object],["Darkhull",e.object],["Fire",e.object],["Glass",e.object],["Green",e.object],["Hull",e.object],["Killmark",e.object],["Monument",e.object],["Orange",e.object],["Primary",e.object],["Reactor",e.object],["Red",e.object],["Rock",e.object],["Sails",e.object],["Secondary",e.object],["Tertiary",e.object],["White",e.object],["Yellow",e.object]]}}},"./sof/shared/EveSOFDataAreaMaterial.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataAreaMaterial",function(){return i});class i{constructor(){n(this,"colorType",0),n(this,"material1",""),n(this,"material2",""),n(this,"material3",""),n(this,"material4","")}static black(e){return[["colorType",e.uint],["material1",e.string],["material2",e.string],["material3",e.string],["material4",e.string]]}}},"./sof/shared/EveSOFDataBooster.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataBooster",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"glowColor",n.vec4.create()),i(this,"glowScale",0),i(this,"gradient0ResPath",""),i(this,"gradient1ResPath",""),i(this,"haloColor",n.vec4.create()),i(this,"haloScaleX",0),i(this,"haloScaleY",0),i(this,"lightColor",n.vec4.create()),i(this,"lightFlickerAmplitude",0),i(this,"lightFlickerFrequency",0),i(this,"lightRadius",0),i(this,"lightWarpColor",n.vec4.create()),i(this,"lightWarpRadius",0),i(this,"shape0",null),i(this,"shape1",null),i(this,"shapeAtlasCount",0),i(this,"shapeAtlasHeight",0),i(this,"shapeAtlasResPath",""),i(this,"symHaloScale",0),i(this,"trailColor",n.vec4.create()),i(this,"trailSize",n.vec4.create()),i(this,"warpGlowColor",n.vec4.create()),i(this,"warpHaloColor",n.vec4.create()),i(this,"warpShape0",null),i(this,"warpShape1",null)}get warpHalpColor(){return this.warpHaloColor}set warpHalpColor(e){this.warpHaloColor=e}static black(e){return[["glowColor",e.vector4],["glowScale",e.float],["gradient0ResPath",e.path],["gradient1ResPath",e.path],["haloColor",e.vector4],["haloScaleX",e.float],["haloScaleY",e.float],["lightFlickerAmplitude",e.float],["lightFlickerColor",e.vector4],["lightFlickerFrequency",e.float],["lightFlickerRadius",e.float],["lightColor",e.vector4],["lightRadius",e.float],["lightWarpColor",e.vector4],["lightWarpRadius",e.float],["shape0",e.object],["shape1",e.object],["shapeAtlasCount",e.uint],["shapeAtlasHeight",e.uint],["shapeAtlasResPath",e.string],["shapeAtlasWidth",e.uint],["symHaloScale",e.float],["trailColor",e.vector4],["trailSize",e.vector4],["volumetric",e.boolean],["warpGlowColor",e.vector4],["warpHalpColor",e.vector4],["warpShape0",e.object],["warpShape1",e.object]]}}},"./sof/shared/EveSOFDataBoosterShape.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataBoosterShape",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"color",n.vec4.create()),i(this,"noiseAmplitureEnd",n.vec4.create()),i(this,"noiseAmplitureStart",n.vec4.create()),i(this,"noiseFrequency",n.vec4.create()),i(this,"noiseFunction",0),i(this,"noiseSpeed",0)}static black(e){return[["color",e.vector4],["noiseFunction",e.float],["noiseSpeed",e.float],["noiseAmplitureStart",e.vector4],["noiseAmplitureEnd",e.vector4],["noiseFrequency",e.vector4]]}}},"./sof/shared/EveSOFDataInstancedMesh.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataInstancedMesh",function(){return s});class i{constructor(e){this.data=e}static blackStruct(e){let t=[e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32(),e.ReadF32()];return new i(t)}}class s{constructor(){n(this,"name",""),n(this,"geometryResPath",""),n(this,"instances",[]),n(this,"lowestLodVisible",0),n(this,"shader",""),n(this,"textures",[])}static black(e){return[["geometryResPath",e.path],["instances",e.structList(i)],["lowestLodVisible",e.uint],["name",e.string],["shader",e.string],["textures",e.array]]}}},"./sof/shared/EveSOFDataLogo.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataLogo",function(){return n});class n{constructor(){var e,t,r;r=[],(t="textures")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}static black(e){return[["textures",e.array]]}}},"./sof/shared/EveSOFDataLogoSet.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataLogoSet",function(){return i});class i{constructor(){n(this,"Marking_01",null),n(this,"Marking_02",null),n(this,"Primary",null),n(this,"Secondary",null),n(this,"Tertiary",null)}static black(e){return[["Marking_01",e.object],["Marking_02",e.object],["Primary",e.object],["Secondary",e.object],["Tertiary",e.object]]}}},"./sof/shared/EveSOFDataMaterial.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataMaterial",function(){return i});class i{constructor(){n(this,"name",""),n(this,"parameters",[])}Assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e.name=this.name,e.parameters=this.AssignParameters(e.parameters,t),e}AssignParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return this.parameters.forEach(r=>r.Assign(e,t)),e}static black(e){return[["name",e.string],["parameters",e.array]]}}},"./sof/shared/EveSOFDataParameter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataParameter",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"name",""),i(this,"value",n.vec4.create())}Assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return e[t?t+this.name:this.name]=Array.from(this.value),e}static black(e){return[["name",e.string],["value",e.vector4]]}}},"./sof/shared/EveSOFDataTexture.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"EveSOFDataTexture",function(){return i});class i{constructor(){n(this,"name",""),n(this,"resFilePath","")}Assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e[this.name]=this.resFilePath,e}static black(e){return[["name",e.string],["resFilePath",e.path]]}}},"./sof/shared/EveSOFDataTransform.js":function(e,t,r){"use strict";r.r(t),r.d(t,"EveSOFDataTransform",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s{constructor(){i(this,"boneIndex",-1),i(this,"position",n.vec3.create()),i(this,"rotation",n.quat.create()),i(this,"scaling",n.vec3.fromValues(1,1,1))}static black(e){return[["boneIndex",e.uint],["position",e.vector3],["rotation",e.vector4],["scaling",e.vector3]]}}},"./sof/shared/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./sof/shared/EveSOFDataArea.js");r.d(t,"EveSOFDataArea",function(){return n.EveSOFDataArea});var i=r("./sof/shared/EveSOFDataAreaMaterial.js");r.d(t,"EveSOFDataAreaMaterial",function(){return i.EveSOFDataAreaMaterial});var s=r("./sof/shared/EveSOFDataBooster.js");r.d(t,"EveSOFDataBooster",function(){return s.EveSOFDataBooster});var a=r("./sof/shared/EveSOFDataBoosterShape.js");r.d(t,"EveSOFDataBoosterShape",function(){return a.EveSOFDataBoosterShape});var o=r("./sof/shared/EveSOFDataInstancedMesh.js");r.d(t,"EveSOFDataInstancedMesh",function(){return o.EveSOFDataInstancedMesh});var u=r("./sof/shared/EveSOFDataLogo.js");r.d(t,"EveSOFDataLogo",function(){return u.EveSOFDataLogo});var c=r("./sof/shared/EveSOFDataLogoSet.js");r.d(t,"EveSOFDataLogoSet",function(){return c.EveSOFDataLogoSet});var l=r("./sof/shared/EveSOFDataMaterial.js");r.d(t,"EveSOFDataMaterial",function(){return l.EveSOFDataMaterial});var d=r("./sof/shared/EveSOFDataParameter.js");r.d(t,"EveSOFDataParameter",function(){return d.EveSOFDataParameter});var h=r("./sof/shared/EveSOFDataTexture.js");r.d(t,"EveSOFDataTexture",function(){return h.EveSOFDataTexture});var f=r("./sof/shared/EveSOFDataTransform.js");r.d(t,"EveSOFDataTransform",function(){return f.EveSOFDataTransform})},"./state/Tr2StateMachine.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachine",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"startState",0),i(this,"states",[])}static black(e){return[["name",e.string],["states",e.array],["startState",e.uint]]}}i(s,"__isStaging",4)},"./state/Tr2StateMachineState.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachineState",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"actions",[]),i(this,"finalizer",null),i(this,"transitions",[])}static black(e){return[["actions",e.array],["finalizer",e.object],["name",e.string],["transitions",e.array]]}}i(s,"__isStaging",4)},"./state/Tr2StateMachineTransition.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2StateMachineTransition",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"condition","")}static black(e){return[["condition",e.string],["name",e.string]]}}i(s,"__isStaging",4)},"./state/Tr2SyncToAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2SyncToAnimation",function(){return o});var n,i,s,a=r("./global/index.js");class o extends a.Tw2BaseClass{static black(e){return[]}}s=4,(i="__isStaging")in(n=o)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./state/action/Tr2ActionAnimateCurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionAnimateCurveSet",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"curveSet",null),i(this,"value","")}static black(e){return[["curveSet",e.object],["value",e.string]]}}i(s,"__isStaging",4)},"./state/action/Tr2ActionAnimateValue.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionAnimateValue",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"attribute",""),i(this,"curve",null),i(this,"path",""),i(this,"value","")}static black(e){return[["attribute",e.string],["curve",e.object],["path",e.string],["value",e.string]]}}i(s,"__isStaging",4)},"./state/action/Tr2ActionChildEffect.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionChildEffect",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"childName",""),i(this,"path",""),i(this,"removeOnStop",!1)}static black(e){return[["childName",e.string],["path",e.string],["removeOnStop",e.boolean]]}}i(s,"__isStaging",4)},"./state/action/Tr2ActionOverlay.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionOverlay",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"path","")}static black(e){return[["path",e.string]]}}i(s,"__isStaging",4)},"./state/action/Tr2ActionPlayCurveSet.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlayCurveSet",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"curveSetName",""),i(this,"rangeName",""),i(this,"syncToRange",!1)}static black(e){return[["curveSetName",e.string],["rangeName",e.string],["syncToRange",e.boolean]]}}i(s,"__isStaging",4)},"./state/action/Tr2ActionPlayMeshAnimation.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionPlayMeshAnimation",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"animation",""),i(this,"loops",0),i(this,"mask","")}static black(e){return[["animation",e.string],["loops",e.uint],["mask",e.string]]}}i(s,"__isStaging",4)},"./state/action/Tr2ActionPlaySound.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tr2ActionPlaySound",function(){return i});class i{constructor(){n(this,"emitter",""),n(this,"event","")}static black(e){return[["emitter",e.string],["event",e.string]]}}n(i,"__isStaging",4)},"./state/action/Tr2ActionResetClipSphereCenter.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionResetClipSphereCenter",function(){return o});var n,i,s,a=r("./global/index.js");class o extends a.Tw2BaseClass{static black(e){return[]}}s=4,(i="__isStaging")in(n=o)?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s},"./state/action/Tr2ActionSetValue.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionSetValue",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"attribute",""),i(this,"path",""),i(this,"value","")}static black(e){return[["attribute",e.string],["path",e.string],["value",e.string]]}}i(s,"__isStaging",4)},"./state/action/Tr2ActionSpawnParticles.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ActionSpawnParticles",function(){return n});class n{static black(e){return[]}}var i,s,a;a=4,(s="__isStaging")in(i=n)?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a},"./state/action/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./state/action/Tr2ActionAnimateCurveSet.js");r.d(t,"Tr2ActionAnimateCurveSet",function(){return n.Tr2ActionAnimateCurveSet});var i=r("./state/action/Tr2ActionAnimateValue.js");r.d(t,"Tr2ActionAnimateValue",function(){return i.Tr2ActionAnimateValue});var s=r("./state/action/Tr2ActionChildEffect.js");r.d(t,"Tr2ActionChildEffect",function(){return s.Tr2ActionChildEffect});var a=r("./state/action/Tr2ActionOverlay.js");r.d(t,"Tr2ActionOverlay",function(){return a.Tr2ActionOverlay});var o=r("./state/action/Tr2ActionPlayCurveSet.js");r.d(t,"Tr2ActionPlayCurveSet",function(){return o.Tr2ActionPlayCurveSet});var u=r("./state/action/Tr2ActionPlayMeshAnimation.js");r.d(t,"Tr2ActionPlayMeshAnimation",function(){return u.Tr2ActionPlayMeshAnimation});var c=r("./state/action/Tr2ActionPlaySound.js");r.d(t,"Tr2ActionPlaySound",function(){return c.Tr2ActionPlaySound});var l=r("./state/action/Tr2ActionResetClipSphereCenter.js");r.d(t,"Tr2ActionResetClipSphereCenter",function(){return l.Tr2ActionResetClipSphereCenter});var d=r("./state/action/Tr2ActionSetValue.js");r.d(t,"Tr2ActionSetValue",function(){return d.Tr2ActionSetValue});var h=r("./state/action/Tr2ActionSpawnParticles.js");r.d(t,"Tr2ActionSpawnParticles",function(){return h.Tr2ActionSpawnParticles})},"./state/controller/Tr2Controller.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2Controller",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"name",""),i(this,"isShared",!1),i(this,"stateMachines",[]),i(this,"variables",[])}static black(e){return[["isShared",e.boolean],["stateMachines",e.array],["name",e.string],["variables",e.array]]}}i(s,"__isStaging",4)},"./state/controller/Tr2ControllerFloatVariable.js":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t),r.d(t,"Tr2ControllerFloatVariable",function(){return i});class i{constructor(){n(this,"name",""),n(this,"defaultValue",0),n(this,"enumValues",{}),n(this,"variableType",0)}GetEnumsAsString(){let e=[];for(const t in this.enumValues)this.enumValues.hasOwnProperty(t)&&e.push("".concat(t,"=").concat(this.enumValues[t]));return e.sort().join(",")}static black(e){return[["name",e.string],["defaultValue",e.float],["enumValues",e.enums],["variableType",e.uint]]}}n(i,"__isStaging",4)},"./state/controller/Tr2ControllerReference.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerReference",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"path","")}static black(e){return[["path",e.string]]}}i(s,"__isStaging",4)},"./state/controller/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./state/controller/Tr2Controller.js");r.d(t,"Tr2Controller",function(){return n.Tr2Controller});var i=r("./state/controller/Tr2ControllerFloatVariable.js");r.d(t,"Tr2ControllerFloatVariable",function(){return i.Tr2ControllerFloatVariable});var s=r("./state/controller/Tr2ControllerReference.js");r.d(t,"Tr2ControllerReference",function(){return s.Tr2ControllerReference})},"./state/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./state/action/index.js");r.d(t,"Tr2ActionAnimateCurveSet",function(){return n.Tr2ActionAnimateCurveSet}),r.d(t,"Tr2ActionAnimateValue",function(){return n.Tr2ActionAnimateValue}),r.d(t,"Tr2ActionChildEffect",function(){return n.Tr2ActionChildEffect}),r.d(t,"Tr2ActionOverlay",function(){return n.Tr2ActionOverlay}),r.d(t,"Tr2ActionPlayCurveSet",function(){return n.Tr2ActionPlayCurveSet}),r.d(t,"Tr2ActionPlayMeshAnimation",function(){return n.Tr2ActionPlayMeshAnimation}),r.d(t,"Tr2ActionPlaySound",function(){return n.Tr2ActionPlaySound}),r.d(t,"Tr2ActionResetClipSphereCenter",function(){return n.Tr2ActionResetClipSphereCenter}),r.d(t,"Tr2ActionSetValue",function(){return n.Tr2ActionSetValue}),r.d(t,"Tr2ActionSpawnParticles",function(){return n.Tr2ActionSpawnParticles});var i=r("./state/controller/index.js");r.d(t,"Tr2Controller",function(){return i.Tr2Controller}),r.d(t,"Tr2ControllerFloatVariable",function(){return i.Tr2ControllerFloatVariable}),r.d(t,"Tr2ControllerReference",function(){return i.Tr2ControllerReference});r("./state/variable/index.js");var s=r("./state/Tr2StateMachine.js");r.d(t,"Tr2StateMachine",function(){return s.Tr2StateMachine});var a=r("./state/Tr2StateMachineState.js");r.d(t,"Tr2StateMachineState",function(){return a.Tr2StateMachineState});var o=r("./state/Tr2StateMachineTransition.js");r.d(t,"Tr2StateMachineTransition",function(){return o.Tr2StateMachineTransition});var u=r("./state/Tr2SyncToAnimation.js");r.d(t,"Tr2SyncToAnimation",function(){return u.Tr2SyncToAnimation})},"./state/variable/Tr2ControllerFloatVariable.js":function(e,t,r){"use strict";r.r(t),r.d(t,"Tr2ControllerFloatVariable",function(){return s});var n=r("./global/index.js");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends n.Tw2BaseClass{constructor(){super(...arguments),i(this,"defaultValue",0),i(this,"variableType",0)}}},"./state/variable/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./state/variable/Tr2ControllerFloatVariable.js");r.d(t,"Tr2ControllerFloatVariable",function(){return n.Tr2ControllerFloatVariable})}})});